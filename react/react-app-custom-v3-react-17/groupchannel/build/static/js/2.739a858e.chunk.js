(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(99)},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return _}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return h});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(11),c={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},u={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function d(e){switch(e){case c.H_1:return"sendbird-label--h-1";case c.H_2:return"sendbird-label--h-2";case c.SUBTITLE_1:return"sendbird-label--subtitle-1";case c.SUBTITLE_2:return"sendbird-label--subtitle-2";case c.BODY_1:return"sendbird-label--body-1";case c.BODY_2:return"sendbird-label--body-2";case c.BUTTON_1:return"sendbird-label--button-1";case c.BUTTON_2:return"sendbird-label--button-2";case c.CAPTION_1:return"sendbird-label--caption-1";case c.CAPTION_2:return"sendbird-label--caption-2";case c.CAPTION_3:return"sendbird-label--caption-3";default:return null}}function h(e){switch(e){case u.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case u.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case u.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case u.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case u.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case u.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case u.PRIMARY:return"sendbird-label--color-primary";case u.ERROR:return"sendbird-label--color-error";case u.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return null}}function f(e){var t=e.className,n=e.type,a=e.color,s=e.children;return i.a.createElement("span",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),["sendbird-label",n?d(n):"",a?h(a):""]).join(" ")},s)}f.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),type:o.a.oneOf([].concat(Object(r.c)(Object.keys(c)),[""])),color:o.a.oneOf([].concat(Object(r.c)(Object.keys(u)),[""])),children:o.a.oneOfType([o.a.string,o.a.number,o.a.element,o.a.any])},f.defaultProps={className:[],type:"",color:"",children:null};var p=c,_=u,m=Object(l.a)("en")},function(e,t,n){e.exports=n(129)()},function(e,t,n){"use strict";n.d(t,"a",function(){return vn}),n.d(t,"b",function(){return gn}),n.d(t,"c",function(){return mn});var r,a,i,s,o,l,c,u,d,h,f,p,_,m,g,v,y,E,b,C,O,N,S,A,I,k,T,w,R,M,L,P,D,U,x,j,F,H,G,B,V,z,q,K,Y,W,Q,J,X,$,Z,ee,te,ne,re,ae=n(4),ie=n(0),se=n.n(ie),oe=n(2),le=n.n(oe),ce={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER"};function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function de(e){return ie.createElement("svg",ue({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),r||(r=ie.createElement("path",{className:"icon-add_svg__fill",d:"M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm0 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334a2.667 2.667 0 002.666 2.666h37.334a2.667 2.667 0 002.666-2.666V13.333a2.667 2.667 0 00-2.666-2.666zm-18.667 8a2.667 2.667 0 012.649 2.355l.018.311v8h8a2.667 2.667 0 01.311 5.316l-.311.018h-8v8a2.667 2.667 0 01-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 01-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0132 18.667z",fill:"#000",fillRule:"evenodd"})))}function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fe(e){return ie.createElement("svg",he({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),a||(a=ie.createElement("path",{className:"icon-arrow-left_svg__fill",d:"M33.886 8.781a2.668 2.668 0 01.221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 01.311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 01.222 3.52l-.221.251a2.668 2.668 0 01-3.52.222l-.252-.222L8.781 33.886a2.668 2.668 0 01-.222-3.52l.222-.252L30.114 8.781a2.668 2.668 0 013.772 0z",fill:"#000",fillRule:"evenodd"})))}function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _e(e){return ie.createElement("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),i||(i=ie.createElement("path",{className:"icon-attach_svg__fill",d:"M55.334 28.926l-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 00-3.676-3.864L15.709 37.89a7.578 7.578 0 00-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 10-3.678-3.862z",fill:"#000",fillRule:"evenodd"})))}function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ge(e){return ie.createElement("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),s||(s=ie.createElement("path",{className:"icon-ban_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm12.333 21.333a1 1 0 011 1v3.334a1 1 0 01-1 1H19.667a1 1 0 01-1-1v-3.334a1 1 0 011-1h24.666z",fill:"#000",fillRule:"evenodd"})))}function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ye(e){return ie.createElement("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),o||(o=ie.createElement("path",{className:"icon-broadcast_svg__fill",d:"M58.545 5.498c.08.258.122.526.122.796v46.079a2.666 2.666 0 01-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 01-7.997-7.75l-.003-.25V24a8 8 0 018-8H16L55.205 3.749a2.665 2.665 0 013.34 1.75zM21.333 44.587V48a5.333 5.333 0 0010.652.398L32 47.92l-10.667-3.333zm32-34.667l-32 9.997v18.83l32 9.997V9.92zM16 21.333h-5.333a2.67 2.67 0 00-2.65 2.356L8 24v10.667a2.667 2.667 0 002.667 2.666H16v-16z",fill:"#000",fillRule:"evenodd"})))}function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function be(e){return ie.createElement("svg",Ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),l||(l=ie.createElement("path",{className:"icon-camera_svg__fill",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 017.986 7.53l.014.47v29.334a8 8 0 01-8 8H8a8 8 0 01-8-8V21.333a8 8 0 018-8h9.237l4.544-6.812a2.665 2.665 0 011.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 01-1.887 1.167l-.331.02H8a2.668 2.668 0 00-2.667 2.667v29.334A2.667 2.667 0 008 53.333h48a2.667 2.667 0 002.667-2.666V21.333A2.667 2.667 0 0056 18.667H45.333a2.665 2.665 0 01-2.218-1.188l-4.544-6.812zM32 21.333c7.364 0 13.333 5.97 13.333 13.334C45.333 42.03 39.363 48 32 48c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oe(e){return ie.createElement("svg",Ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),c||(c=ie.createElement("path",{className:"icon-channels_svg__fill",d:"M42.65 5.333l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 01.311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 01.312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 01-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 01-.311-5.315l.31-.018h11.835l1.515-13.627a2.668 2.668 0 012.634-2.373l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.668 2.668 0 012.634-2.373zm-5.927 32l1.186-10.667H27.272l-1.184 10.667h10.635z",fill:"#000",fillRule:"evenodd"})))}function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Se(e){return ie.createElement("svg",Ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),u||(u=ie.createElement("path",{className:"icon-chat_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8z",fill:"#000",fillRule:"evenodd"})))}function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ie(e){return ie.createElement("svg",Ae({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),d||(d=ie.createElement("path",{className:"icon-chat-filled_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667z",fill:"#000",fillRule:"evenodd"})))}function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Te(e){return ie.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),h||(h=ie.createElement("path",{className:"icon-chevron-down_svg__fill",d:"M16.121 21.879a2.998 2.998 0 00-4.242 0 2.998 2.998 0 000 4.242l18 18a2.998 2.998 0 004.242 0l18-18a2.998 2.998 0 000-4.242 2.998 2.998 0 00-4.242 0L32 37.757 16.121 21.88z",fill:"#000",fillRule:"evenodd"})))}function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Re(e){return ie.createElement("svg",we({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),f||(f=ie.createElement("path",{className:"icon-chevron-right_svg__fill",d:"M22.114 46.114a2.668 2.668 0 003.772 3.772l16-16a2.668 2.668 0 000-3.772l-16-16a2.668 2.668 0 00-3.772 3.772L36.23 32 22.114 46.114z",fill:"#000",fillRule:"evenodd"})))}function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Le(e){return ie.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),p||(p=ie.createElement("path",{className:"icon-close_svg__fill",d:"M52.552 11.448a2.666 2.666 0 01.222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 010 3.771 2.666 2.666 0 01-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 01-3.771 0 2.666 2.666 0 01-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 013.771 0z",fill:"#000",fillRule:"evenodd"})))}function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function De(e){return ie.createElement("svg",Pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),_||(_=ie.createElement("path",{className:"icon-collapse_svg__fill",d:"M16 8a2.667 2.667 0 00-2.649 2.356l-.018.31v42.667a2.667 2.667 0 005.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.668 2.668 0 00-.221 3.52l.221.251a2.666 2.666 0 003.52.222l.252-.222 10.666-10.666a2.666 2.666 0 00.222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 00-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0016 8z",fill:"#000",fillRule:"evenodd"})))}function Ue(){return(Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xe(e){return ie.createElement("svg",Ue({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),m||(m=ie.createElement("path",{className:"icon-copy_svg__fill",d:"M53.333 21.333a8 8 0 018 8v24a8 8 0 01-8 8h-24a8 8 0 01-8-8v-24a8 8 0 018-8zm0 5.334h-24a2.667 2.667 0 00-2.666 2.666v24A2.667 2.667 0 0029.333 56h24A2.667 2.667 0 0056 53.333v-24a2.667 2.667 0 00-2.667-2.666zm-18.666-24a8 8 0 017.986 7.53l.014.47v2.666a2.667 2.667 0 01-5.316.311l-.018-.31v-2.667a2.67 2.67 0 00-2.355-2.65L34.667 8h-24a2.67 2.67 0 00-2.65 2.356l-.017.31v24a2.67 2.67 0 002.356 2.65l.31.017h2.667a2.667 2.667 0 01.311 5.316l-.31.018h-2.667a8.001 8.001 0 01-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013h24z",fill:"#000",fillRule:"evenodd"})))}function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fe(e){return ie.createElement("svg",je({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),g||(g=ie.createElement("path",{className:"icon-create_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zm2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0z",fill:"#000",fillRule:"evenodd"})))}function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ge(e){return ie.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),v||(v=ie.createElement("path",{className:"icon-delete_svg__fill",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 01.311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 01-.311-5.316L8 13.333h10.666v-2.666a8.002 8.002 0 017.53-7.987l.47-.013h10.667zm10.666 16H16v34.666a2.67 2.67 0 002.356 2.65l.31.017h26.667a2.67 2.67 0 002.65-2.356l.017-.31V18.666zm-21.332 8a2.667 2.667 0 012.648 2.355l.018.311v16a2.667 2.667 0 01-5.316.311l-.017-.31v-16a2.667 2.667 0 012.667-2.667zm10.666 0a2.67 2.67 0 012.65 2.355l.017.311v16a2.667 2.667 0 01-5.315.311l-.018-.31v-16a2.667 2.667 0 012.666-2.667zm0-18.667H26.667a2.67 2.67 0 00-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 00-2.356-2.65L37.334 8z",fill:"#000",fillRule:"evenodd"})))}function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ve(e){return ie.createElement("svg",Be({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),y||(y=ie.createElement("path",{className:"icon-disconnected_svg__fill",d:"M54.534 6.069l-.248.217-9.736 9.735-.04.04-9.573 9.573c-.15.118-.286.254-.405.404L6.286 54.286a2.423 2.423 0 003.18 3.645l.248-.217 13.374-13.373a2.419 2.419 0 001.88-.401 12.119 12.119 0 0114.04 0 2.424 2.424 0 102.808-3.952 16.951 16.951 0 00-11.303-3.072l6.743-6.744a24.105 24.105 0 0110.159 5.021 2.424 2.424 0 003.11-3.719 28.945 28.945 0 00-9.34-5.23l5.633-5.634a36.153 36.153 0 019.225 5.934 2.425 2.425 0 003.211-3.633 40.972 40.972 0 00-8.796-5.941l7.256-7.256a2.423 2.423 0 00-3.18-3.645zm-35.04 21.474a28.936 28.936 0 00-6.032 3.942 2.424 2.424 0 003.137 3.697 24.018 24.018 0 015.022-3.282 2.425 2.425 0 00-2.127-4.357zM4.748 22.909a2.424 2.424 0 003.207 3.636 36.363 36.363 0 0126.978-8.977 2.424 2.424 0 00.389-4.832A41.204 41.204 0 004.748 22.909z",fill:"#000",fillRule:"evenodd"})))}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qe(e){return ie.createElement("svg",ze({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),E||(E=ie.createElement("path",{className:"icon-document_svg__fill",d:"M37.333 2.667a3.305 3.305 0 01.274.014l.085.01.058.008c.047.007.094.016.141.026l.029.007c.05.01.098.023.146.037l.034.01c.237.07.46.173.663.303l.034.022c.036.023.07.047.104.072l.057.043a2.646 2.646 0 01.261.228l-.126-.117c.05.043.097.088.143.135L55.21 19.438c.047.046.091.094.134.143l.035.04c.026.032.052.063.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048c.009.043.017.086.024.13l.006.048.007.051.004.041c.01.09.014.18.014.27v32a8 8 0 01-8 8H16a8 8 0 01-8-8V10.667a8 8 0 018-8h21.333zM34.666 8H16a2.667 2.667 0 00-2.667 2.667v42.666A2.667 2.667 0 0016 56h32a2.667 2.667 0 002.667-2.667L50.666 24H37.333a2.667 2.667 0 01-2.648-2.356l-.018-.31L34.666 8zm12.227 10.667l-6.894-6.894.001 6.894h6.893z",fill:"#000",fillRule:"evenodd"})))}function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ye(e){return ie.createElement("svg",Ke({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),b||(b=ie.createElement("path",{className:"icon-done_svg__fill",d:"M12.552 31.448a2.665 2.665 0 10-3.771 3.771l13.333 13.333a2.666 2.666 0 003.772 0L55.219 19.22a2.667 2.667 0 00-3.771-3.771L24 42.895 12.552 31.448z",fill:"#000",fillRule:"evenodd"})))}function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qe(e){return ie.createElement("svg",We({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),C||(C=ie.createElement("path",{className:"icon-done-all_svg__fill",d:"M5.886 31.448L19.219 44.78a2.667 2.667 0 01-3.771 3.771L2.114 35.22a2.667 2.667 0 013.772-3.771zm52.228-16a2.666 2.666 0 113.772 3.771L32.552 48.552a2.665 2.665 0 01-3.771 0L15.448 35.22a2.665 2.665 0 010-3.771 2.665 2.665 0 013.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 010 3.771L32.556 35.215a2.665 2.665 0 01-3.771 0 2.664 2.664 0 010-3.77L44.78 15.447a2.665 2.665 0 013.771 0z",fill:"#000",fillRule:"evenodd"})))}function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xe(e){return ie.createElement("svg",Je({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),O||(O=ie.createElement("path",{className:"icon-download_svg__fill",d:"M56 42.667a2.667 2.667 0 012.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 01-7.986-7.53l-.014-.47v-8a2.667 2.667 0 015.316-.311l.018.311v8a2.67 2.67 0 002.355 2.65l.311.017h37.334a2.667 2.667 0 002.648-2.356l.018-.31v-8A2.667 2.667 0 0156 42.667zm-36.552-8.781a2.666 2.666 0 013.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 015.316-.311l.018.311v30.894l6.114-6.113a2.668 2.668 0 013.52-.221l.251.221a2.666 2.666 0 01.222 3.52l-.222.252-10.658 10.657a2.341 2.341 0 01-.135.128l.127-.119a2.67 2.67 0 01-.195.176l-.056.045a1.74 1.74 0 01-.086.064l-.056.04-.086.056-.06.036-.081.046-.079.04a2.528 2.528 0 01-.14.065l-.09.036c-.023.01-.045.017-.067.025l-.09.03-.063.019c-.043.012-.086.024-.13.034l-.013.003a3.06 3.06 0 01-.144.028l-.064.01c-.03.005-.061.009-.092.012l-.084.008a1.727 1.727 0 01-.103.006l-.069.002h-.095c-.028 0-.055-.002-.082-.003l.139.003c-.084 0-.167-.004-.249-.011l-.061-.007a1.359 1.359 0 01-.092-.012l-.09-.015a2.242 2.242 0 01-.118-.025l-.04-.01a2.644 2.644 0 01-.34-.11l-.015-.006c-.05-.02-.097-.04-.145-.063l-.042-.02L30.71 45a1.16 1.16 0 01-.067-.039c-.03-.018-.059-.035-.087-.054l-.062-.041c-.03-.02-.06-.042-.088-.063l-.04-.03-.008-.007a2.796 2.796 0 01-.251-.223L19.448 33.886z",fill:"#000",fillRule:"evenodd"})))}function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ze(e){return ie.createElement("svg",$e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},e),N||(N=ie.createElement("path",{className:"icon-edit_svg__fill",d:"M56 56a2.667 2.667 0 01.311 5.315l-.311.018H8a2.667 2.667 0 01-.311-5.316L8 56h48zM35.448 3.448a2.665 2.665 0 013.771 0l10.667 10.666a2.668 2.668 0 010 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 01-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16l-6.894-6.893z",fill:"#000",fillRule:"evenodd"})))}function et(){return(et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tt(e){return ie.createElement("svg",et({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),S||(S=ie.createElement("path",{className:"icon-emoji-more_svg__fill",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 01-1.144 4.111 24.669 24.669 0 00-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 011.494-2.62 2.13 2.13 0 012.62 1.494 28.895 28.895 0 011.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897C3.2 16.157 16.138 3.22 32.097 3.22zm10.705 34.792a2.133 2.133 0 012.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488-5.792 0-10.856-3.865-12.73-9.488a2.134 2.134 0 011.875-2.803l.15-.005h21.41zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23.292-.382zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133zm21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133zM54.853 0a.8.8 0 01.8.8v7.786h7.76a.8.8 0 01.8.8v2.667a.8.8 0 01-.8.8h-7.76v7.758a.8.8 0 01-.8.8h-2.666a.8.8 0 01-.8-.8v-7.758h-7.785a.8.8 0 01-.8-.8V9.387a.8.8 0 01.8-.8l7.784-.001V.8a.8.8 0 01.8-.8h2.667z",fill:"#000",fillRule:"evenodd"})))}function nt(){return(nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rt(e){return ie.createElement("svg",nt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),A||(A=ie.createElement("path",{className:"icon-error_svg__fill",d:"M32 5.06a8 8 0 016.561 3.424l.287.439 22.608 37.744a8 8 0 01.022 7.962 8.005 8.005 0 01-6.356 4.014l-.535.024H9.384a8.002 8.002 0 01-6.862-4.038 8.008 8.008 0 01-.226-7.493l.27-.506L25.16 8.91A8.001 8.001 0 0132 5.06zm0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.669 2.669 0 001.909 3.973l.341.027h45.144a2.67 2.67 0 002.45-3.659l-.148-.304L34.28 11.676A2.666 2.666 0 0032 10.393zm0 32.274A2.667 2.667 0 1132 48a2.667 2.667 0 010-5.333zm0-21.334a2.667 2.667 0 012.649 2.356l.018.311v10.667a2.667 2.667 0 01-5.316.311l-.018-.311V24A2.667 2.667 0 0132 21.333z",fill:"#000",fillRule:"evenodd"})))}function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function it(e){return ie.createElement("svg",at({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),I||(I=ie.createElement("path",{className:"icon-expand_svg__fill",d:"M48 8a2.667 2.667 0 012.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 01-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.668 2.668 0 01.221 3.52l-.221.251a2.666 2.666 0 01-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 01-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 013.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0148 8z",fill:"#000",fillRule:"evenodd"})))}function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ot(e){return ie.createElement("svg",st({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),k||(k=ie.createElement("path",{className:"icon-file-audio_svg__fill",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 01-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 013.156-.047zm-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 01-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 013.156-.047z",fill:"#000",fillRule:"evenodd"})))}function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ct(e){return ie.createElement("svg",lt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),T||(T=ie.createElement("path",{className:"icon-file-document_svg__fill",d:"M39.414 6.4a2.41 2.41 0 011.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm0-8.533l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 00-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.152 2.152 0 001.985-2.155c0-1.193-.957-2.16-2.137-2.16z",fill:"#000",fillRule:"evenodd"})))}function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dt(e){return ie.createElement("svg",ut({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),w||(w=ie.createElement("path",{className:"icon-freeze_svg__fill",d:"M41.636 3.226l.251.222a2.668 2.668 0 01.222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 015.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.668 2.668 0 011.952 2.938l-.067.328a2.667 2.667 0 01-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.667 2.667 0 012.937 1.952l.067.328a2.669 2.669 0 01-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 01-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 01-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 01-3.52.222l-.251-.222a2.666 2.666 0 01-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 01-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 01-1.953-2.937l.067-.328a2.665 2.665 0 012.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 01-2.937-1.952l-.067-.328a2.668 2.668 0 011.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 015.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 013.52-.222z",fill:"#000",fillRule:"evenodd"})))}function ht(){return(ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ft(e){return ie.createElement("svg",ht({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),R||(R=ie.createElement("path",{className:"icon-gif_svg__fill",d:"M16.664 45.333c2.155 0 4.119-.318 5.89-.953 1.772-.636 3.143-1.53 4.113-2.683V31.34h-10.29v3.94h4.902v4.474c-.861.856-2.304 1.283-4.327 1.283-2.011 0-3.538-.695-4.58-2.085-1.04-1.39-1.562-3.446-1.562-6.168v-1.657c.012-2.698.497-4.73 1.455-6.097.958-1.366 2.352-2.05 4.184-2.05 1.437 0 2.565.345 3.385 1.034.82.69 1.35 1.777 1.59 3.262h5.243c-.324-2.804-1.36-4.94-3.107-6.408-1.748-1.468-4.172-2.201-7.273-2.201-2.226 0-4.169.502-5.827 1.506-1.658 1.004-2.927 2.454-3.807 4.35-.88 1.895-1.32 4.138-1.32 6.728v1.765c.024 2.52.5 4.712 1.428 6.578.928 1.865 2.245 3.288 3.95 4.269 1.707.98 3.69 1.47 5.953 1.47zm20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666h5.063z",fill:"#000",fillRule:"evenodd"})))}function pt(){return(pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _t(e){return ie.createElement("svg",pt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),M||(M=ie.createElement("path",{className:"icon-info_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm1.667 21.333a1 1 0 011 1v14a1 1 0 01-1 1h-3.334a1 1 0 01-1-1v-14a1 1 0 011-1h3.334zm-1.667-8a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",fill:"#000",fillRule:"evenodd"})))}function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gt(e){return ie.createElement("svg",mt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),L||(L=ie.createElement("path",{className:"icon-leave_svg__fill",d:"M32 5.333a2.667 2.667 0 01.311 5.316l-.311.018H10.667a2.67 2.67 0 00-2.65 2.355L8 13.333v37.334a2.667 2.667 0 002.356 2.648l.31.018H32a2.667 2.667 0 01.311 5.316l-.311.018H10.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V13.333a8 8 0 017.53-7.986l.47-.014H32zm17.634 13.893l.252.222 10.666 10.666a2.666 2.666 0 01.222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 01-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 01-.311-5.315l.311-.018h33.56l-7.446-7.448a2.668 2.668 0 01-.221-3.52l.221-.251a2.666 2.666 0 013.52-.222z",fill:"#000",fillRule:"evenodd"})))}function vt(){return(vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yt(e){return ie.createElement("svg",vt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),P||(P=ie.createElement("path",{className:"icon-members_svg__fill",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM54 37.765a13.333 13.333 0 019.986 12.297l.014.605V56a2.667 2.667 0 01-5.315.311L58.667 56v-5.331a8 8 0 00-6-7.74A2.667 2.667 0 1154 37.765zM24 5.333c7.364 0 13.333 5.97 13.333 13.334C37.333 26.03 31.363 32 24 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm19.328.43a13.333 13.333 0 010 25.834 2.667 2.667 0 11-1.323-5.167 8 8 0 000-15.5 2.667 2.667 0 111.323-5.167zM24 10.667a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bt(e){return ie.createElement("svg",Et({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),D||(D=ie.createElement("path",{className:"icon-message_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zM18.667 29.333a2.667 2.667 0 11-.001 5.333 2.667 2.667 0 01.001-5.333zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",fill:"#000",fillRule:"evenodd"})))}function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ot(e){return ie.createElement("svg",Ct({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),U||(U=ie.createElement("path",{className:"icon-moderations_svg__fill",d:"M18.667 34.667a2.667 2.667 0 01.311 5.316l-.311.017h-5.334v16a2.667 2.667 0 01-5.316.311L8 56V40H2.667a2.667 2.667 0 01-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 012.649 2.356l.018.311v24a2.667 2.667 0 01-5.316.311L29.333 56V32A2.667 2.667 0 0132 29.333zM61.333 40a2.667 2.667 0 01.311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 01-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 01-.311-5.316l.311-.017h16zm-8-34.667a2.67 2.67 0 012.65 2.356L56 8v24a2.667 2.667 0 01-5.315.311L50.667 32V8a2.667 2.667 0 012.666-2.667zm-42.666 0a2.667 2.667 0 012.648 2.356l.018.311v18.667a2.667 2.667 0 01-5.316.311L8 26.667V8a2.667 2.667 0 012.667-2.667zm21.333 0a2.667 2.667 0 012.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 01.311 5.317L40 24H24a2.667 2.667 0 01-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0132 5.333z",fill:"#000",fillRule:"evenodd"})))}function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function St(e){return ie.createElement("svg",Nt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),x||(x=ie.createElement("path",{className:"icon-more_svg__fill",d:"M32 45.333a5.333 5.333 0 110 10.666 5.333 5.333 0 010-10.666zM32 28a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 28zm0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333z",fill:"#000",fillRule:"evenodd"})))}function At(){return(At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function It(e){return ie.createElement("svg",At({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),j||(j=ie.createElement("path",{className:"icon-mute_svg__fill",d:"M55.62 19.616l.067.123A26.552 26.552 0 0158.667 32c0 4.326-1.03 8.41-2.864 12.025-1.012 2.726-1.235 4.847-.67 6.363.71 1.903 1.598 3.49 2.662 4.758 1.54 1.586 1.039 2.696-1.506 3.33-2.09.521-5.716-.027-10.879-1.646l-.488-.155-1.594-.527A26.56 26.56 0 0132 58.667a26.55 26.55 0 01-12.326-3.014l-.059-.03 4-4A21.24 21.24 0 0032 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219c.728.225 1.414.423 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.188 21.188 0 001.895-8.8 21.24 21.24 0 00-1.71-8.385l3.997-3.999zm2.266-13.502a2.668 2.668 0 01.221 3.52l-.221.252-48 48a2.668 2.668 0 01-3.993-3.52l.221-.252 5.238-5.237a26.563 26.563 0 01-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0116.877 6.02l5.237-5.239a2.668 2.668 0 013.772 0zM32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.248 21.248 0 0032 10.666z",fill:"#000",fillRule:"evenodd"})))}function kt(){return(kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tt(e){return ie.createElement("svg",kt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),F||(F=ie.createElement("path",{className:"icon-notifications_svg__fill",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zM32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.583 10.583 0 01-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16z",fill:"#000",fillRule:"evenodd"})))}function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rt(e){return ie.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),H||(H=ie.createElement("path",{className:"icon-notifications-off-filled_svg__fill",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 012.85-.117l.127.117a2.105 2.105 0 010 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 010-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zm20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31l28.54-28.538z",fill:"#000",fillRule:"evenodd"})))}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lt(e){return ie.createElement("svg",Mt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),G||(G=ie.createElement("path",{className:"icon-operator_svg__fill",d:"M29.83 6.45a2.667 2.667 0 014.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0150.666 56H13.333a2.666 2.666 0 01-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 01-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 01-3.632-.281l-.204-.251L32 12.587zM32 32a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 32z",fill:"#000",fillRule:"evenodd"})))}function Pt(){return(Pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dt(e){return ie.createElement("svg",Pt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),B||(B=ie.createElement("path",{className:"icon-photo_svg__fill",d:"M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 002.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.668 2.668 0 013.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 00-2.498-2.661l-.168-.005zm-28 5.333a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667z",fill:"#000",fillRule:"evenodd"})))}function Ut(){return(Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xt(e){return ie.createElement("svg",Ut({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),V||(V=ie.createElement("path",{className:"icon-play_svg__fill",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016L51.908 34.75z",fill:"#000",fillRule:"evenodd"})))}function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ft(e){return ie.createElement("svg",jt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),z||(z=ie.createElement("path",{className:"icon-plus_svg__fill",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0v18.666z",fill:"#000",fillRule:"evenodd"})))}function Ht(){return(Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gt(e){return ie.createElement("svg",Ht({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),q||(q=ie.createElement("path",{className:"icon-question_svg__fill",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333zM32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24zm2.213-18.63a2.667 2.667 0 11-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 00-10.364-1.777 2.667 2.667 0 01-5.032-1.77 10.668 10.668 0 0120.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21.268 21.268 0 01-2.813 1.578v.893zm-5.333 7.523a2.667 2.667 0 115.333 0v.44a2.667 2.667 0 11-5.333 0v-.44z",fill:"#000",fillRule:"evenodd"})))}function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vt(e){return ie.createElement("svg",Bt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),K||(K=ie.createElement("path",{className:"icon-refresh_svg__fill",d:"M46.14 14.43l.562.537 6.631 6.167v-7.8a2.67 2.67 0 012.356-2.65l.311-.017a2.667 2.667 0 012.649 2.355l.018.311v16a2.67 2.67 0 01-2.356 2.65L56 32H40a2.667 2.667 0 01-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 015.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",fill:"#000",fillRule:"evenodd"})))}function zt(){return(zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qt(e){return ie.createElement("svg",zt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Y||(Y=ie.createElement("path",{className:"icon-remove_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zm9.886 19.447a2.668 2.668 0 00-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 00-3.638.124l-.124.134a2.667 2.667 0 00.124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 00.124 3.638l.134.124a2.667 2.667 0 003.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 003.638-.124l.124-.134a2.667 2.667 0 00-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 00-.124-3.638z",fill:"#000",fillRule:"evenodd"})))}function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yt(e){return ie.createElement("svg",Kt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},e),W||(W=ie.createElement("path",{className:"icon-reply-filled_svg__fill",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 00.062-.164c-.07-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.331 9.331 0 00-2.406-.655 9.542 9.542 0 00-.862-.078V2.225a.225.225 0 00-.128-.203.23.23 0 00-.24.028L.084 5.692A.221.221 0 000 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.222.222 0 00.13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.39 6.39 0 012.087.96c1.018.724 1.398 1.5 1.4 1.507a.23.23 0 00.205.128z",fill:"#000",fillRule:"evenodd"})))}function Wt(){return(Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qt(e){return ie.createElement("svg",Wt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Q||(Q=ie.createElement("path",{className:"icon-search_svg__fill",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667c0-11.782 9.552-21.334 21.334-21.334S48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 01-3.772 3.772l-13.67-13.67A21.239 21.239 0 0126.667 48zm0-5.333c8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16-8.837 0-16 7.163-16 16 0 8.836 7.163 16 16 16z",fill:"#000",fillRule:"evenodd"})))}function Jt(){return(Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xt(e){return ie.createElement("svg",Jt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),J||(J=ie.createElement("path",{className:"icon-send_svg__fill",d:"M59.795 29.43L7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 001.544 1.275l32.273 5.394L11.4 37.47a1.998 1.998 0 00-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",fill:"#000",fillRule:"evenodd"})))}function $t(){return($t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Zt(e){return ie.createElement("svg",$t({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),X||(X=ie.createElement("path",{className:"icon-settings-filled_svg__fill",d:"M32 2.667A5.332 5.332 0 0137.333 8v.24A4.4 4.4 0 0040 12.267a4.4 4.4 0 004.853-.88l.16-.16a5.332 5.332 0 017.547 0 5.333 5.333 0 010 7.546l-.16.16a4.401 4.401 0 00-.88 4.854V24a4.4 4.4 0 004.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0051.733 40a4.4 4.4 0 00.88 4.853l.16.16a5.332 5.332 0 010 7.547 5.333 5.333 0 01-7.546 0l-.16-.16a4.401 4.401 0 00-4.854-.88 4.397 4.397 0 00-2.666 4.027V56a5.333 5.333 0 01-10.667 0v-.24A4.4 4.4 0 0024 51.733a4.4 4.4 0 00-4.853.88l-.16.16a5.332 5.332 0 01-7.547 0 5.333 5.333 0 010-7.546l.16-.16a4.401 4.401 0 00.88-4.854 4.397 4.397 0 00-4.027-2.666H8A5.333 5.333 0 018 26.88h.24A4.4 4.4 0 0012.267 24a4.4 4.4 0 00-.88-4.853l-.16-.16a5.332 5.332 0 010-7.547 5.333 5.333 0 017.546 0l.16.16a4.401 4.401 0 004.854.88H24a4.4 4.4 0 002.667-4.027V8A5.332 5.332 0 0132 2.667zM32 24a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function en(){return(en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tn(e){return ie.createElement("svg",en({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),$||($=ie.createElement("path",{className:"icon-spinner_svg__fill",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 105.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 100 5.677z",fill:"#000",fillRule:"evenodd"})))}function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rn(e){return ie.createElement("svg",nn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Z||(Z=ie.createElement("path",{className:"icon-supergroup_svg__fill",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 01-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 01-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011h9.778zm18.578-17.291c.266 0 .53.04.784.118 4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 01-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 01-2.648-2.356l-.018-.31a2.67 2.67 0 012.355-2.65l.311-.017h2.934zm-44 0l.31.018a2.666 2.666 0 012.356 2.648l-.018.311a2.666 2.666 0 01-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 010 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809.255-.078.52-.118.788-.118h2.953zM32 19.958c5.512 0 10 4.409 10 9.871 0 5.463-4.488 9.872-10 9.872s-10-4.41-10-9.872 4.488-9.871 10-9.871zm0 5.333c-2.588 0-4.667 2.043-4.667 4.538 0 2.496 2.08 4.538 4.667 4.538 2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538zM17.333 2.667c5.513 0 10 4.409 10 9.871 0 5.462-4.487 9.871-10 9.871-5.512 0-10-4.409-10-9.871 0-5.462 4.488-9.871 10-9.871zm29.334 0c5.512 0 10 4.409 10 9.871 0 5.462-4.488 9.871-10 9.871-5.513 0-10-4.409-10-9.871 0-5.462 4.487-9.871 10-9.871zM17.333 8c-2.587 0-4.666 2.042-4.666 4.538 0 2.496 2.079 4.538 4.666 4.538 2.588 0 4.667-2.042 4.667-4.538C22 10.042 19.921 8 17.333 8zm29.334 0C44.079 8 42 10.042 42 12.538c0 2.496 2.079 4.538 4.667 4.538 2.587 0 4.666-2.042 4.666-4.538 0-2.496-2.079-4.538-4.666-4.538z",fill:"#000",fillRule:"evenodd"})))}function an(){return(an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sn(e){return ie.createElement("svg",an({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ee||(ee=ie.createElement("path",{className:"icon-thumbnail-none_svg__fill",d:"M34.667 5.333a2.667 2.667 0 010 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 013.771 0l8.781 8.78v-4.228a2.667 2.667 0 012.498-2.661l.169-.005a2.667 2.667 0 012.667 2.666v21.334a8 8 0 01-8 8H13.33a8 8 0 01-7.998-8V13.333a8 8 0 018-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 002.661-2.498l.005-.168v-9.563L42.667 30.438zM22.667 16a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667zM56.78 3.448a2.665 2.665 0 013.771 0 2.665 2.665 0 010 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 01-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 01-3.638.125l-.133-.125a2.665 2.665 0 010-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 01-.125-3.638l.125-.133a2.665 2.665 0 013.771 0l4.78 4.78z",fill:"#000",fillRule:"evenodd"})))}function on(){return(on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ln(e){return ie.createElement("svg",on({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),te||(te=ie.createElement("g",{fill:"none",fillRule:"evenodd"},ie.createElement("rect",{className:"icon-toggleoff_svg__fill",width:80,height:40,x:4,y:4,fill:"#000",rx:20}),ie.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),ie.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"}),ie.createElement("path",{className:"icon-toggleoff_svg__fill",fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"}))))}function cn(){return(cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function un(e){return ie.createElement("svg",cn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),ne||(ne=ie.createElement("g",{fill:"none",fillRule:"evenodd"},ie.createElement("rect",{className:"icon-toggleon_svg__fill",width:80,height:40,x:4,y:4,fill:"#000",rx:20}),ie.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),ie.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"}),ie.createElement("path",{className:"icon-toggleon_svg__fill",fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"}))))}function dn(){return(dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function hn(e){return ie.createElement("svg",dn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),re||(re=ie.createElement("path",{className:"icon-user_svg__fill",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM32 5.333c7.364 0 13.333 5.97 13.333 13.334C45.333 26.03 39.363 32 32 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}var fn={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",SECONDARY:"SECONDARY",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",WHITE:"WHITE",GRAY:"GRAY",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function pn(e){switch(e){case fn.PRIMARY:return"sendbird-icon-color--primary";case fn.SECONDARY:return"sendbird-icon-color--secondary";case fn.CONTENT:return"sendbird-icon-color--content";case fn.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case fn.WHITE:return"sendbird-icon-color--white";case fn.GRAY:return"sendbird-icon-color--gray";case fn.SENT:return"sendbird-icon-color--sent";case fn.READ:return"sendbird-icon-color--read";case fn.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case fn.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case fn.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case fn.BACKGROUND_3:return"sendbird-icon-color--background-3";case fn.ERROR:return"sendbird-icon-color--error";default:return""}}function _n(e){switch(e){case ce.ADD:return"sendbird-icon-add";case ce.ARROW_LEFT:return"sendbird-icon-arrow-left";case ce.ATTACH:return"sendbird-icon-attach";case ce.BAN:return"sendbird-icon-ban";case ce.BROADCAST:return"sendbird-icon-broadcast";case ce.CAMERA:return"sendbird-icon-camera";case ce.CHANNELS:return"sendbird-icon-channels";case ce.CHAT:return"sendbird-icon-chat";case ce.CHAT_FILLED:return"sendbird-icon-chat-filled";case ce.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case ce.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case ce.CLOSE:return"sendbird-icon-close";case ce.COLLAPSE:return"sendbird-icon-collapse";case ce.COPY:return"sendbird-icon-copy";case ce.CREATE:return"sendbird-icon-create";case ce.DELETE:return"sendbird-icon-delete";case ce.DISCONNECTED:return"sendbird-icon-disconnected";case ce.DOCUMENT:return"sendbird-icon-document";case ce.DONE:return"sendbird-icon-done";case ce.DONE_ALL:return"sendbird-icon-done-all";case ce.DOWNLOAD:return"sendbird-icon-down-load";case ce.EDIT:return"sendbird-icon-edit";case ce.EMOJI_MORE:return"sendbird-icon-emoji-more";case ce.ERROR:return"sendbird-icon-error";case ce.EXPAND:return"sendbird-icon-expand";case ce.FILE_AUDIO:return"sendbird-icon-file-audio";case ce.FILE_DOCUMENT:return"sendbird-icon-file-document";case ce.FREEZE:return"sendbird-icon-freeze";case ce.GIF:return"sendbird-icon-gif";case ce.INFO:return"sendbird-icon-info";case ce.LEAVE:return"sendbird-icon-leave";case ce.MEMBERS:return"sendbird-icon-members";case ce.MESSAGE:return"sendbird-icon-message";case ce.MODERATIONS:return"sendbird-icon-moderations";case ce.MORE:return"sendbird-icon-more";case ce.MUTE:return"sendbird-icon-mute";case ce.NOTIFICATIONS:return"sendbird-icon-notifications";case ce.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case ce.OPERATOR:return"sendbird-icon-operator";case ce.PHOTO:return"sendbird-icon-photo";case ce.PLAY:return"sendbird-icon-play";case ce.PLUS:return"sendbird-iconn-plus";case ce.QUESTION:return"sendbird-icon-question";case ce.REFRESH:return"sendbird-icon-refresh";case ce.REMOVE:return"sendbird-icon-remove";case ce.REPLY:return"sendbird-icon-reply";case ce.SEARCH:return"sendbird-icon-search";case ce.SEND:return"sendbird-icon-send";case ce.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case ce.SPINNER:return"sendbird-icon-spinner";case ce.SUPERGROUP:return"sendbird-icon-supergroup";case ce.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case ce.TOGGLE_OFF:return"sendbird-icon-toggle-off";case ce.TOGGLE_ON:return"sendbird-icon-toggle-on";case ce.USER:return"sendbird-icon-user";default:return"sendbird-icon-unknown"}}function mn(e){var t=e.className,n=e.type,r=e.fillColor,a=e.width,i=e.height,s=e.onClick,o=e.children,l={width:"string"===typeof a?a:"".concat(a,"px"),minWidth:"string"===typeof a?a:"".concat(a,"px"),height:"string"===typeof i?i:"".concat(i,"px"),minHeight:"string"===typeof i?i:"".concat(i,"px")};return se.a.createElement("div",{className:[].concat(Object(ae.c)(Array.isArray(t)?t:[t]),["sendbird-icon",_n(n),pn(r)]).join(" "),role:"button",onClick:s,onKeyDown:s,tabIndex:"0",style:l},o||function(e){switch(e){case ce.ADD:return se.a.createElement(de,null);case ce.ARROW_LEFT:return se.a.createElement(fe,null);case ce.ATTACH:return se.a.createElement(_e,null);case ce.BAN:return se.a.createElement(ge,null);case ce.BROADCAST:return se.a.createElement(ye,null);case ce.CAMERA:return se.a.createElement(be,null);case ce.CHANNELS:return se.a.createElement(Oe,null);case ce.CHAT:return se.a.createElement(Se,null);case ce.CHAT_FILLED:return se.a.createElement(Ie,null);case ce.CHEVRON_DOWN:return se.a.createElement(Te,null);case ce.CHEVRON_RIGHT:return se.a.createElement(Re,null);case ce.CLOSE:return se.a.createElement(Le,null);case ce.COLLAPSE:return se.a.createElement(De,null);case ce.COPY:return se.a.createElement(xe,null);case ce.CREATE:return se.a.createElement(Fe,null);case ce.DELETE:return se.a.createElement(Ge,null);case ce.DISCONNECTED:return se.a.createElement(Ve,null);case ce.DOCUMENT:return se.a.createElement(qe,null);case ce.DONE:return se.a.createElement(Ye,null);case ce.DONE_ALL:return se.a.createElement(Qe,null);case ce.DOWNLOAD:return se.a.createElement(Xe,null);case ce.EDIT:return se.a.createElement(Ze,null);case ce.EMOJI_MORE:return se.a.createElement(tt,null);case ce.ERROR:return se.a.createElement(rt,null);case ce.EXPAND:return se.a.createElement(it,null);case ce.FILE_AUDIO:return se.a.createElement(ot,null);case ce.FILE_DOCUMENT:return se.a.createElement(ct,null);case ce.FREEZE:return se.a.createElement(dt,null);case ce.GIF:return se.a.createElement(ft,null);case ce.INFO:return se.a.createElement(_t,null);case ce.LEAVE:return se.a.createElement(gt,null);case ce.MEMBERS:return se.a.createElement(yt,null);case ce.MESSAGE:return se.a.createElement(bt,null);case ce.MODERATIONS:return se.a.createElement(Ot,null);case ce.MORE:return se.a.createElement(St,null);case ce.MUTE:return se.a.createElement(It,null);case ce.NOTIFICATIONS:return se.a.createElement(Tt,null);case ce.NOTIFICATIONS_OFF_FILLED:return se.a.createElement(Rt,null);case ce.OPERATOR:return se.a.createElement(Lt,null);case ce.PHOTO:return se.a.createElement(Dt,null);case ce.PLAY:return se.a.createElement(xt,null);case ce.PLUS:return se.a.createElement(Ft,null);case ce.QUESTION:return se.a.createElement(Gt,null);case ce.REFRESH:return se.a.createElement(Vt,null);case ce.REMOVE:return se.a.createElement(qt,null);case ce.REPLY:return se.a.createElement(Yt,null);case ce.SEARCH:return se.a.createElement(Qt,null);case ce.SEND:return se.a.createElement(Xt,null);case ce.SETTINGS_FILLED:return se.a.createElement(Zt,null);case ce.SPINNER:return se.a.createElement(tn,null);case ce.SUPERGROUP:return se.a.createElement(rn,null);case ce.THUMBNAIL_NONE:return se.a.createElement(sn,null);case ce.TOGGLE_OFF:return se.a.createElement(ln,null);case ce.TOGGLE_ON:return se.a.createElement(un,null);case ce.USER:return se.a.createElement(hn,null);default:return"icon"}}(n))}mn.propTypes={className:le.a.oneOfType([le.a.string,le.a.arrayOf(le.a.string)]),type:le.a.oneOfType([le.a.oneOf(Object.keys(ce)),le.a.string]).isRequired,fillColor:le.a.oneOf(Object.keys(fn)),width:le.a.oneOfType([le.a.string,le.a.number]),height:le.a.oneOfType([le.a.string,le.a.number]),onClick:le.a.func,children:le.a.element},mn.defaultProps={className:"",fillColor:fn.DEFAULT,width:26,height:26,onClick:function(){},children:null};var gn=ce,vn=fn},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,n)}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(l){o=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return _}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"h",function(){return l}),n.d(t,"i",function(){return h})},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function a(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}},function(e,t,n){"use strict";n.d(t,"a",function(){return E}),n.d(t,"b",function(){return b}),n.d(t,"c",function(){return V}),n.d(t,"d",function(){return z}),n.d(t,"e",function(){return q}),n.d(t,"f",function(){return j}),n.d(t,"g",function(){return F}),n.d(t,"h",function(){return M}),n.d(t,"i",function(){return m}),n.d(t,"j",function(){return G}),n.d(t,"k",function(){return _}),n.d(t,"l",function(){return h}),n.d(t,"m",function(){return g}),n.d(t,"n",function(){return D}),n.d(t,"o",function(){return W}),n.d(t,"p",function(){return x}),n.d(t,"q",function(){return N}),n.d(t,"r",function(){return Q}),n.d(t,"s",function(){return J}),n.d(t,"t",function(){return k}),n.d(t,"u",function(){return c}),n.d(t,"v",function(){return I}),n.d(t,"w",function(){return R}),n.d(t,"x",function(){return w}),n.d(t,"y",function(){return T}),n.d(t,"z",function(){return O}),n.d(t,"A",function(){return v}),n.d(t,"B",function(){return C}),n.d(t,"C",function(){return L}),n.d(t,"D",function(){return K}),n.d(t,"E",function(){return A}),n.d(t,"F",function(){return B}),n.d(t,"G",function(){return S}),n.d(t,"H",function(){return P}),n.d(t,"I",function(){return f}),n.d(t,"J",function(){return d}),n.d(t,"K",function(){return u}),n.d(t,"L",function(){return y});var r=n(5),a={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"]},i={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},s={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",GIF:"GIF",OTHERS:"OTHERS"},o={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},l={NONE:"NONE",PENDING:"PENDING",SENT:"SENT",FAILED:"FAILED",DELIVERED:"DELIVERED",READ:"READ"},c=function(e){return""===e||null===e},u=function(e){return a.IMAGE.indexOf(e)>=0},d=function(e){return a.VIDEO.indexOf(e)>=0},h=function(e){return"image/gif"===e},f=function(e){return u(e)||d(e)},p=function(e){return a.AUDIO.indexOf(e)>=0},_=function(){return Object(r.a)({},s)},m=function(e){return h(e)?s.GIF:u(e)?s.IMAGE:d(e)?s.VIDEO:p(e)?s.AUDIO:s.OTHERS},g=function(){return Object(r.a)({},l)},v=function(e,t){var n;if("pending"===t.sendingStatus)return l.PENDING;if("failed"===t.sendingStatus)return l.FAILED;if(null===(n=null===e||void 0===e?void 0:e.isGroupChannel)||void 0===n?void 0:n.call(e)){if(0===e.getUnreadMemberCount(t))return l.READ;if(0===e.getUndeliveredMemberCount(t))return l.DELIVERED}return"succeeded"===t.sendingStatus?l.SENT:l.NONE},y=function(e){return"succeeded"===e.sendingStatus},E=function(e){return"failed"===e.sendingStatus},b=function(e){return"pending"===e.sendingStatus},C=function(e){return e===l.SENT||e===l.DELIVERED||e===l.READ},O=function(e){var t;return e&&((null===(t=e.isUserMessage)||void 0===t?void 0:t.call(e))||e.messageType&&"user"===e.messageType)},N=function(e){var t;return e&&((null===(t=e.isFileMessage)||void 0===t?void 0:t.call(e))||e.messageType&&"file"===e.messageType)},S=function(e){var t;return!!(e&&O(e)&&(null===e||void 0===e?void 0:e.ogMetaData)&&(null===(t=null===e||void 0===e?void 0:e.ogMetaData)||void 0===t?void 0:t.url))},A=function(e){return O(e)&&!S(e)},I=function(e){return e&&N(e)&&f(e.type)},k=function(e){return e&&I(e)&&u(e.type)},T=function(e){return e&&I(e)&&d(e.type)},w=function(e){return e&&I(e)&&h(e.type)},R=function(e){return e&&N(e)&&p(e.type)},M=function(e){return O(e)&&(null===e||void 0===e?void 0:e.updatedAt)>0},L=function(){return Object(r.a)({},i)},P=function(e){return function(e){var t;return e&&((null===(t=e.isAdminMessage)||void 0===t?void 0:t.call(e))||e.messageType&&"admin"===e.messageType)}(e)?i.ADMIN:O(e)?S(e)?i.OG:i.TEXT:N(e)?I(e)?i.THUMBNAIL:i.FILE:i.UNKNOWN},D=function(){return Object(r.a)({},o)},U=function(e,t){return Array.isArray(t)?Object(r.b)(Object(r.b)([],e,!0),t,!0):(e.push(t),e)},x=function(e){return Array.isArray(e)?e.reduce(U,[]).join(" "):e},j=function(e,t){return t.userIds.some(function(t){return t===e})},F=function(e,t,n,r){var a="";return j(t,e)&&(a=1===e.userIds.length?r.TOOLTIP__YOU:r.TOOLTIP__AND_YOU),""+e.userIds.filter(function(e){return e!==t}).map(function(e){return n.get(e)||r.TOOLTIP__UNKNOWN_USER}).join(", ")+a},H=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,G=function(e){return H.test(e)},B=function(e,t){if(t||(t=40),null===e||void 0===e)return"";if(e.length<=t)return e;var n=t-"...".length,r=Math.ceil(n/2),a=Math.floor(n/2);return e.substr(0,r)+"..."+e.substr(e.length-a)},V=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(n){return!1}finally{document.body.removeChild(t)}}return!1},z=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.emojiCategories)||void 0===t?void 0:t.map(function(e){return e.emojis}).reduce(function(e,t){return e.concat(t)},[])},q=function(e){var t,n=new Map;return null===(t=null===e||void 0===e?void 0:e.emojiCategories)||void 0===t||t.forEach(function(e){var t;null===(t=null===e||void 0===e?void 0:e.emojis)||void 0===t||t.forEach(function(e){e&&e.key&&n.set(e.key,e)})}),n},K=function(e){return e.sender&&((null===(t=e.sender)||void 0===t?void 0:t.friendName)||(null===t||void 0===t?void 0:t.nickname)||(null===t||void 0===t?void 0:t.userId));var t},Y=function(e){return!(!e.friendDiscoveryKey&&!e.friendName)},W=function(e,t){var n,r,a;if((null===e||void 0===e?void 0:e.messageType)&&e.messageType!==t.messageType)return!1;if((null===(n=null===e||void 0===e?void 0:e.customTypes)||void 0===n?void 0:n.length)>0){var i=e.customTypes.filter(function(e){return"*"!==e});if(i.length>0&&!i.includes(t.customType))return!1}if((null===e||void 0===e?void 0:e.senderUserIds)&&(null===(r=null===e||void 0===e?void 0:e.senderUserIds)||void 0===r?void 0:r.length)>0){if(!((null===t||void 0===t?void 0:t.isUserMessage())||t.isFileMessage()))return!1;var s=t.sender||t._sender;if(!(null===(a=null===e||void 0===e?void 0:e.senderUserIds)||void 0===a?void 0:a.includes(null===s||void 0===s?void 0:s.userId)))return!1}return!((null===e||void 0===e||!e.includeParentMessageInfo)&&((null===t||void 0===t?void 0:t.parentMessageId)||(null===t||void 0===t?void 0:t.parentMessage)))},Q=function(e,t,n){var a,i,s,o,l,c,u,d;if(!(null===e||void 0===e?void 0:e.includeEmpty)&&(null===t||void 0===t?void 0:t.lastMessage)&&null===t.lastMessage)return!1;if((null===(a=null===e||void 0===e?void 0:e._searchFilter)||void 0===a?void 0:a.search_query)&&(null===(i=e._searchFilter.search_fields)||void 0===i?void 0:i.length)>0){var h=e._searchFilter,f=h.search_query,p=h.search_fields;if(f&&p&&p.length>0&&!p.some(function(e){switch(e){case"channel_name":return t.name.toLowerCase().includes(f.toLowerCase());case"member_nickname":return t.members.some(function(e){return e.nickname.toLowerCase().includes(f.toLowerCase())});default:return!0}}))return!1}if((null===(o=null===(s=null===e||void 0===e?void 0:e._userIdsFilter)||void 0===s?void 0:s.userIds)||void 0===o?void 0:o.length)>0){var _=e._userIdsFilter,m=_.includeMode,g=_.queryType,v=_.userIds,y=t.members.map(function(e){return e.userId});if(m){if(v.length>0)switch(g){case"AND":if(v.some(function(e){return!y.includes(e)}))return!1;break;case"OR":if(v.every(function(e){return!y.includes(e)}))return!1}}else{if(v.includes(n)||v.push(n),t.members.length>v.length)return!1;if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=Object(r.b)([],e,!0).sort(),a=Object(r.b)([],t,!0).sort(),i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}(v,y))return!1}}if(!1===(null===e||void 0===e?void 0:e.includeEmpty)&&null===(null===t||void 0===t?void 0:t.lastMessage))return!1;if(!1===(null===e||void 0===e?void 0:e.includeFrozen)&&!0===(null===t||void 0===t?void 0:t.isFrozen))return!1;if((null===(l=null===e||void 0===e?void 0:e.customTypesFilter)||void 0===l?void 0:l.length)>0&&!e.customTypesFilter.includes(null===t||void 0===t?void 0:t.customType))return!1;if((null===e||void 0===e?void 0:e.customTypeStartsWithFilter)&&!new RegExp("^"+e.customTypeStartsWithFilter).test(null===t||void 0===t?void 0:t.customType))return!1;if((null===e||void 0===e?void 0:e.channelNameContainsFilter)&&!(null===(c=null===t||void 0===t?void 0:t.name)||void 0===c?void 0:c.toLowerCase().includes(e.channelNameContainsFilter.toLowerCase())))return!1;if(null===e||void 0===e?void 0:e.nicknameContainsFilter){var E=e.nicknameContainsFilter.toLowerCase();if(null===(u=null===t||void 0===t?void 0:t.members)||void 0===u?void 0:u.every(function(e){return!e.nickname.toLowerCase().includes(E)}))return!1}if((null===(d=null===e||void 0===e?void 0:e.channelUrlsFilter)||void 0===d?void 0:d.length)>0&&!e.channelUrlsFilter.includes(null===t||void 0===t?void 0:t.url))return!1;if(null===e||void 0===e?void 0:e.memberStateFilter)switch(e.memberStateFilter){case"joined_only":if("joined"!==(null===t||void 0===t?void 0:t.myMemberState))return!1;break;case"invited_only":if("invited"!==(null===t||void 0===t?void 0:t.myMemberState))return!1;break;case"invited_by_friend":if("invited"!==(null===t||void 0===t?void 0:t.myMemberState)||!Y(t.inviter))return!1;break;case"invited_by_non_friend":if("invited"!==(null===t||void 0===t?void 0:t.myMemberState)||Y(t.inviter))return!1}if(null===e||void 0===e?void 0:e.hiddenChannelFilter)switch(e.hiddenChannelFilter){case"unhidden_only":if((null===t||void 0===t?void 0:t.isHidden)||"unhidden"!==(null===t||void 0===t?void 0:t.hiddenState))return!1;break;case"hidden_only":if(!(null===t||void 0===t?void 0:t.isHidden))return!1;break;case"hidden_allow_auto_unhide":if(!(null===t||void 0===t?void 0:t.isHidden)||"hidden_allow_auto_unhide"!==(null===t||void 0===t?void 0:t.hiddenState))return!1;break;case"hidden_prevent_auto_unhide":if(!(null===t||void 0===t?void 0:t.isHidden)||"hidden_prevent_auto_unhide"!==(null===t||void 0===t?void 0:t.hiddenState))return!1}if(null===e||void 0===e?void 0:e.unreadChannelFilter)switch(e.unreadChannelFilter){case"unread_message":if(0===(null===t||void 0===t?void 0:t.unreadMessageCount))return!1}if(null===e||void 0===e?void 0:e.publicChannelFilter)switch(e.publicChannelFilter){case"public":if(!(null===t||void 0===t?void 0:t.isPublic))return!1;break;case"private":if(null===t||void 0===t?void 0:t.isPublic)return!1}if(null===e||void 0===e?void 0:e.superChannelFilter)switch(e.superChannelFilter){case"super":if(!(null===t||void 0===t?void 0:t.isSuper))return!1;break;case"nonsuper":if(null===t||void 0===t?void 0:t.isSuper)return!1}return!0},J=function(e,t){var n;if(e.some(function(e){return e.url===t.url}))return e.map(function(e){return e.url===t.url?t:e});var a=function e(t,n){var r=Math.floor(t.length/2);if(t[r]===n)return r;var a=t.slice(0,r),i=t.slice(r+1,t.length);return t[r]>n?r+1+(0===i.length?0:e(i,n)):0===a.length?r:e(a,n)}(e.map(function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.lastMessage)||void 0===t?void 0:t.createdAt)||(null===e||void 0===e?void 0:e.createdAt)}),(null===(n=null===t||void 0===t?void 0:t.lastMessage)||void 0===n?void 0:n.createdAt)||(null===t||void 0===t?void 0:t.createdAt));return Object(r.b)(Object(r.b)(Object(r.b)([],e.slice(0,a),!0),[t],!1),e.slice(a,e.length),!0)}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c});var r=n(0),a=n.n(r),i=n(11),s=n(15),o=a.a.createContext({stringSet:Object(i.a)("en"),dateLocale:s.a}),l=function(e){var t=e.children;return a.a.createElement(o.Provider,{value:e},t)},c=function(){return a.a.useContext(o)}},function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return g});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(1),c=n(6),u=n(21),d=n(27),h=(n(11),n(5),function(e){Object(r.d)(n,e);var t=Object(r.e)(n);function n(e){var a;return Object(r.g)(this,n),a=t.call(this,e),Object(r.h)(Object(r.i)(a),"showParent",function(){var e=a.props.parentContainRef,t=void 0===e?{}:e,n=t.current;t&&n&&n.classList.add("sendbird-icon--pressed")}),Object(r.h)(Object(r.i)(a),"hideParent",function(){var e=a.props.parentContainRef,t=void 0===e?{}:e,n=t.current;t&&n&&n.classList.remove("sendbird-icon--pressed")}),Object(r.h)(Object(r.i)(a),"setupEvents",function(){var e=a.props.closeDropdown,t=Object(r.i)(a).menuRef,n=function(n){t.current&&!t.current.contains(n.target)&&e()};a.setState({handleClickOutside:n}),document.addEventListener("mousedown",n)}),Object(r.h)(Object(r.i)(a),"cleanUpEvents",function(){var e=a.state.handleClickOutside;document.removeEventListener("mousedown",e)}),Object(r.h)(Object(r.i)(a),"getMenuPosition",function(){var e=a.props,t=e.parentRef,n=e.openLeft,r=t.current.getBoundingClientRect(),i=r.x||r.left,s=r.y||r.top,o={top:s,left:i};if(!a.menuRef.current)return o;var l=window,c=l.innerWidth,u=l.innerHeight,d=a.menuRef.current.getBoundingClientRect();if(s+d.height>u&&(o.top-=d.height),i+d.width>c&&!n&&(o.left-=d.width),o.top<0&&(o.top=d.height<u?(u-d.height)/2:0),o.left<0&&(o.left=d.width<c?(c-d.width)/2:0),o.top+=32,n){var h=Number.isNaN(d.width-30)?108:d.width-30;o.left-=h}return a.setState({menuStyle:o})}),a.menuRef=i.a.createRef(),a.state={menuStyle:{},handleClickOutside:function(){}},a}return Object(r.f)(n,[{key:"componentDidMount",value:function(){this.setupEvents(),this.getMenuPosition(),this.showParent()}},{key:"componentWillUnmount",value:function(){this.cleanUpEvents(),this.hideParent()}},{key:"render",value:function(){var e=this.state.menuStyle,t=this.props,n=t.children,a=t.style;return Object(u.createPortal)(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),i.a.createElement("ul",{className:"sendbird-dropdown__menu",ref:this.menuRef,style:Object(r.a)({display:"inline-block",position:"fixed",left:"".concat(Math.round(e.left),"px"),top:"".concat(Math.round(e.top),"px")},a)},n)),document.getElementById("sendbird-dropdown-portal"))}}]),n}(a.Component));h.propTypes={closeDropdown:o.a.func.isRequired,children:o.a.oneOfType([o.a.element,o.a.arrayOf(o.a.element)]).isRequired,style:o.a.shape({}),parentRef:o.a.oneOfType([o.a.func,o.a.shape({current:o.a.instanceOf(Element)})]).isRequired,parentContainRef:o.a.oneOfType([o.a.func,o.a.shape({current:o.a.instanceOf(Element)})]).isRequired,openLeft:o.a.bool},h.defaultProps={style:{},openLeft:!1};var f=function(e){Object(r.d)(n,e);var t=Object(r.e)(n);function n(e){var a;return Object(r.g)(this,n),a=t.call(this,e),Object(r.h)(Object(r.i)(a),"showParent",function(){var e=a.props.parentContainRef,t=void 0===e?{}:e,n=t.current;t&&n&&n.classList.add("sendbird-reactions--pressed")}),Object(r.h)(Object(r.i)(a),"hideParent",function(){var e=a.props.parentContainRef,t=void 0===e?{}:e,n=t.current;t&&n&&n.classList.remove("sendbird-reactions--pressed")}),Object(r.h)(Object(r.i)(a),"setupEvents",function(){var e=a.props.closeDropdown,t=Object(r.i)(a).reactionRef,n=function(n){t.current&&!t.current.contains(n.target)&&e()};a.setState({handleClickOutside:n}),document.addEventListener("mousedown",n)}),Object(r.h)(Object(r.i)(a),"cleanUpEvents",function(){var e=a.state.handleClickOutside;document.removeEventListener("mousedown",e)}),Object(r.h)(Object(r.i)(a),"getBarPosition",function(){var e=a.props,t=e.parentRef,n=e.spaceFromTrigger,r=n.x||0,i=n.y||0,s=t.current.getBoundingClientRect(),o=s.x||s.left,l={top:s.y||s.top,left:o};if(!a.reactionRef.current)return l;var c=a.reactionRef.current.getBoundingClientRect();l.top<c.height?(l.top+=s.height,l.top+=i):(l.top-=c.height,l.top-=i),l.left-=c.width/2,l.left+=s.height/2-2,l.left+=r;var u=window.innerWidth-c.width;return u<l.left&&(l.left=u),l.left<0&&(l.left=0),a.setState({reactionStyle:l})}),a.reactionRef=i.a.createRef(),a.state={reactionStyle:{},handleClickOutside:function(){}},a}return Object(r.f)(n,[{key:"componentDidMount",value:function(){this.setupEvents(),this.getBarPosition(),this.showParent()}},{key:"componentWillUnmount",value:function(){this.cleanUpEvents(),this.hideParent()}},{key:"render",value:function(){var e=this.state.reactionStyle,t=this.props.children;return Object(u.createPortal)(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),i.a.createElement("ul",{className:"sendbird-dropdown__reaction-bar",ref:this.reactionRef,style:{display:"inline-block",position:"fixed",left:"".concat(Math.round(e.left),"px"),top:"".concat(Math.round(e.top),"px")}},i.a.createElement(d.a,{className:"sendbird-dropdown__reaction-bar__row",maxItemCount:8,itemWidth:44,itemHeight:40},t))),document.getElementById("sendbird-emoji-list-portal"))}}]),n}(a.Component);f.propTypes={closeDropdown:o.a.func.isRequired,children:o.a.oneOfType([o.a.element,o.a.arrayOf(o.a.element)]).isRequired,parentRef:o.a.oneOfType([o.a.func,o.a.shape({current:o.a.instanceOf(Element)})]).isRequired,parentContainRef:o.a.oneOfType([o.a.func,o.a.shape({current:o.a.instanceOf(Element)})]).isRequired,spaceFromTrigger:o.a.shape({x:o.a.number,y:o.a.number})},f.defaultProps={spaceFromTrigger:{}};var p=h,_=f,m=function(e){var t=e.className,n=e.children,r=e.onClick,a=e.disable,s=function(e){a||r(e)};return i.a.createElement("li",{className:Object(c.p)([t,"sendbird-dropdown__menu-item",a?"disable":""]),role:"menuitem",onClick:s,onKeyPress:function(e){13===e.keyCode&&s(e)},tabIndex:0},i.a.createElement(l.a,{className:"sendbird-dropdown__menu-item__text",type:l.b.SUBTITLE_2,color:a?l.c.ONBACKGROUND_4:l.c.ONBACKGROUND_1},n))};m.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),children:o.a.oneOfType([o.a.string,o.a.element]).isRequired,onClick:o.a.func.isRequired,disable:o.a.bool},m.defaultProps={className:"",disable:!1};function g(e){var t=e.menuTrigger,n=e.menuItems,s=Object(a.useState)(!1),o=Object(r.b)(s,2),l=o[0],c=o[1];return i.a.createElement("div",{className:"sendbird-context-menu",style:{display:"inline"}},t(function(){return c(!l)}),l&&n(function(){return c(!1)}))}g.propTypes={menuTrigger:o.a.func.isRequired,menuItems:o.a.func.isRequired}},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return i}),n.d(t,"g",function(){return r});var r="SEND_MESSAGE_START",a="SEND_USER_MESSAGE",i="SEND_FILE_MESSAGE",s="UPDATE_USER_MESSAGE",o="DELETE_MESSAGE",l="LEAVE_CHANNEL",c="CREATE_CHANNEL"},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n(20);n(4);function i(){return Object(r.useContext)(a.a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return{en:{OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete this channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",TRYING_TO_CONNECT:"Trying to connect\u2026",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you are being muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message(s) since",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned members",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BADGE__OVER:"+",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTEC:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__GROUP:"Group",MODAL__CREATE_CHANNEL__SUPER:"Super group",MODAL__CREATE_CHANNEL__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__SELECTED:"selected",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",MESSAGE_EDITED:"(edited)",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete"}}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en"]}},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return _});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(1),c={PRIMARY:"PRIMARY",SECONDARY:"SECONDARY",DANGER:"DANGER",DISABLED:"DISABLED"},u={BIG:"BIG",SMALL:"SMALL"};function d(e){switch(e){case c.PRIMARY:return"sendbird-button--primary";case c.SECONDARY:return"sendbird-button--secondary";case c.DANGER:return"sendbird-button--danger";case c.DISABLED:return"sendbird-button--disabled";default:return null}}function h(e){switch(e){case u.BIG:return"sendbird-button--big";case u.SMALL:return"sendbird-button--small";default:return null}}function f(e){var t=e.className,n=e.type,a=e.size,s=e.children,o=e.disabled,c=e.onClick,u=[].concat(Object(r.c)(Array.isArray(t)?t:[t]),["sendbird-button",o?"sendbird-button__disabled":"",d(n),h(a)]).join(" ");return i.a.createElement("button",{className:u,type:"button",onClick:c,disabled:o},i.a.createElement(l.a,{className:"sendbird-button__text",type:l.b.BUTTON_1,color:l.c.ONCONTENT_1},s))}var p=c,_=u;f.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),type:o.a.oneOf(Object.keys(c)),size:o.a.oneOf(Object.keys(u)),children:o.a.oneOfType([o.a.string,o.a.element,o.a.arrayOf(o.a.element)]),disabled:o.a.bool,onClick:o.a.func},f.defaultProps={className:"",type:c.PRIMARY,size:u.BIG,children:"Button",disabled:!1,onClick:function(){}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s);function l(e){var t=e.className,n=e.url,s=e.alt,o=e.width,l=e.height,c=e.fixedSize,u=e.defaultComponent,d=e.circle,h=e.placeHolder,f=e.onLoad,p=e.onError,_=Object(a.useState)(!1),m=Object(r.b)(_,2),g=m[0],v=m[1],y=Object(a.useState)(!0),E=Object(r.b)(y,2),b=E[0],C=E[1],O=Object(a.useMemo)(function(){return"function"===typeof u?u():u},[u]),N=Object(a.useMemo)(function(){return h&&"function"===typeof h?h({style:{width:"100%",minWidth:o,maxWidth:c?o:"400px",height:l,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):null},[h]),S=Object(a.useMemo)(function(){return v(!1),i.a.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:n,alt:s,onLoad:function(){C(!1),f()},onError:function(){v(!0),p()}})},[n]);return i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),["sendbird-image-renderer"]).join(" "),style:{width:"100%",minWidth:o,maxWidth:c?o:"400px",height:l}},b&&N,g?O:i.a.createElement("div",{className:"sendbird-image-renderer__image",style:{width:"100%",minWidth:o,maxWidth:c?o:"400px",height:l,position:"absolute",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(n,")"),borderRadius:d?"50%":null}}),S)}l.propTypes={className:o.a.oneOfType([o.a.arrayOf(o.a.string),o.a.string]),url:o.a.string.isRequired,alt:o.a.string,width:o.a.oneOfType([o.a.string,o.a.number]),height:o.a.oneOfType([o.a.string,o.a.number]),fixedSize:o.a.bool,defaultComponent:o.a.oneOfType([o.a.element,o.a.func]),placeHolder:o.a.func,circle:o.a.bool,onLoad:o.a.func,onError:o.a.func},l.defaultProps={className:"",defaultComponent:null,placeHolder:null,alt:"",width:null,height:null,fixedSize:!1,circle:!1,onLoad:function(){},onError:function(){}}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function a(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var i={date:a({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:a({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:a({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},s={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function o(e){return function(t,n){var r,a=n||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=a.width?String(a.width):i;r=e.formattingValues[s]||e.formattingValues[i]}else{var o=e.defaultWidth,l=a.width?String(a.width):e.defaultWidth;r=e.values[l]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function l(e){return function(t,n){var r=String(t),a=n||{},i=a.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],o=r.match(s);if(!o)return null;var l,c=o[0],u=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(u)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(u,function(e){return e.test(c)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(u,function(e){return e.test(c)}),l=e.valueCallback?e.valueCallback(l):l,{value:l=a.valueCallback?a.valueCallback(l):l,rest:r.slice(c.length)}}}var c,u={code:"en-US",formatDistance:function(e,t,n){var a;return n=n||{},a="string"===typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+a:a+" ago":a},formatLong:i,formatRelative:function(e,t,n,r){return s[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:o({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:o({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:o({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:o({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:o({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(c={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),r=t||{},a=n.match(c.matchPattern);if(!a)return null;var i=a[0],s=n.match(c.parsePattern);if(!s)return null;var o=c.valueCallback?c.valueCallback(s[0]):s[0];return{value:o=r.valueCallback?r.valueCallback(o):o,rest:n.slice(i.length)}}),era:l({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:l({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=i.a.forwardRef(function(e,t){var n=e.className,s=e.children,o=e.disabled,l=e.width,c=e.height,u=e.type,d=e.onClick,h=e.onBlur,f=e.style,p=Object(a.useState)(""),_=Object(r.b)(p,2),m=_[0],g=_[1];return i.a.createElement("button",{className:[].concat(Object(r.c)(Array.isArray(n)?n:[n]),["sendbird-iconbutton",m]).join(" "),disabled:o,ref:t,type:u,style:Object(r.a)(Object(r.a)({},f),{},{height:c,width:l}),onClick:function(e){o||(g("sendbird-iconbutton--pressed"),d(e))},onBlur:function(e){g(""),h(e)}},i.a.createElement("span",{className:"sendbird-iconbutton__inner"},s))});l.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),children:o.a.oneOfType([o.a.element,o.a.arrayOf(o.a.element),o.a.any]).isRequired,disabled:o.a.bool,width:o.a.string,height:o.a.string,type:o.a.string,onClick:o.a.func,onBlur:o.a.func,style:o.a.shape({})},l.defaultProps={className:"",disabled:!1,width:"56px",height:"56px",type:"button",onClick:function(){},onBlur:function(){},style:{}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return W}),n.d(t,"c",function(){return F}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return i});var r=n(15);function a(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function i(e){a(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function o(e,t){return a(2,arguments),function(e,t){a(2,arguments);var n=i(e).getTime(),r=s(t);return new Date(n+r)}(e,-s(t))}function l(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var c=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return l("yy"===t?r%100:r,t.length)},u=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):l(n+1,2)},d=function(e,t){return l(e.getUTCDate(),t.length)},h=function(e,t){return l(e.getUTCHours()%12||12,t.length)},f=function(e,t){return l(e.getUTCHours(),t.length)},p=function(e,t){return l(e.getUTCMinutes(),t.length)},_=function(e,t){return l(e.getUTCSeconds(),t.length)},m=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return l(Math.floor(r*Math.pow(10,n-3)),t.length)},g=864e5;function v(e){a(1,arguments);var t=i(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function y(e){a(1,arguments);var t=i(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=v(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var l=v(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}var E=6048e5;function b(e){a(1,arguments);var t=i(e),n=v(t).getTime()-function(e){a(1,arguments);var t=y(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),v(n)}(t).getTime();return Math.round(n/E)+1}function C(e,t){a(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,l=null==o?0:s(o),c=null==n.weekStartsOn?l:s(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=i(e),d=u.getUTCDay(),h=(d<c?7:0)+d-c;return u.setUTCDate(u.getUTCDate()-h),u.setUTCHours(0,0,0,0),u}function O(e,t){a(1,arguments);var n=i(e,t),r=n.getUTCFullYear(),o=t||{},l=o.locale,c=l&&l.options&&l.options.firstWeekContainsDate,u=null==c?1:s(c),d=null==o.firstWeekContainsDate?u:s(o.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setUTCFullYear(r+1,0,d),h.setUTCHours(0,0,0,0);var f=C(h,t),p=new Date(0);p.setUTCFullYear(r,0,d),p.setUTCHours(0,0,0,0);var _=C(p,t);return n.getTime()>=f.getTime()?r+1:n.getTime()>=_.getTime()?r:r-1}var N=6048e5;function S(e,t){a(1,arguments);var n=i(e),r=C(n,t).getTime()-function(e,t){a(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:s(i),l=null==n.firstWeekContainsDate?o:s(n.firstWeekContainsDate),c=O(e,t),u=new Date(0);return u.setUTCFullYear(c,0,l),u.setUTCHours(0,0,0,0),C(u,t)}(n,t).getTime();return Math.round(r/N)+1}var A="midnight",I="noon",k="morning",T="afternoon",w="evening",R="night";function M(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(0===i)return n+String(a);var s=t||"";return n+String(a)+s+l(i,2)}function L(e,t){return e%60===0?(e>0?"-":"+")+l(Math.abs(e)/60,2):P(e,t)}function P(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+l(Math.floor(a/60),2)+n+l(a%60,2)}var D={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return c(e,t)},Y:function(e,t,n,r){var a=O(e,r),i=a>0?a:1-a;return"YY"===t?l(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):l(i,t.length)},R:function(e,t){return l(y(e),t.length)},u:function(e,t){return l(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return l(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return l(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return u(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return l(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=S(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):l(a,t.length)},I:function(e,t,n){var r=b(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):l(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):d(e,t)},D:function(e,t,n){var r=function(e){a(1,arguments);var t=i(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/g)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):l(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return l(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return l(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return l(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?I:0===a?A:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?w:a>=12?T:a>=4?k:R,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):f(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):l(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):l(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):p(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):_(e,t)},S:function(e,t){return m(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return L(a);case"XXXX":case"XX":return P(a);case"XXXXX":case"XXX":default:return P(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return L(a);case"xxxx":case"xx":return P(a);case"xxxxx":case"xxx":default:return P(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+M(a,":");case"OOOO":default:return"GMT"+P(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+M(a,":");case"zzzz":default:return"GMT"+P(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e;return l(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,r){return l((r._originalDate||e).getTime(),t.length)}};function U(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function x(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var j={p:x,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),a=r[1],i=r[2];if(!i)return U(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",U(a,t)).replace("{{time}}",x(i,t))}};function F(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var H=["D","DD"],G=["YY","YYYY"];function B(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var V=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,z=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,q=/^'([^]*?)'?$/,K=/''/g,Y=/[a-zA-Z]/;function W(e,t,n){a(2,arguments);var l=String(t),c=n||{},u=c.locale||r.a,d=u.options&&u.options.firstWeekContainsDate,h=null==d?1:s(d),f=null==c.firstWeekContainsDate?h:s(c.firstWeekContainsDate);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=u.options&&u.options.weekStartsOn,_=null==p?0:s(p),m=null==c.weekStartsOn?_:s(c.weekStartsOn);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");var g=i(e);if(!function(e){a(1,arguments);var t=i(e);return!isNaN(t)}(g))throw new RangeError("Invalid time value");var v=o(g,F(g)),y={firstWeekContainsDate:f,weekStartsOn:m,locale:u,_originalDate:g};return l.match(z).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,j[t])(e,u.formatLong,y):e}).join("").match(V).map(function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return n.match(q)[1].replace(K,"'");var a,i=D[r];if(i)return c.useAdditionalWeekYearTokens||(a=n,-1===G.indexOf(a))||B(n,t,e),!c.useAdditionalDayOfYearTokens&&function(e){return-1!==H.indexOf(e)}(n)&&B(n,t,e),i(v,n,u.localize,y);if(r.match(Y))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n}).join("")}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(5),a=n(0),i=n.n(a),s=n(14),o=n(3),l=n(13),c=(n(4),function(e){if("number"===typeof e)return e;if("string"===typeof e){var t=Number.parseFloat(e);if(!Number.isNaN(t))return t}return null}),u=function(e){var t=e.width,n=e.height,r=c(t),a=c(n);return"number"===typeof r&&(r*=.575),"number"===typeof a&&(a*=.575),i.a.createElement("div",{className:"sendbird-avatar-img--default",style:{width:t,height:n}},i.a.createElement(o.c,{type:o.b.USER,fillColor:o.a.CONTENT,width:r,height:a}))},d=function(e){var t=e.src,n=void 0===t?"":t,r=e.alt,a=void 0===r?"":r,o=e.height,c=e.width,d=e.customDefaultComponent,h=function(){return d?d({width:c,height:o}):function(e){var t=e.width,n=e.height;return i.a.createElement(u,{width:t,height:n})}({width:c,height:o})};return"string"===typeof n?i.a.createElement(s.a,{className:"sendbird-avatar-img",url:n,height:o,width:c,alt:a,defaultComponent:h}):n&&n.length?1===n.length?i.a.createElement(s.a,{className:"sendbird-avatar-img",url:n[0],height:o,width:c,alt:a,defaultComponent:h}):2===n.length?i.a.createElement("div",{className:"sendbird-avatar--inner__two-child"},i.a.createElement(s.a,{className:"sendbird-avatar-img",url:n[0],height:o,width:c,alt:a,defaultComponent:h}),i.a.createElement(s.a,{className:"sendbird-avatar-img",url:n[1],height:o,width:c,alt:a,defaultComponent:h})):3===n.length?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},i.a.createElement(s.a,{className:"sendbird-avatar-img",url:n[0],height:o,width:c,alt:a,defaultComponent:h})),i.a.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},i.a.createElement(s.a,{className:"sendbird-avatar-img",url:n[1],height:o,width:c,alt:a,defaultComponent:h}),i.a.createElement(s.a,{className:"sendbird-avatar-img",url:n[2],height:o,width:c,alt:a,defaultComponent:h}))):i.a.createElement("div",{className:"sendbird-avatar--inner__four-child"},n.slice(0,4).map(function(e){return i.a.createElement(s.a,{className:"sendbird-avatar-img",url:e,height:o,width:c,alt:a,key:Object(l.a)(),defaultComponent:h})})):i.a.createElement(s.a,{className:"sendbird-avatar-img",url:"",height:o,width:c,alt:a,defaultComponent:h})};function h(e,t){var n=e.className,a=void 0===n?"":n,s=e.src,o=void 0===s?"":s,l=e.alt,c=void 0===l?"":l,u=e.width,h=void 0===u?"56px":u,f=e.height,p=void 0===f?"56px":f,_=e.onClick,m=e.customDefaultComponent;return i.a.createElement("div",{className:Object(r.b)(Object(r.b)([],Array.isArray(a)?a:[a],!0),["sendbird-avatar"],!1).join(" "),role:"button",ref:t,style:{height:p,width:h},onClick:_,onKeyDown:_,tabIndex:0},i.a.createElement(d,{src:o,width:h,height:p,alt:c,customDefaultComponent:m}))}var f=i.a.forwardRef(h)},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return o});var r=n(0),a=n.n(r),i=n(2),s=n.n(i),o=a.a.createContext({disableUserProfile:!0,isOpenChannel:!1,renderUserProfile:null}),l=function(e){var t=e.children;return a.a.createElement(o.Provider,{value:e},t)};l.propTypes={children:s.a.oneOfType([s.a.element,s.a.arrayOf(s.a.element),s.a.any]).isRequired,isOpenChannel:s.a.bool,disableUserProfile:s.a.bool,renderUserProfile:s.a.func},l.defaultProps={isOpenChannel:!1,disableUserProfile:!1,renderUserProfile:null}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});var r=n(4),a=n(0),i=n.n(a),s=i.a.createContext(),o=function(e,t){var n=function(n){return i.a.createElement(s.Consumer,null,function(a){t&&"function"!==typeof t&&console.warn("Second parameter to withSendbirdContext must be a pure function");var s=t&&"function"===typeof t?Object(r.a)(Object(r.a)({},t(a)),n):Object(r.a)(Object(r.a)({},a),n);return i.a.createElement(e,s)})},a=e.displayName||e.name||"Component";return n.displayName="SendbirdAware".concat(a),n}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(100)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=function(e){return null===e||void 0===e};function a(e,t){return!r(e)&&!r(t)&&e.toString()===t.toString()}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){}},function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return h});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(3),c=n(34),u=n(7),d=n(1);var h={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"},f=h;function p(e){var t=e.className,n=e.type,s=e.retryToConnect,o=e.searchInString,h=Object(a.useContext)(u.b).stringSet;return i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),["sendbird-place-holder"]).join(" ")},n===f.LOADING&&i.a.createElement(c.a,{width:"48px",height:"48px"},i.a.createElement(l.c,{type:l.b.SPINNER,fillColor:l.a.PRIMARY,width:"48px",height:"48px"})),(n===f.NO_CHANNELS||n===f.NO_MESSAGES||n===f.WRONG)&&i.a.createElement("div",{className:"sendbird-place-holder__body"},n===f.NO_CHANNELS&&i.a.createElement(l.c,{className:"sendbird-place-holder__body__icon",type:l.b.CHAT,fillColor:l.a.ON_BACKGROUND_3,width:"64px",height:"64px"}),n===f.WRONG&&i.a.createElement(l.c,{className:"sendbird-place-holder__body__icon",type:l.b.ERROR,fillColor:l.a.ON_BACKGROUND_3,width:"64px",height:"64px"}),n===f.NO_MESSAGES&&i.a.createElement(l.c,{className:"sendbird-place-holder__body__icon",type:l.b.MESSAGE,fillColor:l.a.ON_BACKGROUND_3,width:"64px",height:"64px"}),i.a.createElement(d.a,{className:"sendbird-place-holder__body__text",type:d.b.BODY_1,color:d.c.ONBACKGROUND_2},n===f.NO_CHANNELS&&h.PLACE_HOLDER__NO_CHANNEL,n===f.WRONG&&h.PLACE_HOLDER__WRONG,n===f.NO_MESSAGES&&h.PLACE_HOLDER__NO_MESSAGES),s&&i.a.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:s,onKeyPress:s,tabIndex:0},i.a.createElement(l.c,{className:"sendbird-place-holder__body__reconnect__icon",type:l.b.REFRESH,fillColor:l.a.PRIMARY,width:"20px",height:"20px"}),i.a.createElement(d.a,{className:"sendbird-place-holder__body__reconnect__text",type:d.b.BUTTON_1,color:d.c.PRIMARY},h.PLACE_HOLDER__RETRY_TO_CONNECT))),(n===f.NO_RESULTS||n===f.SEARCH_IN||n===f.SEARCHING)&&i.a.createElement("div",{className:"sendbird-place-holder__body--align-top"},n===f.SEARCH_IN&&i.a.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},i.a.createElement(d.a,{className:"sendbird-place-holder__body--align-top__text__search-in",type:d.b.BUTTON_2,color:d.c.ONBACKGROUND_2},h.SEARCH_IN),i.a.createElement(d.a,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:d.b.BUTTON_2,color:d.c.PRIMARY},"'".concat(o)),i.a.createElement(d.a,{className:"sendbird-place-holder__body--align-top__text__quote",type:d.b.BUTTON_2,color:d.c.PRIMARY},"'")),n===f.SEARCHING&&i.a.createElement(d.a,{className:"sendbird-place-hlder__body--align-top__searching",type:d.b.BODY_1,color:d.c.ONBACKGROUND_2},h.SEARCHING),n===f.NO_RESULTS&&i.a.createElement(d.a,{className:"sendbird-place-hlder__body--align-top__no-result",type:d.b.BODY_1,color:d.c.ONBACKGROUND_2},h.NO_SEARCHED_MESSAGE)))}p.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),type:o.a.oneOfType([o.a.oneOf(Object.keys(f)),o.a.string]).isRequired,retryToConnect:o.a.func,searchInString:o.a.string},p.defaultProps={className:"",retryToConnect:null,searchInString:""}},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),a=n.n(r),i=n(2),s=n.n(i),o=n(21),l=n(7),c=n(29),u=n(16),d=n(3),h=n(12),f=n(1),p=n(23),_=(n(11),n(15),n(4),function(e){var t=e.titleText;return a.a.createElement("div",{className:"sendbird-modal__header"},a.a.createElement(f.a,{type:f.b.H_1,color:f.c.ONBACKGROUND_1},t))});_.propTypes={titleText:s.a.string.isRequired};var m=function(e){var t=e.children;return a.a.createElement("div",{className:"sendbird-modal__body"},t)};m.propTypes={children:s.a.oneOfType([s.a.element.isRequired,s.a.arrayOf(s.a.element.isRequired)])},m.defaultProps={children:null};var g=function(e){var t=e.onSubmit,n=e.onCancel,i=e.disabled,s=void 0!==i&&i,o=e.submitText,c=e.type,u=Object(r.useContext)(l.b).stringSet;return a.a.createElement("div",{className:"sendbird-modal__footer"},a.a.createElement(h.a,{type:h.c.SECONDARY,onClick:n},a.a.createElement(f.a,{type:f.b.BUTTON_1,color:f.c.ONBACKGROUND_1},u.BUTTON__CANCEL)),a.a.createElement(h.a,{type:c,disabled:s,onClick:t},o))};function v(e){var t=e.children,n=e.onCancel,r=e.onSubmit,i=void 0===r?p.a:r,s=e.disabled,l=e.submitText,h=e.titleText,f=e.hideFooter,v=e.type;return Object(o.createPortal)(a.a.createElement("div",{className:"sendbird-modal"},a.a.createElement("div",{className:"sendbird-modal__content"},a.a.createElement(_,{titleText:h}),a.a.createElement(m,null,t),!f&&a.a.createElement(g,{disabled:s,onCancel:n,onSubmit:i,submitText:l,type:v}),a.a.createElement("div",{className:"sendbird-modal__close"},a.a.createElement(u.a,{width:"32px",height:"32px",onClick:n},a.a.createElement(d.c,{type:d.b.CLOSE,fillColor:d.a.DEFAULT,width:"24px",height:"24px"})))),a.a.createElement("div",{className:"sendbird-modal__backdrop"})),document.getElementById(c.a))}g.propTypes={onCancel:s.a.func.isRequired,onSubmit:s.a.func.isRequired,submitText:s.a.string.isRequired,disabled:s.a.bool,type:s.a.string},g.defaultProps={disabled:!1,type:h.c.DANGER},v.propTypes={children:s.a.oneOfType([s.a.element,s.a.arrayOf(s.a.element)]),onCancel:s.a.func.isRequired,onSubmit:s.a.func,hideFooter:s.a.bool,disabled:s.a.bool,type:s.a.string},v.defaultProps={children:null,hideFooter:!1,disabled:!1,type:h.c.DANGER}},function(e,t,n){"use strict";n.d(t,"a",function(){return L}),n.d(t,"b",function(){return P}),n.d(t,"c",function(){return D}),n.d(t,"d",function(){return I}),n.d(t,"e",function(){return T}),n.d(t,"f",function(){return w}),n.d(t,"g",function(){return R});var r=n(28),a=n(45),i=n(0),s=Object(i.createContext)(null);var o=Object(i.createContext)(null);var l=Object(i.createContext)({outlet:null,matches:[]});function c(e,t){if(!e)throw new Error(t)}function u(e,t,n){void 0===n&&(n="/");var r=C(("string"===typeof t?Object(a.f)(t):t).pathname||"/",n);if(null==r)return null;var i=function e(t,n,r,a){void 0===n&&(n=[]);void 0===r&&(r=[]);void 0===a&&(a="");t.forEach(function(t,i){var s={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};s.relativePath.startsWith("/")&&(s.relativePath.startsWith(a)||c(!1),s.relativePath=s.relativePath.slice(a.length));var o=O([a,s.relativePath]),l=r.concat(s);t.children&&t.children.length>0&&(!0===t.index&&c(!1),e(t.children,n,l,o)),(null!=t.path||t.index)&&n.push({path:o,score:v(o,t.index),routesMeta:l})});return n}(e);!function(e){e.sort(function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(function(e,n){return e===t[n]})?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(function(e){return e.childrenIndex}),t.routesMeta.map(function(e){return e.childrenIndex}))})}(i);for(var s=null,o=0;null==s&&o<i.length;++o)s=y(i[o],r);return s}var d=/^:\w+$/,h=3,f=2,p=1,_=10,m=-2,g=function(e){return"*"===e};function v(e,t){var n=e.split("/"),r=n.length;return n.some(g)&&(r+=m),t&&(r+=f),n.filter(function(e){return!g(e)}).reduce(function(e,t){return e+(d.test(t)?h:""===t?p:_)},r)}function y(e,t){for(var n=e.routesMeta,r={},a="/",i=[],s=0;s<n.length;++s){var o=n[s],l=s===n.length-1,c="/"===a?t:t.slice(a.length)||"/",u=E({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);var d=o.route;i.push({params:r,pathname:O([a,u.pathname]),pathnameBase:N(O([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=O([a,u.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,function(e,t){return r.push(t),"([^\\/]+)"});e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),a=Object(r.a)(n,2),i=a[0],s=a[1],o=t.match(i);if(!o)return null;var l=o[0],c=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:s.reduce(function(e,t,n){if("*"===t){var r=u[n]||"";c=l.slice(0,l.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(u[n]||""),e},{}),pathname:l,pathnameBase:c,pattern:e}}function b(e,t,n){var r,i="string"===typeof e?Object(a.f)(e):e,s=""===e||""===i.pathname?"/":i.pathname;if(null==s)r=n;else{var o=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),o-=1;i.pathname=l.join("/")}r=o>=0?t[o]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Object(a.f)(e):e,r=n.pathname,i=n.search,s=void 0===i?"":i,o=n.hash,l=void 0===o?"":o;return{pathname:r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(r,t):t,search:S(s),hash:A(l)}}(i,r);return s&&"/"!==s&&s.endsWith("/")&&!c.pathname.endsWith("/")&&(c.pathname+="/"),c}function C(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var O=function(e){return e.join("/").replace(/\/\/+/g,"/")},N=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},S=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},A=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function I(e){k()||c(!1);var t=Object(i.useContext)(s),n=t.basename,r=t.navigator,o=R(e),l=o.hash,u=o.pathname,d=o.search,h=u;if("/"!==n){var f=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?Object(a.f)(e).pathname:e.pathname}(e),p=null!=f&&f.endsWith("/");h="/"===u?n+(p?"/":""):O([n,u])}return r.createHref({pathname:h,search:d,hash:l})}function k(){return null!=Object(i.useContext)(o)}function T(){return k()||c(!1),Object(i.useContext)(o).location}function w(){k()||c(!1);var e=Object(i.useContext)(s),t=e.basename,n=e.navigator,r=Object(i.useContext)(l).matches,a=T().pathname,o=JSON.stringify(r.map(function(e){return e.pathnameBase})),u=Object(i.useRef)(!1);return Object(i.useEffect)(function(){u.current=!0}),Object(i.useCallback)(function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=b(e,JSON.parse(o),a);"/"!==t&&(i.pathname=O([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)},[t,n,o,a])}function R(e){var t=Object(i.useContext)(l).matches,n=T().pathname,r=JSON.stringify(t.map(function(e){return e.pathnameBase}));return Object(i.useMemo)(function(){return b(e,JSON.parse(r),n)},[e,r,n])}function M(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight(function(n,r,a){return Object(i.createElement)(l.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})},null)}function L(e){c(!1)}function P(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,l=void 0===r?null:r,u=e.location,d=e.navigationType,h=void 0===d?a.a.Pop:d,f=e.navigator,p=e.static,_=void 0!==p&&p;k()&&c(!1);var m=N(n),g=Object(i.useMemo)(function(){return{basename:m,navigator:f,static:_}},[m,f,_]);"string"===typeof u&&(u=Object(a.f)(u));var v=u,y=v.pathname,E=void 0===y?"/":y,b=v.search,O=void 0===b?"":b,S=v.hash,A=void 0===S?"":S,I=v.state,T=void 0===I?null:I,w=v.key,R=void 0===w?"default":w,M=Object(i.useMemo)(function(){var e=C(E,m);return null==e?null:{pathname:e,search:O,hash:A,state:T,key:R}},[m,E,O,A,T,R]);return null==M?null:Object(i.createElement)(s.Provider,{value:g},Object(i.createElement)(o.Provider,{children:l,value:{location:M,navigationType:h}}))}function D(e){var t=e.children,n=e.location;return function(e,t){k()||c(!1);var n,r=Object(i.useContext)(l).matches,s=r[r.length-1],o=s?s.params:{},d=(s&&s.pathname,s?s.pathnameBase:"/"),h=(s&&s.route,T());if(t){var f,p="string"===typeof t?Object(a.f)(t):t;"/"===d||null!=(f=p.pathname)&&f.startsWith(d)||c(!1),n=p}else n=h;var _=n.pathname||"/",m=u(e,{pathname:"/"===d?_:_.slice(d.length)||"/"});return M(m&&m.map(function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:O([d,e.pathname]),pathnameBase:"/"===e.pathnameBase?d:O([d,e.pathnameBase])})}),r)}(function e(t){var n=[];i.Children.forEach(t,function(t){if(Object(i.isValidElement)(t))if(t.type!==i.Fragment){t.type!==L&&c(!1);var r={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(r.children=e(t.props.children)),n.push(r)}else n.push.apply(n,e(t.props.children))});return n}(t),n)}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l="sendbird-sort-by-row";function c(e){var t=e.className,n=e.maxItemCount,a=e.itemWidth,s=e.itemHeight,o=e.children;if(o.length>n){for(var c=[],u=0;u<o.length;u+=n)c.push(i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),[l]).join(" "),key:t+u,style:{width:a*n,height:s}},o.slice(u,u+n)));return c}return i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),[l]).join(" "),style:{width:a*o.length,height:s}},o)}c.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),maxItemCount:o.a.number.isRequired,itemWidth:o.a.number.isRequired,itemHeight:o.a.number.isRequired,children:o.a.oneOfType([o.a.element,o.a.arrayOf(o.a.element),o.a.string,o.a.arrayOf(o.a.string)]).isRequired},c.defaultProps={className:""}},function(e,t,n){"use strict";var r=n(71);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){a=!0,i=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(0);var r="sendbird-modal-root"},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),a=n.n(r),i=n(7),s=n(20),o=n(31),l=n(18),c=n(1),u=n(12);n(11),n(15),n(4),n(9),n(5),n(14),n(3),n(13);var d=Object(s.b)(function(e){var t=e.user,n=e.currentUserId,s=e.sdk,o=e.logger,d=e.disableMessaging,h=void 0!==d&&d,f=e.createChannel,p=e.onSuccess,_=Object(r.useContext)(i.b).stringSet;return a.a.createElement("div",{className:"sendbird__user-profile"},a.a.createElement("section",{className:"sendbird__user-profile-avatar"},a.a.createElement(l.a,{height:"80px",width:"80px",src:t.profileUrl})),a.a.createElement("section",{className:"sendbird__user-profile-name"},a.a.createElement(c.a,{type:c.b.H_2,color:c.c.ONBACKGROUND_1},t.nickname||_.NO_NAME)),t.userId!==n&&!h&&a.a.createElement("section",{className:"sendbird__user-profile-message"},a.a.createElement(u.a,{type:u.c.SECONDARY,onClick:function(){var e=new s.GroupChannelParams;e.isDistinct=!0,e.addUserIds([t.userId]),p(),f(e).then(function(e){o.info("UserProfile, channel create",e)})}},_.USER_PROFILE__MESSAGE)),a.a.createElement("div",{className:"sendbird__user-profile-separator"}),a.a.createElement("section",{className:"sendbird__user-profile-userId"},a.a.createElement(c.a,{className:"sendbird__user-profile-userId--label",type:c.b.CAPTION_2,color:c.c.ONBACKGROUND_2},_.USER_PROFILE__USER_ID),a.a.createElement(c.a,{className:"sendbird__user-profile-userId--value",type:c.b.BODY_1,color:c.c.ONBACKGROUND_1},t.userId)))},function(e){return{sdk:Object(o.c)(e),createChannel:Object(o.b)(e),logger:e.config.logger,pubsub:e.config.pubSub}})},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return a});var r=n(9),a=function(e){var t=e.stores,n=(void 0===t?{}:t).sdkStore;return(void 0===n?{}:n).sdk},i=function(e){var t=e.config;return(void 0===t?{}:t).pubSub},s=function(e){return function(t){var n=a(e),s=i(e);return new Promise(function(e,a){n||a(new Error("Sdk not found")),n.GroupChannel.createChannel(t).then(function(t){e(t),s.publish(r.a,{channel:t})}).catch(a)})}},o={getSdk:a,getConnect:function(e){return function(t,n){return new Promise(function(r,i){var s=a(e);s||i(new Error("Sdk not found")),n?s.connect(t,n).then(function(e){return r(e)}).catch(function(e){return i(e)}):s.connect(t).then(function(e){return r(e)}).catch(function(e){return i(e)})})}},getDisconnect:function(e){return function(){return new Promise(function(t,n){var r=a(e);r||n(new Error("Sdk not found")),r.disconnect().then(function(e){return t(e)}).catch(function(e){return n(e)})})}},getUpdateUserInfo:function(e){return function(t,n){return new Promise(function(r,i){var s=a(e);s||i(new Error("Sdk not found")),s.updateCurrentUserInfo(t,n).then(function(e){return r(e)}).catch(function(e){return i(e)})})}},getSendUserMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.GroupChannel.getChannel(t).then(function(t){e(function(){var e=null,a=new Promise(function(a,i){e=t.sendUserMessage(n,function(e,n){var l=e,c=n;s.getErrorFirstCallback()&&(l=n,c=e),c?i(c):(a(l),o.publish(r.d,{message:l,channel:t}))}),o.publish(r.g,{message:e,channel:t})});return a.get=function(){return e},a}())}).catch(a)})}},getSendFileMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.GroupChannel.getChannel(t).then(function(t){e(function(){var e=null,a=new Promise(function(a,i){e=t.sendFileMessage(n,function(e,n){var l=e,c=n;s.getErrorFirstCallback()&&(l=n,c=e),c?i(c):(a(l),o.publish(r.f,{message:l,channel:t}))})});return n.file&&(e.localUrl=URL.createObjectURL(n.file)),n.fileUrl&&(e.localUrl=n.fileUrl),e.requestState="pending",o.publish(r.g,{message:e,channel:t}),a.get=function(){return e},a}())}).catch(a)})}},getUpdateUserMessage:function(e){return function(t,n,s){var o=a(e),l=i(e);return new Promise(function(e,a){o||a(new Error("Sdk not found")),o.GroupChannel.getChannel(t).then(function(t){t.updateUserMessage(n,s,function(n,i){var s=n,c=i;o.getErrorFirstCallback()&&(s=i,c=n),c?a(c):(e(s),l.publish(r.e,{message:s,channel:t,fromSelector:!0}))})}).catch(a)})}},getDeleteMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.GroupChannel.getChannel(t).then(function(t){var i=n.messageId;t.deleteMessage(n,function(l,c){var u=c;s.getErrorFirstCallback()&&(u=l),u?a(u):(e(n),o.publish(r.b,{messageId:i,channel:t}))})}).catch(a)})}},getResendUserMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.GroupChannel.getChannel(t).then(function(t){t.resendUserMessage(n).then(function(n){e(n),o.publish(r.d,{message:n,channel:t})}).catch(a)}).catch(a)})}},getResendFileMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.GroupChannel.getChannel(t).then(function(t){t.resendFileMessage(n).then(function(n){e(n),o.publish(r.f,{message:n,channel:t})}).catch(a)}).catch(a)})}},getFreezeChannel:function(e){return function(t){var n=a(e);return new Promise(function(e,r){n||r(new Error("Sdk not found")),n.GroupChannel.getChannel(t).then(function(t){t.freeze().then(function(){e(t)}).catch(r)}).catch(r)})}},getUnFreezeChannel:function(e){return function(t){var n=a(e);return new Promise(function(e,r){n||r(new Error("Sdk not found")),n.GroupChannel.getChannel(t).then(function(t){t.unfreeze().then(function(){e(t)}).catch(r)}).catch(r)})}},getCreateChannel:s,getLeaveChannel:function(e){return function(t){var n=a(e),s=i(e);return new Promise(function(e,a){n||a(new Error("Sdk not found")),n.GroupChannel.getChannel(t).then(function(t){t.leave().then(function(){e(t),s.publish(r.c,{channel:t})}).catch(a)}).catch(a)})}},getCreateOpenChannel:function(e){return function(t){var n=a(e);return new Promise(function(e,r){n||r(new Error("Sdk not found")),n.OpenChannel.createChannel(t).then(function(t){e(t)}).catch(r)})}},getEnterOpenChannel:function(e){return function(t){var n=a(e);return new Promise(function(e,r){n||r(new Error("Sdk not found")),n.OpenChannel.getChannel(t,function(t,n){n?r(new Error(n)):t.enter(function(t,a){n?r(new Error(a)):e(t)})})})}},getExitOpenChannel:function(e){return function(t){var n=a(e);return new Promise(function(e,r){n||r(new Error("Sdk not found")),n.OpenChannel.getChannel(t,function(t,n){n?r(new Error(n)):t.exit(function(t,a){n?r(new Error(a)):e(t)})})})}},getOpenChannelSendUserMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.OpenChannel.getChannel(t).then(function(t){e(function(){var e=null,a=new Promise(function(a,i){e=t.sendUserMessage(n,function(e,n){var l=e,c=n;s.getErrorFirstCallback()&&(l=n,c=e),c?i(c):(a(l),o.publish(r.d,{message:l,channel:t}))}),o.publish(r.g,{message:e,channel:t})});return a.get=function(){return e},a}())}).catch(a)})}},getOpenChannelSendFileMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.OpenChannel.getChannel(t).then(function(t){e(function(){var e=null,a=new Promise(function(a,i){e=t.sendFileMessage(n,function(e,n){var l=e,c=n;s.getErrorFirstCallback()&&(l=n,c=e),c?i(c):(a(l),o.publish(r.f,{message:l,channel:t}))})});return n.file&&(e.localUrl=URL.createObjectURL(n.file)),n.fileUrl&&(e.localUrl=n.fileUrl),e.requestState="pending",o.publish(r.g,{message:e,channel:t}),a.get=function(){return e},a}())}).catch(a)})}},getOpenChannelUpdateUserMessage:function(e){return function(t,n,s){var o=a(e),l=i(e);return new Promise(function(e,a){o||a(new Error("Sdk not found")),o.OpenChannel.getChannel(t).then(function(t){t.updateUserMessage(n,s,function(n,i){var s=n,c=i;o.getErrorFirstCallback()&&(s=i,c=n),c?a(c):(e(s),l.publish(r.e,{message:s,channel:t,fromSelector:!0}))})}).catch(a)})}},getOpenChannelDeleteMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.OpenChannel.getChannel(t).then(function(t){var i=n.messageId;t.deleteMessage(n,function(l,c){var u=c;s.getErrorFirstCallback()&&(u=l),u?a(u):(e(n),o.publish(r.b,{messageId:i,channel:t}))})}).catch(a)})}},getOpenChannelResendUserMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.OpenChannel.getChannel(t).then(function(t){t.resendUserMessage(n).then(function(n){e(n),o.publish(r.d,{message:n,channel:t})}).catch(a)}).catch(a)})}},getOpenChannelResendFileMessage:function(e){return function(t,n){var s=a(e),o=i(e);return new Promise(function(e,a){s||a(new Error("Sdk not found")),s.OpenChannel.getChannel(t).then(function(t){t.resendFileMessage(n).then(function(n){e(n),o.publish(r.f,{message:n,channel:t})}).catch(a)}).catch(a)})}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(33);function c(e){var t=e.className,n=e.color,a=e.disabled,s=e.notUnderline,o=e.onClick,c=e.children;return i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),[Object(l.b)(n),s?"sendbird-textbutton--not-underline":"sendbird-textbutton",a?"sendbird-textbutton--disabled":""]).join(" "),role:"button",tabIndex:0,onClick:o,onKeyPress:o},c)}c.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),color:o.a.string,disabled:o.a.bool,notUnderline:o.a.bool,onClick:o.a.func,children:o.a.oneOfType([o.a.string,o.a.element]).isRequired},c.defaultProps={className:"",color:l.a.ONBACKGROUND_1,disabled:!1,notUnderline:!1,onClick:function(){}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",PRIMARY:"PRIMARY",ERROR:"ERROR"};function a(e){switch(e){case r.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case r.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case r.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case r.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case r.ONCONTENT_1:return"sendbird-color--oncontent-1";case r.PRIMARY:return"sendbird-color--primary";case r.ERROR:return"sendbird-color--error";default:return null}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(3);function c(e){var t=e.className,n=e.width,a=e.height,s=e.children;return i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),["sendbird-loader"]).join(" "),style:{width:"string"===typeof n?n:"".concat(n,"px"),height:"string"===typeof a?a:"".concat(a,"px")}},s)}c.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),width:o.a.oneOfType([o.a.string,o.a.number]),height:o.a.oneOfType([o.a.string,o.a.number]),children:o.a.element},c.defaultProps={className:"",width:"26px",height:"26px",children:i.a.createElement(l.c,{type:l.b.SPINNER,width:"26px",height:"26px"})}},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(1),c=(n(11),function(e){var t=e.children;return i.a.createElement(l.a,{className:"sendbird-input-label",type:l.b.CAPTION_3,color:l.c.ONBACKGROUND_1},t)});c.propTypes={children:o.a.string.isRequired};var u=i.a.forwardRef(function(e,t){var n=e.name,s=e.required,o=e.disabled,c=e.placeHolder,u=e.value,d=Object(a.useState)(u),h=Object(r.b)(d,2),f=h[0],p=h[1];return i.a.createElement("div",{className:"sendbird-input"},i.a.createElement("input",{className:"sendbird-input__input",ref:t,name:n,required:s,disabled:o,value:f,onChange:function(e){p(e.target.value)}}),c&&!f&&i.a.createElement(l.a,{className:"sendbird-input__placeholder",type:l.b.BODY_1,color:l.c.ONBACKGROUND_3},c))});u.propTypes={name:o.a.string.isRequired,required:o.a.bool,disabled:o.a.bool,placeHolder:o.a.string,value:o.a.string},u.defaultProps={required:!1,disabled:!1,placeHolder:"",value:""}},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(19),c=n(7),u=n(18),d=n(40),h=n(43),f=n(30),p=n(8),_=n(1);n(11),n(15),n(5),n(14),n(3),n(13),n(20),n(31),n(9),n(12),n(6),n(21),n(27);function m(e){var t=e.className,n=e.user,s=e.checkBox,o=e.disableMessaging,m=e.currentUser,g=e.checked,v=e.onChange,y=e.action,E=n.userId,b=i.a.useRef(null),C=i.a.useRef(null),O=i.a.useRef(null),N=Object(a.useContext)(l.b),S=N.disableUserProfile,A=N.renderUserProfile,I=Object(a.useContext)(c.b).stringSet;return i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),["sendbird-user-list-item"]).join(" "),ref:C},n.isMuted&&i.a.createElement(d.a,{height:40,width:40}),i.a.createElement(p.d,{menuTrigger:function(e){return i.a.createElement(u.a,{className:"sendbird-user-list-item__avatar",ref:O,src:n.profileUrl,width:"40px",height:"40px",onClick:function(){S||e()}})},menuItems:function(e){return i.a.createElement(p.c,{openLeft:!0,parentRef:O,parentContainRef:O,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},A?A({user:n,currentUserId:m,close:e}):i.a.createElement(f.a,{disableMessaging:o,user:n,currentUserId:m,onSuccess:e}))}}),i.a.createElement(_.a,{className:"sendbird-user-list-item__title",type:_.b.SUBTITLE_1,color:_.c.ONBACKGROUND_1},n.nickname||I.NO_NAME,m===n.userId&&" (You)"),!n.nickname&&i.a.createElement(_.a,{className:"sendbird-user-list-item__subtitle",type:_.b.CAPTION_3,color:_.c.ONBACKGROUND_2},n.userId),s&&i.a.createElement("label",{className:"sendbird-user-list-item__checkbox",htmlFor:E},i.a.createElement(h.a,{id:E,checked:g,onChange:function(e){return v(e)}})),"operator"===n.role&&i.a.createElement(_.a,{className:"sendbird-user-list-item__operator",type:_.b.SUBTITLE_2,color:_.c.ONBACKGROUND_2},"Operator"),y&&i.a.createElement("div",{className:"sendbird-user-list-item__action",ref:b},y({actionRef:b,parentRef:C})))}m.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),user:o.a.shape({userId:o.a.string,role:o.a.string,isMuted:o.a.bool,nickname:o.a.string,profileUrl:o.a.string}).isRequired,disableMessaging:o.a.bool,currentUser:o.a.string,action:o.a.oneOfType([o.a.element,o.a.func]),checkBox:o.a.bool,checked:o.a.bool,onChange:o.a.func},m.defaultProps={className:"",currentUser:"",checkBox:!1,disableMessaging:!1,checked:!1,action:null,onChange:function(){}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i});var r=function(e){if(e&&e.coverUrl)return e.coverUrl},a=function(e,t){return e&&e.coverUrl&&!new RegExp("^https://static.sendbird.com/sample/cover/cover_").test(e.coverUrl)?e.coverUrl:e&&e.members?e.members.filter(function(e){return e.userId!==t}).map(function(e){return e.profileUrl}):[]},i=function(e){return!e||!e.coverUrl||!!new RegExp("^https://static.sendbird.com/sample/cover/cover_").test(e.coverUrl)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var r=n(17);function a(e){Object(r.d)(1,arguments);var t=Object(r.f)(e);return t.setHours(0,0,0,0),t}function i(e,t){Object(r.d)(2,arguments);var n=a(e),i=a(t);return n.getTime()===i.getTime()}},function(e,t,n){(function(t){var r=n(134);e.exports=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function n(e,t){return e(t={exports:{}},t.exports),t.exports}function a(e){try{return!!e()}catch(e){return!0}}function i(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function s(e){return E.call(e).slice(8,-1)}function o(e){if(null==e)throw TypeError("Can't call method on "+e);return e}function l(e){return C(o(e))}function c(e){return"object"==typeof e?null!==e:"function"==typeof e}function u(e,t){if(!c(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!c(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!c(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!c(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}function d(e,t){return O.call(e,t)}function h(e){return S?N.createElement(e):{}}function f(e){if(!c(e))throw TypeError(String(e)+" is not an object");return e}function p(t,n){try{R(_,t,n)}catch(e){_[t]=n}return n}var _=(Be=function(e){return e&&e.Math==Math&&e})("object"==typeof globalThis&&globalThis)||Be("object"==typeof window&&window)||Be("object"==typeof self&&self)||Be("object"==typeof e&&e)||function(){return this}()||Function("return this")(),m=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),g={}.propertyIsEnumerable,v=Object.getOwnPropertyDescriptor,y={f:v&&!g.call({1:2},1)?function(e){return!!(e=v(this,e))&&e.enumerable}:g},E={}.toString,b="".split,C=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==s(e)?b.call(e,""):Object(e)}:Object,O={}.hasOwnProperty,N=_.document,S=c(N)&&c(N.createElement),A=!m&&!a(function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a}),I=Object.getOwnPropertyDescriptor,k={f:m?I:function(e,t){if(e=l(e),t=u(t,!0),A)try{return I(e,t)}catch(e){}if(d(e,t))return i(!y.f.call(e,t),e[t])}},T=Object.defineProperty,w={f:m?T:function(e,t,n){if(f(e),t=u(t,!0),f(n),A)try{return T(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},R=m?function(e,t,n){return w.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e},M=_[Pe="__core-js_shared__"]||p(Pe,{}),L=Function.toString;function P(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++K+Y).toString(36)}"function"!=typeof M.inspectSource&&(M.inspectSource=function(e){return L.call(e)});var D,U,x,j,F,H,G,B,V=M.inspectSource,z="function"==typeof(it=_.WeakMap)&&/native code/.test(V(it)),q=n(function(e){(e.exports=function(e,t){return M[e]||(M[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})}),K=0,Y=Math.random(),W=q("keys"),Q=function(e){return W[e]||(W[e]=P(e))},J={},X=_.WeakMap;function $(e){return"function"==typeof e?e:void 0}function Z(e,t){return arguments.length<2?$(fe[e])||$(_[e]):fe[e]&&fe[e][t]||_[e]&&_[e][t]}function ee(e){return isNaN(e=+e)?0:(0<e?_e:pe)(e)}function te(e){return 0<e?me(ee(e),9007199254740991):0}function ne(e,t){return(e=ee(e))<0?ge(e+t,0):ve(e,t)}function re(e,t){var n,r=l(e),a=0,i=[];for(n in r)!d(J,n)&&d(r,n)&&i.push(n);for(;t.length>a;)d(r,n=t[a++])&&(~ye(i,n)||i.push(n));return i}function ae(e,t){var n,r,a,i=e.target,s=e.global,o=e.stat,l=s?_:o?_[i]||p(i,{}):(_[i]||{}).prototype;if(l)for(n in t){if(r=t[n],a=e.noTargetGet?(a=Re(l,n))&&a.value:l[n],!we(s?n:i+(o?".":"#")+n,e.forced)&&void 0!==a){if(typeof r==typeof a)continue;!function(e,t){for(var n=Ne(t),r=w.f,a=k.f,i=0;i<n.length;i++){var s=n[i];d(e,s)||r(e,s,a(t,s))}}(r,a)}(e.sham||a&&a.sham)&&R(r,"sham",!0),he(l,n,r,e)}}function ie(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}function se(e,t,n){if(ie(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}function oe(e){return Object(o(e))}function le(e){return d(De,e)||(Le&&d(Ue,e)?De[e]=Ue[e]:De[e]=xe("Symbol."+e)),De[e]}function ce(e,t){var n;return Me(e)&&("function"==typeof(n=e.constructor)&&(n===Array||Me(n.prototype))||c(n)&&null===(n=n[je]))&&(n=void 0),new(void 0===n?Array:n)(0===t?0:t)}function ue(e){throw e}G=z?(D=M.state||(M.state=new X),U=D.get,x=D.has,j=D.set,F=function(e,t){return t.facade=e,j.call(D,e,t),t},H=function(e){return U.call(D,e)||{}},function(e){return x.call(D,e)}):(B=Q("state"),J[B]=!0,F=function(e,t){return t.facade=e,R(e,B,t),t},H=function(e){return d(e,B)?e[B]:{}},function(e){return d(e,B)});var de={set:F,get:H,has:G,enforce:function(e){return G(e)?H(e):F(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=H(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},he=n(function(e){var t=de.get,n=de.enforce,r=String(String).split("String");(e.exports=function(e,t,a,i){var s=!!i&&!!i.unsafe,o=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof a&&("string"!=typeof t||d(a,"name")||R(a,"name",t),(i=n(a)).source||(i.source=r.join("string"==typeof t?t:""))),e!==_?(s?!l&&e[t]&&(o=!0):delete e[t],o?e[t]=a:R(e,t,a)):o?e[t]=a:p(t,a)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||V(this)})}),fe=_,pe=Math.ceil,_e=Math.floor,me=Math.min,ge=Math.max,ve=Math.min,ye=(e={includes:(Be=function(e){return function(t,n,r){var a,i=l(t),s=te(i.length),o=ne(r,s);if(e&&n!=n){for(;o<s;)if((a=i[o++])!=a)return!0}else for(;o<s;o++)if((e||o in i)&&i[o]===n)return e||o||0;return!e&&-1}})(!0),indexOf:Be(!1)}).indexOf,Ee=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=Ee.concat("length","prototype"),Ce={f:Object.getOwnPropertyNames||function(e){return re(e,be)}},Oe={f:Object.getOwnPropertySymbols},Ne=Z("Reflect","ownKeys")||function(e){var t=Ce.f(f(e)),n=Oe.f;return n?t.concat(n(e)):t},Se=/#|\.prototype\./,Ae=(g=function(e,t){return(e=Ie[Ae(e)])==Te||e!=ke&&("function"==typeof t?a(t):!!t)}).normalize=function(e){return String(e).replace(Se,".").toLowerCase()},Ie=g.data={},ke=g.NATIVE="N",Te=g.POLYFILL="P",we=g,Re=k.f,Me=Array.isArray||function(e){return"Array"==s(e)},Le=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())}),Pe=Le&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,De=q("wks"),Ue=_.Symbol,xe=Pe?Ue:Ue&&Ue.withoutSetter||P,je=le("species"),Fe=[].push,z={forEach:(it=function(e){var t=1==e,n=2==e,r=3==e,a=4==e,i=6==e,s=7==e,o=5==e||i;return function(l,c,u,d){for(var h,f,p=oe(l),_=C(p),m=se(c,u,3),g=te(_.length),v=0,d=d||ce,y=t?d(l,g):n||s?d(l,0):void 0;v<g;v++)if((o||v in _)&&(f=m(h=_[v],v,p),e))if(t)y[v]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return v;case 2:Fe.call(y,h)}else switch(e){case 4:return!1;case 7:Fe.call(y,h)}return i?-1:r||a?a:y}})(0),map:it(1),filter:it(2),some:it(3),every:it(4),find:it(5),findIndex:it(6),filterOut:it(7)},X=function(e,t){var n=[][e];return!!n&&a(function(){n.call(null,t||function(){throw 1},1)})},He=Object.defineProperty,Ge={},Be=function(e,t){if(d(Ge,e))return Ge[e];var n=[][e],r=!!d(t=t||{},"ACCESSORS")&&t.ACCESSORS,i=d(t,0)?t[0]:ue,s=d(t,1)?t[1]:void 0;return Ge[e]=!!n&&!a(function(){if(r&&!m)return 1;var e={length:-1};r?He(e,1,{enumerable:!0,get:ue}):e[1]=1,n.call(e,i,s)})},Ve=z.forEach,g=X("forEach"),q=Be("forEach"),ze=g&&q?[].forEach:function(e){return Ve(this,e,1<arguments.length?arguments[1]:void 0)};function qe(){}function Ke(e){return"<script>"+e+"</"+$e+">"}ae({target:"Array",proto:!0,forced:[].forEach!=ze},{forEach:ze});var Ye,We=Object.keys||function(e){return re(e,Ee)},Qe=m?Object.defineProperties:function(e,t){f(e);for(var n,r=We(t),a=r.length,i=0;i<a;)w.f(e,n=r[i++],t[n]);return e},Je=Z("document","documentElement"),Xe="prototype",$e="script",Ze=Q("IE_PROTO"),et=function(){try{Ye=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e;et=Ye?function(e){e.write(Ke("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Ye):((e=h("iframe")).style.display="none",Je.appendChild(e),e.src=String("javascript:"),(e=e.contentWindow.document).open(),e.write(Ke("document.F=Object")),e.close(),e.F);for(var t=Ee.length;t--;)delete et[Xe][Ee[t]];return et()};J[Ze]=!0;var tt=Object.create||function(e,t){var n;return null!==e?(qe[Xe]=f(e),n=new qe,qe[Xe]=null,n[Ze]=e):n=et(),void 0===t?n:Qe(n,t)},nt=le("unscopables"),rt=Array.prototype;null==rt[nt]&&w.f(rt,nt,{configurable:!0,value:tt(null)});var Pe=function(e){rt[nt][e]=!0},at={},it=!a(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),st=Q("IE_PROTO"),ot=Object.prototype,lt=it?Object.getPrototypeOf:function(e){return d(e=oe(e),st)?e[st]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ot:null},g=le("iterator"),q=!1;function ct(e,t,n){e&&!d(e=n?e:e.prototype,_t)&&pt(e,_t,{configurable:!0,value:t})}function ut(){return this}function dt(e,t,n){return t+=" Iterator",e.prototype=tt(mt,{next:i(1,n)}),ct(e,t,!1),at[t]=ut,e}function ht(){return this}function ft(e,t,n,r,a,i,s){function o(e){if(e===a&&p)return p;if(!yt&&e in h)return h[e];switch(e){case"keys":case bt:case Ct:return function(){return new n(this,e)}}return function(){return new n(this)}}dt(n,t,r);var l,c,u=t+" Iterator",d=!1,h=e.prototype,f=h[Et]||h["@@iterator"]||a&&h[a],p=!yt&&f||o(a);if((r="Array"==t&&h.entries||f)&&(e=lt(r.call(new e)),vt!==Object.prototype&&e.next&&(lt(e)!==vt&&(gt?gt(e,vt):"function"!=typeof e[Et]&&R(e,Et,ht)),ct(e,u,!0))),a==bt&&f&&f.name!==bt&&(d=!0,p=function(){return f.call(this)}),h[Et]!==p&&R(h,Et,p),at[t]=p,a)if(l={values:o(bt),keys:i?p:o("keys"),entries:o(Ct)},s)for(c in l)!yt&&!d&&c in h||he(h,c,l[c]);else ae({target:t,proto:!0,forced:yt||d},l);return l}[].keys&&("next"in(xt=[].keys())?(vn=lt(lt(xt)))!==Object.prototype&&(yn=vn):q=!0),null==yn&&(yn={}),d(yn,g)||R(yn,g,function(){return this});var Q={IteratorPrototype:yn,BUGGY_SAFARI_ITERATORS:q},pt=w.f,_t=le("toStringTag"),mt=Q.IteratorPrototype,gt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,r){return f(n),function(e){if(!c(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),vt=Q.IteratorPrototype,yt=Q.BUGGY_SAFARI_ITERATORS,Et=le("iterator"),bt="values",Ct="entries",Ot="Array Iterator",Nt=de.set,St=de.getterFor(Ot),At=ft(Array,"Array",function(e,t){Nt(this,{type:Ot,target:l(e),index:0,kind:t})},function(){var e=St(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values");function It(e){return void 0!==e&&(at.Array===e||Rt[wt]===e)}at.Arguments=at.Array,Pe("keys"),Pe("values"),Pe("entries");var kt=!a(function(){return Object.isExtensible(Object.preventExtensions({}))}),Tt=n(function(e){function t(e){n(e,r,{value:{objectID:"O"+ ++a,weakData:{}}})}var n=w.f,r=P("meta"),a=0,i=Object.isExtensible||function(){return!0},s=e.exports={REQUIRED:!1,fastKey:function(e,n){if(!c(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!d(e,r)){if(!i(e))return"F";if(!n)return"E";t(e)}return e[r].objectID},getWeakData:function(e,n){if(!d(e,r)){if(!i(e))return!0;if(!n)return!1;t(e)}return e[r].weakData},onFreeze:function(e){return kt&&s.REQUIRED&&i(e)&&!d(e,r)&&t(e),e}};J[r]=!0}),wt=(Tt.REQUIRED,Tt.fastKey,Tt.getWeakData,Tt.onFreeze,le("iterator")),Rt=Array.prototype;function Mt(e){if(null!=e)return e[Gt]||e["@@iterator"]||at[Ht(e)]}function Lt(e){var t=e.return;return void 0!==t&&f(t.call(e)).value}function Pt(e,t){this.stopped=e,this.result=t}function Dt(e,t,n){function r(e){return i&&Lt(i),new Pt(!0,e)}function a(e){return h?(f(e),_?m(e[0],e[1],r):m(e[0],e[1])):_?m(e,r):m(e)}var i,s,o,l,c,u,d=n&&n.that,h=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),_=!(!n||!n.INTERRUPTED),m=se(t,d,1+h+_);if(p)i=e;else{if("function"!=typeof(p=Mt(e)))throw TypeError("Target is not iterable");if(It(p)){for(s=0,o=te(e.length);s<o;s++)if((l=a(e[s]))&&l instanceof Pt)return l;return new Pt(!1)}i=p.call(e)}for(c=i.next;!(u=c.call(i)).done;){try{l=a(u.value)}catch(e){throw Lt(i),e}if("object"==typeof l&&l&&l instanceof Pt)return l}return new Pt(!1)}function Ut(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}(it={})[le("toStringTag")]="z";var xt="[object z]"===String(it),jt=le("toStringTag"),Ft="Arguments"==s(function(){return arguments}()),Ht=xt?s:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),jt))?e:Ft?s(t):"Object"==(e=s(t))&&"function"==typeof t.callee?"Arguments":e},Gt=le("iterator"),Bt=le("iterator"),Vt=!1;try{var zt=0,qt={next:function(){return{done:!!zt++}},return:function(){Vt=!0}};qt[Bt]=function(){return this},Array.from(qt,function(){throw 2})}catch(e){}function Kt(e,t){if(!t&&!Vt)return!1;var n=!1;try{var r={};r[Bt]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}function Yt(e,t,n){var r,a;return gt&&"function"==typeof(r=t.constructor)&&r!==n&&c(a=r.prototype)&&a!==n.prototype&&gt(e,a),e}function Wt(e,t,n){for(var r in t)he(e,r,t[r],n);return e}function Qt(e){var t=Z(e),e=w.f;m&&t&&!t[hn]&&e(t,hn,{configurable:!0,get:function(){return this}})}var Jt,Xt,$t,Zt,en,tn,nn,rn,an,sn,on,ln,cn,un,dn,hn=le("species"),fn=w.f,pn=Tt.fastKey,_n=de.set,mn=de.getterFor;function gn(e){var t=cn[e];he(cn,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(sn&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return sn&&!c(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(sn&&!c(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})}Xt=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},$t={getConstructor:function(e,t,n,r){function a(e,t,n){var r,a=s(e),i=o(e,t);return i?i.value=n:(a.last=i={index:r=pn(t,!0),key:t,value:n,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=i),n&&(n.next=i),m?a.size++:e.size++,"F"!==r&&(a.index[r]=i)),e}var i=e(function(e,a){Ut(e,i,t),_n(e,{type:t,index:tt(null),first:void 0,last:void 0,size:0}),m||(e.size=0),null!=a&&Dt(a,e[r],{that:e,AS_ENTRIES:n})}),s=mn(t),o=function(e,t){var n,r=s(e),e=pn(t);if("F"!==e)return r.index[e];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Wt(i.prototype,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,m?e.size=0:this.size=0},delete:function(e){var t,n=s(this),r=o(this,e);return r&&(t=r.next,e=r.previous,delete n.index[r.index],r.removed=!0,e&&(e.next=t),t&&(t.previous=e),n.first==r&&(n.first=t),n.last==r&&(n.last=e),m?n.size--:this.size--),!!r},forEach:function(e){for(var t,n=s(this),r=se(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!o(this,e)}}),Wt(i.prototype,n?{get:function(e){return(e=o(this,e))&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),m&&fn(i.prototype,"size",{get:function(){return s(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",a=mn(t),i=mn(r);ft(e,t,function(e,t){_n(this,{type:r,target:e,state:a(e),kind:t,last:void 0})},function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}},n?"entries":"values",!n,!0),Qt(t)}},an=-1!==(Jt="Map").indexOf("Map"),sn=-1!==Jt.indexOf("Weak"),on=an?"set":"add",ln=_[Jt],cn=ln&&ln.prototype,dn={},we(Jt,"function"!=typeof(un=ln)||!(sn||cn.forEach&&!a(function(){(new ln).entries().next()})))?(un=$t.getConstructor(Xt,Jt,an,on),Tt.REQUIRED=!0):we(Jt,!0)&&(en=(Zt=new un)[on](sn?{}:-0,1)!=Zt,tn=a(function(){Zt.has(1)}),nn=Kt(function(e){new ln(e)}),rn=!sn&&a(function(){for(var e=new ln,t=5;t--;)e[on](t,t);return!e.has(-0)}),nn||(((un=Xt(function(e,t){return Ut(e,un,Jt),e=Yt(new ln,e,un),null!=t&&Dt(t,e[on],{that:e,AS_ENTRIES:an}),e})).prototype=cn).constructor=un),(tn||rn)&&(gn("delete"),gn("has"),an&&gn("get")),(rn||en)&&gn(on),sn&&cn.clear&&delete cn.clear),dn[Jt]=un,ae({global:!0,forced:un!=ln},dn),ct(un,Jt),sn||$t.setStrong(un,Jt,an);var vn=xt?{}.toString:function(){return"[object "+Ht(this)+"]"};xt||he(Object.prototype,"toString",vn,{unsafe:!0});var yn={codeAt:(g=function(e){return function(t,n){var r,a=String(o(t)),i=ee(n),t=a.length;return i<0||t<=i?e?"":void 0:(n=a.charCodeAt(i))<55296||56319<n||i+1===t||(r=a.charCodeAt(i+1))<56320||57343<r?e?a.charAt(i):n:e?a.slice(i,i+2):r-56320+(n-55296<<10)+65536}})(!1),charAt:g(!0)},En=yn.charAt,bn="String Iterator",Cn=de.set,On=de.getterFor(bn);ft(String,"String",function(e){Cn(this,{type:bn,string:String(e),index:0})},function(){var e=On(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(n=En(t,n),e.index+=n.length,{value:n,done:!1})});var Nn,Sn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(Nn in Sn){var An=_[Nn],In=An&&An.prototype;if(In&&In.forEach!==ze)try{R(In,"forEach",ze)}catch(e){In.forEach=ze}}var kn,Tn,wn=le("iterator"),Rn=le("toStringTag"),Mn=At.values;for(kn in Sn){var Ln=_[kn],Pn=Ln&&Ln.prototype;if(Pn){if(Pn[wn]!==Mn)try{R(Pn,wn,Mn)}catch(e){Pn[wn]=Mn}if(Pn[Rn]||R(Pn,Rn,kn),Sn[kn])for(var Dn in At)if(Pn[Dn]!==At[Dn])try{R(Pn,Dn,At[Dn])}catch(e){Pn[Dn]=At[Dn]}}}function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t,n,r,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,a)}function jn(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function s(e){xn(i,r,a,s,o,"next",e)}function o(e){xn(i,r,a,s,o,"throw",e)}s(void 0)})}}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gn(e,t,n){return t&&Hn(e.prototype,t),n&&Hn(e,n),e}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach(function(t){Bn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function Qn(e,t,n){return(Qn=Wn()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&Yn(r,n.prototype),r}).apply(null,arguments)}function Jn(e){var t="function"==typeof Map?new Map:void 0;return(Jn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Qn(e,arguments,Kn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Yn(r,e)})(e)}function Xn(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},a=Object.keys(e),i=0;i<a.length;i++)n=a[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)n=a[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function $n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e){var t=Wn();return function(){var n,r=Kn(e);return n=t?(n=Kn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||"object"!=typeof n&&"function"!=typeof n?$n(r):n}}function er(e,t,n){return(er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kn(e)););return e}(e,t))return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}function tr(e,t){return rr(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}}(e,t)||ir(e,t)||or()}function nr(e){return function(e){if(Array.isArray(e))return sr(e)}(e)||ar(e)||ir(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e){if(Array.isArray(e))return e}function ar(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ir(e,t){if(e){if("string"==typeof e)return sr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sr(e,t):void 0}}function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function or(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lr(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ir(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function cr(e){return"symbol"==typeof(e=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=typeof(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"))?e:String(e)}function ur(e,t,n,r){var a=function(){var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach(function(n){t.forEach(function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)},this)},this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach(function(r){t.forEach(function(t){var a=t.placement;t.kind!==r||"static"!==a&&"prototype"!==a||(a="static"===a?e:n,this.defineClassElement(a,t))},this)},this)},defineClassElement:function(e,t){var n,r=t.descriptor;"field"===t.kind&&(n=t.initializer,r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}),Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var n=[],r=[],a={static:[],prototype:[],own:[]};return e.forEach(function(e){this.addElementPlacement(e,a)},this),e.forEach(function(e){if(!hr(e))return n.push(e);e=this.decorateElement(e,a),n.push(e.element),n.push.apply(n,e.extras),r.push.apply(r,e.finishers)},this),t?(t=this.decorateConstructor(n,t),r.push.apply(r,t.finishers),t.finishers=r,t):{elements:n,finishers:r}},addElementPlacement:function(e,t,n){if(t=t[e.placement],!n&&-1!==t.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");t.push(e.key)},decorateElement:function(e,t){for(var n=[],r=[],a=e.decorators,i=a.length-1;0<=i;i--){var s=t[e.placement];s.splice(s.indexOf(e.key),1),s=this.fromElementDescriptor(e),s=this.toElementFinisherExtras((0,a[i])(s)||s),e=s.element,this.addElementPlacement(e,t),s.finisher&&r.push(s.finisher);var o=s.extras;if(o){for(var l=0;l<o.length;l++)this.addElementPlacement(o[l],t);n.push.apply(n,o)}}return{element:e,finishers:r,extras:n}},decorateConstructor:function(e,t){for(var n=[],r=t.length-1;0<=r;r--){var a=this.fromClassDescriptor(e),a=this.toClassDescriptor((0,t[r])(a)||a);if(void 0!==a.finisher&&n.push(a.finisher),void 0!==a.elements){e=a.elements;for(var i=0;i<e.length-1;i++)for(var s=i+1;s<e.length;s++)if(e[i].key===e[s].key&&e[i].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[i].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){if(void 0!==e)return(rr(e=e)||ar(e)||ir(e)||or()).map(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t},this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=cr(e.key),r=String(e.placement);if("static"!==r&&"prototype"!==r&&"own"!==r)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+r+'"');var a=e.descriptor;return this.disallowProperty(e,"elements","An element descriptor"),r={kind:t,key:n,placement:r,descriptor:Object.assign({},a)},"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),r.initializer=e.initializer),r},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:pr(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){return e={kind:"class",elements:e.map(this.fromElementDescriptor,this)},Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),e},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');return this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor"),t=pr(e,"finisher"),{elements:this.toElementDescriptors(e.elements),finisher:t}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(void 0!==r){if("function"!=typeof r)throw new TypeError("Finishers must return a constructor.");e=r}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}();if(r)for(var i=0;i<r.length;i++)a=r[i](a);var n=t(function(e){a.initializeInstanceElements(e,s.elements)},n),s=a.decorateClass(function(e){for(var t,n=[],r=function(e){return"method"===e.kind&&e.key===i.key&&e.placement===i.placement},a=0;a<e.length;a++){var i=e[a];if("method"===i.kind&&(t=n.find(r)))if(fr(i.descriptor)||fr(t.descriptor)){if(hr(i)||hr(t))throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.");t.descriptor=i.descriptor}else{if(hr(i)){if(hr(t))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+i.key+").");t.decorators=i.decorators}!function(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}(i,t)}else n.push(i)}return n}(n.d.map(dr)),e);return a.initializeClassElements(n.F,s.elements),a.runClassFinishers(n.F,s.finishers)}function dr(e){var t=cr(e.key);"method"===e.kind?n={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?n={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?n={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(n={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:t,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:n};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function hr(e){return e.decorators&&e.decorators.length}function fr(e){return void 0!==e&&(void 0!==e.value||void 0!==e.writable)}function pr(e,t){if(void 0!==(e=e[t])&&"function"!=typeof e)throw new TypeError("Expected '"+t+"' to be a function");return e}function _r(e,t,n){(t=u(t))in e?w.f(e,t,i(0,n)):e[t]=n}(q=Tn=Tn||{})[q.DIAL_CANCELED=1800100]="DIAL_CANCELED",q[q.MY_USER_ID_NOT_ALLOWED=1800101]="MY_USER_ID_NOT_ALLOWED",q[q.ERR_REQUEST_FAILED=1800200]="ERR_REQUEST_FAILED",q[q.ERR_WEBSOCKET_CONNECTION_NOT_OPENED=1800201]="ERR_WEBSOCKET_CONNECTION_NOT_OPENED",q[q.ERR_WEBSOCKET_CONNECTION_FAILED=1800202]="ERR_WEBSOCKET_CONNECTION_FAILED",q[q.ERR_NO_RESPONSE_DUE_TO_TIMEOUT=1800203]="ERR_NO_RESPONSE_DUE_TO_TIMEOUT",q[q.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST=1800204]="ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST",q[q.ERR_WRONG_RESPONSE=1800205]="ERR_WRONG_RESPONSE",q[q.ERR_QUERY_IN_PROGRESS=1800206]="ERR_QUERY_IN_PROGRESS",q[q.INTERNAL_SERVER_ERROR=1800207]="INTERNAL_SERVER_ERROR",q[q.ERR_MALFORMED_DATA=1800208]="ERR_MALFORMED_DATA",q[q.ERR_PARTICIPANT_ALREADY_IN_ROOM=1800700]="ERR_PARTICIPANT_ALREADY_IN_ROOM",q[q.ERR_ENTERING_ROOM_STILL_IN_PROGRESS=1800701]="ERR_ENTERING_ROOM_STILL_IN_PROGRESS",q[q.ERR_PARTICIPANT_NOT_IN_ROOM=1800702]="ERR_PARTICIPANT_NOT_IN_ROOM",q[q.ERR_EXITING_ROOM_STILL_IN_PROGRESS=1800703]="ERR_EXITING_ROOM_STILL_IN_PROGRESS",q[q.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM=1800704]="ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM",q[q.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM=1800705]="ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM",q[q.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION=1800706]="ERR_LOCAL_PARTICIPANT_LOST_CONNECTION",q[q.INVALID_PARAMETER_VALUE=1800300]="INVALID_PARAMETER_VALUE",q[q.INVALID_PARAMETER_TYPE=1800301]="INVALID_PARAMETER_TYPE",q[q.INSTANCE_NOT_INITIALIZED=1800302]="INSTANCE_NOT_INITIALIZED",q[q.USER_NOT_AUTHENTICATED=1800303]="USER_NOT_AUTHENTICATED",q[q.CAMERA_ALREADY_SWITCHING=1800400]="CAMERA_ALREADY_SWITCHING",q[q.ERR_CAMERA_SWITCH=1800401]="ERR_CAMERA_SWITCH",q[q.ERR_CHANGING_AUDIO_DEVICE=1800402]="ERR_CHANGING_AUDIO_DEVICE",q[q.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL=1800600]="ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL",q[q.ERR_VIDEO_VIEW_NOT_READY=1800601]="ERR_VIDEO_VIEW_NOT_READY",q[q.ERR_VIDEO_CALL_NOT_CONNECTED_YET=1800602]="ERR_VIDEO_CALL_NOT_CONNECTED_YET",q[q.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM=1800603]="ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM",q[q.ERR_SERVER_INTERNAL_ERROR=1400999]="ERR_SERVER_INTERNAL_ERROR",q[q.ERR_INVALID_CALL_STATUS=1400101]="ERR_INVALID_CALL_STATUS",q[q.ERR_CALL_DOES_NOT_EXIST=1400102]="ERR_CALL_DOES_NOT_EXIST",q[q.ERR_CALLEE_DOES_NOT_EXIST=1400103]="ERR_CALLEE_DOES_NOT_EXIST",q[q.ERR_DIAL_MYSELF=1400104]="ERR_DIAL_MYSELF",q[q.ERR_NO_PERMISSION=1400105]="ERR_NO_PERMISSION",q[q.ERR_CALLEE_NEVER_AUTHENTICATE=1400106]="ERR_CALLEE_NEVER_AUTHENTICATE",q[q.ERR_ROOM_MAX_PARTICIPANTS=1400120]="ERR_ROOM_MAX_PARTICIPANTS",q[q.ERR_INVALID_ROOM_PARTICIPANT=1400121]="ERR_INVALID_ROOM_PARTICIPANT",q[q.ERR_CLIENT_ALREADY_ENTERED=1400122]="ERR_CLIENT_ALREADY_ENTERED",q[q.ERR_SEND_ENDPOINT_CANNOT_ATTACH=1400123]="ERR_SEND_ENDPOINT_CANNOT_ATTACH",q[q.ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT=1400124]="ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT",q[q.ERR_ROOM_DELETED=1400126]="ERR_ROOM_DELETED",q[q.ERR_CALL_NOT_CONNECTED_YET=1800610]="ERR_CALL_NOT_CONNECTED_YET",q[q.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL=1800611]="ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL",q[q.ERR_RECORDING_ALREADY_IN_PROGRESS=1800612]="ERR_RECORDING_ALREADY_IN_PROGRESS",q[q.ERR_FAILED_TO_OPEN_FILE=1800613]="ERR_FAILED_TO_OPEN_FILE",q[q.ERR_FAILED_TO_START_RECORDING=1800614]="ERR_FAILED_TO_START_RECORDING",q[q.ERR_FAILED_TO_STOP_RECORDING=1800615]="ERR_FAILED_TO_STOP_RECORDING",q[q.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING=1800616]="ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING",q[q.ERR_INVALID_RECORDING_TYPE=1800617]="ERR_INVALID_RECORDING_TYPE",q[q.ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING=1800618]="ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING",q[q.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL=1800620]="ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL",q[q.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED=1800621]="ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED",q[q.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS=1800622]="ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS",q[q.ERR_NO_SCREEN_SHARE_EXISTS=1800623]="ERR_NO_SCREEN_SHARE_EXISTS",q[q.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE=1800625]="ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE",q[q.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON=1800626]="ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON",q[q.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE=1800627]="ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE",q[q.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE=1800628]="ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE",q[q.ERR_SELECTED_CONTENT_NOT_EXIST=1800629]="ERR_SELECTED_CONTENT_NOT_EXIST",q[q.ERR_SELECTED_CONTENT_INACCESSIBLE=1800630]="ERR_SELECTED_CONTENT_INACCESSIBLE",q[q.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD=1800631]="ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD",q[q.ERR_CALL_ALREADY_ON_HOLD=1800801]="ERR_CALL_ALREADY_ON_HOLD",q[q.ERR_ACTIVE_CALL_IN_PROGRESS=1800802]="ERR_ACTIVE_CALL_IN_PROGRESS",q[q.ERR_ANOTHER_CALL_IN_PROGRESS=1800803]="ERR_ANOTHER_CALL_IN_PROGRESS";var mr=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"getErrorMessage",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).invalidParameter,n=void 0===t?"":t;switch(e){case Tn.DIAL_CANCELED:return"Call canceled before receiving a callback.";case Tn.MY_USER_ID_NOT_ALLOWED:return"The caller can't dial their own user ID.";case Tn.ERR_REQUEST_FAILED:return"The http request failed.";case Tn.ERR_WEBSOCKET_CONNECTION_NOT_OPENED:return"Websocket connection not established.";case Tn.ERR_WEBSOCKET_CONNECTION_FAILED:return"Websocket connection failed.";case Tn.ERR_NO_RESPONSE_DUE_TO_TIMEOUT:return"The request failed to receive a response due to timeout.";case Tn.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST:return"The request failed because the websocket connection is lost.";case Tn.ERR_WRONG_RESPONSE:return"The response contains an unexpected object type of data.";case Tn.ERR_QUERY_IN_PROGRESS:return"The previous query is still in progress.";case Tn.INTERNAL_SERVER_ERROR:return"An internal server error has occurred.";case Tn.ERR_MALFORMED_DATA:return"The data format of the response is invalid.";case Tn.INVALID_PARAMETER_VALUE:return"".concat(n," is an invalid or empty value.");case Tn.INVALID_PARAMETER_TYPE:return"The data type of ".concat(n," is invalid.");case Tn.INSTANCE_NOT_INITIALIZED:return"SendBirdCall instance not initialized.";case Tn.USER_NOT_AUTHENTICATED:return"The user is not authenticated.";case Tn.CAMERA_ALREADY_SWITCHING:return"Camera is already switching.";case Tn.ERR_CAMERA_SWITCH:return"A camera switch error has occurred.";case Tn.ERR_CHANGING_AUDIO_DEVICE:return"An error occurred while changing audio device.";case Tn.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL:return"Capturing a video view isn't allowed while on an audio call.";case Tn.ERR_VIDEO_VIEW_NOT_READY:return"A video view isn't ready to be captured.";case Tn.ERR_VIDEO_CALL_NOT_CONNECTED_YET:return"A video call isn't connected yet therefore can't capture a video view.";case Tn.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM:return"An error occurred while getting an image form the video stream.";case Tn.ERR_ROOM_MAX_PARTICIPANTS:return"The room has reached max participants.";case Tn.ERR_INVALID_ROOM_PARTICIPANT:return"The room participant argument is not valid.";case Tn.ERR_CLIENT_ALREADY_ENTERED:return"The given client is already entered.";case Tn.ERR_SEND_ENDPOINT_CANNOT_ATTACH:return"The send endpoint failed to attach.";case Tn.ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT:return"The given participant already has send endpoint.";case Tn.ERR_CALL_NOT_CONNECTED_YET:return"A call isn\u2019t connected yet therefore can\u2019t start media recording.";case Tn.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL:return"A wrong recording type is selected in an audio call.";case Tn.ERR_RECORDING_ALREADY_IN_PROGRESS:return"An ongoing recording session is already in progress.";case Tn.ERR_FAILED_TO_OPEN_FILE:return"Couldn't open a recording file due to an error.";case Tn.ERR_FAILED_TO_START_RECORDING:return"Couldn't start a recording session due to an error.";case Tn.ERR_FAILED_TO_STOP_RECORDING:return"Coudln't stop a recording session due to an error.";case Tn.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING:return"The browser doesn't support media recording.";case Tn.ERR_INVALID_RECORDING_TYPE:return"Invalid recording type is selected.";case Tn.ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING:return"The operating system version doesn't support media recording.";case Tn.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL:return"Screen share is restricted from audio calls.";case Tn.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED:return"A call isn't connected yet, but the request for screen share has been made.";case Tn.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS:return"The user is trying to share the screen while the previous request is still in progress.";case Tn.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD:return"Screen sharing or any other actions that need media streaming as well as capturing screen aren't allowed while a call is on hold.";case Tn.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE:return"The browser doesn't support screen share.";case Tn.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON:return"Screen share failed due to unknown reason.";case Tn.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE:return"The application state isn't supported for screen share.";case Tn.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE:return"An access permission denied for screen share.";case Tn.ERR_SELECTED_CONTENT_NOT_EXIST:return"The selected content for screen share doesn't exist.";case Tn.ERR_SELECTED_CONTENT_INACCESSIBLE:return"The selected content for screen share is inaccessible by the system.";case Tn.ERR_PARTICIPANT_ALREADY_IN_ROOM:return"The participant is trying to enter the same room they're already in.";case Tn.ERR_ENTERING_ROOM_STILL_IN_PROGRESS:return"The participant is trying to enter the room while the previous request is still in progress.";case Tn.ERR_PARTICIPANT_NOT_IN_ROOM:return"The participant is not in the room and the request can't be processed.";case Tn.ERR_EXITING_ROOM_STILL_IN_PROGRESS:return"The participant is trying to exit the same room.";case Tn.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM:return"Couldn't establish a connection to send media streaming.";case Tn.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM:return"Couldn't establish a connection to receive media streaming.";case Tn.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION:return"The local participant exited the room due to lost connection.";case Tn.ERR_CALL_ALREADY_ON_HOLD:return"The call is already on hold.";case Tn.ERR_ACTIVE_CALL_IN_PROGRESS:return"The active call is in progress. Cannot remove the active call from a hold because the call is not on hold.";case Tn.ERR_ANOTHER_CALL_IN_PROGRESS:return"The active call is in progress. Cannot remove a hold from another call while there is an active call.";default:return""}}}]),e}(),Q=Z("navigator","userAgent")||"",xt=(it=_.process)&&it.versions;(vn=xt&&xt.v8)?Ir=(Nr=vn.split("."))[0]+Nr[1]:Q&&(!(Nr=Q.match(/Edge\/(\d+)/))||74<=Nr[1])&&(Nr=Q.match(/Chrome\/(\d+)/))&&(Ir=Nr[1]);var gr=Ir&&+Ir,vr=le("species"),g=function(e){return 51<=gr||!a(function(){var t=[];return(t.constructor={})[vr]=function(){return{foo:1}},1!==t[e](Boolean).foo})},yr=le("isConcatSpreadable"),Er=9007199254740991,br="Maximum allowed index exceeded",q=51<=gr||!a(function(){var e=[];return e[yr]=!1,e.concat()[0]!==e}),it=g("concat");ae({target:"Array",proto:!0,forced:!q||!it},{concat:function(e){for(var t,n,r,a=oe(this),i=ce(a,0),s=0,o=-1,l=arguments.length;o<l;o++)if(function(e){if(!c(e))return!1;var t=e[yr];return void 0!==t?!!t:Me(e)}(r=-1===o?a:arguments[o])){if(n=te(r.length),Er<s+n)throw TypeError(br);for(t=0;t<n;t++,s++)t in r&&_r(i,s,r[t])}else{if(Er<=s)throw TypeError(br);_r(i,s++,r)}return i.length=s,i}});var Cr=z.map,xt=g("map"),vn=Be("map");function Or(){var e=f(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}ae({target:"Array",proto:!0,forced:!xt||!vn},{map:function(e){return Cr(this,e,1<arguments.length?arguments[1]:void 0)}});var Nr="toString",Sr=RegExp.prototype,Ar=Sr[Nr],Ir=a(function(){return"/a/b"!=Ar.call({source:"a",flags:"b"})}),q=Ar.name!=Nr;(Ir||q)&&he(RegExp.prototype,Nr,function(){var e=f(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Sr)?Or.call(e):n)},{unsafe:!0});var kr,Tr="".repeat||function(e){var t=String(o(this)),n="",r=ee(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},wr=Math.ceil,xt={start:(it=function(e){return function(t,n,r){var a=String(o(t)),t=a.length,r=void 0===r?" ":String(r),n=te(n);return n<=t||""==r?a:(t=n-t,(r=Tr.call(r,wr(t/r.length))).length>t&&(r=r.slice(0,t)),e?a+r:r+a)}})(!1),end:it(!0)},vn=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Q),Rr=xt.start;ae({target:"String",proto:!0,forced:vn},{padStart:function(e){return Rr(this,e,1<arguments.length?arguments[1]:void 0)}}),(Ir=kr=kr||{}).VERBOSE="VERBOSE",Ir.DEBUG="DEBUG",Ir.INFO="INFO",Ir.WARNING="WARNING",Ir.ERROR="ERROR",Ir.NONE="NONE";var Mr={VERBOSE:{level:-1,name:kr.VERBOSE,public:!1},DEBUG:{level:1,name:kr.DEBUG,public:!1},INFO:{level:2,name:kr.INFO,public:!0},WARNING:{level:3,name:kr.WARNING,public:!0},ERROR:{level:4,name:kr.ERROR,public:!0},NONE:{level:100,name:kr.NONE,public:!0}},Lr=z.some,q=X("some"),Nr=Be("some");function Pr(e,t){var n;return void 0===(e=f(e).constructor)||null==(n=f(e)[jr])?t:ie(n)}function Dr(e){var t;zr.hasOwnProperty(e)&&(t=zr[e],delete zr[e],t())}function Ur(e){return function(){Dr(e)}}ae({target:"Array",proto:!0,forced:!q||!Nr},{some:function(e){return Lr(this,e,1<arguments.length?arguments[1]:void 0)}}),ae({target:"Object",stat:!0,forced:it=a(function(){We(1)})},{keys:function(e){return We(oe(e))}});var xr,xt=_.Promise,jr=le("species"),vn=/(iphone|ipod|ipad).*applewebkit/i.test(Q),Fr="process"==s(_.process),Hr=_.location,Ir=_.setImmediate,q=_.clearImmediate,Gr=_.process,Nr=_.MessageChannel,Br=_.Dispatch,Vr=0,zr={},qr="onreadystatechange",it=function(e){Dr(e.data)},Q=function(e){_.postMessage(e+"",Hr.protocol+"//"+Hr.host)};Ir&&q||(Ir=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return zr[++Vr]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},xr(Vr),Vr},q=function(e){delete zr[e]},Fr?xr=function(e){Gr.nextTick(Ur(e))}:Br&&Br.now?xr=function(e){Br.now(Ur(e))}:Nr&&!vn?(ea=(Nr=new Nr).port2,Nr.port1.onmessage=it,xr=se(ea.postMessage,ea,1)):_.addEventListener&&"function"==typeof postMessage&&!_.importScripts&&Hr&&"file:"!==Hr.protocol&&!a(Q)?(xr=Q,_.addEventListener("message",it,!1)):xr=qr in h("script")?function(e){Je.appendChild(h("script"))[qr]=function(){Je.removeChild(this),Dr(e)}}:function(e){setTimeout(Ur(e),0)});var Kr,Yr,Wr,Qr,Jr,Xr,$r,Zr,ea={set:Ir,clear:q},Q=k.f,ta=ea.set,it=_.MutationObserver||_.WebKitMutationObserver,Ir=_.document,na=_.process,q=_.Promise;function ra(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=ie(t),this.reject=ie(n)}function aa(e,t){return f(e),c(t)&&t.constructor===e?t:((0,(e=ma.f(e)).resolve)(t),e.promise)}function ia(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}function sa(e){var t;return!(!c(e)||"function"!=typeof(t=e.then))&&t}function oa(e,t){var n;e.notified||(e.notified=!0,n=e.reactions,_a(function(){for(var r=e.value,a=1==e.state,i=0;n.length>i;){var s,o,l,c=n[i++],u=a?c.ok:c.fail,d=c.resolve,h=c.reject,f=c.domain;try{u?(a||(2===e.rejection&&Da(e),e.rejection=1),!0===u?s=r:(f&&f.enter(),s=u(r),f&&(f.exit(),l=!0)),s===c.promise?h(Na("Promise-chain cycle")):(o=sa(s))?o.call(s,d,h):d(s)):h(r)}catch(r){f&&!l&&f.exit(),h(r)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&La(e)}))}function la(e,t,n){var r,a;wa?((r=Sa.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),_.dispatchEvent(r)):r={promise:t,reason:n},!Ra&&(a=_["on"+e])?a(r):e===Ma&&function(e,t){var n=_.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)}function ca(e,t,n){return function(r){e(t,r,n)}}function ua(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,oa(e,!0))}(Q=(Q=Q(_,"queueMicrotask"))&&Q.value)||(Kr=function(){var e,t;for(Fr&&(e=na.domain)&&e.exit();Yr;){t=Yr.fn,Yr=Yr.next;try{t()}catch(e){throw Yr?Qr():Wr=void 0,e}}Wr=void 0,e&&e.enter()},Qr=!vn&&!Fr&&it&&Ir?(Jr=!0,Xr=Ir.createTextNode(""),new it(Kr).observe(Xr,{characterData:!0}),function(){Xr.data=Jr=!Jr}):q&&q.resolve?($r=q.resolve(void 0),Zr=$r.then,function(){Zr.call($r,Kr)}):Fr?function(){na.nextTick(Kr)}:function(){ta.call(_,Kr)});var da,ha,fa,pa,_a=Q||function(e){e={fn:e,next:void 0},Wr&&(Wr.next=e),Yr||(Yr=e,Qr()),Wr=e},ma={f:function(e){return new ra(e)}},ga=ea.set,va=le("species"),ya="Promise",Ea=de.get,ba=de.set,Ca=de.getterFor(ya),Oa=xt,Na=_.TypeError,Sa=_.document,Aa=_.process,Ia=Z("fetch"),ka=ma.f,Ta=ka,wa=!!(Sa&&Sa.createEvent&&_.dispatchEvent),Ra="function"==typeof PromiseRejectionEvent,Ma="unhandledrejection",Q=(q=we(ya,function(){if(V(Oa)===String(Oa)){if(66===gr)return!0;if(!Fr&&!Ra)return!0}if(51<=gr&&/native code/.test(Oa))return!1;function e(e){e(function(){},function(){})}var t=Oa.resolve(1);return(t.constructor={})[va]=e,!(t.then(function(){})instanceof e)}))||!Kt(function(e){Oa.all(e).catch(function(){})}),La=function(e){ga.call(_,function(){var t,n=e.facade,r=e.value,a=Pa(e);if(a&&(t=ia(function(){Fr?Aa.emit("unhandledRejection",r,n):la(Ma,n,r)}),e.rejection=Fr||Pa(e)?2:1,t.error))throw t.value})},Pa=function(e){return 1!==e.rejection&&!e.parent},Da=function(e){ga.call(_,function(){var t=e.facade;Fr?Aa.emit("rejectionHandled",t):la("rejectionhandled",t,e.value)})},Ua=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw Na("Promise can't be resolved itself");var a=sa(n);a?_a(function(){var r={done:!1};try{a.call(n,ca(e,r,t),ca(ua,r,t))}catch(n){ua(r,n,t)}}):(t.value=n,t.state=1,oa(t,!1))}catch(n){ua({done:!1},n,t)}}};function xa(e,t){return RegExp(e,t)}q&&(Oa=function(e){Ut(this,Oa,ya),ie(e),da.call(this);var t=Ea(this);try{e(ca(Ua,t),ca(ua,t))}catch(e){ua(t,e)}},(da=function(e){ba(this,{type:ya,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Wt(Oa.prototype,{then:function(e,t){var n=Ca(this),r=ka(Pr(this,Oa));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Fr?Aa.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&oa(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),ha=function(){var e=new da,t=Ea(e);this.promise=e,this.resolve=ca(Ua,t),this.reject=ca(ua,t)},ma.f=ka=function(e){return e===Oa||e===fa?new ha:Ta(e)},"function"==typeof xt&&(pa=xt.prototype.then,he(xt.prototype,"then",function(e,t){var n=this;return new Oa(function(e,t){pa.call(n,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof Ia&&ae({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return aa(Oa,Ia.apply(_,arguments))}}))),ae({global:!0,wrap:!0,forced:q},{Promise:Oa}),ct(Oa,ya,!1),Qt(ya),fa=Z(ya),ae({target:ya,stat:!0,forced:q},{reject:function(e){var t=ka(this);return t.reject.call(void 0,e),t.promise}}),ae({target:ya,stat:!0,forced:q},{resolve:function(e){return aa(this,e)}}),ae({target:ya,stat:!0,forced:Q},{all:function(e){var t=this,n=ka(t),r=n.resolve,a=n.reject,i=ia(function(){var n=ie(t.resolve),i=[],s=0,o=1;Dt(e,function(e){var l=s++,c=!1;i.push(void 0),o++,n.call(t,e).then(function(e){c||(c=!0,i[l]=e,--o||r(i))},a)}),--o||r(i)});return i.error&&a(i.value),n.promise},race:function(e){var t=this,n=ka(t),r=n.reject,a=ia(function(){var a=ie(t.resolve);Dt(e,function(e){a.call(t,e).then(n.resolve,r)})});return a.error&&r(a.value),n.promise}});var ea={UNSUPPORTED_Y:a(function(){var e=xa("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),BROKEN_CARET:a(function(){var e=xa("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},ja=RegExp.prototype.exec,Fa=String.prototype.replace,xt=ja,Ha=(q=/a/,Q=/b*/g,ja.call(q,"a"),ja.call(Q,"a"),0!==q.lastIndex||0!==Q.lastIndex),Ga=ea.UNSUPPORTED_Y||ea.BROKEN_CARET,Ba=void 0!==/()??/.exec("")[1];(Ha||Ba||Ga)&&(xt=function(e){var t,n,r,a,i=this,s=Ga&&i.sticky,o=Or.call(i),l=i.source,c=0,u=e;return s&&(-1===(o=o.replace("y","")).indexOf("g")&&(o+="g"),u=String(e).slice(i.lastIndex),0<i.lastIndex&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,c++),n=new RegExp("^(?:"+l+")",o)),Ba&&(n=new RegExp("^"+l+"$(?!\\s)",o)),Ha&&(t=i.lastIndex),r=ja.call(s?n:i,u),s?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Ha&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),Ba&&r&&1<r.length&&Fa.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r});var Va=xt;function za(e,t,n){return t+(n?Xa(e,t).length:1)}function qa(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(n=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==s(e))throw TypeError("RegExp#exec called on incompatible receiver");return Va.call(e,t)}ae({target:"RegExp",proto:!0,forced:/./.exec!==Va},{exec:Va});var Ka=le("species"),Ya=!a(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Wa="$0"==="a".replace(/./,"$0"),Qa=!!/./[Q=le("replace")]&&""===/./[Q]("a","$0"),Ja=!a(function(){var e=/(?:)/,t=e.exec;return e.exec=function(){return t.apply(this,arguments)},2!==(e="ab".split(e)).length||"a"!==e[0]||"b"!==e[1]}),ea=function(e,t,n,r){var i,s,o=le(e),l=!a(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),c=l&&!a(function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[Ka]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t});l&&c&&("replace"!==e||Ya&&Wa&&!Qa)&&("split"!==e||Ja)||(i=/./[o],n=(c=n(o,""[e],function(e,t,n,r,a){return t.exec===Va?l&&!a?{done:!0,value:i.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}},{REPLACE_KEEPS_$0:Wa,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Qa}))[0],s=c[1],he(String.prototype,e,n),he(RegExp.prototype,o,2==t?function(e,t){return s.call(e,this,t)}:function(e){return s.call(e,this)})),r&&R(RegExp.prototype[o],"sham",!0)},Xa=yn.charAt;ea("match",1,function(e,t,n){return[function(t){var n=o(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=f(e),i=String(this);if(!a.global)return qa(a,i);for(var s=a.unicode,o=[],l=a.lastIndex=0;null!==(c=qa(a,i));){var c=String(c[0]);""===(o[l]=c)&&(a.lastIndex=za(i,te(a.lastIndex),s)),l++}return 0===l?null:o}]});var $a=Math.max,Za=Math.min,ei=Math.floor,ti=/\$([$&'`]|\d\d?|<[^>]*>)/g,ni=/\$([$&'`]|\d\d?)/g;ea("replace",2,function(e,t,n,r){var a=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,s=a?"$":"$0";return[function(n,r){var a=o(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!a&&i||"string"==typeof r&&-1===r.indexOf(s)){var o=n(t,e,this,r);if(o.done)return o.value}var l=f(e),c=String(this),u="function"==typeof r;u||(r=String(r));var d,h=l.global;h&&(d=l.unicode,l.lastIndex=0);for(var p=[];;){var _=qa(l,c);if(null===_)break;if(p.push(_),!h)break;""===String(_[0])&&(l.lastIndex=za(c,te(l.lastIndex),d))}for(var m,g="",v=0,y=0;y<p.length;y++){_=p[y];for(var E=String(_[0]),b=$a(Za(ee(_.index),c.length),0),C=[],O=1;O<_.length;O++)C.push(void 0===(m=_[O])?m:String(m));var N,S=_.groups,S=u?(N=[E].concat(C,b,c),void 0!==S&&N.push(S),String(r.apply(void 0,N))):function(e,n,r,a,i,s){var o=r+e.length,l=a.length,c=ni;return void 0!==i&&(i=oe(i),c=ti),t.call(s,c,function(t,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(o);case"<":c=i[s.slice(1,-1)];break;default:var u=+s;if(0==u)return t;if(l<u){var d=ei(u/10);return 0===d?t:d<=l?void 0===a[d-1]?s.charAt(1):a[d-1]+s.charAt(1):t}c=a[u-1]}return void 0===c?"":c})}(E,c,b,C,S,r);v<=b&&(g+=c.slice(v,b)+S,v=b+E.length)}return g+c.slice(v)}]});var ri=function(){qn(t,Jn(Error));var e=Zn(t);function t(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=r.message,i=r.error,r=Xn(r,["message","error"]);return Fn(this,t),r=a||mr.getErrorMessage(n,r),(r=e.call(this,r)).code=n,r._error=i,r}return t}(),ai=function(){qn(t,ri);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return t}();function ii(e){return function(t){e.then(function(e){return t(e)},function(e){return t(null,e)})}}function si(e,t){if(Object.keys(e).some(function(t){return"string"!=typeof e[t]})){var n=Promise.reject(new ai(Tn.INVALID_PARAMETER_TYPE));return t&&ii(n)(t),[!1,n]}return[!0]}function oi(e,t){return e.some(function(e){return"string"!=typeof e})?(e=Promise.reject(new ai(Tn.INVALID_PARAMETER_TYPE)),t&&ii(e)(t),[!1,e]):[!0]}function li(e,t,n){return(t=e.match(t))&&t.length>=n&&parseInt(t[n],10)}function ci(){var e={browser:null,version:null};if("undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;var t=window.navigator;if(t.mozGetUserMedia)e.browser="firefox",e.version=li(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===window.isSecureContext&&window.webkitRTCPeerConnection&&!window.RTCIceGatherer)e.browser="chrome",e.version=li(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=li(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!window.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=li(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=window.RTCRtpTransceiver&&"currentDirection"in window.RTCRtpTransceiver.prototype}return e}function ui(e){return{userId:e.user_id,nickname:e.nickname,profileUrl:e.profile_url,metaData:e.meta_data,isActive:e.is_active}}var di,hi,fi="safari"===ci().browser,pi="firefox"===ci().browser,_i=new(function(){function e(){Fn(this,e),this.level=kr.NONE}return Gn(e,[{key:"setLoggerLevel",value:function(e){var t;return null!==(t=Mr[e])&&void 0!==t&&t.public&&(this.level=e),this.level}},{key:"verbose",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[kr.VERBOSE].concat(t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[kr.DEBUG].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[kr.INFO].concat(t))}},{key:"warning",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[kr.WARNING].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[kr.ERROR].concat(t))}},{key:"_enabledFor",value:function(e){try{return Mr[this.level].level<=Mr[e].level}catch(e){return!1}}},{key:"_getLogType",value:function(e){switch(e){case kr.ERROR:return"error";case kr.WARNING:return"warn";default:return"log"}}},{key:"_getTimeString",value:function(e){var t=e.getFullYear().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),e=e.getMilliseconds().toString().padStart(2,"0");return"[".concat(t,".").concat(n,".").concat(r," ").concat(a,":").concat(i,":").concat(s,":").concat(e,"]")}},{key:"_permit",value:function(e){for(var t,n,r=this._getLogType(e),a=new Date,i=arguments.length,s=new Array(1<i?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];this._enabledFor(e)&&console&&console[r]&&(n="".concat(this._getTimeString(a)," [").concat(e,"]"),(t=console)[r].apply(t,[n].concat(s))),this._logCollector&&(e={logDt:a.getTime(),logLevel:e,logMessage:this._makeSDKLogMessage.apply(this,s)},this._logCollector.addLog(e))}},{key:"_makeSDKLogMessage",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return JSON.stringify(e)});return r.toString().replace(/"access_token":".*?"/gm,'"access_token":"*************"').replace(/"password":".*?"/gm,'"password":"*************"').replace(/"sbcall_session_token":".*?"/gm,'"sbcall_session_token":"*************"').replace(/"turn_urls":\[".*?"\]/gm,'"turn_urls":"[*************]"').replace(/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/gm,"*************").replace(/((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*::((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*|((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4})){7}/gm,"*************")}},{key:"logCollector",set:function(e){this._logCollector=e}}]),e}()),mi=function(){qn(t,ri);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return t}(),gi=function(){function e(t){Fn(this,e),t=zn(zn({},e.default),t),this.localMediaView=t.localMediaView,this.remoteMediaView=t.remoteMediaView,this.videoEnabled=t.videoEnabled,this.audioEnabled=t.audioEnabled,this.videoWidth=t.videoWidth,this.videoHeight=t.videoHeight,this.videoFps=t.videoFps,this.frontCamera=t.frontCamera}return Gn(e,null,[{key:"default",get:function(){return{localMediaView:null,remoteMediaView:null,audioEnabled:!0,videoEnabled:!0,videoWidth:null,videoHeight:null,videoFps:null,frontCamera:!0}}}]),e}();(xt=di=di||{}).NO_ANSWER="no_answer",xt.CANCELED="canceled",xt.DECLINED="declined",xt.OTHER_DEVICE_ACCEPTED="other_device_accepted",xt.COMPLETED="completed",xt.CONNECTION_LOST="connection_lost",xt.TIMED_OUT="timed_out",xt.DIAL_FAILED="dial_failed",xt.ACCEPT_FAILED="accept_failed",xt.UNKNOWN="unknown",(Q=hi=hi||{}).CALLER="dc_caller",Q.CALLEE="dc_callee";var vi=Math.min,yi=[].lastIndexOf,Ei=!!yi&&1/[1].lastIndexOf(1,-0)<0,xt=X("lastIndexOf"),Q=Be("indexOf",{ACCESSORS:!0,1:0});function bi(e){var t;return c(e)&&(void 0!==(t=e[Oi])?!!t:"RegExp"==s(e))}ae({target:"Array",proto:!0,forced:(xt=!Ei&&xt&&Q?yi:function(e){if(Ei)return yi.apply(this,arguments)||0;var t=l(this),n=te(t.length),r=n-1;for(1<arguments.length&&(r=vi(r,ee(arguments[1]))),r<0&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1})!==[].lastIndexOf},{lastIndexOf:xt});var Ci,Oi=le("match"),Ni=[].push,Si=Math.min,Ai=4294967295,Ii=!a(function(){return!RegExp(Ai,"y")});ea("split",2,function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(o(this)),a=void 0===n?Ai:n>>>0;if(0==a)return[];if(void 0===e)return[r];if(!bi(e))return t.call(r,e,a);for(var i,s,l,c=[],n=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,d=new RegExp(e.source,n+"g");(i=Va.call(d,r))&&!(u<(s=d.lastIndex)&&(c.push(r.slice(u,i.index)),1<i.length&&i.index<r.length&&Ni.apply(c,i.slice(1)),l=i[0].length,u=s,c.length>=a));)d.lastIndex===i.index&&d.lastIndex++;return u===r.length?!l&&d.test("")||c.push(""):c.push(r.slice(u)),c.length>a?c.slice(0,a):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var a=o(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,a,n):r.call(String(a),t,n)},function(e,a){var i=n(r,e,this,a,r!==t);if(i.done)return i.value;var s=f(e),o=String(this),i=Pr(s,RegExp),l=s.unicode,e=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Ii?"y":"g"),c=new i(Ii?s:"^(?:"+s.source+")",e),u=void 0===a?Ai:a>>>0;if(0==u)return[];if(0===o.length)return null===qa(c,o)?[o]:[];for(var d=0,h=0,p=[];h<o.length;){c.lastIndex=Ii?h:0;var _,m=qa(c,Ii?o:o.slice(h));if(null===m||(_=Si(te(c.lastIndex+(Ii?0:h)),o.length))===d)h=za(o,h,l);else{if(p.push(o.slice(d,h)),p.length===u)return p;for(var g=1;g<=m.length-1;g++)if(p.push(m[g]),p.length===u)return p;h=d=_}}return p.push(o.slice(d)),p}]},!Ii),(Q=Ci=Ci||{}).REMOTE_AUDIO_AND_VIDEO="remote_audio_and_video",Q.REMOTE_AUDIO_ONLY="remote_audio_only",Q.LOCAL_REMOTE_AUDIOS="local_remote_audios",Q.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO="local_audio_remote_audio_and_video",Q.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO="local_audio_and_video_remote_audio";var ki=function(){function e(t){var n;Fn(this,e),this.recordingType=t.recordingType,this.callId=t.callId,t.fileName?(n=fi?"mp4":"webm",t.fileName.toLocaleLowerCase().split(".").reverse()[0]!==n?this.fileName="".concat(t.fileName,".").concat(n):this.fileName=t.fileName):this.fileName=e.defaultFileName(this.recordingType,this.callId)}return Gn(e,[{key:"isVideo",get:function(){return this.recordingType===Ci.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO||this.recordingType===Ci.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO||this.recordingType===Ci.REMOTE_AUDIO_AND_VIDEO}}],[{key:"defaultFileName",value:function(e,t){var n=new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString(),r=(n=n.replace(/-|:/g,"")).lastIndexOf(".");return"".concat(e,"_").concat(t,"_").concat(n.substring(0,r)).concat(fi?".mp4":".webm")}}]),e}(),Ti=Object.assign,wi=Object.defineProperty,xt=!Ti||a(function(){if(m&&1!==Ti({b:1},Ti(wi({},"a",{enumerable:!0,get:function(){wi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Ti({},e)[n]||We(Ti({},t)).join("")!=r})?function(e,t){for(var n=oe(e),r=arguments.length,a=1,i=Oe.f,s=y.f;a<r;)for(var o,l=C(arguments[a++]),c=i?We(l).concat(i(l)):We(l),u=c.length,d=0;d<u;)o=c[d++],m&&!s.call(l,o)||(n[o]=l[o]);return n}:Ti;ae({target:"Object",stat:!0,forced:Object.assign!==xt},{assign:xt}),n(function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(n){l=function(e,t,n){return e[t]=n}}function c(e,n,r,a){var i,s,o,l,n=n&&n.prototype instanceof m?n:m,n=Object.create(n.prototype),a=new S(a||[]);return n._invoke=(i=e,s=r,o=a,l=d,function(e,n){if(l===f)throw new Error("Generator is already running");if(l===p){if("throw"===e)throw n;return I()}for(o.method=e,o.arg=n;;){var r=o.delegate;if(r){var a=function e(n,r){var a=n.iterator[r.method];if(a===t){if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}if("throw"===(a=u(a,n.iterator,r.arg)).type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var a=a.arg;return a?a.done?(r[n.resultName]=a.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}(r,o);if(a){if(a===_)continue;return a}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(l===d)throw l=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);if(l=f,"normal"===(a=u(i,s,o)).type){if(l=o.done?p:h,a.arg!==_)return{value:a.arg,done:o.done}}else"throw"===a.type&&(l=p,o.method="throw",o.arg=a.arg)}}),n}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",_={};function m(){}function g(){}function v(){}var y={};y[i]=function(){return this},(a=(a=Object.getPrototypeOf)&&a(a(A([]))))&&a!==n&&r.call(a,i)&&(y=a);var E=v.prototype=m.prototype=Object.create(y);function b(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function C(e,t){var n;this._invoke=function(a,i){function s(){return new t(function(n,s){!function n(a,i,s,o){if("throw"!==(a=u(e[a],e,i)).type){var l=a.arg,i=l.value;return i&&"object"==typeof i&&r.call(i,"__await")?t.resolve(i.__await).then(function(e){n("next",e,s,o)},function(e){n("throw",e,s,o)}):t.resolve(i).then(function(e){l.value=e,s(l)},function(e){return n("throw",e,s,o)})}o(a.arg)}(a,i,n,s)})}return n=n?n.then(s,s):s()}}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return n.next=n}}return{next:I}}function I(){return{value:t,done:!0}}return((g.prototype=E.constructor=v).constructor=g).displayName=l(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,o,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},b(C.prototype),C.prototype[s]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var s=new C(c(t,n,r,a),i);return e.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},b(E),l(E,o,"Generator"),E[i]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return o.type="throw",o.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;0<=i;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,a=n.completion;return"throw"===a.type&&(r=a.arg,N(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}});var ea=g("slice"),Q=Be("slice",{ACCESSORS:!0,0:0,1:2}),Ri=le("species"),Mi=[].slice,Li=Math.max;ae({target:"Array",proto:!0,forced:!ea||!Q},{slice:function(e,t){var n,r,a,i=l(this),s=te(i.length),o=ne(e,s),u=ne(void 0===t?s:t,s);if(Me(i)&&(("function"==typeof(n=i.constructor)&&(n===Array||Me(n.prototype))||c(n)&&null===(n=n[Ri]))&&(n=void 0),n===Array||void 0===n))return Mi.call(i,o,u);for(r=new(void 0===n?Array:n)(Li(u-o,0)),a=0;o<u;o++,a++)o in i&&_r(r,a,i[o]);return r.length=a,r}});var ea=g("splice"),Q=Be("splice",{ACCESSORS:!0,0:0,1:2}),Pi=Math.max,Di=Math.min;ae({target:"Array",proto:!0,forced:!ea||!Q},{splice:function(e,t){var n,r,a,i,s,o,l=oe(this),c=te(l.length),u=ne(e,c),e=arguments.length;if(0===e?n=r=0:r=1===e?(n=0,c-u):(n=e-2,Di(Pi(ee(t),0),c-u)),9007199254740991<c+n-r)throw TypeError("Maximum allowed length exceeded");for(a=ce(l,r),i=0;i<r;i++)(s=u+i)in l&&_r(a,i,l[s]);if(n<(a.length=r)){for(i=u;i<c-r;i++)o=i+n,(s=i+r)in l?l[o]=l[s]:delete l[o];for(i=c;c-r+n<i;i--)delete l[i-1]}else if(r<n)for(i=c-r;u<i;i--)o=i+n-1,(s=i+r-1)in l?l[o]=l[s]:delete l[o];for(i=0;i<n;i++)l[i+u]=arguments[i+2];return l.length=c-r+n,a}});var Ui=function(){function e(){Fn(this,e),Bn(this,"_listeners",{}),Bn(this,"on",this.addEventListener),Bn(this,"off",this.removeEventListener)}return Gn(e,[{key:"addEventListener",value:function(e,t){var n=this;return e in this._listeners||(this._listeners[e]=[]),this._listeners[e].push(t),function(){return n.removeEventListener(e,t)}}},{key:"once",value:function(e,t){var n=this;return this.on(e,function r(){t.apply(void 0,arguments),n.removeEventListener(e,r)})}},{key:"removeEventListener",value:function(e,t){if(e in this._listeners)for(var n=this._listeners[e],r=0,a=n.length;r<a;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"removeAllEventListeners",value:function(){this._listeners={}}},{key:"_dispatchEvent",value:function(e){if(e in this._listeners){for(var t=this._listeners[e].slice(),n=arguments.length,r=new Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i,s=0,o=t.length;s<o;s++)(i=t[s]).call.apply(i,[this].concat(r))}}}]),e}(),ea=w.f,xi=(Q=Function.prototype).toString,ji=/^\s*function ([^ (]*)/;function Fi(){Fn(this,Fi)}!m||"name"in Q||ea(Q,"name",{configurable:!0,get:function(){try{return xi.call(this).match(ji)[1]}catch(e){return""}}});var Hi,Gi=function(){function e(t){Fn(this,e),this.active=!1,this.queue=[],this.name=t}return Gn(e,[{key:"acquire",value:function(){var e=this;return new Promise(function(t){function n(){e.active=!0,t()}e.active?e.queue.push(n):n()})}},{key:"release",value:function(){var e;this.active&&(this.active=!1,(e=this.queue.shift())&&e())}}]),e}(),Bi=function(){qn(t,Fi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"getApiOption",value:function(){return{auth:this.getAuth(),path:this.getPath(),method:this.getMethod(),body:this.getData(),headers:this.getHeaders()}}},{key:"getAuth",value:function(){return!0}},{key:"getHeaders",value:function(){return{}}}]),t}(),Vi=function(){qn(t,Fi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).payload=n.payload||{},r}return t}(),zi=function(){qn(t,Fi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).type=n.type,r.version=n.version,r.messageId=n.message_id,r.deliveryInfo=n.delivery_info,r.sequenceNumber=n.sequence_number,r.payload=r.parseData(n.payload),r}return Gn(t,[{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),t}(),qi=function(){qn(t,Fi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).payload=r.parseData(n),r}return t}(),Ki=function(){qn(t,Fi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).version=n.version,r.messageId=n.message_id,r.type=n.type,r.deliveryInfo=n.delivery_info,r.sequenceNumber=n.sequence_number,r.payload=r.parseData(n.payload),r}return Gn(t,[{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),t}(),Yi=function(){qn(t,Bi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).roomId=n,r}return Gn(t,[{key:"getPath",value:function(){return"/v1/rooms".concat(this.getSubPath())}}]),t}(),Wi=function(){qn(t,zi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"getRoomId",value:function(){return this.payload.roomId}}]),t}(),Qi=function(){qn(t,qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return t}(),Ji=function(){qn(t,Ki);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"getRoomId",value:function(){return this.payload.roomId}}]),t}();(Q=Hi=Hi||{}).CREATE="create",Q.GET="get",Q.QUERY="query",Q.ENTER="enter",Q.EXIT="exit",Q.ALIVE="alive",Q.AUDIO="audio",Q.VIDEO="video",Q.CUSTOM_ITEMS_FETCH="custom_items_fetch",Q.CUSTOM_ITEMS_UPDATE="custom_items_update",Q.CUSTOM_ITEMS_DELETE="custom_items_delete",Q.ATTACH="attach",Q.CONNECTED="connected",Q.DETACH="detach",Q.CREATE_ENDPOINT="create_endpoint",Q.PUT_ENDPOINT="put_endpoint",Q.RELEASE_ENDPOINT="release_endpoint",Q.ROOM_DELETED="room_deleted",Q.PARTICIPANT_ENTERED="participant_entered",Q.PARTICIPANT_CONNECTED="participant_connected",Q.PARTICIPANT_EXITED="participant_exited",Q.PARTICIPANT_DISCONNECTED="participant_disconnected",Q.PARTICIPANT_AUDIO_STATUS_CHANGED="participant_audio_status_changed",Q.PARTICIPANT_VIDEO_STATUS_CHANGED="participant_video_status_changed";var Xi=function(){qn(t,Yi);var e=Zn(t);function t(n,r){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.ALIVE),n.participantId=r,n}return Gn(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/alive")}}]),t}(),$i=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a,i){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.ATTACH),n.participantId=r,n.endpointId=a,n.attachTo=i,n}return Gn(t,[{key:"getData",value:function(){return{attach_to:this.attachTo}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId,"/attach")}}]),t}(),Zi=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.AUDIO),n.participantId=r,n.enabled=a,n}return Gn(t,[{key:"getData",value:function(){return{on:this.enabled}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/audio")}}]),t}(),es=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.CONNECTED),n.participantId=r,n.endpointId=a,n}return Gn(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId,"/connected")}}]),t}(),ts=function(){qn(t,Yi);var e=Zn(t);function t(n){var r;return Fn(this,t),Bn($n(r=e.call(this,void 0)),"type",Hi.CREATE),r.params=n,r}return Gn(t,[{key:"getData",value:function(){return{type:this.params.roomType,custom_items:this.params.customItems}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return""}}]),t}(),ns=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a,i){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.CREATE_ENDPOINT),n.participantId=r,n.sdp=a,n.mediaDirection=i,n}return Gn(t,[{key:"getData",value:function(){return{sdp:this.sdp,audio_attr:this.mediaDirection.audio,video_attr:this.mediaDirection.video}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints")}}]),t}(),rs=function(){qn(t,Yi);var e=Zn(t);function t(n,r){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.CUSTOM_ITEMS_DELETE),n.customItemKeys=r,n}return Gn(t,[{key:"getData",value:function(){return 0<this.customItemKeys.length?{keys:this.customItemKeys}:{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),t}(),as=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a,i){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.DETACH),n.participantId=r,n.endpointId=a,n.attachTo=i,n}return Gn(t,[{key:"getData",value:function(){return{attach_to:this.attachTo}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),t}(),is=function(){qn(t,Yi);var e=Zn(t);function t(n,r){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.ENTER),n.params=r,n}return Gn(t,[{key:"getData",value:function(){return{is_audio_on:this.params.audioEnabled,is_video_on:this.params.videoEnabled}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants")}}]),t}(),ss=function(){qn(t,Yi);var e=Zn(t);function t(n,r){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.EXIT),n.participantId=r,n}return Gn(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId)}}]),t}(),os=function(){qn(t,Yi);var e=Zn(t);function t(n){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.CUSTOM_ITEMS_FETCH),n}return Gn(t,[{key:"getData",value:function(){}},{key:"getMethod",value:function(){return"GET"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),t}(),ls=function(){qn(t,Yi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.GET),n}return Gn(t,[{key:"getData",value:function(){}},{key:"getMethod",value:function(){return"GET"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId)}}]),t}(),cs=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a,i){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.PUT_ENDPOINT),n.participantId=r,n.endpointId=a,n.sdp=i,n}return Gn(t,[{key:"getData",value:function(){return{sdp:this.sdp}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),t}(),us=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.RELEASE_ENDPOINT),n.participantId=r,n.endpointId=a,n}return Gn(t,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),t}(),ds=z.filter,Q=g("filter"),g=Be("filter");ae({target:"Array",proto:!0,forced:!Q||!g},{filter:function(e){return ds(this,e,1<arguments.length?arguments[1]:void 0)}});var hs=[].join,Q=C!=Object,g=X("join",",");function fs(e){Fn(this,fs),Object.assign(this,e)}ae({target:"Array",proto:!0,forced:Q||!g},{join:function(e){return hs.call(l(this),void 0===e?",":e)}});var ps=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"createQuery",value:function(e){var t=this;return Object.keys(e).filter(function(t){return null!=e[t]}).map(function(n){return"".concat(encodeURIComponent(n),"=").concat(t.toQueryParam(e[n]))}).join("&")}},{key:"toQueryParam",value:function(e){return Array.isArray(e)?e.map(function(e){return encodeURIComponent(e.toString())}).join(","):encodeURIComponent(e.toString())}}]),e}(),_s=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),Bn($n(i=e.call(this)),"type",Hi.QUERY),i.params=i._normalizeParams(n),i.prev=r,i.next=a,i}return Gn(t,[{key:"getData",value:function(){}},{key:"getSubPath",value:function(){return"?".concat(this._createQuery())}},{key:"getMethod",value:function(){return"GET"}},{key:"_normalizeParams",value:function(e){var t=e.type,n=e.limit,r=e.state,a=e.currentParticipantCount,i=e.createdByUserIds,s=e.roomIds,e=e.createdAt;return{type:t,limit:null!=n?Math.min(Math.max(1,n),100):void 0,state:r,currentParticipantCount:a,createdByUserIds:i,roomIds:s,createdAt:e}}},{key:"_createQuery",value:function(){var e;return ps.createQuery({type:this.params.type,limit:this.params.limit,state:this.params.state,current_participant_range_gte:null===(e=this.params.currentParticipantCount)||void 0===e?void 0:e[0],current_participant_range_lte:null===(e=this.params.currentParticipantCount)||void 0===e?void 0:e[1],created_by_user_ids:this.params.createdByUserIds,room_ids:this.params.roomIds,created_at_start_date:null===(e=this.params.createdAt)||void 0===e?void 0:e[0],created_at_end_date:null===(e=this.params.createdAt)||void 0===e?void 0:e[1],prev:this.prev,next:this.next})}}]),t}(),ms=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.CUSTOM_ITEMS_UPDATE),n.customItems=r,n.mode=a,n}return Gn(t,[{key:"getData",value:function(){return{custom_items:this.customItems,mode:this.mode}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),t}(),gs=function(){qn(t,Yi);var e=Zn(t);function t(n,r,a){return Fn(this,t),Bn($n(n=e.call(this,n)),"type",Hi.VIDEO),n.participantId=r,n.enabled=a,n}return Gn(t,[{key:"getData",value:function(){return{on:this.enabled}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/video")}}]),t}(),vs=function(){qn(t,Wi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.CUSTOM_ITEMS_DELETE),n}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id,deleted:e.deleted,customItems:e.custom_items,affectedAt:e.affected_at}}}]),t}(),ys=function(){qn(t,Wi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id}}}]),t}(),Es=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"parseRoom",value:function(t){return t?{roomId:t.room_id,state:t.state,roomType:t.room_type,customItems:t.custom_items,createdAt:t.created_at,createdBy:t.created_by,participants:e.parseParticipants(t.current_participants)}:{}}},{key:"parseCustomItemsResult",value:function(e){return{customItems:e.custom_items||{},affectedKeys:[].concat(nr(e.updated||[]),nr(e.deleted||[])),affectedAt:e.affected_at||0}}},{key:"parseParticipants",value:function(t){return t&&Array.isArray(t)?t.map(function(t){return e.parseParticipant(t)}):[]}},{key:"parseParticipant",value:function(e){return e?{participantId:e.participant_id,enteredAt:e.entered_at,updatedAt:e.updated_at,exitedAt:e.exited_at,duration:e.duration,state:e.state,user:new fs(ui(e.user)),isLocalParticipant:e.is_local_participant,clientId:e.client_id,isAudioEnabled:e.is_audio_on,isVideoEnabled:e.is_video_on}:{}}}]),e}(),bs=function(){qn(t,Wi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.PARTICIPANT_AUDIO_STATUS_CHANGED),n}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Es.parseParticipant(e.participant),on:e.on}}}]),t}(),Cs=function(){qn(t,Wi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.PARTICIPANT_CONNECTED),n}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Es.parseParticipant(e.participant)}}}]),t}(),Os=function(){qn(t,Wi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.PARTICIPANT_DISCONNECTED),n}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Es.parseParticipant(e.participant),reason:e.reason}}}]),t}(),Ns=function(){qn(t,Wi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.PARTICIPANT_ENTERED),n}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Es.parseParticipant(e.participant)}}}]),t}(),Ss=function(){qn(t,Wi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.PARTICIPANT_EXITED),n}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Es.parseParticipant(e.participant)}}}]),t}(),As=function(){qn(t,Wi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.PARTICIPANT_VIDEO_STATUS_CHANGED),n}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Es.parseParticipant(e.participant),on:e.on}}}]),t}(),Is=function(){qn(t,Wi);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Hi.CUSTOM_ITEMS_UPDATE),n}return Gn(t,[{key:"parseData",value:function(e){return{roomId:e.room_id,updated:e.updated,customItems:e.custom_items,affectedAt:e.affected_at}}}]),t}(),ks=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{}}}]),t}(),Ts=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{}}}]),t}(),ws=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{me:Es.parseParticipant(e.me)}}}]),t}(),Rs=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{}}}]),t}(),Ms=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{endpointId:e.endpoint_id,sdp:e.sdp}}}]),t}(),Ls=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{room:Es.parseRoom(e.room)}}}]),t}(),Ps=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return Es.parseCustomItemsResult(e)}}]),t}(),Ds=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{}}}]),t}(),Us=z.find,xs=!0,z=Be(g="find");g in[]&&Array(1)[g](function(){xs=!1}),ae({target:"Array",proto:!0,forced:xs||!z},{find:function(e){return Us(this,e,1<arguments.length?arguments[1]:void 0)}}),Pe(g);for(var js,Fs=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return e.room.current_participants.find(function(t){return t.participant_id===e.me.participant_id}).is_local_participant=!0,e.me.is_local_participant=!0,{me:Es.parseParticipant(e.me),room:Es.parseRoom(e.room)}}}]),t}(),Hs=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{}}}]),t}(),Gs=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return Es.parseCustomItemsResult(e)}}]),t}(),Bs=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{room:Es.parseRoom(e.room)}}}]),t}(),Vs=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{endpointId:e.endpoint_id,sdp:e.sdp}}}]),t}(),zs=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{}}}]),t}(),qs=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{rooms:e.rooms.map(function(e){return Es.parseRoom(e)}),prev:e.prev,next:e.next}}}]),t}(),Ks=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return Es.parseCustomItemsResult(e)}}]),t}(),Ys=function(){qn(t,Qi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{me:Es.parseParticipant(e.me)}}}]),t}(),Ws=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"createCreate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(ts,t)}},{key:"createGet",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(ls,t)}},{key:"createRoomListQuery",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(_s,t)}},{key:"createEnter",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(is,t)}},{key:"createExit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(ss,t)}},{key:"createCreateEndpoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(ns,t)}},{key:"createPutEndpoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(cs,t)}},{key:"createReleaseEndpoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(us,t)}},{key:"createAttach",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn($i,t)}},{key:"createConnected",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(es,t)}},{key:"createDetach",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(as,t)}},{key:"createAlive",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(Xi,t)}},{key:"createAudio",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(Zi,t)}},{key:"createVideo",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(gs,t)}},{key:"createFetchCustomItems",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(os,t)}},{key:"createUpdateCustomItems",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(ms,t)}},{key:"createDeleteCustomItems",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn(rs,t)}},{key:"parseResponse",value:function(e,t){switch(e){case Hi.CREATE:return new Ls(t);case Hi.GET:return new Bs(t);case Hi.QUERY:return new qs(t);case Hi.ENTER:return new Fs(t);case Hi.EXIT:return new Hs(t);case Hi.CUSTOM_ITEMS_FETCH:return new Gs(t);case Hi.CUSTOM_ITEMS_UPDATE:return new Ks(t);case Hi.CUSTOM_ITEMS_DELETE:return new Ps(t);case Hi.CREATE_ENDPOINT:return new Ms(t);case Hi.PUT_ENDPOINT:return new Vs(t);case Hi.RELEASE_ENDPOINT:return new zs(t);case Hi.ATTACH:return new Ts(t);case Hi.CONNECTED:return new Rs(t);case Hi.DETACH:return new Ds(t);case Hi.ALIVE:return new ks(t);case Hi.AUDIO:return new ws(t);case Hi.VIDEO:return new Ys(t);default:return void _i.error(new ai(Tn.ERR_WRONG_RESPONSE,{error:new Error("unhandled command data. ".concat(JSON.stringify(t)))}))}}},{key:"parse",value:function(e){switch(e.type){case Hi.CUSTOM_ITEMS_UPDATE:return new Is(e);case Hi.CUSTOM_ITEMS_DELETE:return new vs(e);case Hi.ROOM_DELETED:return new ys(e);case Hi.PARTICIPANT_ENTERED:return new Ns(e);case Hi.PARTICIPANT_CONNECTED:return new Cs(e);case Hi.PARTICIPANT_EXITED:return new Ss(e);case Hi.PARTICIPANT_DISCONNECTED:return new Os(e);case Hi.PARTICIPANT_AUDIO_STATUS_CHANGED:return new bs(e);case Hi.PARTICIPANT_VIDEO_STATUS_CHANGED:return new As(e);default:return void _i.error(new ai(Tn.ERR_WRONG_RESPONSE,{error:new Error("unhandled command data. ".concat(JSON.stringify(e)))}))}}}]),e}(),Qs=(function(e){var t,n,r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);r?(t=new Uint8Array(16),e.exports=function(){return r(t),t}):(n=new Array(16),e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n})}(js={exports:{}}),js.exports),Js=[],Xs=0;Xs<256;++Xs)Js[Xs]=(Xs+256).toString(16).substr(1);var $s=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||Qs)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var i=0;i<16;++i)t[r+i]=a[i];return t||function(e,t){return t=t||0,[Js[e[t++]],Js[e[t++]],Js[e[t++]],Js[e[t++]],"-",Js[e[t++]],Js[e[t++]],"-",Js[e[t++]],Js[e[t++]],"-",Js[e[t++]],Js[e[t++]],"-",Js[e[t++]],Js[e[t++]],Js[e[t++]],Js[e[t++]],Js[e[t++]],Js[e[t++]]].join("")}(a)},Zs=e.includes;ae({target:"Array",proto:!0,forced:!(g=Be("indexOf",{ACCESSORS:!0,1:0}))},{includes:function(e){return Zs(this,e,1<arguments.length?arguments[1]:void 0)}}),Pe("includes");var eo=le("match");function to(e){var t,n,r,a,i,s,o,l=u(e,!1);if("string"==typeof l&&2<l.length)if(43===(t=(l=so(l)).charCodeAt(0))||45===t){if(88===(e=l.charCodeAt(2))||120===e)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(i=(a=l.slice(2)).length,s=0;s<i;s++)if((o=a.charCodeAt(s))<48||r<o)return NaN;return parseInt(a,n)}return+l}ae({target:"String",proto:!0,forced:!function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[eo]=!1,"/./"[t](n)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~String(o(this)).indexOf(function(e){if(bi(e))throw TypeError("The method doesn't accept regular expressions");return e}(e),1<arguments.length?arguments[1]:void 0)}});var g="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",no=RegExp("^"+g+g+"*"),ro=RegExp(g+g+"*$"),g={start:(Pe=function(e){return function(t){return t=String(o(t)),1&e&&(t=t.replace(no,"")),2&e&&(t=t.replace(ro,"")),t}})(1),end:Pe(2),trim:Pe(3)},Pe=Ce.f,ao=k.f,io=w.f,so=g.trim,oo="Number",lo=_[oo],co=lo.prototype,uo=s(tt(co))==oo;if(we(oo,!lo(" 0o1")||!lo("0b1")||lo("+0x1"))){for(var ho,fo=function e(t){var t=arguments.length<1?0:t,n=this;return n instanceof e&&(uo?a(function(){co.valueOf.call(n)}):s(n)!=oo)?Yt(new lo(to(t)),n,e):to(t)},po=m?Pe(lo):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_o=0;po.length>_o;_o++)d(lo,ho=po[_o])&&!d(fo,ho)&&io(fo,ho,ao(lo,ho));(fo.prototype=co).constructor=fo,he(_,oo,fo)}function mo(e){return void 0===e||Number.isNaN(e)||""===e||e===[]}function go(e){Object.keys(e).forEach(function(t){mo(e[t])&&delete e[t]})}function vo(e){var t=zn(zn({},e),{},{transport_info:zn({},e.transport_info),audio:zn({},e.audio)});return e.video&&(t.video=zn({},e.video)),t}function yo(e,t){var n=vo(e),r=n.audio,e=n.video;return r.packets_lost=r.total_packets_lost,r.packets_received=r.total_packets_received,t&&(r.packets_lost-=t.audio.total_packets_lost,r.packets_received-=t.audio.total_packets_received),r.packets_lost_rate=r.packets_lost/(r.packets_lost+r.packets_received)*100,e.packets_lost=e.total_packets_lost,e.packets_received=e.total_packets_received,t&&(e.packets_lost-=t.video.total_packets_lost,e.packets_received-=t.video.total_packets_received),e.packets_lost_rate=e.packets_lost/(e.packets_lost+e.packets_received)*100,r.rtt&&(r.mos=function(e,t,n){if(!(mo(e)||mo(t)||mo(n))){var r,t=n+2*t+10,t=t<160?93.2-t/40:93.2-(t-120)/10;return(t-=2.5*e)<=0?r=1:0<t&&t<100?r=1+.035*t+7e-6*t*(t-60)*(100-t):100<=t&&(r=4.5),r}}(r.packets_lost,r.jitter,r.rtt)),n}function Eo(e,t){return(null!=e?e:0)+(null!=t?t:0)}function bo(e,t,n){return(null!=e?e:0)*n+(null!=t?t:0)*(1-n)}function Co(e,t){var n=vo(e);return t&&(r("audio")("total_packets_sent"),r("audio")("total_packets_received"),r("audio")("total_packets_lost"),r("audio")("total_packets_lost_rate"),r("audio")("retransmitted_packets_sent"),r("audio")("jitter_buffer_delay"),r("video")("fir_count"),r("video")("pli_count"),r("video")("nack_count"),r("video")("qp_sum"),r("video")("retransmitted_packets_sent"),r("video")("quality_limitation_resolution_changes"),"none"===n.video.quality_limitation_reason&&(n.video.quality_limitation_reason=t.video.quality_limitation_reason),r("video")("header_bytes_received"),r("video")("key_frames_decoded"),r("video")("total_decode_time"),r("video")("total_inter_frame_delay"),r("video")("total_squared_inter_frame_delay"),r("video")("total_packets_lost"),r("video")("total_packets_received"),r("video")("total_packets_lost_rate"),r("video")("jitter_buffer_delay"),r("video")("jitter_buffer_emitted_count"),r("video")("frames_received"),r("video")("frames_decoded"),r("video")("frames_dropped"),r("video")("freeze_count"),r("video")("pause_count"),r("video")("total_freezes_duration"),r("video")("total_pauses_duration"),r("video")("total_frames_duration"),r("video")("sum_of_squared_frames_duration")),n;function r(e){return"audio"===e?function(e){n.audio[e]=Eo(n.audio[e],t.audio[e])}:function(e){n.video[e]=Eo(n.video[e],t.video[e])}}}function Oo(e,t,n){var r=vo(e);if(n<=1||!t)return r;var a=1/n,i=1/(n-1);function s(e){return"audio"===e?function(e){r.audio[e]=Eo(r.audio[e],t.audio[e])}:function(e){r.video[e]=Eo(r.video[e],t.video[e])}}function o(e){return"audio"===e?function(e){r.audio[e]=bo(r.audio[e],t.audio[e],["rtt","mos"].includes(e)?i:a)}:function(e){r.video[e]=bo(r.video[e],t.video[e],["rtt","mos"].includes(e)?i:a)}}function l(e){return"audio"===e?function(e){r.audio[e]=t.audio[e]}:function(e){r.video[e]=t.video[e]}}return l("audio")("codec"),o("audio")("rtt"),o("audio")("jitter"),s("audio")("packets_lost"),o("audio")("packets_lost_rate"),o("audio")("mos"),l("video")("codec"),o("video")("rtt"),s("video")("packets_lost"),o("video")("packets_lost_rate"),o("video")("video_source_width"),o("video")("video_source_height"),o("video")("video_source_frames_per_second"),o("video")("received_frame_width"),o("video")("received_frame_height"),o("video")("sent_frame_width"),o("video")("sent_frame_height"),r}ae({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var No,So=function(){var e=jn(r.mark(function e(t){var n,a,i,s,o,l,c,u;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("'getCandidateInfo()' is called without rtcConnection");case 2:return e.next=4,t.getStats();case 4:n=e.sent,i=n.entries(),s=0;case 7:if(!(s<n.size)){e.next=18;break}if(o=(o=i.next()).value){e.next=11;break}return e.abrupt("continue",15);case 11:if("candidate-pair"===(u=o[1]).type&&"succeeded"===u.state)return a=u.localCandidateId,e.abrupt("break",18);e.next=15;break;case 15:s++,e.next=7;break;case 18:if(!(s<n.size)){e.next=28;break}if(c=i.next(),l=c.value){e.next=22;break}return e.abrupt("continue",25);case 22:if("local-candidate"===(u=l[1]).type&&u.id===a)return e.abrupt("return",{connectionType:null!==(c=u.candidateType)&&void 0!==c?c:"",protocol:null!==(c=u.protocol)&&void 0!==c?c:"",relayProtocol:null!==(u=u.relayProtocol)&&void 0!==u?u:""});e.next=25;break;case 25:s++,e.next=18;break;case 28:return e.abrupt("return",null);case 29:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ao=function(){var e=jn(r.mark(function e(t){var n,a,i,s,o,l,c;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a={},i={},s={},o=new Map,l=new Map,t.forEach(function(e){"codec"===e.type&&o.set(e.id,e),"candidate-pair"===e.type&&"succeeded"===e.state&&(c=e.localCandidateId,n.webrtc_timestamp=e.time),"media-source"===e.type&&l.set(e.kind,e)}),t.forEach(function(e){var t,n,r;"local-candidate"===e.type&&e.id===c&&(a.network_type=e.networkType,a.protocol=e.protocol,a.candidate_type=e.candidateType),"audio"!==e.kind&&"audio"!==e.mediaType||("outbound-rtp"===e.type&&(i.codec=null===(t=o.get(e.codecId))||void 0===t?void 0:t.mimeType,i.total_packets_sent=e.packetsSent,i.retransmitted_packets_sent=e.retransmittedPacketsSent),"remote-inbound-rtp"===e.type&&(i.rtt=1e3*e.roundTripTime),"inbound-rtp"===e.type&&(n=e.packetsLost/(e.packetsLost+e.packetsReceived)*100,i.total_packets_received=e.packetsReceived,i.total_packets_lost_rate=n,i.total_packets_lost=e.packetsLost,i.jitter=1e3*e.jitter),"track"===e.type&&e.remoteSource&&(i.jitter_buffer_delay=e.jitterBufferDelay,i.jitter_buffer_emitted_count=e.jitterBufferDelayEmittedCount)),"video"!==e.kind&&"video"!==e.mediaType||(s.video_source_width=null===(n=l.get("video"))||void 0===n?void 0:n.width,s.video_source_height=null===(n=l.get("video"))||void 0===n?void 0:n.height,s.video_source_frames_per_second=null===(n=l.get("video"))||void 0===n?void 0:n.framesPerSecond,"outbound-rtp"===e.type&&(s.codec=null===(r=o.get(e.codecId))||void 0===r?void 0:r.mimeType,s.fir_count=e.firCount,s.pli_count=e.pliCount,s.nack_count=e.nackCount,s.qp_sum=e.qpSum,s.retransmitted_packets_sent=e.retransmittedBytesSent,s.quality_limitation_reason=e.qualityLimitationReason,s.quality_limitation_resolution_changes=e.qualityLimitationResolutionChanges),"remote-inbound-rtp"===e.type&&(s.rtt=1e3*e.roundTripTime),"inbound-rtp"===e.type&&(s.header_bytes_received=e.headerBytesReceived,s.key_frames_decoded=e.keyFramesDecoded,s.total_decode_time=e.totalDecodeTime,s.total_inter_frame_delay=e.totalInterFrameDelay,s.total_squared_inter_frame_delay=e.totalSquaredInterFrameDelay,r=e.packetsLost/(e.packetsLost+e.packetsReceived)*100,s.total_packets_lost=e.packetsLost,s.total_packets_received=e.packetsReceived,s.total_packets_lost_rate=r),"track"===e.type&&(e.remoteSource?(s.jitter_buffer_delay=e.jitterBufferDelay,s.jitter_buffer_emitted_count=e.jitterBufferDelayEmittedCount,s.received_frame_width=e.frameWidth,s.received_frame_height=e.frameHeight,s.frames_received=e.framesReceived,s.frames_decoded=e.framesDecoded,s.frames_dropped=e.framesDropped,s.freeze_count=e.freezeCount,s.pause_count=e.pauseCount,s.total_freezes_duration=e.totalFreezesDuration,s.total_pauses_duration=e.totalPausesDuration,s.total_frames_duration=e.totalFramesDuration,s.sum_of_squared_frames_duration=e.sumOfSquaredFramesDuration):(s.sent_frame_width=e.frameWidth,s.sent_frame_height=e.frameHeight)))}),go(a),go(i),go(s),n.transport_info=a,n.audio=i,n.video=s,e.abrupt("return",n);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Io=function(){var e=jn(r.mark(function e(t){var n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("'getStats()' is called without rtcConnection");case 2:return e.next=4,t.getStats();case 4:return n=e.sent,e.abrupt("return",Ao(n));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ko=function(){qn(t,Vi);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return t}();(Pe=No=No||{}).OFFER="offer",Pe.ANSWER="answer",Pe.CANDIDATE="candidate";var To,wo=function(){qn(t,ko);var e=Zn(t);function t(n){return Fn(this,t),Bn($n(n=e.call(this,{payload:n})),"type",No.ANSWER),n}return t}(),Ro=function(){qn(t,ko);var e=Zn(t);function t(n){return Fn(this,t),Bn($n(n=e.call(this,{payload:n})),"type",No.CANDIDATE),n}return t}(),Mo=function(){qn(t,ko);var e=Zn(t);function t(n){return Fn(this,t),Bn($n(n=e.call(this,{payload:n})),"type",No.OFFER),n}return t}(),Lo=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"createOffer",value:function(e,t){return new Mo({peerConnectionId:e,sdp:t})}},{key:"createAnswer",value:function(e,t){return new wo({peerConnectionId:e,sdp:t})}},{key:"createCandidate",value:function(e,t){return new Ro({peerConnectionId:e,candidate:t})}}]),e}(),Po=function(){function e(t){Fn(this,e),this._context=t}return Gn(e,[{key:"_changeState",value:function(e){this._state&&this._state.type===e.type?_i.error(new Error("self-transition is not allowed")):(_i.debug("[".concat(this.name,"] state: ").concat(this._state?this._state.type:"null"," -> ").concat(e.type)),this._state&&this._state.destroy(),this._state=e,this._state.context=this._context,this._state.start())}},{key:"state",get:function(){return this._state}}]),e}(),Do=function(){function e(t){Fn(this,e),this._stateMutator=t}return Gn(e,[{key:"start",value:function(){this._onStart()}},{key:"destroy",value:function(){this._onDestroy()}},{key:"context",set:function(e){this._context=e}}]),e}(),Uo=function(){function e(t,n){Fn(this,e),this._context=t,this._stateMutator=n}return Gn(e,[{key:"state",get:function(){return this._stateMutator.state}}]),e}(),xo=function(){qn(t,Do);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this,n))._stateMutator=n,r}return t}();(Pe=To=To||{}).IDLE="idle",Pe.OFFERING="offering",Pe.ANSWERING="answering",Pe.CONNECTED="connected",Pe.RECONNECTING="reconnecting",Pe.ICE_RESTART_OFFERING="iceRestartOffering",Pe.ICE_RESTART_ANSWERING="iceRestartAnswering",Pe.CLOSED="closed";var jo,Fo=function(){qn(n,xo);var e,t=Zn(n);function n(e,r){var a;return Fn(this,n),Bn($n(a=t.call(this,e)),"type",To.ANSWERING),a._stateMutator=e,a._offerCommand=r,a}return Gn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("answering"),this._context.createRTCConnection(),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(e=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._context.setRemoteDescription("offer",t.payload.sdp);case 2:this._context.prepareSessionDescription(),this._context.sendAnswer().catch(function(e){return _i.debug(e)});case 4:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!1)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),n}(),Ho=function(){qn(t,xo);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",To.CLOSED),n}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("closed")}},{key:"_onDestroy",value:function(){}}]),t}(),Go=function(){qn(n,xo);var e,t=Zn(n);function n(e,r){var a;return Fn(this,n),Bn($n(a=t.call(this,e)),"type",To.CONNECTED),a._stateMutator=e,a._isReconnected=r,a}return Gn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("connected")}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(e=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._stateMutator.toReconnecting(t);case 1:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"onIceDisconnected",value:function(){this._stateMutator.toReconnecting()}},{key:"onIceFailed",value:function(){this._context.isDisposable&&this.onClose(),this._context.isInitiator?this._stateMutator.toIceRestartOffering():this._stateMutator.toIceRestartAnswering()}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),n}(),Bo=function(){qn(n,xo);var e,t=Zn(n);function n(e,r){var a;return Fn(this,n),Bn($n(a=t.call(this,e)),"type",To.ICE_RESTART_ANSWERING),a._stateMutator=e,a._offerCommand=r,a}return Gn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("iceRestartAnswering"),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(e=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._context.setRemoteDescription("offer",t.payload.sdp);case 2:this._context.sendAnswer().catch(function(e){return _i.debug(e)});case 3:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),n}(),Vo=function(){qn(t,xo);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",To.ICE_RESTART_OFFERING),n}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("iceRestartOffering"),this._context.sendOffer(!0)}},{key:"_onDestroy",value:function(){}},{key:"onAnswerReceived",value:function(e){this._context.setRemoteDescription("answer",e.payload.sdp)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),t}(),zo=function(){qn(n,xo);var e,t=Zn(n);function n(){var e;Fn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(e=t.call.apply(t,[this].concat(a))),"type",To.IDLE),e}return Gn(n,[{key:"_onStart",value:function(){}},{key:"_onDestroy",value:function(){}},{key:"createOffer",value:function(){this._stateMutator.toOffering()}},{key:"onOfferReceived",value:(e=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._stateMutator.toAnswering(t);case 1:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),n}(),qo=function(){qn(t,xo);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",To.OFFERING),n}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("offering"),this._context.createRTCConnection(),this._context.prepareSessionDescription()}},{key:"_onDestroy",value:function(){}},{key:"onAnswerReceived",value:function(e){this._context.setRemoteDescription("answer",e.payload.sdp)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!1)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),t}(),Ko=function(){qn(t,xo);var e=Zn(t);function t(n,r){var a;return Fn(this,t),Bn($n(a=e.call(this,n)),"type",To.RECONNECTING),a._stateMutator=n,a._offerCommand=r,a}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("reconnecting"),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:function(e){this._stateMutator.toIceRestartAnswering(e)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onIceFailed",value:function(){this._context.isDisposable&&this.onClose(),this._context.isInitiator?this._stateMutator.toIceRestartOffering():this._stateMutator.toIceRestartAnswering()}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),t}(),Yo=function(){qn(t,Po);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"toIdle",value:function(){this._changeState(new zo(this))}},{key:"toOffering",value:function(){this._changeState(new qo(this))}},{key:"toAnswering",value:function(e){this._changeState(new Fo(this,e))}},{key:"toConnected",value:function(e){this._changeState(new Go(this,e))}},{key:"toReconnecting",value:function(e){this._changeState(new Ko(this,e))}},{key:"toIceRestartOffering",value:function(){this._changeState(new Vo(this))}},{key:"toIceRestartAnswering",value:function(e){this._changeState(new Bo(this,e))}},{key:"toClosed",value:function(){this._changeState(new Ho(this))}},{key:"state",get:function(){return this._state}},{key:"name",get:function(){return"PeerConnection"}}]),t}(),Wo=function(){qn(t,Uo);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this,n,new Yo(n)))._context=n,r._stateMutator.toIdle(),r}return Gn(t,[{key:"onOfferReceived",value:function(e){_i.verbose("[".concat(this.state.type,"] onOfferReceived"));var t=this.state;switch(t.type){case To.IDLE:case To.ANSWERING:case To.CONNECTED:case To.RECONNECTING:case To.ICE_RESTART_ANSWERING:t.onOfferReceived(e);break;default:_i.error("[".concat(this.state.type,"] onOfferReceived"))}}},{key:"onAnswerReceived",value:function(e){_i.verbose("[".concat(this.state.type,"] onAnswerReceived"));var t=this.state;switch(t.type){case To.OFFERING:case To.ICE_RESTART_OFFERING:t.onAnswerReceived(e);break;default:_i.error("[".concat(this.state.type,"] onAnswerReceived"))}}},{key:"onClose",value:function(){_i.verbose("[".concat(this.state.type,"] onClose"));var e=this.state;switch(e.type){case To.IDLE:case To.OFFERING:case To.ANSWERING:case To.CONNECTED:case To.RECONNECTING:case To.ICE_RESTART_OFFERING:case To.ICE_RESTART_ANSWERING:e.onClose();break;default:_i.error("[".concat(this.state.type,"] onClose"))}}},{key:"createOffer",value:function(){_i.verbose("[".concat(this.state.type,"] createOffer"));var e=this.state;e.type===To.IDLE?e.createOffer():_i.error("[".concat(this.state.type,"] createOffer"))}},{key:"onIceConnected",value:function(){_i.verbose("[".concat(this.state.type,"] onIceConnected"));var e=this.state;switch(e.type){case To.OFFERING:case To.ANSWERING:case To.RECONNECTING:case To.ICE_RESTART_OFFERING:case To.ICE_RESTART_ANSWERING:e.onIceConnected();break;default:_i.error("[".concat(this.state.type,"] onIceConnected"))}}},{key:"onIceDisconnected",value:function(){_i.verbose("[".concat(this.state.type,"] onIceDisconnected"));var e=this.state;e.type===To.CONNECTED?e.onIceDisconnected():_i.error("[".concat(this.state.type,"] onIceDisconnected"))}},{key:"onIceFailed",value:function(){_i.verbose("[".concat(this.state.type,"] onIceFailed"));var e=this.state;switch(e.type){case To.CONNECTED:case To.RECONNECTING:e.onIceFailed();break;default:_i.error("[".concat(this.state.type,"] onIceFailed"))}}},{key:"state",get:function(){return this._stateMutator.state}}]),t}();function Qo(){var e=this;Fn(this,Qo),this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}(Pe=jo=jo||{}).RELAY="relay",Pe.ALL="all";var Jo,Xo=function(){qn(s,Ui);var e,t,n,a,i=Zn(s);function s(e,t,n,r,a,o,l,c){var u;return Fn(this,s),(u=i.call(this))._ctx=e,u.id=t,u._signalingClient=n,u._localStream=r,u._isInitiator=a,u._turnCredential=o,u._mediaDirections=l,u._isDisposable=c,u._stateMachine=new Wo({dispatchEvent:u._dispatchEvent.bind($n(u)),isInitiator:u._isInitiator,setRemoteDescription:u._setRemoteDescription.bind($n(u)),sendAnswer:u._sendAnswer.bind($n(u)),sendOffer:u._sendOffer.bind($n(u)),createRTCConnection:u._createRTCConnection.bind($n(u)),prepareSessionDescription:u._prepareSessionDescription.bind($n(u)),isDisposable:u._isDisposable}),r&&r.on("streamChanged",function(e){return u.onLocalStream(e)}),u}return Gn(s,[{key:"onEvent",value:function(e){switch(e.type){case No.CANDIDATE:return void this._receiveCandidate(e);case No.OFFER:this._stateMachine.onOfferReceived(e);break;case No.ANSWER:this._stateMachine.onAnswerReceived(e);break;default:_i.error(new Error("unhandled call event ".concat(e)))}}},{key:"createOffer",value:function(){this._stateMachine.createOffer()}},{key:"close",value:function(){this._closeRTCConnection(),this._stateMachine.onClose()}},{key:"onLocalStream",value:function(e){if(this._rtcConnection){var t=lr(e.getTracks());try{for(t.s();!(n=t.n()).done;){var n=n.value;this._replaceTrack(n)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"getCandidateInfo",value:(a=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",So(this.rtcConnection));case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"getStatsLog",value:(n=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io(this.rtcConnection));case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_replaceTrack",value:function(e){var t=lr(this._rtcConnection.getSenders());try{for(t.s();!(n=t.n()).done;){var n=n.value;n.track&&n.track.kind===e.kind&&n.replaceTrack(e)}}catch(e){t.e(e)}finally{t.f()}}},{key:"_createRTCConnection",value:function(){var e,t=this;this._turnCredential&&(e={iceServers:[{username:this._turnCredential.username,credential:this._turnCredential.password,urls:this._turnCredential.turnUrls}],iceTransportPolicy:this._turnCredential.transportPolicy||jo.ALL});var n=new RTCPeerConnection(e);n.onnegotiationneeded=function(){t._sendOffer(!1)},n.onicecandidate=function(e){var n,r;e.candidate&&null!==(n=(r=t._signalingClient).sendCandidate)&&void 0!==n&&n.call(r,e.candidate)},n.onconnectionstatechange=function(){return t._handleConnectionStateChange(n)},n.oniceconnectionstatechange=function(){return t._handleIceConnectionStateChange(n)},n.ontrack=function(e){return t._onRemoteTrack(e)},this._rtcConnection=n}},{key:"_closeRTCConnection",value:function(){this._rtcConnection&&(this._rtcConnection.onnegotiationneeded=null,this._rtcConnection.onicecandidate=null,this._rtcConnection.oniceconnectionstatechange=null,this._rtcConnection.onconnectionstatechange=null,this._rtcConnection.close(),this._rtcConnection=null,delete this._remoteStream)}},{key:"_prepareSessionDescription",value:function(){var e=this._mediaDirections,t=e.audio,n=e.video,e={sendrecv:[],sendonly:[],recvonly:[],none:[]};e[t].push("audio"),e[n].push("video"),e.sendrecv.length&&this._addTracks(e.sendrecv),e.sendonly.length&&this._addSendOnlyTransceivers(e.sendonly),e.recvonly.length&&this._addReceiveOnlyTransceivers(e.recvonly)}},{key:"_addTracks",value:function(e){var t=this;_i.debug("_addTracks()");var n=this._localStream.localStream;n.getTracks().forEach(function(r){e.includes(r.kind)&&t._rtcConnection.addTrack(r,n)})}},{key:"_addReceiveOnlyTransceivers",value:function(e){var t=this;e.forEach(function(e){t._rtcConnection.addTransceiver(e,{direction:"recvonly"})})}},{key:"_addSendOnlyTransceivers",value:function(e){var t=this,n=this._localStream.localStream;e.forEach(function(e){n.getTracks().forEach(function(r){r.kind===e&&t._rtcConnection.addTransceiver(r,{direction:"sendonly",streams:[n]})})})}},{key:"_setRemoteDescription",value:function(e,t){return t=t.replace(/a=extmap:0 ulpfec\r\n/,""),t=new RTCSessionDescription({type:e,sdp:t}),this._rtcConnection.setRemoteDescription(t)}},{key:"_sendOffer",value:(t=jn(r.mark(function e(t){var n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={iceRestart:t||!1},e.next=3,this._rtcConnection.createOffer(n);case 3:return n=e.sent,e.next=6,this._rtcConnection.setLocalDescription(n);case 6:return e.abrupt("return",this._signalingClient.sendOfferSdp(this._rtcConnection.localDescription));case 7:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_sendAnswer",value:(e=jn(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rtcConnection.createAnswer();case 2:return(t=e.sent).sdp=t.sdp.replace("actpass","active"),e.next=6,this._rtcConnection.setLocalDescription(t);case 6:return e.abrupt("return",this._signalingClient.sendAnswerSdp(this._rtcConnection.localDescription));case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_handleIceConnectionStateChange",value:function(e){switch(_i.verbose("[".concat(this._state.type,"] iceConnectionState ").concat(e.iceConnectionState)),e.iceConnectionState){case"connected":this._stateMachine.onIceConnected();break;case"disconnected":this._stateMachine.onIceDisconnected();break;case"failed":this._dispatchEvent("iceFailed")}}},{key:"_handleConnectionStateChange",value:function(e){_i.verbose("[".concat(this._state.type,"] connectionState ").concat(e.connectionState))}},{key:"_receiveCandidate",value:function(e){e=e.payload.candidate,this._rtcConnection.addIceCandidate({sdpMLineIndex:e.sdpMLineIndex,sdpMid:e.sdpMid,candidate:e.sdp}).catch(function(e){_i.error(e)})}},{key:"_onRemoteTrack",value:function(e){this._remoteStream=e.streams[0],this._dispatchEvent("remoteStream",this._remoteStream)}},{key:"_state",get:function(){return this._stateMachine.state}},{key:"rtcConnection",get:function(){return this._rtcConnection}},{key:"remoteStream",get:function(){return this._remoteStream}},{key:"signalingClient",get:function(){return this._signalingClient}}]),s}(),$o=function(){function e(){Fn(this,e)}var t;return Gn(e,[{key:"addStatsLog",value:function(e){this._accumulated=Co(e,this._accumulated)}},{key:"getAccumulatedStats",value:(t=jn(r.mark(function e(t){var n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStatsLog();case 2:return n=e.sent,e.abrupt("return",Co(n,this._accumulated));case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}(),Zo=function(){qn(n,Ui);var e,t=Zn(n);function n(e,r){var a;return Fn(this,n),Bn($n(a=t.call(this)),"_peerConnections",new Map),Bn($n(a),"_unhandledCommands",[]),a._ctx=e,a._mediaDirections=r,a._statsLogAccumulator=new $o,a}return Gn(n,[{key:"_activePC",get:function(){return this._peerConnections.get(this._activePCId)},set:function(e){this._peerConnections.has(e.id)||this._addPC(e),this._activePCId=e.id}},{key:"_preparingPC",get:function(){return this._peerConnections.get(this._preparingPCId)},set:function(e){this._peerConnections.has(e.id)||this._addPC(e),this._preparingPCId=e.id}},{key:"activePeerConnection",get:function(){return this._activePC}}]),Gn(n,[{key:"createPeerConnection",value:function(e,t,n,r,a){return _i.debug("Create new peer connection"),a=new Xo(this._ctx,e,t,n,r,a,this._mediaDirections,!1),this._activePC?this._replacePreparing(a,r):(this._activePC=a,this._dispatchEvent("initialized")),this._dispatchUnhandledCommands(a),a}},{key:"createOffer",value:function(){this._activePC&&this._activePC.createOffer()}},{key:"close",value:function(){this._deactivatePreparing(),this._deactivateActive()}},{key:"onEvent",value:function(e){var t=null!==(n=e.payload.peerConnectionId)&&void 0!==n?n:void 0,n=this._peerConnections.get(t);this._isActive(t)||this._isPreparing(t)?n.onEvent(e):this._isInactive(t)||this._dispatchOnCreation(e)}},{key:"getStatsLog",value:(e=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._activePC){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.abrupt("return",this._statsLogAccumulator.getAccumulatedStats(this._activePC));case 3:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_addPC",value:function(e){this._peerConnections.set(e.id,e)}},{key:"_isActive",value:function(e){return e===this._activePCId}},{key:"_isPreparing",value:function(e){return e===this._preparingPCId}},{key:"_isInactive",value:function(e){return!this._isActive(e)&&!this._isPreparing(e)&&!!this._peerConnections.get(e)}},{key:"_deactivateActive",value:function(){_i.debug("Close active pc if exist"),this._activePC&&(this._activePC.removeAllEventListeners(),this._activePC.close(),delete this._activePCId)}},{key:"_activatePreparing",value:function(){var e,t=this;_i.debug("Activate preparing pc if exist"),this._preparingPC&&(e=this._activePC,this._activePC=this._preparingPC,delete this._preparingPCId,this._dispatchEvent("replaced"),e.removeAllEventListeners(),e.getStatsLog().then(function(n){t._statsLogAccumulator.addStatsLog(n),e.close()}))}},{key:"_deactivatePreparing",value:function(){_i.debug("Close preparing pc if exist"),this._preparingPC&&(this._preparingPC.removeAllEventListeners(),this._preparingPC.close(),delete this._preparingPCId)}},{key:"_replacePreparing",value:function(e,t){var n=this;_i.debug("Create preparing peer connection"),this._deactivatePreparing(),this._preparingPC=e,this._preparingPC.once("connected",function(){setTimeout(function(){n._activatePreparing()},2e3)}),t&&this._preparingPC.createOffer()}},{key:"_dispatchUnhandledCommands",value:function(e){this._unhandledCommands.filter(function(t){return t.payload.peerConnectionId===e.id}).forEach(function(t){return e.onEvent(t)}),this._unhandledCommands=this._unhandledCommands.filter(function(t){return t.payload.peerConnectionId!==e.id})}},{key:"_dispatchOnCreation",value:function(e){this._unhandledCommands.push(e)}}]),n}(),el=function(){var e=jn(r.mark(function e(t,n,a){var i,s,o,l,c,u=arguments;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=3<u.length&&void 0!==u[3]?u[3]:{count:0,deferred:new Qo},i=c.deferred,s=c.count,e.prev=2,e.next=5,n();case 5:l=e.sent,0<s&&null!==(o=a.onRecover)&&void 0!==o&&o.call(a),i.resolve(l),e.next=19;break;case 10:if(e.prev=10,e.t0=e.catch(2),null!==(c=a.onError)&&void 0!==c&&c.call(a,e.t0),0<=(l=t.calcTimeout(s+1)))return null!==(c=a.onRetrial)&&void 0!==c&&c.call(a,s+1,e.t0),setTimeout(function(){el(t,n,a,{count:s+1,deferred:i})},l),e.abrupt("return",i.promise);e.next=18;break;case 18:i.reject(e.t0);case 19:return e.abrupt("return",i.promise);case 20:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,n,r){return e.apply(this,arguments)}}(),tl=function(){function e(){Fn(this,e)}return Gn(e,[{key:"calcTimeout",value:function(e){switch(e){case 1:return 1e3;case 2:return 2e3;case 3:return 3e3;default:return-1}}}]),e}(),nl=function(){function e(t,n,r){Fn(this,e),this.interval=t,this.noise=n,this.maxRetrial=r}return Gn(e,[{key:"calcTimeout",value:function(e){return e>this.maxRetrial?-1:e*this.interval+(Math.random()-.5)*this.noise*2}}]),e}(),rl=function(){function e(t){Fn(this,e),this._requests=new Map,this.timeoutTime=t}return Gn(e,[{key:"has",value:function(e){return this._requests.has(e)}},{key:"get",value:function(e){return this._requests.get(e)}},{key:"register",value:function(e){if(!e)throw new Error("invalid request id");if(this._requests.has(e))throw new Error("duplicate requests");var t=new Qo;return this._requests.set(e,{deferred:t,timer:this._createTimeoutTimer(e)}),t}},{key:"unregister",value:function(e){if(!this._requests.has(e))return null;var t=this._requests.get(e),n=t.timer,t=t.deferred;return clearTimeout(n),this._requests.delete(e),t}},{key:"_createTimeoutTimer",value:function(e){var t=this;return setTimeout(function(){t.unregister(e).reject(new ai(Tn.ERR_NO_RESPONSE_DUE_TO_TIMEOUT))},this._getTimeoutTime())}},{key:"rejectAll",value:function(e){var t=lr(this._requests.keys());try{for(t.s();!(n=t.n()).done;){var n=n.value,n=this._requests.get(n);clearTimeout(n.timer),n.deferred.reject(e)}}catch(e){t.e(e)}finally{t.f()}this._requests.clear()}},{key:"_getTimeoutTime",value:function(){return this.timeoutTime}}]),e}(),al=function(){function e(t,n,r,a){Fn(this,e),Bn(this,"_timeoutTime",6e4),this._ctx=t,this._participantId=n,this._mediaDirections=r,this._endpointId=a,this._requestMap=new rl(this._timeoutTime)}var t,n,a;return Gn(e,[{key:"sendOfferSdp",value:(a=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._endpointId){e.next=5;break}return e.next=3,this._sendOfferAndUnregisterCreateEndpointRequest(t);case 3:e.next=7;break;case 5:return e.next=7,this._sendOfferAndUnregisterPutEndpointRequest(t);case 7:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"_sendOfferAndUnregisterCreateEndpointRequest",value:(n=jn(r.mark(function e(t){var n,a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._requestMap.unregister("".concat(this._participantId,":create-endpoint-request")),e.prev=1,e.next=4,this._sendCreateEndpoint(t);case 4:return a=e.sent,n&&n.resolve(a),e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),n&&n.reject(e.t0),e.t0;case 13:case"end":return e.stop()}},e,this,[[1,9]])})),function(e){return n.apply(this,arguments)})},{key:"_sendOfferAndUnregisterPutEndpointRequest",value:(t=jn(r.mark(function e(t){var n,a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._requestMap.unregister("".concat(this._participantId,":put-endpoint-request")),e.prev=1,e.next=4,this._sendCreateEndpoint(t);case 4:return a=e.sent,n&&n.resolve(a),e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),n&&n.reject(e.t0),e.t0;case 13:case"end":return e.stop()}},e,this,[[1,9]])})),function(e){return t.apply(this,arguments)})},{key:"registerCreateEndpointRequest",value:function(){if(_i.debug("registerCreateEndpointRequest()"),this._endpointId)throw new Error("Cannot register create endpoint request on endpoint recycle");return this._requestMap.register("".concat(this._participantId,":create-endpoint-request"))}},{key:"registerPutEndpointRequest",value:function(){if(_i.debug("registerPutEndpointRequest()"),!this._endpointId)throw new Error("Cannot register put endpoint request without endpoint id");return this._requestMap.register("".concat(this._participantId,":put-endpoint-request"))}},{key:"_sendCreateEndpoint",value:function(e){return e=Ws.createCreateEndpoint(this._ctx.roomId,this._participantId,e.sdp,this._mediaDirections),this._ctx.sender.send(e)}},{key:"_sendPutEndpoint",value:function(e){return e=Ws.createPutEndpoint(this._ctx.roomId,this._participantId,this._endpointId,e.sdp),this._ctx.sender.send(e)}}]),e}(),il=function(){qn(t,Do);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this,n))._stateMutator=n,r}return t}();(Pe=Jo=Jo||{}).PENDING="pending",Pe.ESTABLISHED="established",Pe.CONNECTED="connected",Pe.FAILED="failed",Pe.RELEASING="releasing",Pe.CLOSED="closed";var sl=function(){qn(t,il);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Jo.CLOSED),n}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("closed")}},{key:"_onDestroy",value:function(){}}]),t}(),ol=function(){qn(t,il);var e=Zn(t);function t(n){var r;return Fn(this,t),Bn($n(r=e.call(this,n)),"type",Jo.CONNECTED),r._stateMutator=n,r}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("connected")}},{key:"_onDestroy",value:function(){}},{key:"onICEFailed",value:function(){this._stateMutator.toPending()}},{key:"onAttach",value:function(){this._context.requestAttach()}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(),ll=function(){qn(t,il);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),Bn($n(i=e.call(this,n)),"type",Jo.ESTABLISHED),i._stateMutator=n,i._sdp=r,i._hasPendingAttach=a,i}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("established"),this._context.setRemoteDescription(this._sdp),this._hasPendingAttach&&this.onAttach()}},{key:"_onDestroy",value:function(){}},{key:"onPCConnected",value:function(){this._stateMutator.toConnected()}},{key:"onICEFailed",value:function(){this._stateMutator.toPending()}},{key:"onAttach",value:function(){this._context.requestAttach()}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(),cl=function(){qn(t,il);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Jo.FAILED),n}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("failed"),this._context.endpoint.id?this._stateMutator.toReleasing():this._stateMutator.toClosed()}},{key:"_onDestroy",value:function(){}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(),ul=function(){qn(t,il);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Jo.PENDING),n}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("pending"),this._request()}},{key:"_onDestroy",value:function(){this._requestTimeout&&clearTimeout(this._requestTimeout),delete this._requestTimeout}},{key:"_request",value:function(){var e=this;this._context.trialCount+=1;var t=this._context.trialCount;9<=t?this._stateMutator.toFailed():1<t?this._requestTimeout=setTimeout(function(){e._context.createSession()},5e3*t+2e3*(Math.random()-.5)):this._context.createSession()}},{key:"onEndpointRequestSucceeded",value:function(e){this._stateMutator.toEstablished(e,this._hasPendingAttach)}},{key:"onEndpointRequestFailed",value:function(){this._request()}},{key:"onAttach",value:function(){this._hasPendingAttach=!0}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(),dl=function(){qn(t,il);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",Jo.RELEASING),n}return Gn(t,[{key:"_onStart",value:function(){this._context.dispatchEvent("releasing"),this._context.closePeerConnection(),this._context.endpoint.id&&this._context.requestRelease()}},{key:"_onDestroy",value:function(){}},{key:"onEndpointRequestSucceeded",value:function(){this._context.requestRelease()}},{key:"onEndpointRequestFailed",value:function(){this._stateMutator.toClosed()}},{key:"onReleased",value:function(){this._stateMutator.toClosed()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),t}(),hl=function(){qn(t,Po);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"toPending",value:function(){this._changeState(new ul(this))}},{key:"toEstablished",value:function(e,t){this._changeState(new ll(this,e,t))}},{key:"toConnected",value:function(){this._changeState(new ol(this))}},{key:"toFailed",value:function(){this._changeState(new cl(this))}},{key:"toReleasing",value:function(){this._changeState(new dl(this))}},{key:"toClosed",value:function(){this._changeState(new sl(this))}},{key:"state",get:function(){return this._state}},{key:"name",get:function(){return"PeerConnection"}}]),t}(),fl=function(){qn(t,Uo);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this,n,new hl(n)))._context=n,r._stateMutator.toPending(),r}return Gn(t,[{key:"onEndpointRequestSucceeded",value:function(e){_i.verbose("[".concat(this.state.type,"] onEndpointRequestSucceeded"));var t=this.state;switch(t.type){case Jo.PENDING:t.onEndpointRequestSucceeded(e);break;case Jo.RELEASING:t.onEndpointRequestSucceeded();break;default:_i.error("[".concat(this.state.type,"] onEndpointRequestSucceeded"))}}},{key:"onEndpointRequestFailed",value:function(){_i.verbose("[".concat(this.state.type,"] onEndpointCreateFailed"));var e=this.state;switch(e.type){case Jo.PENDING:case Jo.RELEASING:e.onEndpointRequestFailed();break;default:_i.error("[".concat(this.state.type,"] onEndpointCreateFailed"))}}},{key:"onICEFailed",value:function(){_i.verbose("[".concat(this.state.type,"] onICEFailed"));var e=this.state;switch(e.type){case Jo.ESTABLISHED:case Jo.CONNECTED:e.onICEFailed();break;default:_i.error("[".concat(this.state.type,"] onICEFailed"))}}},{key:"onPCConnected",value:function(){_i.verbose("[".concat(this.state.type,"] onPCConnected"));var e=this.state;e.type===Jo.ESTABLISHED?e.onPCConnected():_i.error("[".concat(this.state.type,"] onPCConnected"))}},{key:"onAttach",value:function(){_i.verbose("[".concat(this.state.type,"] onAttach"));var e=this.state;switch(e.type){case Jo.PENDING:case Jo.ESTABLISHED:case Jo.CONNECTED:e.onAttach();break;default:_i.error("[".concat(this.state.type,"] onAttach"))}}},{key:"onRelease",value:function(){_i.verbose("[".concat(this.state.type,"] onRelease"));var e=this.state;switch(e.type){case Jo.PENDING:case Jo.ESTABLISHED:case Jo.CONNECTED:e.onRelease();break;default:_i.error("[".concat(this.state.type,"] onRelease"))}}},{key:"onReleased",value:function(){_i.verbose("[".concat(this.state.type,"] onReleased"));var e=this.state;e.type===Jo.RELEASING?e.onReleased():_i.error("[".concat(this.state.type,"] onReleased"))}},{key:"onExit",value:function(){_i.verbose("[".concat(this.state.type,"] onExit"));var e=this.state;switch(e.type){case Jo.RELEASING:case Jo.PENDING:case Jo.CONNECTED:case Jo.ESTABLISHED:case Jo.FAILED:e.onExit();break;default:_i.error("[".concat(this.state.type,"] onExit"))}}},{key:"state",get:function(){return this._stateMutator.state}}]),t}(),pl=function(){qn(t,Ui);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),Bn($n(i=e.call(this)),"tmpId",$s()),Bn($n(i),"_createSession",function(){switch(_i.debug("_createSession()"),i._type){case"master":i._createMasterSession();break;case"viewer":i._createViewerSession();break;default:_i.error("Not supported endpoint type : ",i._type)}}),Bn($n(i),"_closePeerConnection",function(){_i.debug("_closePeerConnection()"),i._pc.removeAllEventListeners(),i._pc.close()}),Bn($n(i),"_requestAttach",function(){var e=i._attachedTo;el(new nl(5e3,1e3,8),function(){return i._sendAttach(e.id)},{onError:function(t){_i.error("Fail attach endpoint endpointId = ".concat(i.id,", to = ").concat(e.id," ErrorCode = ").concat(t.code))}}).then(function(){i._dispatchEvent("attached",e)})}),Bn($n(i),"_requestRelease",function(){_i.debug("_requestRelease()"),i._sendReleaseEndpoint().then(function(){i._stateMachine.onReleased()}).catch(function(e){_i.error("Release request failed",e),i._stateMachine.onReleased()})}),Bn($n(i),"_setRemoteDescription",function(e){_i.debug("_setRemoteDescription()");var t=i._pc,e=Lo.createAnswer(void 0,e);t.onEvent(e),t.once("connected",function(){i._stateMachine.onPCConnected(),i._sendConnected()}),t.once("iceFailed",function(){i._stateMachine.onICEFailed()})}),i._ctx=n,i._collection=r,i._type=a,i._stateMachine=new fl({endpoint:$n(i),dispatchEvent:i._dispatchEvent.bind($n(i)),createSession:i._createSession,setRemoteDescription:i._setRemoteDescription,closePeerConnection:i._closePeerConnection,requestAttach:i._requestAttach,requestRelease:i._requestRelease,trialCount:0}),i}return Gn(t,[{key:"attach",value:function(e){_i.debug("attach()"),(e.viewerEndpoint=this)._attachedTo=e,this._stateMachine.onAttach()}},{key:"release",value:function(){_i.debug("release()"),this._stateMachine.onRelease()}},{key:"exit",value:function(){_i.debug("exit()"),this._closePeerConnection(),this._stateMachine.onExit()}},{key:"_createMasterSession",value:function(){_i.debug("_createMasterSession()"),this._createPeerConnection(this._masterSessionDirection,this._localParticipant.localStream),this._requestCreateEndpoint()}},{key:"_createViewerSession",value:function(){_i.debug("_createViewerSession()"),this._createPeerConnection(this._viewerSessionDirection,void 0),this._requestCreateEndpoint()}},{key:"_createPeerConnection",value:function(e,t){_i.debug("_createPeerConnection()");var n=new al(this._ctx,this._localParticipant.id,e,this.id);this._pc=new Xo(this._ctx,void 0,n,t,!0,void 0,e,!0),this._dispatchEvent("pcChanged",this._pc)}},{key:"_requestCreateEndpoint",value:function(){var e=this;_i.debug("_requestCreateEndpoint()");var t=this._pc,n=this.id?t.signalingClient.registerPutEndpointRequest():t.signalingClient.registerCreateEndpointRequest();t.createOffer(),n.promise.then(function(t){e.id=t.payload.endpointId,e._stateMachine.onEndpointRequestSucceeded(t.payload.sdp)}).catch(function(t){_i.error("Endpoint request failed",t),e._stateMachine.onEndpointRequestFailed()})}},{key:"_sendConnected",value:function(){var e=Ws.createConnected(this._ctx.roomId,this._localParticipant.id,this.id);return this._ctx.sender.send(e)}},{key:"_sendReleaseEndpoint",value:function(){var e=Ws.createReleaseEndpoint(this._ctx.roomId,this._localParticipant.id,this.id);return this._ctx.sender.sendWithRetry(e)}},{key:"_sendAttach",value:function(e){return e=Ws.createAttach(this._ctx.roomId,this._localParticipant.id,this.id,e),this._ctx.sender.sendWithRetry(e,new tl)}},{key:"pc",get:function(){return this._pc}},{key:"_state",get:function(){return this._stateMachine.state}},{key:"_localParticipant",get:function(){return this._collection.localParticipant}},{key:"_masterSessionDirection",get:function(){switch(this._ctx.roomType){case Hl.SMALL_ROOM_FOR_AUDIO_ONLY:return{audio:"sendonly",video:"none"};case Hl.LARGE_ROOM_FOR_AUDIO_ONLY:return{audio:"sendrecv",video:"none"};case Hl.SMALL_ROOM_FOR_VIDEO:return{audio:"sendonly",video:"sendonly"};case Hl.LARGE_ROOM_FOR_VIDEO:return{audio:"sendrecv",video:"sendonly"};default:return _i.error("Not supported room type : ",this._ctx.roomType),{audio:"sendonly",video:"sendonly"}}}},{key:"_viewerSessionDirection",get:function(){switch(this._ctx.roomType){case Hl.SMALL_ROOM_FOR_AUDIO_ONLY:return{audio:"recvonly",video:"none"};case Hl.LARGE_ROOM_FOR_AUDIO_ONLY:return{audio:"none",video:"none"};case Hl.SMALL_ROOM_FOR_VIDEO:return{audio:"recvonly",video:"recvonly"};case Hl.LARGE_ROOM_FOR_VIDEO:return{audio:"none",video:"recvonly"};default:return _i.error("Not supported room type : ",this._ctx.roomType),{audio:"recvonly",video:"recvonly"}}}}]),t}(),_l=function(){function e(t,n){Fn(this,e),Bn(this,"_endpoints",new Map),this._ctx=t,this._collection=n}return Gn(e,[{key:"exit",value:function(){var e,t=lr(this._endpoints.values());try{for(t.s();!(e=t.n()).done;)e.value.exit()}catch(e){t.e(e)}finally{t.f()}}},{key:"releaseEndpoint",value:function(e){e.release()}},{key:"createMaster",value:function(){return _i.debug("_createSendSession()"),this._createEndpoint("master")}},{key:"createViewer",value:function(){return _i.debug("_createRecvSession()"),this._createEndpoint("viewer")}},{key:"_createEndpoint",value:function(e){var t=this,n=new pl(this._ctx,this._collection,e);return this._endpoints.set(n.tmpId,n),n.once("established",function(){t._endpoints.delete(n.tmpId),t._endpoints.set(n.id,n)}),n.once("closed",function(){t._endpoints.delete(n.id)}),n}}]),e}(),ml=function(){qn(t,Ui);var e=Zn(t);function t(n,r){var a;return Fn(this,t),Bn($n(a=e.call(this)),"_unsubscribes",[]),a._ctx=n,a._collection=r,a._endpointManager=new _l(n,r),a._registerParticipantCollectionListeners(),a}return Gn(t,[{key:"_registerParticipantCollectionListeners",value:function(){var e=this;this._unsubscribes.length&&this._unregisterParticipantCollectionListeners(),this._unsubscribes=[this._collection.on("entered",function(t){return e._onParticipantEntered(t)}),this._collection.on("connected",function(t){return e._onParticipantConnected(t)}),this._collection.on("exited",function(t){return e._onParticipantExited(t)})]}},{key:"_unregisterParticipantCollectionListeners",value:function(){this._unsubscribes.forEach(function(e){return e()}),this._unsubscribes=[]}},{key:"_clearParticipantToEndpoint",value:function(){this._collection.remoteParticipants.forEach(function(e){e.viewerEndpoint=null})}},{key:"onSelfEntered",value:function(){_i.debug("onSelfEntered()");var e=this._endpointManager.createMaster();this._localParticipant.masterEndpoint=e}},{key:"exit",value:function(){_i.debug("exit()"),this._unregisterParticipantCollectionListeners(),this._clearParticipantToEndpoint(),this._endpointManager.exit()}},{key:"_onParticipantEntered",value:function(e){_i.debug("_onParticipantEntered(id: ".concat(e.id,")"))}},{key:"_onParticipantConnected",value:function(e){_i.debug("_onParticipantConnected(id : ".concat(e.id,")"))}},{key:"_onParticipantExited",value:function(e){_i.debug("_onParticipantExited(id : ".concat(e.id,")"));var t=e.viewerEndpoint;e.viewerEndpoint=null,t&&this._endpointManager.releaseEndpoint(t)}},{key:"_updateLocalResolution",value:function(e){this._localParticipant.updateResolution(e)}},{key:"_localParticipant",get:function(){return this._collection.localParticipant}}]),t}(),gl=function(){function e(t,n){Fn(this,e),this.key=t,this.value=n}return Gn(e,[{key:"toString",value:function(){return this.key}},{key:"equals",value:function(e){return this.value.width===e.value.width&&this.value.height===e.value.height}}]),e}();Bn(gl,"_720P",new gl("_720P",{width:1280,height:720})),Bn(gl,"_540P",new gl("_540P",{width:960,height:540})),Bn(gl,"_480P",new gl("_480P",{width:848,height:480})),Bn(gl,"_360P",new gl("_360P",{width:640,height:360}));var vl=gl._720P,yl=e.indexOf,El=[].indexOf,bl=!!El&&1/[1].indexOf(1,-0)<0,Pe=X("indexOf"),e=Be("indexOf",{ACCESSORS:!0,1:0});ae({target:"Array",proto:!0,forced:bl||!Pe||!e},{indexOf:function(e){return bl?El.apply(this,arguments)||0:yl(this,e,1<arguments.length?arguments[1]:void 0)}});var Cl=[(Pe=function(e){return function(t,n,r,a){ie(n);var i=oe(t),s=C(i),o=te(i.length),l=e?o-1:0,c=e?-1:1;if(r<2)for(;;){if(l in s){a=s[l],l+=c;break}if(l+=c,e?l<0:o<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=l:l<o;l+=c)l in s&&(a=n(a,s[l],l,i));return a}})(!1),Pe(!0)][0],e=X("reduce"),Pe=Be("reduce",{1:0});function Ol(e,t){t.audio&&0===e.getAudioTracks().length&&e.addTrack(function(){var e=Nl=Nl||new(window.AudioContext||window.webkitAudioContext);Sl=e.createOscillator();var t=e.createMediaStreamDestination(),n=e.createGain();return n.gain.setValueAtTime(0,e.currentTime),Sl.connect(n).connect(t),Sl.start(),kl=t.stream.getAudioTracks()[0],t.stream.getAudioTracks()[0]}()),t.video&&0===e.getVideoTracks().length&&e.addTrack(function(e){var t=e.width,n=e.height,e=e.frameRate;return(Al=Al||document.createElement("canvas")).width=t,Al.height=n,Al.getContext("2d").fillRect(0,0,t,n),Il=Il||setInterval(function(){Al.getContext("2d").fillRect(0,0,t,n)},1e3),e=Al.captureStream(e),Tl=e.getVideoTracks()[0],e.getVideoTracks()[0]}(zn(zn({},vl.value),{},{frameRate:24})))}ae({target:"Array",proto:!0,forced:!e||!Pe||!Fr&&79<gr&&gr<83},{reduce:function(e){return Cl(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Nl,Sl,Al,Il,kl,Tl,wl=function(){qn(t,Ui);var e=Zn(t);function t(n,r){var a;return Fn(this,t),Bn($n(a=e.call(this)),"hasPermission",!1),a._streamManger=n,a.constraints=r,a}return Gn(t,[{key:"dispose",value:function(){var e;this.removeAllEventListeners(),null!==(e=this.onDisposed)&&void 0!==e&&e.call(this)}},{key:"streamChanged",value:function(e){this._dispatchEvent("streamChanged",e)}},{key:"audioOutputChanged",value:function(){this._dispatchEvent("audioOutputChanged")}},{key:"stream",get:function(){return this._streamManger.stream}}]),t}();function Rl(){kl&&kl.stop(),Tl&&Tl.stop(),Tl=kl=null,Il&&(clearInterval(Il),Il=null),Sl&&(Sl.onended=function(){Sl.disconnect(),Sl=null},Sl.stop())}function Ml(e){if(e){var t,n=lr(e.getTracks());try{for(n.s();!(t=n.n()).done;)t.value.stop()}catch(e){n.e(e)}finally{n.f()}}}var Ll=function(){function e(t){Fn(this,e),Bn(this,"_hasPermission",!1),this._deviceManager=t,this._updateQueued=!1}var t;return Gn(e,[{key:"updateStream",value:(t=jn(r.mark(function e(){var t,n,a,i,s,o,l,c,u;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._updateAt)return this._updateQueued=!0,e.abrupt("return");e.next=3;break;case 3:if(t=this._deviceManager.mediaAccesses.some(function(e){return e.constraints.audio}),n=this._deviceManager.mediaAccesses.some(function(e){return e.constraints.video}),t||n){e.next=9;break}return Ml(this.stream),Rl(),e.abrupt("return");case 9:return this._updateAt=Date.now(),(a=this.stream)||(Ol(s=new MediaStream,{audio:t,video:n}),this.stream=s),fi&&Ml(a),e.prev=13,e.next=16,this._deviceManager.getMediaConstraints({usingAudio:t,usingVideo:n});case 16:return s=e.sent,e.next=19,navigator.mediaDevices.getUserMedia(s);case 19:i=e.sent,this._hasPermission=!0,o=lr(this._deviceManager.mediaAccesses);try{for(o.s();!(l=o.n()).done;)l.value.hasPermission=!0}catch(e){o.e(e)}finally{o.f()}Rl(),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(13),_i.error("Fail get local media stream Error[".concat(e.t0,"]")),i=new MediaStream;case 30:Ol(i,{audio:t,video:n}),fi||Ml(a),this.stream=i,c=lr(this._deviceManager.mediaAccesses);try{for(c.s();!(u=c.n()).done;)u.value.streamChanged(this.stream)}catch(e){c.e(e)}finally{c.f()}delete this._updateAt,this._updateQueued?(this._updateQueued=!1,this.updateStream()):this._deviceManager.refreshMediaDevices({audio:t,video:n},!0);case 37:case"end":return e.stop()}},e,this,[[13,26]])})),function(){return t.apply(this,arguments)})}]),e}();function Pl(e,t){return(null==e?void 0:e.deviceId)===(null==t?void 0:t.deviceId)&&(null==e?void 0:e.label)===(null==t?void 0:t.label)&&(null==e?void 0:e.groupId)===(null==t?void 0:t.groupId)}var Dl,Ul=function(){function e(){var t=this;Fn(this,e),this.mediaAccesses=[],this._availableMediaDevices={audioinput:[],audiooutput:[],videoinput:[]},this._currentMediaDevices={audioinput:void 0,audiooutput:void 0,videoinput:void 0},this._sendbirdCallListeners=new Map,this._streamManager=new Ll(this),navigator.mediaDevices.ondevicechange=function(){return t._onDeviceChanged()}}var t,n,a,i;return Gn(e,[{key:"_onDeviceChanged",value:function(){0!==this.mediaAccesses.length&&this.refreshMediaDevices({audio:this.mediaAccesses.some(function(e){return e.constraints.audio}),video:this.mediaAccesses.some(function(e){return e.constraints.video})})}},{key:"addSendBirdCallListener",value:function(e,t){this._sendbirdCallListeners.set(e,t)}},{key:"removeSendBirdCallListener",value:function(e){this._sendbirdCallListeners.delete(e)}},{key:"removeAllSendBirdCallListener",value:function(){this._sendbirdCallListeners.clear()}},{key:"getCurrentAudioInputDevice",value:function(){return this._currentMediaDevices.audioinput}},{key:"getCurrentAudioOutputDevice",value:function(){return this._currentMediaDevices.audiooutput}},{key:"getCurrentVideoInputDevice",value:function(){return this._currentMediaDevices.videoinput}},{key:"getAvailableAudioInputDevices",value:function(){return this._availableMediaDevices.audioinput}},{key:"getAvailableAudioOutputDevices",value:function(){return this._availableMediaDevices.audiooutput}},{key:"getAvailableVideoInputDevices",value:function(){return this._availableMediaDevices.videoinput}},{key:"_updateStream",value:(i=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._streamManager.updateStream());case 1:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_registerMediaAccess",value:function(e){var t=this;this.mediaAccesses.push(e),e.onDisposed=function(){return t.stopMedia(e)}}},{key:"useMedia",value:function(e){if(e.audio||e.video)return e=new wl(this._streamManager,e),this._registerMediaAccess(e),this._updateStream(),e;_i.error(new Error("you should set true for at least 1 media type."))}},{key:"stopMedia",value:function(e){this.mediaAccesses.splice(this.mediaAccesses.indexOf(e),1),this._updateStream()}},{key:"fetchMediaDevices",value:(a=jn(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt("return",t.reduce(function(e,t){return e[t.kind].push(t),e},{audioinput:[],audiooutput:[],videoinput:[]}));case 4:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})},{key:"getMediaConstraints",value:(n=jn(r.mark(function e(t){var n,a,i,s,o;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.usingAudio,a=t.usingVideo,i={audio:!1,video:!1},e.next=4,this.fetchMediaDevices();case 4:return o=e.sent,s=o.audioinput,o=o.videoinput,n&&s.length&&(s=this.getCurrentAudioInputDevice(),i.audio={deviceId:null==s?void 0:s.deviceId}),a&&o.length&&(o=this.getCurrentVideoInputDevice(),i.video=zn(zn({deviceId:null==o?void 0:o.deviceId},vl.value),{},{frameRate:24})),e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"_updateCurrentMediaDevice",value:function(e,t){var n=this._availableMediaDevices[e],r=this._currentMediaDevices[e],a=n.find(function(e){return e.deviceId===(null==t?void 0:t.deviceId)});return a||(_i.warning("Selected device is unavailable. fallback to default device."),a=(null!==a&&void 0!==a?a:0<n.length)?n[0]:null),!Pl(r,this._currentMediaDevices[e]=a)}},{key:"_onAudioOutputChanged",value:function(){var e=lr(this.mediaAccesses);try{for(e.s();!(t=e.n()).done;){var t=t.value;t.constraints.audio&&t.audioOutputChanged()}}catch(t){e.e(t)}finally{e.f()}}},{key:"selectDevice",value:function(e,t){t.kind===e?this._updateCurrentMediaDevice(e,t)&&("audioinput"!==e&&"videoinput"!==e||this._updateStream(),"audiooutput"===e&&this._onAudioOutputChanged()):_i.error(new Error("Tried to select invalid device of type"))}},{key:"_updateAvailableDevices",value:function(e,t){var n,r,a,i=this._currentMediaDevices[e];if(function(e,t){if(e.length===t.length){for(var n=0;n<t.length;n++)if(!Pl(e[n],t[n]))return;return 1}}(this._availableMediaDevices[e],t))return!1;this._availableMediaDevices[e]=t,a=this._updateCurrentMediaDevice(e,i);var s,o=lr(this._sendbirdCallListeners.values());try{for(o.s();!(s=o.n()).done;){var l=s.value,c=this._currentMediaDevices[e];switch(e){case"audioinput":null!==(n=l.onAudioInputDeviceChanged)&&void 0!==n&&n.call(l,c,t);break;case"audiooutput":null!==(r=l.onAudioOutputDeviceChanged)&&void 0!==r&&r.call(l,c,t);break;case"videoinput":null!==(r=l.onVideoInputDeviceChanged)&&void 0!==r&&r.call(l,c,t)}}}catch(e){o.e(e)}finally{o.f()}return a}},{key:"refreshMediaDevices",value:(t=jn(r.mark(function e(t){var n,a,i,s,o,l,c,u,d=arguments;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.audio,a=t.video,i=1<d.length&&void 0!==d[1]&&d[1],n||a){e.next=4;break}throw new Error("at least one of the audio or video must be true");case 4:return e.next=6,this.fetchMediaDevices();case 6:u=e.sent,s=u.audioinput,o=u.audiooutput,l=u.videoinput,u=c=!1,n&&(c=this._updateAvailableDevices("audioinput",s),u=this._updateAvailableDevices("audiooutput",o)),a&&(c=this._updateAvailableDevices("videoinput",l)||c),!i&&c&&this._updateStream(),u&&this._onAudioOutputChanged();case 16:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}(),xl=function(){function e(t,n,r){var a=this;Fn(this,e),this._ctx=t,Object.assign(this,n),this._localStream=r,this._localStream.on("audioOutputChanged",function(){a._onAudioOutputChanged()})}var t,n,a;return Gn(e,[{key:"id",get:function(){return this.participantId}}]),Gn(e,[{key:"updateInfo",value:function(e){var t=this,n=new Map;return Object.keys(e).forEach(function(r){t[r]!==e[r]&&n.set(r,e[r])}),Object.assign(this,e),n}},{key:"setMediaView",value:(a=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mediaView===t)return e.abrupt("return");e.next=2;break;case 2:if(this._mediaView&&(this._mediaView.srcObject=null),t){e.next=6;break}return delete this._mediaView,e.abrupt("return");case 6:return e.next=8,this._updateMediaViewStream(t,this.stream);case 8:this._mediaView=e.sent;case 9:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"_updateMediaViewStream",value:(n=jn(r.mark(function e(t,n){var a,i;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._ctx.deviceManager.getCurrentAudioOutputDevice())return e.next=4,null===(i=t.setSinkId)||void 0===i?void 0:i.call(t,a.deviceId);e.next=4;break;case 4:return n&&(t.srcObject=n),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"_onAudioOutputChanged",value:(t=jn(r.mark(function e(){var t,n,a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ctx.roomType===Hl.SMALL_ROOM_FOR_VIDEO||this._ctx.roomType===Hl.SMALL_ROOM_FOR_AUDIO_ONLY)return a=this._ctx.deviceManager.getCurrentAudioOutputDevice(),console.log("currentAudioOutputDevice: ".concat(a)),e.next=5,null===(t=this._mediaView)||void 0===t||null===(n=t.setSinkId)||void 0===n?void 0:n.call(t,a.deviceId);e.next=5;break;case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}(),jl=function(){qn(n,xl);var e,t=Zn(n);function n(e,r,a){var i;return Fn(this,n),Bn($n(i=t.call(this,e,r,a)),"isLocalParticipant",!0),Bn($n(i),"_resolution",gl._720P),i._localStream.on("streamChanged",function(e){return i._onStream(e)}),i}return Gn(n,[{key:"stream",get:function(){var e;return null===(e=this._localStream)||void 0===e?void 0:e.localStream}},{key:"localStream",get:function(){return this._localStream}},{key:"masterEndpoint",get:function(){return this._masterEndpoint},set:function(e){this._masterEndpoint=e}}]),Gn(n,[{key:"exit",value:function(){this._release()}},{key:"setLocalMediaView",value:(e=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setMediaView(t));case 1:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"muteMicrophone",value:function(){_i.info("muteMicrophone()"),this._toggleAudio(!1)}},{key:"unmuteMicrophone",value:function(){_i.info("unmuteMicrophone()"),this._toggleAudio(!0)}},{key:"startVideo",value:function(){_i.info("startVideo()"),this._toggleVideo(!0)}},{key:"stopVideo",value:function(){_i.info("stopVideo()"),this._toggleVideo(!1)}},{key:"updateResolution",value:function(e){this._resolution.equals(e)||(this._resolution=e,this._applyConstraints())}},{key:"_toggleAudio",value:function(e){this.isAudioEnabled!==e&&(this.stream.getAudioTracks().forEach(function(t){t.enabled=e}),this.isAudioEnabled=e,this._sendAudioCommand(e).catch(function(e){return _i.debug(e)}))}},{key:"_toggleVideo",value:function(e){this.isVideoEnabled!==e&&(this.stream.getVideoTracks().forEach(function(t){t.enabled=e}),this.isVideoEnabled=e,this._sendVideoCommand(e).catch(function(e){return _i.debug(e)}))}},{key:"_isMediaEnabled",value:function(e){switch(e){case"audio":return this.isAudioEnabled;case"video":return this.isVideoEnabled;default:return _i.error(new Error("unrecognized media type ".concat(e))),!1}}},{key:"_applyConstraints",value:function(){var e;if(_i.debug("_applyConstraints()"),this.stream&&null!==(e=this._localStream)&&void 0!==e&&e.hasPermission){var t=lr(this.stream.getVideoTracks());try{for(t.s();!(r=t.n()).done;){var n=r.value,r=void 0,r=this._resolution.equals(gl._360P)&&pi?{height:this._resolution.value.height}:this._resolution.value;n.applyConstraints(r).catch(function(e){return _i.error("Fail change local video resolution error = ",e)})}}catch(e){t.e(e)}finally{t.f()}}}},{key:"_onStream",value:function(e){var t=lr(e.getTracks());try{for(t.s();!(n=t.n()).done;){var n=n.value;n.enabled=this._isMediaEnabled(n.kind)}}catch(e){t.e(e)}finally{t.f()}this._applyConstraints(),this._mediaView&&(this._mediaView.srcObject=e)}},{key:"_release",value:function(){this._localStream.release(),delete this._localStream}},{key:"_sendAudioCommand",value:function(e){return e=Ws.createAudio(this._ctx.roomId,this.id,e),this._ctx.sender.send(e)}},{key:"_sendVideoCommand",value:function(e){return e=Ws.createVideo(this._ctx.roomId,this.id,e),this._ctx.sender.send(e)}}]),n}(),Fl=function(){qn(t,xl);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"isLocalParticipant",!1),Bn($n(n),"_onStream",function(){var e=$n(n).stream;n._mediaView&&n._updateMediaViewStream(n._mediaView,e)}),n}return Gn(t,[{key:"viewerEndpoint",set:function(e){var t;null!==(t=this._unsubscribePCChange)&&void 0!==t&&t.call(this),(this._viewerEndpoint=e)&&(this._unsubscribePCChange=e.pc.on("remoteStream",this._onStream)),this._onStream()}},{key:"stream",get:function(){var e,t;return null===(e=this._viewerEndpoint)||void 0===e||null===(t=e.pc)||void 0===t?void 0:t.remoteStream}}]),t}();(X=Dl=Dl||{}).ENTERED="entered",X.CONNECTED="connected",X.EXITED="exited";var Hl,Gl=function(){qn(n,ml);var e,t=Zn(n);function n(){return Fn(this,n),t.apply(this,arguments)}return Gn(n,[{key:"onSelfEntered",value:function(){this._updateLocalResolution(this._localResolution),er(Kn(n.prototype),"onSelfEntered",this).call(this),this._createRecvSessionsForConnectedParticipants()}},{key:"_onParticipantEntered",value:function(e){er(Kn(n.prototype),"_onParticipantEntered",this).call(this,e),this._updateLocalResolution(this._localResolution)}},{key:"_onParticipantConnected",value:(e=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return er(Kn(n.prototype),"_onParticipantConnected",this).call(this,t),e.abrupt("return",this._createParticipantRecvSession(t));case 2:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"_onParticipantExited",value:function(e){er(Kn(n.prototype),"_onParticipantExited",this).call(this,e),this._updateLocalResolution(this._localResolution)}},{key:"_createParticipantRecvSession",value:function(e){var t=this;_i.debug("_createParticipantRecvSession(".concat(e.id,")"));var n=this._endpointManager.createViewer();return n.attach(e),n.once("attached",function(){t._dispatchEvent("remoteParticipantStream",e)}),n}},{key:"_createRecvSessionsForConnectedParticipants",value:function(){_i.debug("_createRecvSessionForConnectedParticipant()");var e=lr(this._collection.remoteParticipants);try{for(e.s();!(t=e.n()).done;){var t=t.value;t.isLocalParticipant||t.state===Dl.CONNECTED&&this._createParticipantRecvSession(t)}}catch(t){e.e(t)}finally{e.f()}}},{key:"_localResolution",get:function(){switch(this._collection.connectedRemoteParticipants.length){case 0:case 1:return gl._720P;case 2:return gl._540P;case 3:return gl._480P;default:return gl._360P}}}]),n}(),Bl=function(){qn(o,ml);var e,t,n,a,i,s=Zn(o);function o(e,t){var n;return Fn(this,o),(n=s.call(this,e,t))._ctx=e,(n._collection=t).localStream.on("audioOutputChanged",function(){n._onAudioOutputChanged()}),n}return Gn(o,[{key:"onSelfEntered",value:(i=jn(r.mark(function e(){var t=this;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:er(Kn(o.prototype),"onSelfEntered",this).call(this),this._localParticipant.masterEndpoint.pc.once("remoteStream",function(e){t._onRemoteStream(e)});case 2:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_onParticipantEntered",value:function(e){}},{key:"_onParticipantConnected",value:(a=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"_onParticipantExited",value:function(e){}},{key:"_onRemoteStream",value:function(e){this._mediaView&&(this._mediaView.srcObject=e)}},{key:"setMediaView",value:(n=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mediaView===t)return e.abrupt("return");e.next=2;break;case 2:if(this._mediaView&&(this._mediaView.srcObject=null),t){e.next=6;break}return delete this._mediaView,e.abrupt("return");case 6:return e.next=8,this._updateMediaViewStream(t,this._stream);case 8:this._mediaView=e.sent;case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"_updateMediaViewStream",value:(t=jn(r.mark(function e(t,n){var a,i;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._ctx.deviceManager.getCurrentAudioOutputDevice())return e.next=4,null===(i=t.setSinkId)||void 0===i?void 0:i.call(t,a.deviceId);e.next=4;break;case 4:return n&&(t.srcObject=n),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"_onAudioOutputChanged",value:(e=jn(r.mark(function e(){var t,n,a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._ctx.deviceManager.getCurrentAudioOutputDevice(),e.next=3,null===(t=this._mediaView)||void 0===t||null===(n=t.setSinkId)||void 0===n?void 0:n.call(t,a.deviceId);case 3:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_stream",get:function(){return this._localParticipant.masterEndpoint.pc.remoteStream}}]),o}(),Vl=function(){qn(n,Ui);var e,t=Zn(n);function n(e,r){var a;return Fn(this,n),(a=t.call(this))._ctx=e,a._participantCollection=r,a._aliveFailureCount=0,a}return Gn(n,[{key:"onEntered",value:function(){var e=this;switch(this._keepAliveInterval=setInterval(function(){Promise.race([e._sendAlive(),new Promise(function(e,t){return setTimeout(t,5e3)})]).then(function(){e._aliveFailureCount=0}).catch(function(t){t&&(t.code!==Tn.ERR_ROOM_DELETED?(e._aliveFailureCount+=1,(8<=e._aliveFailureCount||t.code===Tn.ERR_INVALID_ROOM_PARTICIPANT)&&e._dispatchEvent("aliveFailed")):e._dispatchEvent("deleted"))})},5e3),this._ctx.roomType){case"small_room_for_video":this._participantManager=new Gl(this._ctx,this._participantCollection);break;case"large_room_for_audio_only":this._participantManager=new Bl(this._ctx,this._participantCollection);break;default:throw new Error("Unsupported room type : ".concat(this._ctx.roomType))}this._registerEventListeners(),this._participantManager.onSelfEntered()}},{key:"exit",value:function(){clearInterval(this._keepAliveInterval),delete this._keepAliveInterval,this._participantManager.removeAllEventListeners(),this._participantManager.exit()}},{key:"setAudioForLargeRoom",value:(e=jn(r.mark(function e(t){var n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_i.info("setAudioForLargeRoom()"),"large_room_for_audio_only"!==this._ctx.roomType)throw n=new Error("Room type not audio mcu"),_i.error(n),n;e.next=5;break;case 5:return e.abrupt("return",this._participantManager.setMediaView(t));case 6:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"_sendAlive",value:function(){var e=Ws.createAlive(this._ctx.roomId,this._localParticipant.id);return this._ctx.sender.send(e)}},{key:"_registerEventListeners",value:function(){var e=this;this._participantManager.on("remoteParticipantStream",function(t){e._dispatchEvent("remoteParticipantStream",t)})}},{key:"_localParticipant",get:function(){return this._participantCollection.localParticipant}}]),n}(),zl=function(){qn(n,Ui);var e,t=Zn(n);function n(){return Fn(this,n),t.call(this)}return Gn(n,[{key:"startStream",value:(e=jn(r.mark(function e(){var t,n,a=this;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getDisplayMedia({video:!0});case 3:t=e.sent,this._stream=t,this._stream.getVideoTracks()[0].onended=function(){a._releaseStream(),a._dispatchEvent("streamStopped")},e.next=23;break;case 8:e.prev=8,e.t0=e.catch(0),e.t1=e.t0.name,e.next="InvalidStateError"===e.t1?13:"NotAllowedError"===e.t1?15:"NotFoundError"===e.t1?17:"NotReadableError"===e.t1?19:21;break;case 13:return n=Tn.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE,e.abrupt("break",22);case 15:return n=Tn.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE,e.abrupt("break",22);case 17:return n=Tn.ERR_SELECTED_CONTENT_NOT_EXIST,e.abrupt("break",22);case 19:return n=Tn.ERR_SELECTED_CONTENT_INACCESSIBLE,e.abrupt("break",22);case 21:n=Tn.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON;case 22:throw new ai(n);case 23:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return e.apply(this,arguments)})},{key:"stopStream",value:function(){this._releaseStream(),this._dispatchEvent("streamStopped")}},{key:"_releaseStream",value:function(){if(this._stream){var e,t=lr(this._stream.getTracks());try{for(t.s();!(e=t.n()).done;)e.value.stop()}catch(e){t.e(e)}finally{t.f()}delete this._stream}}},{key:"stream",get:function(){return this._stream}},{key:"isSharing",get:function(){return!!this._stream}}]),n}(),ql=function(){qn(n,Ui);var e,t=Zn(n);function n(e){var r,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{audio:!0,video:!0};return Fn(this,n),(r=t.call(this))._deviceManager=e,r._mediaConstraints=a,r._screenShare=new zl,r._screenShare.on("streamStopped",function(){r._releaseMergedStream(),r._dispatchEvent("screenShareStreamStopped")}),r}return Gn(n,[{key:"useScreenStream",value:(e=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return function(){if(!navigator.mediaDevices.getDisplayMedia){var e=mr.getErrorMessage(Tn.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE);throw _i.error(e),e}}(),e.next=3,this._screenShare.startStream();case 3:this._mergeScreenShareStream(),this._dispatchEvent("streamChanged",this.localStream);case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"getLocalMediaStream",value:function(){return this._mediaAccess||this._grantMediaAccess(this._mediaConstraints),this._mediaAccess.stream}},{key:"stopScreenShare",value:function(){this._screenShare.isSharing&&this._screenShare.stopStream()}},{key:"revokeMediaAccess",value:function(){this._mediaAccess&&(this._mediaAccess.dispose(),this._mediaAccess=null)}},{key:"release",value:function(){this.stopScreenShare(),this.revokeMediaAccess()}},{key:"_grantMediaAccess",value:function(e){var t=this;this._mediaAccess=this._deviceManager.useMedia(e),this._mediaAccess.on("streamChanged",function(){t._screenShare.isSharing&&t._mergeScreenShareStream(),t._dispatchEvent("streamChanged",t.localStream)}),this._mediaAccess.on("audioOutputChanged",function(){return t._dispatchEvent("audioOutputChanged")})}},{key:"_mergeScreenShareStream",value:function(){var e;this._screenShare.isSharing&&(e=new MediaStream,this._mediaAccess.stream&&0<this._mediaAccess.stream.getAudioTracks().length&&e.addTrack(this._mediaAccess.stream.getAudioTracks()[0]),e.addTrack(this.screenStream.getVideoTracks()[0]),this._mergedStream=e)}},{key:"_releaseMergedStream",value:function(){this._mergedStream&&(this._mergedStream.removeTrack(this._mergedStream.getAudioTracks()[0]),delete this._mergedStream,this._dispatchEvent("streamChanged",this.localStream))}},{key:"mediaConstraints",set:function(e){this._mediaConstraints=e}},{key:"hasPermission",get:function(){var e;return null===(e=this._mediaAccess)||void 0===e?void 0:e.hasPermission}},{key:"localStream",get:function(){return this.isScreenSharing?this._mergedStream:this.getLocalMediaStream()}},{key:"mergedStream",get:function(){return this._mergedStream}},{key:"screenStream",get:function(){return this._screenShare.stream}},{key:"isScreenSharing",get:function(){return this._screenShare.isSharing}}]),n}(),Kl=function(){qn(t,Ui);var e=Zn(t);function t(n){var r,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Fn(this,t),Bn($n(r=e.call(this)),"_remoteParticipants",[]),r._ctx=n,r.initialize(a),r}return Gn(t,[{key:"_getMediaConstraints",value:function(){switch(this._ctx.roomType){case"large_room_for_audio_only":case"small_room_for_audio_only":return{audio:!0,video:!1};case"large_room_for_video":case"small_room_for_video":default:return{audio:!0,video:!0}}}},{key:"findRemoteById",value:function(e){return this._remoteParticipants.find(function(t){return t.participantId===e})}},{key:"initialize",value:function(e){var t=this;_i.debug("initialize()",e),this._localStream=new ql(this._ctx.deviceManager),this._localStream.mediaConstraints=this._getMediaConstraints(),e.forEach(function(e){e.isLocalParticipant?t._localParticipant=new jl(t._ctx,e,t._localStream):t._remoteParticipants.push(new Fl(t._ctx,e,t._localStream))})}},{key:"updateInfo",value:function(e){_i.debug("updateInfo()",e),this._stampLocalParticipant(e);var t=e.filter(function(e){return e.isLocalParticipant})[0],e=e.filter(function(e){return!e.isLocalParticipant});t&&this._upsertLocalParticipantInfo(t),this._updateRemoteParticipantsInfo(e)}},{key:"exit",value:function(){_i.debug("exit()"),this._localParticipant.exit(),delete this._localParticipant}},{key:"onEvent",value:function(e){switch(e.type){case Hi.PARTICIPANT_ENTERED:this._onEntered(e.payload.participant);break;case Hi.PARTICIPANT_CONNECTED:this._onConnected(e.payload.participant);break;case Hi.PARTICIPANT_EXITED:this._onExited(e.payload.participant);break;case Hi.PARTICIPANT_DISCONNECTED:this._onDisconnected(e.payload.participant);break;case Hi.PARTICIPANT_AUDIO_STATUS_CHANGED:this._onAudioSettingsChanged(e.payload.participant);break;case Hi.PARTICIPANT_VIDEO_STATUS_CHANGED:this._onVideoSettingsChanged(e.payload.participant)}}},{key:"_upsertLocalParticipantInfo",value:function(e){_i.debug("_upsertLocalParticipantInfo()"),this._localParticipant?this._localParticipant.updateInfo(e):this._localParticipant=new jl(this._ctx,e,this._localStream)}},{key:"_updateRemoteParticipantsInfo",value:function(e){var t=this;_i.debug("_updateRemoteParticipantsInfo()"),e.forEach(function(e){return t._upsertParticipantInfo(e)}),this._remoteParticipants.filter(function(t){return!e.some(function(e){return e.participantId===t.id})}).forEach(function(e){t._deleteParticipantInfo(e)})}},{key:"_upsertParticipantInfo",value:function(e){_i.debug("_upsertParticipantInfo()");var t=this._updateParticipantInfo(e);return t||this._insertParticipantInfo(e)}},{key:"_insertParticipantInfo",value:function(e){return _i.debug("_insertParticipantInfo()"),e=new Fl(this._ctx,e,this._localStream),this._dispatchEventIfOnCall("entered",e),"connected"===e.state&&this._dispatchEventIfOnCall("connected",e),this._remoteParticipants.push(e),e}},{key:"_updateParticipantInfo",value:function(e){_i.debug("_updateParticipantInfo()");var t=this.findRemoteById(e.participantId);if(!t)return!1;var n=lr(t.updateInfo(e).entries());try{for(n.s();!(r=n.n()).done;){var r=tr(r.value,2),a=r[0],i=r[1];switch(a){case"isAudioEnabled":this._dispatchEventIfOnCall("audioSettingsChanged",t);break;case"isVideoEnabled":this._dispatchEventIfOnCall("videoSettingsChanged",t);break;case"state":"connected"===i&&this._dispatchEventIfOnCall("connected",t);break;default:_i.debug("_updateParticipantInfo() => Ignore diff\nkey : ",a,"\nvalue : ",i)}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"_deleteParticipantInfo",value:function(e){_i.debug("_deleteParticipantInfo()");var t=this.findRemoteById(e.participantId);t&&(e=this._remoteParticipants.indexOf(t),this._remoteParticipants.splice(e,1),this._dispatchEventIfOnCall("exited",t))}},{key:"_stampLocalParticipant",value:function(e){var t=this;this._localParticipant&&(e.find(function(e){return e.participantId===t._localParticipant.participantId}).isLocalParticipant=!0)}},{key:"_onEntered",value:function(e){_i.debug("_onEntered()"),this._upsertParticipantInfo(e)}},{key:"_onConnected",value:function(e){_i.debug("_onConnected()"),this._upsertParticipantInfo(e)}},{key:"_onExited",value:function(e){_i.debug("_onExited()"),this._deleteParticipantInfo(e)}},{key:"_onDisconnected",value:function(e){_i.debug("_onDisconnected()"),e.isLocalParticipant?this._dispatchEvent("selfDisconnected"):this._deleteParticipantInfo(e)}},{key:"_onAudioSettingsChanged",value:function(e){_i.debug("_onAudioSettingsChanged()"),this._upsertParticipantInfo(e)}},{key:"_onVideoSettingsChanged",value:function(e){_i.debug("_onVideoSettingsChanged()"),this._upsertParticipantInfo(e)}},{key:"_dispatchEventIfOnCall",value:function(e){if(this._isOnCall){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._dispatchEvent.apply(this,[e].concat(n))}}},{key:"participants",get:function(){var e=nr(this._remoteParticipants);return this._localParticipant&&e.unshift(this._localParticipant),e}},{key:"localParticipant",get:function(){return this._localParticipant}},{key:"remoteParticipants",get:function(){return this._remoteParticipants}},{key:"connectedRemoteParticipants",get:function(){return this._remoteParticipants.filter(function(e){return e.state===Dl.CONNECTED})}},{key:"localStream",get:function(){return this._localStream}},{key:"_isOnCall",get:function(){return this._ctx.room.isOnCall}}]),t}();(Be=Hl=Hl||{}).SMALL_ROOM_FOR_AUDIO_ONLY="small_room_for_audio_only",Be.LARGE_ROOM_FOR_AUDIO_ONLY="large_room_for_audio_only",Be.SMALL_ROOM_FOR_VIDEO="small_room_for_video",Be.LARGE_ROOM_FOR_VIDEO="large_room_for_video";var Yl=function(){qn(a,Ui);var e,t,n=Zn(a);function a(e,t){var r;return Fn(this,a),Bn($n(r=n.call(this)),"_enterLock",new Gi),Bn($n(r),"_customItemsUpdatedAt",0),r._ctx=zn(zn({},e),{},{room:$n(r),roomId:t.roomId,roomType:t.roomType,customItems:t.customItems}),r.initialize(t),r._registerCollectionEventListeners(),r}return Gn(a,[{key:"_send",value:function(e){return this._ctx.sender.send(e)}},{key:"initialize",value:function(e){var t=e.participants,n=Xn(e,["participants"]);Object.assign(this,n),this._participantCollection?this._participantCollection.initialize(t):this._participantCollection=new Kl(this._ctx,e.participants)}},{key:"updateInfo",value:function(e){var t=e.participants,e=Xn(e,["participants"]);return Object.assign(this,e),this._participantCollection.updateInfo(t),this}},{key:"onEvent",value:function(e){var t=this;this._enterLock.acquire().then(function(){t._processEvent(e),t._enterLock.release()})}},{key:"fetchCustomItems",value:function(){var e=this,t=Ws.createFetchCustomItems(this.roomId);return this._send(t).then(function(t){return t=t.payload,e._setCustomItems(t.customItems,t.affectedAt),t}).catch(function(e){throw _i.error("failed to update customItems"),e})}},{key:"updateCustomItems",value:function(e){var t=this,n=tr(si(e),2)[1];return n||(e=Ws.createUpdateCustomItems(this.roomId,e,"upsert"),this._send(e).then(function(e){return e=e.payload,t._setCustomItems(e.customItems,e.affectedAt),e}).catch(function(e){throw _i.error("failed to update customItems"),e}))}},{key:"deleteCustomItems",value:function(e){var t=this,n=tr(oi(e),2)[1];return n||(e=Ws.createDeleteCustomItems(this.roomId,e),this._send(e).then(function(e){return e=e.payload,t._setCustomItems(e.customItems,e.affectedAt),e}).catch(function(e){throw _i.error("failed to delete customItems"),e}))}},{key:"_setCustomItems",value:function(e,t){return t>this._customItemsUpdatedAt&&(this._customItemsUpdatedAt=t,this.customItems=e||{},!0)}},{key:"_processEvent",value:function(e){switch(e.type){case Hi.CUSTOM_ITEMS_UPDATE:this._updateCustomItems(e);break;case Hi.CUSTOM_ITEMS_DELETE:this._deleteCustomItems(e);break;case Hi.ROOM_DELETED:this._dispatchEvent("deleted"),this._teardown();break;case Hi.PARTICIPANT_ENTERED:case Hi.PARTICIPANT_CONNECTED:case Hi.PARTICIPANT_EXITED:case Hi.PARTICIPANT_DISCONNECTED:case Hi.PARTICIPANT_AUDIO_STATUS_CHANGED:case Hi.PARTICIPANT_VIDEO_STATUS_CHANGED:this._passToCollection(e)}}},{key:"enter",value:(t=jn(r.mark(function e(t){var n,a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_i.info("enter()"),this._session)throw n=new ai(Tn.ERR_CLIENT_ALREADY_ENTERED),_i.debug(n),n;e.next=5;break;case 5:return e.next=7,this._enterLock.acquire();case 7:return e.prev=7,e.next=10,this._sendEnter(t);case 10:a=e.sent,e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(7),this._enterLock.release(),_i.error(e.t0),e.t0;case 18:this.updateInfo(a.payload.room),this._session=new Vl(this._ctx,this._participantCollection),this._registerSessionEventListeners(),this._session.onEntered(),this._enterLock.release();case 23:case"end":return e.stop()}},e,this,[[7,13]])})),function(e){return t.apply(this,arguments)})},{key:"exit",value:function(){_i.info("exit()"),this._validateEntered();var e=this.localParticipant.id;this._teardown(),this._sendExit(e).catch(function(e){_i.error("_sendExit() failed : ",e)})}},{key:"setAudioForLargeRoom",value:(e=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _i.info("setAudioForLargeRoom()"),this._validateEntered(),e.abrupt("return",this._session.setAudioForLargeRoom(t));case 3:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"_validateEntered",value:function(){if(!this._session){var e=new ai(Tn.ERR_PARTICIPANT_NOT_IN_ROOM);throw _i.debug(e),e}}},{key:"_registerSessionEventListeners",value:function(){var e=this;this._session.on("remoteParticipantStream",function(t){e._dispatchEvent("remoteParticipantStreamStarted",t)}),this._session.on("aliveFailed",function(){e._dispatchEvent("error",new ai(Tn.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION)),e._teardown()}),this._session.on("deleted",function(){e._dispatchEvent("deleted"),e._teardown()})}},{key:"_registerCollectionEventListeners",value:function(){var e=this;this._participantCollection.on("entered",function(t){e._dispatchEvent("remoteParticipantEntered",t)}),this._participantCollection.on("connected",function(t){e._dispatchEvent("remoteParticipantConnected",t)}),this._participantCollection.on("exited",function(t){e._dispatchEvent("remoteParticipantExited",t)}),this._participantCollection.on("audioSettingsChanged",function(t){e._dispatchEvent("remoteAudioSettingsChanged",t)}),this._participantCollection.on("videoSettingsChanged",function(t){e._dispatchEvent("remoteVideoSettingsChanged",t)}),this._participantCollection.on("selfDisconnected",function(){e._teardown(),e._dispatchEvent("error",new ai(Tn.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION))})}},{key:"_updateCustomItems",value:function(e){var t=e.payload,n=t.customItems,e=t.updated,t=t.affectedAt;this._setCustomItems(n,t)&&this._dispatchEvent("customItemsUpdated",n,e)}},{key:"_deleteCustomItems",value:function(e){var t=e.payload,n=t.customItems,e=t.deleted,t=t.affectedAt;this._setCustomItems(n,t)&&this._dispatchEvent("customItemsDeleted",n,e)}},{key:"_passToCollection",value:function(e){this._participantCollection.onEvent(e)}},{key:"_sendEnter",value:function(e){return e=Ws.createEnter(this._ctx.roomId,e),this._ctx.sender.send(e)}},{key:"_sendExit",value:function(e){return e=Ws.createExit(this._ctx.roomId,e),this._ctx.sender.send(e)}},{key:"_teardown",value:function(){this._session.removeAllEventListeners(),this._session.exit(),this._participantCollection.exit(),delete this._session}},{key:"participants",get:function(){return this._participantCollection.participants}},{key:"localParticipant",get:function(){return this._participantCollection.localParticipant}},{key:"remoteParticipants",get:function(){return this._participantCollection.remoteParticipants}},{key:"isOnCall",get:function(){return!!this._session}}]),a}();(e={}).OPEN="open",e.DELETED="deleted";var Wl,Ql=function(){function e(t){Fn(this,e),this._ctx=t}return Gn(e,[{key:"createRoom",value:function(e){return new Yl(this._ctx,e)}}]),e}(),Jl=function(){function e(t){Fn(this,e),this._ctx=t,this._factory=new Ql(t),this._rooms=new Map}var t,n;return Gn(e,[{key:"_hasRoom",value:function(e){return this._rooms.has(e)}},{key:"onEvent",value:function(e){switch(e.type){case Hi.CUSTOM_ITEMS_UPDATE:case Hi.CUSTOM_ITEMS_DELETE:case Hi.ROOM_DELETED:case Hi.PARTICIPANT_CONNECTED:case Hi.PARTICIPANT_ENTERED:case Hi.PARTICIPANT_EXITED:case Hi.PARTICIPANT_DISCONNECTED:case Hi.PARTICIPANT_AUDIO_STATUS_CHANGED:case Hi.PARTICIPANT_VIDEO_STATUS_CHANGED:this._passToRoom(e);break;default:_i.error(new Error("unhandled room event ".concat(e.type)))}}},{key:"_passToRoom",value:function(e){this._hasRoom(e.getRoomId())?this._rooms.get(e.getRoomId()).onEvent(e):_i.debug("received command ".concat(e.type," for non-existing room ").concat(e.getRoomId()))}},{key:"createRoom",value:(n=jn(r.mark(function e(t){var n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendCreate(t);case 2:return n=e.sent,n=this._factory.createRoom(n.payload.room),this._rooms.set(n.roomId,n),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getCachedRoomById",value:function(e){return this._rooms.get(e)}},{key:"fetchRoomById",value:(t=jn(r.mark(function e(t){var n,a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendGetRoom(t);case 2:if(n=e.sent,a=this._rooms.get(t))return a.updateInfo(n.payload.room),e.abrupt("return",a);e.next=7;break;case 7:return a=this._factory.createRoom(n.payload.room),this._rooms.set(a.roomId,a),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_sendCreate",value:function(e){return e=Ws.createCreate(e),this._ctx.sender.send(e)}},{key:"_sendGetRoom",value:function(e){return e=Ws.createGet(e),this._ctx.sender.send(e)}},{key:"clear",value:function(){var e=lr(this._rooms.values());try{for(e.s();!(t=e.n()).done;){var t=t.value;t.isOnCall&&t.exit()}}catch(t){e.e(t)}finally{e.f()}this._rooms.clear()}}]),e}();(Pe=Wl=Wl||{}).DIALING="DIALING",Pe.RINGING="RINGING",Pe.RECONNECTING="RECONNECTING",Pe.RECONNECTED="RECONNECTED";var Xl,$l,Zl,ec=function(){function e(){Fn(this,e),this.audioElms=new Map}var t,n;return Gn(e,[{key:"loadSound",value:(n=jn(r.mark(function e(t,n){var a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof n&&n){e.next=2;break}return e.abrupt("return",!1);case 2:return(a=this._createAudio(t)).src=n,a.volume=0,e.prev=5,e.next=8,a.play();case 8:a.pause(),a.currentTime=0,a.volume=1,this.audioElms.set(t,a),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),_i.error(e.t0),e.abrupt("return",!1);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},e,this,[[5,14]])})),function(e,t){return n.apply(this,arguments)})},{key:"unloadSound",value:function(e){return!!this.audioElms.get(e)&&this.audioElms.delete(e)}},{key:"playSound",value:(t=jn(r.mark(function e(t){var n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.audioElms.get(t)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,n.currentTime=0,e.next=7,n.play();case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),_i.error(e.t0),e.abrupt("return",!1);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}},e,this,[[3,9]])})),function(e){return t.apply(this,arguments)})},{key:"stopSound",value:function(e){return!!(e=this.audioElms.get(e))&&e.pause()}},{key:"stopAllSound",value:function(){var e,t=lr(this.audioElms.values());try{for(t.s();!(e=t.n()).done;)e.value.pause()}catch(e){t.e(e)}finally{t.f()}}},{key:"isPlaying",value:function(e){return(e=this.audioElms.get(e))&&!e.paused}},{key:"_isLoop",value:function(e){return e===Wl.DIALING||e===Wl.RINGING}},{key:"_createAudio",value:function(e){var t=new Audio;return t.autoplay=!1,t.muted=!1,t.loop=this._isLoop(e),t}}]),e}();function tc(e){return function(t){var n=t.descriptor.value;return t.descriptor.value=function(){if(tc.checkIE())throw new Error(null!=e?e:"Method ".concat(t.key," is not supported in Internet Explorer"));for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n.call.apply(n,[this].concat(a))},t}}(X=Xl=Xl||{}).INFO="INFO",X.WARNING="WARNING",X.ERROR="ERROR",X.NONE="NONE",(Be=$l=$l||{}).RECORDING="recording",Be.NONE="none",(e=Zl=Zl||{}).APNS="apns_voip",e.FCM="fcm_voip",tc.checkIE=function(){return!!window&&(0<window.navigator.userAgent.indexOf("MSIE ")||!!navigator.userAgent.match(/Trident.*rv:11\./))},tc.messages={CALL_IS_NOT_SUPPORTED:"Call is not supported in Internet Explorer"};var nc,rc,ac,ic="1.9.3",sc=function(){qn(t,ri);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return t}(),oc=function(){qn(t,Fi);var e=Zn(t);function t(){return Fn(this,t),e.call(this)}return Gn(t,[{key:"getApiOption",value:function(){return{auth:this.getAuth(),path:this.getPath(),method:this.getMethod(),body:this.getData(),headers:this.getHeaders()}}},{key:"getAuth",value:function(){return!0}},{key:"getHeaders",value:function(){return{}}}]),t}(),lc=function(){qn(t,oc);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).statsLog=n,r}return Gn(t,[{key:"getData",value:function(){return{log_group:"sdk_webrtc_statistics_v1.1",log_data:this.statsLog}}},{key:"getPath",value:function(){return"/v1/sdk/logs"}},{key:"getMethod",value:function(){return"POST"}}]),t}(),cc=function(){qn(t,oc);var e=Zn(t);function t(n,r){var a;return Fn(this,t),(a=e.call(this)).version=1,a.isOverflowLogs=r,a.logs=n,a}return Gn(t,[{key:"getData",value:function(){return{version:this.version,is_overflow_logs:this.isOverflowLogs,logs:this.getLogsData()}}},{key:"getPath",value:function(){return"/v1/sdk/debug_logs"}},{key:"getMethod",value:function(){return"POST"}},{key:"getLogsData",value:function(){return this.logs.map(function(e){return{log_dt:e.logDt,log_level:e.logLevel,log_message:e.logMessage}})}}]),t}(),uc=function(){qn(t,oc);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),(i=e.call(this)).appId=n,i.userId=r,i.accessToken=a,i}return Gn(t,[{key:"getAuth",value:function(){return!1}},{key:"getData",value:function(){return{app_id:this.appId,user_id:this.userId,access_token:this.accessToken}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/login")}},{key:"getMethod",value:function(){return"POST"}}]),t}(),dc=function(){qn(t,oc);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),(i=e.call(this)).userId=n,i.params=r,i.next=a,i}return Gn(t,[{key:"getData",value:function(){}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/calls?").concat(this._createQuery())}},{key:"getMethod",value:function(){return"GET"}},{key:"_createQuery",value:function(){var e;return ps.createQuery({role:this.params.myRole,limit:this._applyLimitConstraints(null===(e=this.params)||void 0===e?void 0:e.limit),end_result:this.params.endResults,next:this.next})}},{key:"_applyLimitConstraints",value:function(e){return null!=e?Math.min(Math.max(e,10),100):void 0}}]),t}(),hc=function(){qn(t,oc);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),(i=e.call(this)).userId=n,i.pushToken=r,i.tokenType=a,i}return Gn(t,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{token:this.pushToken,is_unique:!0}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType)}},{key:"getMethod",value:function(){return"POST"}}]),t}(),fc=function(){qn(t,oc);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),(i=e.call(this)).userId=n,i.pushToken=r,i.tokenType=a,i}return Gn(t,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType,"/").concat(this.pushToken)}},{key:"getMethod",value:function(){return"DELETE"}}]),t}(),pc=function(){qn(t,oc);var e=Zn(t);function t(n,r){var a;return Fn(this,t),(a=e.call(this)).userId=n,a.tokenType=r,a}return Gn(t,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType)}},{key:"getMethod",value:function(){return"DELETE"}}]),t}(),_c=function(){qn(t,oc);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).callId=n,r}return Gn(t,[{key:"getPath",value:function(){return"/v1/direct_calls".concat(this.getSubPath())}}]),t}();(Pe=nc=nc||{}).CALL="CALL",Pe.SGNL="SGNL",Pe.COMM="COMM",Pe.UTIL="UTIL",(X=rc=rc||{})[X.WS=0]="WS",X[X.API=1]="API",X[X.BOTH=2]="BOTH",(Be={}).API="api",Be.CMD_RETRIEVING="cmd_retrieving",Be.WEBHOOK="webhook",Be.WS="ws",Be.PUSH="push",(e=ac=ac||{}).REMOTE_PUSH="remote_push",e.VOIP_PUSH="voip_push",e.WEBHOOK="webhook",e.WS="ws";var mc,gc=function(){qn(t,Fi);var e=Zn(t);function t(){var n;return Fn(this,t),(n=e.call(this)).version=1,n.requestId=$s(),n}return Gn(t,[{key:"getApiOption",value:function(){return{auth:!0,path:"/v1/action/direct_call",method:"POST",headers:this.getHeaders(),body:{version:this.version,request_id:this.requestId,cmd:this.getCMD(),type:this.getType(),payload:this.getData()}}}},{key:"serialize",value:function(){return JSON.stringify({version:this.version,request_id:this.requestId,cmd:this.getCMD(),type:this.getType(),payload:this.getData()})}},{key:"requireResponse",value:function(){return!1}},{key:"getHeaders",value:function(){return{}}},{key:"sendStrategy",get:function(){return rc.WS}}]),t}(),vc=function(){qn(t,Fi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).cmd=n.cmd,r.type=n.type,r.payload=n.payload||{},r}return t}(),yc=function(){qn(t,vc);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"getCallId",value:function(){return this.payload.callId}}]),t}(),Ec=function(){qn(t,Fi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).version=n.version,r.messageId=n.message_id,r.cmd=n.cmd,r.type=n.type,r.deliveryInfo=n.delivery_info,r.sequenceNumber=n.sequence_number,r.payload=r.parseData(n.payload),r}return Gn(t,[{key:"getCallId",value:function(){return this.payload.callId}},{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),t}(),bc=function(){qn(t,Fi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).version=n.version,r.requestId=n.request_id,r.cmd=n.cmd,r.type=n.type,r.deliveryInfo=n.delivery_info,r.sequenceNumber=n.sequence_number,r.payload=r.parseData(n.payload),r}return Gn(t,[{key:"getCallId",value:function(){return this.payload.callId}},{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),t}(),Cc=function(){qn(t,Fi);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).version=n.version,r.messageId=n.message_id,r.cmd=n.cmd,r.type=n.type,r.deliveryInfo=n.delivery_info,r.sequenceNumber=n.sequence_number,r.payload=r.parseData(n.payload),r}return Gn(t,[{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),t}(),Oc=function(){qn(t,Cc);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"getCallId",value:function(){return this.payload.callId}}]),t}(),Nc=function(){qn(t,_c);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this,null)).callIds=n,r}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getData",value:function(){}},{key:"getSubPath",value:function(){var e=this.callIds.join(",");return"/missed_signal?call_ids=".concat(encodeURIComponent(e))}},{key:"getMethod",value:function(){return"GET"}}]),t}(),Sc=function(){qn(t,_c);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"getData",value:function(){return{}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"DELETE"}}]),t}(),Ac=function(){qn(t,_c);var e=Zn(t);function t(n,r){return Fn(this,t),(n=e.call(this,n)).keys=r,n}return Gn(t,[{key:"getData",value:function(){return{keys:this.keys}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"DELETE"}}]),t}(),Ic=function(){qn(t,_c);var e=Zn(t);function t(n,r){return Fn(this,t),(n=e.call(this,n)).customItems=r,n}return Gn(t,[{key:"getData",value:function(){return{custom_items:this.customItems,mode:"upsert"}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"PUT"}}]),t}(),kc=function(){qn(t,_c);var e=Zn(t);function t(n,r,a){return Fn(this,t),(n=e.call(this,n)).userRole=r,n.data=a,n}return Gn(t,[{key:"getData",value:function(){return{version:1,user_role:this.userRole,summary_data:this.data}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/summary")}},{key:"getMethod",value:function(){return"POST"}}]),t}();(Pe=mc=mc||{}).DIAL="dial",Pe.DIAL_ACK="dial_ack",Pe.DIAL_RCV="dial_rcv",Pe.CANCEL="cancel",Pe.ACCEPT="accept",Pe.ACCEPT_ACK="accept_ack",Pe.OTHER_DEVICE_ACCEPTED="other_device_accepted",Pe.DECLINE="decline",Pe.DECLINE_ACK="decline_ack",Pe.OFFER="offer",Pe.ANSWER="answer",Pe.CANDIDATE="candidate",Pe.REMOVE_CANDIDATES="remove_candidates",Pe.AUDIO="audio",Pe.VIDEO="video",Pe.HOLD="hold",Pe.HOLD_ACK="hold_ack",Pe.CUSTOM_ITEMS_UPDATE="custom_items_update",Pe.CUSTOM_ITEMS_DELETE="custom_items_delete",Pe.RECORDING="recording",Pe.END="end",Pe.TIME_OUT="timeout",Pe.CONNECTION_LOST="connection_lost",Pe.UNKNOWN_END="unknown_end",Pe.ALIVE="alive",Pe.NO_ANSWER="no_answer",Pe.CANCEL_ACK="cancel_ack",Pe.END_ACK="end_ack",Pe.TIMEOUT_ACK="timeout_ack",Pe.NO_ANSWER_ACK="no_answer_ack",Pe.CONNECTION_LOST_ACK="connection_lost_ack",Pe.UNKNOWN_END_ACK="unknown_end_ack",Pe.ALIVE_ACK="alive_ack",Pe.CONNECTED="connected",Pe.SNAPSHOT="snapshot",Pe.TURN_CHANGED="turn_changed";var Tc=function(){qn(t,yc);var e=Zn(t);function t(n){return Fn(this,t),Bn($n(n=e.call(this,{type:mc.DECLINE_ACK,cmd:nc.SGNL,payload:n})),"type",mc.DECLINE_ACK),n}return t}(),wc=function(){qn(t,yc);var e=Zn(t);function t(n){return Fn(this,t),Bn($n(n=e.call(this,{type:mc.SNAPSHOT,cmd:nc.SGNL,payload:n})),"type",mc.SNAPSHOT),n}return t}(),Rc=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.ACCEPT),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,turnCredential:{username:e.turn_credential.username,password:e.turn_credential.password,turnUrls:e.turn_credential.turn_urls,transportPolicy:e.turn_credential.transport_policy},constraints:{audio:e.audio,video:e.video},capabilities:e.capabilities||[]}}}]),t}(),Mc=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.OTHER_DEVICE_ACCEPTED),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id}}}]),t}(),Lc=n(function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t,n,r=Array.prototype.slice.call(arguments,1);r.length;){var a=r.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var i in a)t=a,n=i,Object.prototype.hasOwnProperty.call(t,n)&&(e[i]=a[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){for(var t,n,r,a=0,i=0,s=e.length;i<s;i++)a+=e[i].length;for(r=new Uint8Array(a),i=t=0,s=e.length;i<s;i++)n=e[i],r.set(n,t),t+=n.length;return r}},a={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(n)}),Pc=(Lc.assign,Lc.shrinkBuf,Lc.setTyped,Lc.Buf8,Lc.Buf16,Lc.Buf32,0);function Dc(e){for(var t=e.length;0<=--t;)e[t]=0}var Uc=0,xc=256,jc=xc+1+29,Fc=30,Hc=19,Gc=2*jc+1,Bc=15,Vc=16,zc=256,qc=16,Kc=17,Yc=18,Wc=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Qc=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Jc=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Xc=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$c=new Array(2*(jc+2));Dc($c);var Zc=new Array(2*Fc);Dc(Zc);var eu=new Array(512);Dc(eu);var tu=new Array(256);Dc(tu);var nu=new Array(29);Dc(nu);var ru,au,iu,su=new Array(Fc);function ou(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function lu(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function cu(e){return e<256?eu[e]:eu[256+(e>>>7)]}function uu(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function du(e,t,n){e.bi_valid>Vc-n?(e.bi_buf|=t<<e.bi_valid&65535,uu(e,e.bi_buf),e.bi_buf=t>>Vc-e.bi_valid,e.bi_valid+=n-Vc):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function hu(e,t,n){du(e,n[2*t],n[2*t+1])}function fu(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function pu(e,t,n){for(var r,a=new Array(Bc+1),i=0,s=1;s<=Bc;s++)a[s]=i=i+n[s-1]<<1;for(r=0;r<=t;r++){var o=e[2*r+1];0!==o&&(e[2*r]=fu(a[o]++,o))}}function _u(e){for(var t=0;t<jc;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Fc;t++)e.dyn_dtree[2*t]=0;for(t=0;t<Hc;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*zc]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function mu(e){8<e.bi_valid?uu(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function gu(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function vu(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&gu(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!gu(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function yu(e,t,n){var r,a,i,s,o=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],a=e.pending_buf[e.l_buf+o],o++,0==r?hu(e,a,t):(hu(e,(i=tu[a])+xc+1,t),0!==(s=Wc[i])&&du(e,a-=nu[i],s),hu(e,i=cu(--r),n),0!==(s=Qc[i])&&du(e,r-=su[i],s)),o<e.last_lit;);hu(e,zc,t)}function Eu(e,t){var n,r,a,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=Gc,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)vu(e,i,n);for(a=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],vu(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,vu(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e){for(var n,r,a,i,s,o=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,u=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,f=t.stat_desc.max_length,p=0,_=0;_<=Bc;_++)e.bl_count[_]=0;for(o[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<Gc;n++)f<(_=o[2*o[2*(r=e.heap[n])+1]+1]+1)&&(_=f,p++),o[2*r+1]=_,l<r||(e.bl_count[_]++,i=0,h<=r&&(i=d[r-h]),s=o[2*r],e.opt_len+=s*(_+i),u&&(e.static_len+=s*(c[2*r+1]+i)));if(0!==p){do{for(_=f-1;0===e.bl_count[_];)_--}while(e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[f]--,0<(p-=2));for(_=f;0!==_;_--)for(r=e.bl_count[_];0!==r;)l<(a=e.heap[--n])||(o[2*a+1]!==_&&(e.opt_len+=(_-o[2*a+1])*o[2*a],o[2*a+1]=_),r--)}}(e),pu(i,c,e.bl_count)}function bu(e,t,n){var r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=s,s=t[2*(r+1)+1],++o<l&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[2*qc]++):o<=10?e.bl_tree[2*Kc]++:e.bl_tree[2*Yc]++,i=a,c=(o=0)===s?(l=138,3):a===s?(l=6,3):(l=7,4))}function Cu(e,t,n){var r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(a=s,s=t[2*(r+1)+1],!(++o<l&&a===s)){if(o<c)for(;hu(e,a,e.bl_tree),0!=--o;);else 0!==a?(a!==i&&(hu(e,a,e.bl_tree),o--),hu(e,qc,e.bl_tree),du(e,o-3,2)):o<=10?(hu(e,Kc,e.bl_tree),du(e,o-3,3)):(hu(e,Yc,e.bl_tree),du(e,o-11,7));i=a,c=(o=0)===s?(l=138,3):a===s?(l=6,3):(l=7,4)}}Dc(su);var Ou=!1;function Nu(e,t,n,r){du(e,(Uc<<1)+(r?1:0),3),r=t,t=n,n=!0,mu(e=e),n&&(uu(e,t),uu(e,~t)),Lc.arraySet(e.pending_buf,e.window,r,t,e.pending),e.pending+=t}var Su,Au={_tr_init:function(e){Ou||(function(){for(var e,t,n,r=new Array(Bc+1),a=0,i=0;i<28;i++)for(nu[i]=a,e=0;e<1<<Wc[i];e++)tu[a++]=i;for(tu[a-1]=i,i=n=0;i<16;i++)for(su[i]=n,e=0;e<1<<Qc[i];e++)eu[n++]=i;for(n>>=7;i<Fc;i++)for(su[i]=n<<7,e=0;e<1<<Qc[i]-7;e++)eu[256+n++]=i;for(t=0;t<=Bc;t++)r[t]=0;for(e=0;e<=143;)$c[2*e+1]=8,e++,r[8]++;for(;e<=255;)$c[2*e+1]=9,e++,r[9]++;for(;e<=279;)$c[2*e+1]=7,e++,r[7]++;for(;e<=287;)$c[2*e+1]=8,e++,r[8]++;for(pu($c,jc+1,r),e=0;e<Fc;e++)Zc[2*e+1]=5,Zc[2*e]=fu(e,5);ru=new ou($c,Wc,xc+1,jc,Bc),au=new ou(Zc,Qc,0,Fc,Bc),iu=new ou(new Array(0),Jc,0,Hc,7)}(),Ou=!0),e.l_desc=new lu(e.dyn_ltree,ru),e.d_desc=new lu(e.dyn_dtree,au),e.bl_desc=new lu(e.bl_tree,iu),e.bi_buf=0,e.bi_valid=0,_u(e)},_tr_stored_block:Nu,_tr_flush_block:function(e,t,n,r){var a,i,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return Pc;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<xc;n++)if(0!==e.dyn_ltree[2*n])return 1;return Pc}(e)),Eu(e,e.l_desc),Eu(e,e.d_desc),s=function(e){var t;for(bu(e,e.dyn_ltree,e.l_desc.max_code),bu(e,e.dyn_dtree,e.d_desc.max_code),Eu(e,e.bl_desc),t=Hc-1;3<=t&&0===e.bl_tree[2*Xc[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?Nu(e,t,n,r):4===e.strategy||i===a?(du(e,2+(r?1:0),3),yu(e,$c,Zc)):(du(e,4+(r?1:0),3),function(e,t,n,r){var a;for(du(e,t-257,5),du(e,n-1,5),du(e,r-4,4),a=0;a<r;a++)du(e,e.bl_tree[2*Xc[a]+1],3);Cu(e,e.dyn_ltree,t-1),Cu(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),yu(e,e.dyn_ltree,e.dyn_dtree)),_u(e),r&&mu(e)},_tr_tally:function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(tu[n]+xc+1)]++,e.dyn_dtree[2*cu(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){du(e,2,3),hu(e,zc,$c),16===(e=e).bi_valid?(uu(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},Iu=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;i=i+(a=a+t[r++]|0)|0,--s;);a%=65521,i%=65521}return a|i<<16|0},ku=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),Tu=function(e,t,n,r){var a=ku,i=r+n;e^=-1;for(var s=r;s<i;s++)e=e>>>8^a[255&(e^t[s])];return-1^e},wu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ru=0,Mu=4,Lu=0,Pu=-2,Du=-1,Uu=4,xu=2,ju=8,Fu=9,Hu=286,Gu=30,Bu=19,Vu=2*Hu+1,zu=15,qu=3,Ku=258,Yu=Ku+qu+1,Wu=42,Qu=113,Ju=1,Xu=2,$u=3,Zu=4;function ed(e,t){return e.msg=wu[t],t}function td(e){return(e<<1)-(4<e?9:0)}function nd(e){for(var t=e.length;0<=--t;)e[t]=0}function rd(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(Lc.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function ad(e,t){Au._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,rd(e.strm)}function id(e,t){e.pending_buf[e.pending++]=t}function sd(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function od(e,t){var n,r,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-Yu?e.strstart-(e.w_size-Yu):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+Ku,f=c[i+s-1],p=c[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(n=t)+s]===p&&c[n+s-1]===f&&c[n]===c[i]&&c[++n]===c[i+1]){for(i+=2,n++;c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<h;);if(r=Ku-(h-i),i=h-Ku,s<r){if(e.match_start=t,o<=(s=r))break;f=c[i+s-1],p=c[i+s]}}}while((t=d[t&u])>l&&0!=--a);return s<=e.lookahead?s:e.lookahead}function ld(e){var t,n,r,a,i,s,o,l,c,u=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=u+(u-Yu)){for(Lc.arraySet(e.window,e.window,u,u,0),e.match_start-=u,e.strstart-=u,e.block_start-=u,n=e.hash_size,t=n;r=e.head[--t],e.head[t]=u<=r?r-u:0,--n;);for(t=n=u;r=e.prev[--t],e.prev[t]=u<=r?r-u:0,--n;);c+=u}if(0===e.strm.avail_in)break;if(i=e.strm,s=e.window,o=e.strstart+e.lookahead,l=c,c=void 0,c=i.avail_in,l<c&&(c=l),n=0===c?0:(i.avail_in-=c,Lc.arraySet(s,i.input,i.next_in,c,o),1===i.state.wrap?i.adler=Iu(i.adler,s,c,o):2===i.state.wrap&&(i.adler=Tu(i.adler,s,c,o)),i.next_in+=c,i.total_in+=c,c),e.lookahead+=n,e.lookahead+e.insert>=qu)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+qu-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<qu)););}while(e.lookahead<Yu&&0!==e.strm.avail_in)}function cd(e,t){for(var n,r;;){if(e.lookahead<Yu){if(ld(e),e.lookahead<Yu&&t===Ru)return Ju;if(0===e.lookahead)break}if(n=0,e.lookahead>=qu&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+qu-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Yu&&(e.match_length=od(e,n)),e.match_length>=qu)if(r=Au._tr_tally(e,e.strstart-e.match_start,e.match_length-qu),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=qu){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+qu-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Au._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ad(e,!1),0===e.strm.avail_out))return Ju}return e.insert=e.strstart<qu-1?e.strstart:qu-1,t===Mu?(ad(e,!0),0===e.strm.avail_out?$u:Zu):e.last_lit&&(ad(e,!1),0===e.strm.avail_out)?Ju:Xu}function ud(e,t){for(var n,r,a;;){if(e.lookahead<Yu){if(ld(e),e.lookahead<Yu&&t===Ru)return Ju;if(0===e.lookahead)break}if(n=0,e.lookahead>=qu&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+qu-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=qu-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Yu&&(e.match_length=od(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===qu&&4096<e.strstart-e.match_start)&&(e.match_length=qu-1)),e.prev_length>=qu&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-qu,r=Au._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-qu),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+qu-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=qu-1,e.strstart++,r&&(ad(e,!1),0===e.strm.avail_out))return Ju}else if(e.match_available){if((r=Au._tr_tally(e,0,e.window[e.strstart-1]))&&ad(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Ju}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Au._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<qu-1?e.strstart:qu-1,t===Mu?(ad(e,!0),0===e.strm.avail_out?$u:Zu):e.last_lit&&(ad(e,!1),0===e.strm.avail_out)?Ju:Xu}function dd(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function hd(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ju,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Lc.Buf16(2*Vu),this.dyn_dtree=new Lc.Buf16(2*(2*Gu+1)),this.bl_tree=new Lc.Buf16(2*(2*Bu+1)),nd(this.dyn_ltree),nd(this.dyn_dtree),nd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Lc.Buf16(zu+1),this.heap=new Lc.Buf16(2*Hu+1),nd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Lc.Buf16(2*Hu+1),nd(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fd(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=xu,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Wu:Qu,e.adler=2===t.wrap?0:1,t.last_flush=Ru,Au._tr_init(t),Lu):ed(e,Pu)}function pd(e){var t=fd(e);return t===Lu&&((e=e.state).window_size=2*e.w_size,nd(e.head),e.max_lazy_match=Su[e.level].max_lazy,e.good_match=Su[e.level].good_length,e.nice_match=Su[e.level].nice_length,e.max_chain_length=Su[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=qu-1,e.match_available=0,e.ins_h=0),t}function _d(e,t,n,r,a,i){if(!e)return Pu;var s=1;if(t===Du&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),a<1||Fu<a||n!==ju||r<8||15<r||t<0||9<t||i<0||Uu<i)return ed(e,Pu);8===r&&(r=9);var o=new hd;return(e.state=o).strm=e,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+qu-1)/qu),o.window=new Lc.Buf8(2*o.w_size),o.head=new Lc.Buf16(o.hash_size),o.prev=new Lc.Buf16(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Lc.Buf8(o.pending_buf_size),o.d_buf=+o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=i,o.method=n,pd(e)}Su=[new dd(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ld(e),0===e.lookahead&&t===Ru)return Ju;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,ad(e,!1),0===e.strm.avail_out))return Ju;if(e.strstart-e.block_start>=e.w_size-Yu&&(ad(e,!1),0===e.strm.avail_out))return Ju}return e.insert=0,t===Mu?(ad(e,!0),0===e.strm.avail_out?$u:Zu):(e.strstart>e.block_start&&(ad(e,!1),e.strm.avail_out),Ju)}),new dd(4,4,8,4,cd),new dd(4,5,16,8,cd),new dd(4,6,32,32,cd),new dd(4,4,16,16,ud),new dd(8,16,32,32,ud),new dd(8,16,128,128,ud),new dd(8,32,128,256,ud),new dd(32,128,258,1024,ud),new dd(32,258,258,4096,ud)];var md={deflateInit:function(e,t){return _d(e,t,ju,15,8,0)},deflateInit2:_d,deflateReset:pd,deflateResetKeep:fd,deflateSetHeader:function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,Lu):Pu},deflate:function(e,t){var n,r,a,i;if(!e||!e.state||5<t||t<0)return e?ed(e,Pu):Pu;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&t!==Mu)return ed(e,0===e.avail_out?-5:Pu);if(n.strm=e,s=n.last_flush,n.last_flush=t,n.status===Wu&&(2===n.wrap?(e.adler=0,id(n,31),id(n,139),id(n,8),n.gzhead?(id(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),id(n,255&n.gzhead.time),id(n,n.gzhead.time>>8&255),id(n,n.gzhead.time>>16&255),id(n,n.gzhead.time>>24&255),id(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),id(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(id(n,255&n.gzhead.extra.length),id(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Tu(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(id(n,0),id(n,0),id(n,0),id(n,0),id(n,0),id(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),id(n,3),n.status=Qu)):(i=ju+(n.w_bits-8<<4)<<8,i|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(i|=32),i+=31-i%31,n.status=Qu,sd(n,i),0!==n.strstart&&(sd(n,e.adler>>>16),sd(n,65535&e.adler)),e.adler=1)),69===n.status)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>r&&(e.adler=Tu(e.adler,n.pending_buf,n.pending-r,r)),rd(e),r=n.pending,n.pending!==n.pending_buf_size));)id(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(e.adler=Tu(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=Tu(e.adler,n.pending_buf,n.pending-r,r)),rd(e),r=n.pending,n.pending===n.pending_buf_size)){a=1;break}}while(a=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,id(n,a),0!==a);n.gzhead.hcrc&&n.pending>r&&(e.adler=Tu(e.adler,n.pending_buf,n.pending-r,r)),0===a&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=Tu(e.adler,n.pending_buf,n.pending-r,r)),rd(e),r=n.pending,n.pending===n.pending_buf_size)){a=1;break}}while(a=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,id(n,a),0!==a);n.gzhead.hcrc&&n.pending>r&&(e.adler=Tu(e.adler,n.pending_buf,n.pending-r,r)),0===a&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&rd(e),n.pending+2<=n.pending_buf_size&&(id(n,255&e.adler),id(n,e.adler>>8&255),e.adler=0,n.status=Qu)):n.status=Qu),0!==n.pending){if(rd(e),0===e.avail_out)return n.last_flush=-1,Lu}else if(0===e.avail_in&&td(t)<=td(s)&&t!==Mu)return ed(e,-5);if(666===n.status&&0!==e.avail_in)return ed(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==Ru&&666!==n.status){var s=2===n.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(ld(e),0===e.lookahead)){if(t===Ru)return Ju;break}if(e.match_length=0,n=Au._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ad(e,!1),0===e.strm.avail_out))return Ju}return e.insert=0,t===Mu?(ad(e,!0),0===e.strm.avail_out?$u:Zu):e.last_lit&&(ad(e,!1),0===e.strm.avail_out)?Ju:Xu}(n,t):3===n.strategy?function(e,t){for(var n,r,a,i,s=e.window;;){if(e.lookahead<=Ku){if(ld(e),e.lookahead<=Ku&&t===Ru)return Ju;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=qu&&0<e.strstart&&(r=s[a=e.strstart-1])===s[++a]&&r===s[++a]&&r===s[++a]){for(i=e.strstart+Ku;r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<i;);e.match_length=Ku-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=qu?(n=Au._tr_tally(e,1,e.match_length-qu),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Au._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ad(e,!1),0===e.strm.avail_out))return Ju}return e.insert=0,t===Mu?(ad(e,!0),0===e.strm.avail_out?$u:Zu):e.last_lit&&(ad(e,!1),0===e.strm.avail_out)?Ju:Xu}(n,t):Su[n.level].func(n,t);if(s!==$u&&s!==Zu||(n.status=666),s===Ju||s===$u)return 0===e.avail_out&&(n.last_flush=-1),Lu;if(s===Xu&&(1===t?Au._tr_align(n):5!==t&&(Au._tr_stored_block(n,0,0,!1),3===t&&(nd(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),rd(e),0===e.avail_out))return n.last_flush=-1,Lu}return t!==Mu?Lu:n.wrap<=0?1:(2===n.wrap?(id(n,255&e.adler),id(n,e.adler>>8&255),id(n,e.adler>>16&255),id(n,e.adler>>24&255),id(n,255&e.total_in),id(n,e.total_in>>8&255),id(n,e.total_in>>16&255),id(n,e.total_in>>24&255)):(sd(n,e.adler>>>16),sd(n,65535&e.adler)),rd(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?Lu:1)},deflateEnd:function(e){var t;return e&&e.state?(t=e.state.status)!==Wu&&69!==t&&73!==t&&91!==t&&103!==t&&t!==Qu&&666!==t?ed(e,Pu):(e.state=null,t===Qu?ed(e,-3):Lu):Pu},deflateSetDictionary:function(e,t){var n,r,a,i,s,o,l,c=t.length;if(!e||!e.state)return Pu;if(2===(i=(n=e.state).wrap)||1===i&&n.status!==Wu||n.lookahead)return Pu;for(1===i&&(e.adler=Iu(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===i&&(nd(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new Lc.Buf8(n.w_size),Lc.arraySet(l,t,c-n.w_size,n.w_size,0),t=l,c=n.w_size),s=e.avail_in,o=e.next_in,l=e.input,e.avail_in=c,e.next_in=0,e.input=t,ld(n);n.lookahead>=qu;){for(r=n.strstart,a=n.lookahead-(qu-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+qu-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--a;);n.strstart=r,n.lookahead=qu-1,ld(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=qu-1,n.match_available=0,e.next_in=o,e.input=l,e.avail_in=s,n.wrap=i,Lu},deflateInfo:"pako deflate (from Nodeca project)"},gd=!0,vd=!0;try{String.fromCharCode.apply(null,[0])}catch(e){gd=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){vd=!1}for(var yd=new Lc.Buf8(256),Ed=0;Ed<256;Ed++)yd[Ed]=252<=Ed?6:248<=Ed?5:240<=Ed?4:224<=Ed?3:192<=Ed?2:1;function bd(e,t){if(t<65534&&(e.subarray&&vd||!e.subarray&&gd))return String.fromCharCode.apply(null,Lc.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}yd[254]=yd[254]=1;var Cd={string2buf:function(e){for(var t,n,r,a,i=e.length,s=0,o=0;o<i;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<i&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Lc.Buf8(s),o=a=0;a<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<i&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},buf2binstring:function(e){return bd(e,e.length)},binstring2buf:function(e){for(var t=new Lc.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},buf2string:function(e,t){for(var n,r,a=t||e.length,i=new Array(2*a),s=0,o=0;o<a;)if((n=e[o++])<128)i[s++]=n;else if(4<(r=yd[n]))i[s++]=65533,o+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&o<a;)n=n<<6|63&e[o++],r--;1<r?i[s++]=65533:n<65536?i[s++]=n:(n-=65536,i[s++]=55296|n>>10&1023,i[s++]=56320|1023&n)}return bd(i,s)},utf8border:function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return!(n<0)&&0!==n&&n+yd[e[n]]>t?n:t}},Od=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Nd=Object.prototype.toString,Sd=0,Ad=-1,Id=0,kd=8;function Td(e){if(!(this instanceof Td))return new Td(e);this.options=Lc.assign({level:Ad,method:kd,chunkSize:16384,windowBits:15,memLevel:8,strategy:Id,to:""},e||{});var t=this.options;if(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Od,this.strm.avail_out=0,(e=md.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy))!==Sd)throw new Error(wu[e]);if(t.header&&md.deflateSetHeader(this.strm,t.header),t.dictionary){if(t="string"==typeof t.dictionary?Cd.string2buf(t.dictionary):"[object ArrayBuffer]"===Nd.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=md.deflateSetDictionary(this.strm,t))!==Sd)throw new Error(wu[e]);this._dict_set=!0}}function wd(e,t){if((t=new Td(t)).push(e,!0),t.err)throw t.msg||wu[t.err];return t.result}Td.prototype.push=function(e,t){var n,r,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=Cd.string2buf(e):"[object ArrayBuffer]"===Nd.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new Lc.Buf8(i),a.next_out=0,a.avail_out=i),1!==(n=md.deflate(a,r))&&n!==Sd)return this.onEnd(n),!(this.ended=!0)}while(0!==a.avail_out&&(0!==a.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(Cd.buf2binstring(Lc.shrinkBuf(a.output,a.next_out))):this.onData(Lc.shrinkBuf(a.output,a.next_out))),(0<a.avail_in||0===a.avail_out)&&1!==n);return 4===r?(n=md.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Sd):2!==r||(this.onEnd(Sd),!(a.avail_out=0))},Td.prototype.onData=function(e){this.chunks.push(e)},Td.prototype.onEnd=function(e){e===Sd&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Lc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var X={Deflate:Td,deflate:wd,deflateRaw:function(e,t){return(t=t||{}).raw=!0,wd(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,wd(e,t)}},Rd=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Md=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ld=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Pd=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Dd=function(e,t,n,r,a,i,s,o){for(var l,c,u,d,h,f,p,_,m,g=o.bits,v=0,y=0,E=0,b=0,C=0,O=0,N=0,S=0,A=0,I=0,k=null,T=0,w=new Lc.Buf16(16),R=new Lc.Buf16(16),M=null,L=0,v=0;v<=15;v++)w[v]=0;for(y=0;y<r;y++)w[t[n+y]]++;for(C=g,b=15;1<=b&&0===w[b];b--);if(b<C&&(C=b),0===b)return a[i++]=20971520,a[i++]=20971520,o.bits=1,0;for(E=1;E<b&&0===w[E];E++);for(C<E&&(C=E),v=S=1;v<=15;v++)if(S<<=1,(S-=w[v])<0)return-1;if(0<S&&(0===e||1!==b))return-1;for(R[1]=0,v=1;v<15;v++)R[v+1]=R[v]+w[v];for(y=0;y<r;y++)0!==t[n+y]&&(s[R[t[n+y]]++]=y);if(f=0===e?(k=M=s,19):1===e?(k=Rd,T-=257,M=Md,L-=257,256):(k=Ld,M=Pd,-1),v=E,h=i,N=y=I=0,u=-1,d=(A=1<<(O=C))-1,1===e&&852<A||2===e&&592<A)return 1;for(;;){for(p=v-N,m=s[y]<f?(_=0,s[y]):s[y]>f?(_=M[L+s[y]],k[T+s[y]]):(_=96,0),l=1<<v-N,E=c=1<<O;a[h+(I>>N)+(c-=l)]=p<<24|_<<16|m|0,0!==c;);for(l=1<<v-1;I&l;)l>>=1;if(0!==l?(I&=l-1,I+=l):I=0,y++,0==--w[v]){if(v===b)break;v=t[n+s[y]]}if(C<v&&(I&d)!==u){for(0===N&&(N=C),h+=E,S=1<<(O=v-N);O+N<b&&!((S-=w[O+N])<=0);)O++,S<<=1;if(A+=1<<O,1===e&&852<A||2===e&&592<A)return 1;a[u=I&d]=C<<24|O<<16|h-i|0}}return 0!==I&&(a[h+I]=v-N<<24|64<<16|0),o.bits=C,0},Ud=0,xd=-2,jd=1,Fd=852,Hd=592;function Gd(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Bd(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Lc.Buf16(320),this.work=new Lc.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Vd(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=jd,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Lc.Buf32(Fd),t.distcode=t.distdyn=new Lc.Buf32(Hd),t.sane=1,t.back=-1,Ud):xd}function zd(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,Vd(e)):xd}function qd(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?xd:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,zd(e))):xd}function Kd(e,t){var n;return e?(n=new Bd,(e.state=n).window=null,(t=qd(e,t))!==Ud&&(e.state=null),t):xd}var Yd,Wd,Qd=!0;function Jd(e,t,n,r){var a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Lc.Buf8(a.wsize)),r>=a.wsize?(Lc.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(r<(e=a.wsize-a.wnext)&&(e=r),Lc.arraySet(a.window,t,n-r,e,a.wnext),(r-=e)?(Lc.arraySet(a.window,t,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=e,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=e))),0}var Xd={inflateReset:zd,inflateReset2:qd,inflateResetKeep:Vd,inflateInit:function(e){return Kd(e,15)},inflateInit2:Kd,inflate:function(e,t){var n,r,a,i,s,o,l,c,u,d,h,f,p,_,m,g,v,y,E,b,C,O,N,S,A=0,I=new Lc.Buf8(4),k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return xd;12===(n=e.state).mode&&(n.mode=13),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,d=o,h=l,O=Ud;e:for(;;)switch(n.mode){case jd:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(2&n.wrap&&35615===c){I[n.check=0]=255&c,I[1]=c>>>8&255,n.check=Tu(n.check,I,2,0),u=c=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&c)){e.msg="unknown compression method",n.mode=30;break}if(u-=4,C=8+(15&(c>>>=4)),0===n.wbits)n.wbits=C;else if(C>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<C,e.adler=n.check=1,n.mode=512&c?10:12,u=c=0;break;case 2:for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(n.flags=c,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(I[0]=255&c,I[1]=c>>>8&255,n.check=Tu(n.check,I,2,0)),u=c=0,n.mode=3;case 3:for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(I[0]=255&c,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,n.check=Tu(n.check,I,4,0)),u=c=0,n.mode=4;case 4:for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(I[0]=255&c,I[1]=c>>>8&255,n.check=Tu(n.check,I,2,0)),u=c=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(I[0]=255&c,I[1]=c>>>8&255,n.check=Tu(n.check,I,2,0)),u=c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(o<(f=n.length)&&(f=o),f&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Lc.arraySet(n.head.extra,r,i,f,C)),512&n.flags&&(n.check=Tu(n.check,r,f,i)),o-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break e;for(f=0;C=r[i+f++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C)),C&&f<o;);if(512&n.flags&&(n.check=Tu(n.check,r,f,i)),o-=f,i+=f,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break e;for(f=0;C=r[i+f++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C)),C&&f<o;);if(512&n.flags&&(n.check=Tu(n.check,r,f,i)),o-=f,i+=f,C)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}u=c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}e.adler=n.check=Gd(c),u=c=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}switch(n.last=1&c,--u,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(function(e){if(Qd){var t;for(Yd=new Lc.Buf32(512),Wd=new Lc.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Dd(1,e.lens,0,288,Yd,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Dd(2,e.lens,0,32,Wd,0,e.work,{bits:5}),Qd=!1}e.lencode=Yd,e.lenbits=9,e.distcode=Wd,e.distbits=5}(n),n.mode=20,6!==t)break;c>>>=2,u-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,u=c=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(f=n.length){if(o<f&&(f=o),l<f&&(f=l),0===f)break e;Lc.arraySet(a,r,i,f,s),o-=f,i+=f,l-=f,s+=f,n.length-=f;break}n.mode=12;break;case 17:for(;u<14;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.lens[k[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[k[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},O=Dd(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,O){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;g=(A=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,v=65535&A,!((m=A>>>24)<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(v<16)c>>>=m,u-=m,n.lens[n.have++]=v;else{if(16===v){for(S=m+2;u<S;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(c>>>=m,u-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}C=n.lens[n.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===v){for(S=m+3;u<S;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}u-=m,C=0,f=3+(7&(c>>>=m)),c>>>=3,u-=3}else{for(S=m+7;u<S;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}u-=m,C=0,f=11+(127&(c>>>=m)),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;f--;)n.lens[n.have++]=C}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,N={bits:n.lenbits},O=Dd(1,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,O){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},O=Dd(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,O){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=o&&258<=l){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,function(e){var t,n,r,a,i,s,o=e.state,l=e.next_in,c=e.input,u=l+(e.avail_in-5),d=e.next_out,f=e.output,p=d-(h-e.avail_out),_=d+(e.avail_out-257),m=o.dmax,g=o.wsize,v=o.whave,y=o.wnext,E=o.window,b=o.hold,C=o.bits,O=o.lencode,N=o.distcode,S=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;t:do{C<15&&(b+=c[l++]<<C,C+=8,b+=c[l++]<<C,C+=8),t=O[b&S];n:for(;;){if(b>>>=n=t>>>24,C-=n,0===(n=t>>>16&255))f[d++]=65535&t;else{if(!(16&n)){if(0==(64&n)){t=O[(65535&t)+(b&(1<<n)-1)];continue n}if(32&n){o.mode=12;break t}e.msg="invalid literal/length code",o.mode=30;break t}r=65535&t,(n&=15)&&(C<n&&(b+=c[l++]<<C,C+=8),r+=b&(1<<n)-1,b>>>=n,C-=n),C<15&&(b+=c[l++]<<C,C+=8,b+=c[l++]<<C,C+=8),t=N[b&A];r:for(;;){if(b>>>=n=t>>>24,C-=n,!(16&(n=t>>>16&255))){if(0==(64&n)){t=N[(65535&t)+(b&(1<<n)-1)];continue r}e.msg="invalid distance code",o.mode=30;break t}if(a=65535&t,C<(n&=15)&&(b+=c[l++]<<C,(C+=8)<n&&(b+=c[l++]<<C,C+=8)),m<(a+=b&(1<<n)-1)){e.msg="invalid distance too far back",o.mode=30;break t}if(b>>>=n,C-=n,(n=d-p)<a){if(v<(n=a-n)&&o.sane){e.msg="invalid distance too far back",o.mode=30;break t}if(s=E,(i=0)===y){if(i+=g-n,n<r){for(r-=n;f[d++]=E[i++],--n;);i=d-a,s=f}}else if(y<n){if(i+=g+y-n,(n-=y)<r){for(r-=n;f[d++]=E[i++],--n;);if(i=0,y<r){for(r-=n=y;f[d++]=E[i++],--n;);i=d-a,s=f}}}else if(i+=y-n,n<r){for(r-=n;f[d++]=E[i++],--n;);i=d-a,s=f}for(;2<r;)f[d++]=s[i++],f[d++]=s[i++],f[d++]=s[i++],r-=3;r&&(f[d++]=s[i++],1<r&&(f[d++]=s[i++]))}else{for(i=d-a;f[d++]=f[i++],f[d++]=f[i++],f[d++]=f[i++],2<(r-=3););r&&(f[d++]=f[i++],1<r&&(f[d++]=f[i++]))}break}}break}}while(l<u&&d<_);l-=r=C>>3,b&=(1<<(C-=r<<3))-1,e.next_in=l,e.next_out=d,e.avail_in=l<u?u-l+5:5-(l-u),e.avail_out=d<_?_-d+257:257-(d-_),o.hold=b,o.bits=C}(e),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;g=(A=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,v=65535&A,!((m=A>>>24)<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(g&&0==(240&g)){for(y=m,E=g,b=v;g=(A=n.lencode[b+((c&(1<<y+E)-1)>>y)])>>>16&255,v=65535&A,!(y+(m=A>>>24)<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=m,u-=m,n.back+=m,n.length=v,0===g){n.mode=26;break}if(32&g){n.back=-1,n.mode=12;break}if(64&g){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&g,n.mode=22;case 22:if(n.extra){for(S=n.extra;u<S;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;g=(A=n.distcode[c&(1<<n.distbits)-1])>>>16&255,v=65535&A,!((m=A>>>24)<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(0==(240&g)){for(y=m,E=g,b=v;g=(A=n.distcode[b+((c&(1<<y+E)-1)>>y)])>>>16&255,v=65535&A,!(y+(m=A>>>24)<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=m,u-=m,n.back+=m,64&g){e.msg="invalid distance code",n.mode=30;break}n.offset=v,n.extra=15&g,n.mode=24;case 24:if(n.extra){for(S=n.extra;u<S;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(f=h-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}p=f>n.wnext?(f-=n.wnext,n.wsize-f):n.wnext-f,f>n.length&&(f=n.length),_=n.window}else _=a,p=s-n.offset,f=n.length;for(l<f&&(f=l),l-=f,n.length-=f;a[s++]=_[p++],--f;);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;a[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===o)break e;o--,c|=r[i++]<<u,u+=8}if(h-=l,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=(n.flags?Tu:Iu)(n.check,a,h,s-h)),h=l,(n.flags?c:Gd(c))!==n.check){e.msg="incorrect data check",n.mode=30;break}u=c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}u=c=0}n.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;case 32:default:return xd}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&Jd(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=(n.flags?Tu:Iu)(n.check,a,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==d&&0===h||4===t)&&O===Ud&&(O=-5),O},inflateEnd:function(e){if(!e||!e.state)return xd;var t=e.state;return t.window&&(t.window=null),e.state=null,Ud},inflateGetHeader:function(e,t){return e&&e.state&&0!=(2&(e=e.state).wrap)?((e.head=t).done=!1,Ud):xd},inflateSetDictionary:function(e,t){var n,r=t.length;return!e||!e.state||0!==(n=e.state).wrap&&11!==n.mode?xd:11===n.mode&&Iu(1,t,r,0)!==n.check?-3:Jd(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,Ud)},inflateInfo:"pako inflate (from Nodeca project)"},$d={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Zd=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},eh=Object.prototype.toString;function th(e){if(!(this instanceof th))return new th(e);this.options=Lc.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;if(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Od,this.strm.avail_out=0,(e=Xd.inflateInit2(this.strm,t.windowBits))!==$d.Z_OK)throw new Error(wu[e]);if(this.header=new Zd,Xd.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Cd.string2buf(t.dictionary):"[object ArrayBuffer]"===eh.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Xd.inflateSetDictionary(this.strm,t.dictionary))!==$d.Z_OK))throw new Error(wu[e])}function nh(e,t){if((t=new th(t)).push(e,!0),t.err)throw t.msg||wu[t.err];return t.result}th.prototype.push=function(e,t){var n,r,a,i,s,o=this.strm,l=this.options.chunkSize,c=this.options.dictionary,u=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?$d.Z_FINISH:$d.Z_NO_FLUSH,"string"==typeof e?o.input=Cd.binstring2buf(e):"[object ArrayBuffer]"===eh.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new Lc.Buf8(l),o.next_out=0,o.avail_out=l),(n=Xd.inflate(o,$d.Z_NO_FLUSH))===$d.Z_NEED_DICT&&c&&(n=Xd.inflateSetDictionary(this.strm,c)),n===$d.Z_BUF_ERROR&&!0===u&&(n=$d.Z_OK,u=!1),n!==$d.Z_STREAM_END&&n!==$d.Z_OK)return this.onEnd(n),!(this.ended=!0)}while(o.next_out&&(0!==o.avail_out&&n!==$d.Z_STREAM_END&&(0!==o.avail_in||r!==$d.Z_FINISH&&r!==$d.Z_SYNC_FLUSH)||("string"===this.options.to?(a=Cd.utf8border(o.output,o.next_out),i=o.next_out-a,s=Cd.buf2string(o.output,a),o.next_out=i,o.avail_out=l-i,i&&Lc.arraySet(o.output,o.output,a,i,0),this.onData(s)):this.onData(Lc.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(u=!0),(0<o.avail_in||0===o.avail_out)&&n!==$d.Z_STREAM_END);return n===$d.Z_STREAM_END&&(r=$d.Z_FINISH),r===$d.Z_FINISH?(n=Xd.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===$d.Z_OK):r!==$d.Z_SYNC_FLUSH||(this.onEnd($d.Z_OK),!(o.avail_out=0))},th.prototype.onData=function(e){this.chunks.push(e)},th.prototype.onEnd=function(e){e===$d.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Lc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},Be={Inflate:th,inflate:nh,inflateRaw:function(e,t){return(t=t||{}).raw=!0,nh(e,t)},ungzip:nh},e={},(0,Lc.assign)(e,X,Be,$d);var rh,ah=e.gzip,ih=e.ungzip,sh=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"encode",value:function(e){return btoa(e)}},{key:"decode",value:function(e){return atob(e)}}]),e}(),oh=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"compress",value:function(e){return e=ah(e,{to:"string"}),sh.encode(e)}},{key:"decompress",value:function(e){return e=sh.decode(e),ih(e,{to:"string"})}}]),e}(),lh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.ANSWER),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,peerConnectionId:e.peer_connection_id,sdp:oh.decompress(e.sdp)}}}]),t}(),ch=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.AUDIO),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,isEnabled:e.is_enabled}}}]),t}(),uh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.CANDIDATE),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,peerConnectionId:e.peer_connection_id,candidate:{sdpMLineIndex:e.candidate.sdp_mline_index,sdpMid:e.candidate.sdp_mid,sdp:e.candidate.sdp}}}}]),t}(),dh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.CUSTOM_ITEMS_DELETE),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,deleted:e.deleted,customItems:e.custom_items}}}]),t}(),hh=function e(t){Fn(this,e),this.userId=t.user_id,this.nickname=t.nickname,this.profileUrl=t.profile_url,this.metaData=t.meta_data,this.isActive=t.is_active,this.role=t.role},fh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.DIAL),n}return Gn(t,[{key:"parseData",value:function(e){return{isVideoCall:e.is_video_call,callId:e.call_id,caller:new hh(e.caller),callee:new hh(e.callee),turnCredential:{username:e.turn_credential.username,password:e.turn_credential.password,turnUrls:e.turn_credential.turn_urls,transportPolicy:e.turn_credential.transport_policy},constraints:{audio:e.constraints.audio,video:e.constraints.video},customItems:e.custom_items,shortLivedToken:e.sbcall_short_lived_token,capabilities:e.capabilities||[]}}}]),t}(),ph=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.DIAL_RCV),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,calleeDeliveryInfo:e.callee_delivery_info,receivedType:e.received_type}}}]),t}(),_h=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];Fn(this,e),this.callId=t.call_id,this.isVideoCall=t.is_video_call,this._customItems=t.custom_items,this.userRole=t.user_role,this.startedAt=t.started_at,this.endedAt=t.ended_at,this._participants=t.participants.map(function(e){return new hh(e)}),this.endedBy=this._participants.find(function(e){return e.userId===t.ended_by}),this.duration=t.duration,this.endResult=t.end_result,this.callType=t.call_type,this._isFromServer=n}return Gn(e,[{key:"caller",get:function(){return this._participants.find(function(e){return e.role===hi.CALLER})}},{key:"callee",get:function(){return this._participants.find(function(e){return e.role===hi.CALLEE})}},{key:"customItems",get:function(){return zn({},this._customItems)}},{key:"isFromServer",get:function(){return this._isFromServer}}]),e}(),mh=function(){qn(t,Ec);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,endedCall:new _h(e.ended_call)}}}]),t}(),gh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.HOLD),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,holdedBy:e.holded_by,isPeerOnHold:e.is_peer_on_hold,isRelayed:e.is_relayed}}}]),t}(),vh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.OFFER),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,peerConnectionId:e.peer_connection_id,sdp:oh.decompress(e.sdp)}}}]),t}(),yh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.RECORDING),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,recordingId:e.recording_id,recordingType:e.recording_type,recordingStatus:e.recording_status}}}]),t}(),Eh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.REMOVE_CANDIDATES),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,candidates:e.candidates.map(function(e){return{sdpMLineIndex:e.sdp_mline_index,sdpMid:e.sdp_mid,candidate:e.sdp}})}}}]),t}(),bh=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.CUSTOM_ITEMS_UPDATE),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,updated:e.updated,customItems:e.custom_items}}}]),t}(),Ch=function(){qn(t,Ec);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.VIDEO),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,isEnabled:e.is_enabled}}}]),t}(),Oh=["turn_changed"],Nh=function(){qn(t,gc);var e=Zn(t);function t(n,r){var a;return Fn(this,t),(a=e.call(this)).callId=n,a.constraints=r,a.capabilities=Oh,a}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.ACCEPT}},{key:"getData",value:function(){return{call_id:this.callId,constraints:{audio:this.constraints.audio,video:this.constraints.video},capabilities:this.capabilities}}}]),t}(),Sh=function(){qn(t,gc);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).callId=n,r}return Gn(t,[{key:"getCMD",value:function(){return nc.SGNL}},{key:"getType",value:function(){return mc.ALIVE}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(),Ah=function(){qn(t,gc);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),(i=e.call(this)).callId=n,i.peerConnectionId=r,i.sdp=a,i}return Gn(t,[{key:"getCMD",value:function(){return nc.SGNL}},{key:"getType",value:function(){return mc.ANSWER}},{key:"getData",value:function(){var e={call_id:this.callId,sdp:oh.compress(this.sdp)};return this.peerConnectionId?zn(zn({},e),{},{peer_connection_id:this.peerConnectionId}):e}}]),t}(),Ih=function(){qn(t,gc);var e=Zn(t);function t(n,r){var a;return Fn(this,t),(a=e.call(this)).callId=n,a.isEnabled=r,a}return Gn(t,[{key:"getCMD",value:function(){return nc.COMM}},{key:"getType",value:function(){return mc.AUDIO}},{key:"getData",value:function(){return{call_id:this.callId,is_enabled:this.isEnabled}}}]),t}(),kh=function(){qn(t,gc);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).callId=n,r}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.CANCEL}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(),Th=function(){qn(t,gc);var e=Zn(t);function t(n,r,a,i,s){var o;return Fn(this,t),Bn($n(o=e.call(this)),"type",mc.CANDIDATE),o.callId=n,o.peerConnectionId=r,o.sdp=a,o.sdpMLineIndex=i,o.sdpMid=s,o}return Gn(t,[{key:"getCMD",value:function(){return nc.SGNL}},{key:"getType",value:function(){return mc.CANDIDATE}},{key:"getData",value:function(){var e={call_id:this.callId,candidate:{sdp:this.sdp,sdp_mline_index:this.sdpMLineIndex,sdp_mid:this.sdpMid}};return this.peerConnectionId?zn(zn({},e),{},{peer_connection_id:this.peerConnectionId}):e}}]),t}(),wh=function(){qn(t,gc);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),(i=e.call(this)).callId=n,i.reconnect=a,i.connectionType=r.connectionType,i.relayProtocol=r.relayProtocol,i.protocol=r.protocol,i}return Gn(t,[{key:"getCMD",value:function(){return nc.SGNL}},{key:"getType",value:function(){return mc.CONNECTED}},{key:"getData",value:function(){return{call_id:this.callId,connection:{connection_type:this.connectionType,relay_protocol:this.relayProtocol,protocol:this.protocol},reconnect:this.reconnect}}}]),t}(),Rh=function(){qn(t,gc);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).callId=n,r}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.CONNECTION_LOST}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(),Mh=function(){qn(t,gc);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).callId=n,r}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.DECLINE}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(),Lh=function(){qn(t,gc);var e=Zn(t);function t(n,r,a,i,s){var o;return Fn(this,t),(o=e.call(this)).calleeId=n,o.isVideoCall=r,o.customItems=a,o.sendBirdChatOptions=i,o.constraints=s,o.capabilities=Oh,o}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.DIAL}},{key:"getData",value:function(){var e;return{callee_id:this.calleeId,is_video_call:this.isVideoCall,custom_items:this.customItems,sb_chat:{channel_url:null===(e=this.sendBirdChatOptions)||void 0===e?void 0:e.channelUrl},constraints:{audio:this.constraints.audio,video:this.constraints.video},capabilities:this.capabilities}}}]),t}(),Ph=function(){qn(t,gc);var e=Zn(t);function t(n,r,a,i){var s;return Fn(this,t),(s=e.call(this)).callId=n,s.calleeDeliveryInfo=r,s.receivedType=a,s.shortLivedToken=i,s}return Gn(t,[{key:"getHeaders",value:function(){return{"SBCall-Short-Lived-Token":this.shortLivedToken}}},{key:"getData",value:function(){return{call_id:this.callId,callee_delivery_info:this.calleeDeliveryInfo,received_type:this.receivedType}}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.DIAL_RCV}},{key:"sendStrategy",get:function(){return rc.API}}]),t}(),Dh=function(){qn(t,gc);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).callId=n,r}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.END}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(),Uh=function(){qn(t,gc);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),(i=e.call(this)).callId=n,i.isOnHold=r,i.wasRelayed=a,i}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.HOLD}},{key:"getData",value:function(){return{call_id:this.callId,is_on_hold:this.isOnHold,was_relayed:this.wasRelayed}}}]),t}(),xh=function(){qn(t,gc);var e=Zn(t);function t(n){var r;return Fn(this,t),(r=e.call(this)).callId=n,r}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.NO_ANSWER}},{key:"getData",value:function(){return{call_id:this.callId}}}]),t}(),jh=function(){qn(t,gc);var e=Zn(t);function t(n,r,a){var i;return Fn(this,t),(i=e.call(this)).callId=n,i.peerConnectionId=r,i.sdp=a,i}return Gn(t,[{key:"getCMD",value:function(){return nc.SGNL}},{key:"getType",value:function(){return mc.OFFER}},{key:"getData",value:function(){var e={call_id:this.callId,sdp:oh.compress(this.sdp)};return this.peerConnectionId?zn(zn({},e),{},{peer_connection_id:this.peerConnectionId}):e}}]),t}(),Fh=function(){qn(t,gc);var e=Zn(t);function t(n,r,a,i){var s;return Fn(this,t),(s=e.call(this)).callId=n,s.recordingId=r,s.recordingType=a,s.recordingStatus=i,s}return Gn(t,[{key:"getCMD",value:function(){return nc.COMM}},{key:"getType",value:function(){return mc.RECORDING}},{key:"getData",value:function(){return{call_id:this.callId,recording_id:this.recordingId,recording_type:this.recordingType,recording_status:this.recordingStatus}}}]),t}(),Hh=function(){qn(t,gc);var e=Zn(t);function t(n,r){var a;return Fn(this,t),(a=e.call(this)).callId=n,a.reason=r,a}return Gn(t,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return nc.CALL}},{key:"getType",value:function(){return mc.TIME_OUT}},{key:"getData",value:function(){return{call_id:this.callId,reason:this.reason}}}]),t}(),Gh=function(){qn(t,gc);var e=Zn(t);function t(n,r){var a;return Fn(this,t),(a=e.call(this)).callId=n,a.isEnabled=r,a}return Gn(t,[{key:"getCMD",value:function(){return nc.COMM}},{key:"getType",value:function(){return mc.VIDEO}},{key:"getData",value:function(){return{call_id:this.callId,is_enabled:this.isEnabled}}}]),t}(),Bh=function(){qn(t,bc);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.ACCEPT_ACK),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id}}}]),t}(),Vh=function(){qn(t,bc);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.ALIVE_ACK),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,alive_at:e.alive_at}}}]),t}(),zh=function(){qn(t,bc);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.DIAL_ACK),n}return Gn(t,[{key:"parseData",value:function(e){return{isVideoCall:e.is_video_call,callId:e.call_id,caller:new hh(e.caller),callee:new hh(e.callee)}}}]),t}(),qh=function(){qn(t,bc);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,endedCall:new _h(e.ended_call)}}}]),t}(),Kh=function(){qn(t,bc);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.HOLD_ACK),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,holdedBy:e.holded_by,isRelayed:e.is_relayed}}}]),t}(),Yh=function(){qn(t,Oc);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",mc.TURN_CHANGED),n}return Gn(t,[{key:"parseData",value:function(e){return{callId:e.call_id,turnCredential:{username:e.turn_credential.username,password:e.turn_credential.password,turnUrls:e.turn_credential.turn_urls,transportPolicy:e.turn_credential.transport_policy},eventId:e.event_id}}}]),t}(),Wh=function(){qn(t,Cc);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return t}();(rh=rh||{}).LOG="log";var Qh,Jh=function(){qn(t,Wh);var e=Zn(t);function t(){var n;Fn(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Bn($n(n=e.call.apply(e,[this].concat(a))),"type",rh.LOG),n}return Gn(t,[{key:"parseData",value:function(e){return{logLevel:e.log_level.toUpperCase()}}}]),t}(),Xh=function(){qn(t,vc);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return t}();function $h(e){var t,n,r,a,i,s,o=oe(e),l="function"==typeof this?this:Array,c=arguments.length,u=1<c?arguments[1]:void 0,d=void 0!==u,e=Mt(o),h=0;if(d&&(u=se(u,2<c?arguments[2]:void 0,2)),null==e||l==Array&&It(e))for(n=new l(t=te(o.length));h<t;h++)s=d?u(o[h],h):o[h],_r(n,h,s);else for(i=(a=e.call(o)).next,n=new l;!(r=i.call(a)).done;h++)s=d?function(e,t,n,r){try{return t(f(n)[0],n[1])}catch(t){throw Lt(e),t}}(a,u,[r.value,h]):r.value,_r(n,h,s);return n.length=h,n}(Qh=Qh||{}).CONNECTED="websocket_connected";var Zh=function(){qn(t,Xh);var e=Zn(t);function t(){return Fn(this,t),e.call(this,{type:Qh.CONNECTED})}return t}(),ef=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"createAuthRequest",value:function(e,t,n){return new uc(e,t,n)}},{key:"createDial",value:function(e,t,n,r,a){return new Lh(e,t,n,r,a)}},{key:"createDialReceive",value:function(e,t,n,r){return new Ph(e,t,n,r)}},{key:"createAccept",value:function(e,t){return new Nh(e,t)}},{key:"createDecline",value:function(e){return new Mh(e)}},{key:"createCancel",value:function(e){return new kh(e)}},{key:"createEnd",value:function(e){return new Dh(e)}},{key:"createTimeout",value:function(e,t){return new Hh(e,t)}},{key:"createConnectionLost",value:function(e){return new Rh(e)}},{key:"createNoAnswer",value:function(e){return new xh(e)}},{key:"createOffer",value:function(e,t,n){return new jh(e,t,n)}},{key:"createAnswer",value:function(e,t,n){return new Ah(e,t,n)}},{key:"createCandidate",value:function(e,t,n,r,a){return new Th(e,t,n,r,a)}},{key:"createAudio",value:function(e,t){return new Ih(e,t)}},{key:"createVideo",value:function(e,t){return new Gh(e,t)}},{key:"createAlive",value:function(e){return new Sh(e)}},{key:"createConnected",value:function(e,t,n){return new wh(e,t,n)}},{key:"createStatsLogCommand",value:function(e){return new lc(e)}},{key:"createCallSummaryCommand",value:function(e,t,n){return new kc(e,t,n)}},{key:"createUpdateCustomItems",value:function(e,t){return new Ic(e,t)}},{key:"createDeleteCustomItems",value:function(e,t){return new Ac(e,t)}},{key:"createDeleteAllCustomItems",value:function(e){return new Sc(e)}},{key:"createRecording",value:function(e,t,n,r){return new Fh(e,t,n,r)}},{key:"createHoldCommand",value:function(e,t,n){return new Uh(e,t,n)}},{key:"createCommandList",value:function(e){return new Nc(e)}},{key:"createUploadLogsCommand",value:function(e,t){return new cc(e,t)}},{key:"createRegisterPushToken",value:function(e,t,n){return new hc(e,t,n)}},{key:"createUnregisterPushToken",value:function(e,t,n){return new fc(e,t,n)}},{key:"createUnregisterAllPushTokens",value:function(e,t){return new pc(e,t)}},{key:"createAccepted",value:function(e){return new Mc({type:"other_device_accepted",payload:{call_id:e}})}},{key:"createDeclined",value:function(e,t){return new Tc({callId:e,endedCall:t})}},{key:"createWebSocketConnectedCommand",value:function(){return new Zh}},{key:"createSnapshot",value:function(e,t){return new wc(zn({callId:e},t))}},{key:"parse",value:function(e){try{switch(e.type){case mc.DIAL_ACK:return new zh(e);case mc.DIAL:return new fh(e);case mc.DIAL_RCV:return new ph(e);case mc.NO_ANSWER_ACK:return new qh(e);case mc.NO_ANSWER:return new mh(e);case mc.CANCEL_ACK:return new qh(e);case mc.CANCEL:return new mh(e);case mc.ACCEPT_ACK:return new Bh(e);case mc.ACCEPT:return new Rc(e);case mc.OTHER_DEVICE_ACCEPTED:return new Mc(e);case mc.DECLINE_ACK:return new qh(e);case mc.DECLINE:return new mh(e);case mc.OFFER:return new vh(e);case mc.ANSWER:return new lh(e);case mc.CANDIDATE:return new uh(e);case mc.REMOVE_CANDIDATES:return new Eh(e);case mc.AUDIO:return new ch(e);case mc.VIDEO:return new Ch(e);case mc.HOLD:return new gh(e);case mc.HOLD_ACK:return new Kh(e);case mc.END_ACK:return new qh(e);case mc.END:return new mh(e);case mc.TIMEOUT_ACK:return new qh(e);case mc.TIME_OUT:return new mh(e);case mc.CONNECTION_LOST_ACK:return new qh(e);case mc.CONNECTION_LOST:return new mh(e);case mc.UNKNOWN_END_ACK:return new qh(e);case mc.UNKNOWN_END:return new mh(e);case mc.CUSTOM_ITEMS_UPDATE:return new bh(e);case mc.CUSTOM_ITEMS_DELETE:return new dh(e);case mc.ALIVE_ACK:return new Vh(e);case mc.RECORDING:return new yh(e);case mc.TURN_CHANGED:return new Yh(e);case rh.LOG:return new Jh(e);default:throw new Error("unhandled command data. ".concat(JSON.stringify(e)))}}catch(e){return void _i.error(new ai(Tn.ERR_WRONG_RESPONSE,{error:e}))}}}]),e}(),tf=function(){function e(t){Fn(this,e),Bn(this,"_isOverflowLogs",!1),Bn(this,"_logs",[]),this._ctx=t}return Gn(e,[{key:"addLog",value:function(e){500<=this._logs.length&&(this._isOverflowLogs=!0,this._logs.shift()),this._logs.push(e)}},{key:"_flush",value:function(e){var t=this._logs.filter(function(t){return Mr[t.logLevel].level>=Mr[e].level}),t=ef.createUploadLogsCommand(t,this._isOverflowLogs);this._isOverflowLogs=!1,this._logs=[],this._ctx.sender.send(t)}},{key:"onEvent",value:function(e){e.type===rh.LOG?this._flush(e.payload.logLevel):console.error("Cannot reach here")}}]),e}();ae({target:"Array",stat:!0,forced:Pe=!Kt(function(e){Array.from(e)})},{from:$h});var nf=y.f,X=function(e){return function(t){for(var n,r=l(t),a=We(r),i=a.length,s=0,o=[];s<i;)n=a[s++],m&&!nf.call(r,n)||o.push(e?[n,r[n]]:r[n]);return o}},rf=(Be={entries:X(!0),values:X(!1)}).values;ae({target:"Object",stat:!0},{values:function(e){return rf(e)}});var af=Be.entries;function sf(e,t){var n=0,r=null;if("number"==typeof e){if(!t)throw new Error("'obj' parameter is required");n=e,r=t}else{if(!e||t)throw new Error("'obj' parameter is required");r=e}return function(e){var t=e.descriptor.value;return e.descriptor.value=function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];var s=a[n];if("object"!==Un(s))throw new Error("'object' is expected");return Object.entries(r).forEach(function(e){var t=tr(e,2),e=t[0],t=t[1];!s[e]||s[e]instanceof t||(s[e]=new t(s[e]))}),t.call.apply(t,[this].concat(a))},e}}function of(e){return e+22+75*(e<26)}function lf(e){var t,n=[],r=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var a,i=e.charCodeAt(n++);55296<=i&&i<=56319&&n<r?56320==(64512&(a=e.charCodeAt(n++)))?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--):t.push(i)}return t}(e)).length,a=128,i=0,s=72;for(u=0;u<e.length;u++)(t=e[u])<128&&n.push(Af(t));var o=n.length,l=o;for(o&&n.push("-");l<r;){for(var c=bf,u=0;u<e.length;u++)a<=(t=e[u])&&t<c&&(c=t);var d=l+1;if(c-a>Sf((bf-i)/d))throw RangeError(Nf);for(i+=(c-a)*d,a=c,u=0;u<e.length;u++){if((t=e[u])<a&&++i>bf)throw RangeError(Nf);if(t==a){for(var h=i,f=36;;f+=36){var p=f<=s?1:s+26<=f?26:f-s;if(h<p)break;var _=h-p,m=36-p;n.push(Af(of(p+_%m))),h=Sf(_/m)}n.push(Af(of(h))),s=function(e,t,n){var r=0;for(e>>=1,e+=Sf(e/t);455<e;r+=36)e=Sf(e/35);return Sf(r+36*e/(e+38))}(i,d),i=0,++l}}++i,++a}return n.join("")}function cf(e){var t=Mt(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return f(t.call(e))}function uf(t){try{return decodeURIComponent(t)}catch(e){return t}}function df(e){var t,n=e.replace(Pf," "),r=4;try{return decodeURIComponent(n)}catch(e){for(;r;)n=n.replace((t=r--,Df[t-1]||(Df[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),uf);return n}}function hf(e){return xf[e]}function ff(e){return encodeURIComponent(e).replace(Uf,hf)}function pf(e,t){if(t)for(var n,r=t.split("&"),a=0;a<r.length;)(n=r[a++]).length&&(n=n.split("="),e.push({key:df(n.shift()),value:df(n.join("="))}))}function _f(e){this.entries.length=0,pf(this.entries,e)}function mf(e,t){if(e<t)throw TypeError("Not enough arguments")}ae({target:"Object",stat:!0},{entries:function(e){return af(e)}});var e=function(){qn(t,Ui);var e=Zn(t);function t(){return Fn(this,t),e.call(this)}return t}(),gf=function(){function e(t,n){Fn(this,e),Bn(this,"_count",0),this._ctx=t,this._call=n}return Gn(e,[{key:"_insertInfo",value:function(){var e=this._call;Object.assign(this._accumulated,{app_id:this._ctx.appId,browser_type:ci(),call_id:e.callId,device_timestamp:(new Date).getTime(),role:e.myRole,caller_id:e.caller.userId,callee_id:e.callee.userId,is_video_call:e.isVideoCall,metadata:{measure_count:e.options.statsIntervalValue/1e3,measure_interval:e.options.statsIntervalValue/1e3}})}},{key:"insertStatsLog",value:function(e){var t=this._accumulated;this._count+=1,t=yo(e,t),this._accumulated=Oo(t,this._accumulated,this._count),this._count%(this._interval/1e3)==0&&(this._sendStatsLogCommand(this._accumulated),delete this._accumulated,this._count=0)}},{key:"_sendStatsLogCommand",value:function(e){return this._insertInfo(),e=ef.createStatsLogCommand(e),this._ctx.sender.send(e)}},{key:"_interval",get:function(){return this._call.options.statsIntervalValue}}]),e}(),vf=function(){function e(t){Fn(this,e),Bn(this,"_count",0),this._call=t,this._init()}return Gn(e,[{key:"_init",value:function(){this._reconnectionCount=0}},{key:"insertStatsLog",value:function(e){var t=this._accumulatedStatsLog;this._count+=1,t=yo(e,t),this._accumulatedStatsLog=Oo(t,this._accumulatedStatsLog,this._count)}},{key:"onDial",value:function(){this._dialSentAt=Date.now()}},{key:"onDialAck",value:function(){this._pdd=Date.now()-this._dialSentAt}},{key:"onAccept",value:function(){this._callSetupStartedAt=Date.now()}},{key:"onAcceptAck",value:function(){this._callSetupStartedAt=Date.now()}},{key:"onConnected",value:function(){this._setupTime=Date.now()-this._callSetupStartedAt}},{key:"increaseReconnectedCount",value:function(){this._reconnectionCount+=1}},{key:"getSummary",value:function(){var e={};if(e.pdd=this._pdd,e.setup_time=this._setupTime,e.reconnection_count=this._reconnectionCount,!this._accumulatedStatsLog)return e;var t=this._accumulatedStatsLog,n=t.transport_info,r=t.audio,t=t.video;return e.network_type=n.network_type,e.transport_info_candidate_type=n.candidate_type,e.audio_codec=r.codec,e.audio_mos=r.mos,e.audio_packets_lost_rate=r.packets_lost_rate,e.audio_rtt=r.rtt,e.video_codec=t.codec,e.video_freeze_count=t.freeze_count,e.video_jitter_buffer_delay=t.jitter_buffer_delay,e.video_jitter_buffer_emitted_count=t.jitter_buffer_emitted_count,e.video_packets_lost_rate=t.packets_lost_rate,e.video_received_frame_height=t.received_frame_height,e.video_received_frame_width=t.received_frame_width,e.video_rtt=t.rtt,e.video_sent_frame_height=t.sent_frame_height,e.video_sent_frame_width=t.sent_frame_width,e.video_total_decode_time=t.total_decode_time,e.video_total_frames_duration=t.total_frames_duration,e.video_total_freezes_duration=t.total_freezes_duration,e.video_total_inter_frame_delay=t.total_inter_frame_delay,e.video_source_frames_per_second=t.video_source_frames_per_second,e.video_source_height=t.video_source_height,e.video_source_width=t.video_source_width,e}}]),e}(),yf=function(){function e(t,n){Fn(this,e),this._ctx=t,this._call=n,this._collector=new gf(t,n),this._summary=new vf(n)}return Gn(e,[{key:"startGetWebRtcStats",value:function(e){var t=this;this._statsIntervalId||(this._statsIntervalId=setInterval(function(){e.getStatsLog().then(function(e){t._summary.insertStatsLog(e),t._collector.insertStatsLog(e)})},1e3))}},{key:"stopGetWebRtcStats",value:function(){this._statsIntervalId&&(clearInterval(this._statsIntervalId),delete this._statsIntervalId)}},{key:"getCallSummary",value:function(){return this._summary.getSummary()}},{key:"summary",get:function(){return this._summary}}]),e}(),Ef=le("iterator"),Pe=!a(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach(function(e,r){t.delete("b"),n+=r+e}),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Ef]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}),bf=2147483647,Cf=/[^\0-\u007E]/,Of=/[.\u3002\uFF0E\uFF61]/g,Nf="Overflow: input needs wider integers to process",Sf=Math.floor,Af=String.fromCharCode,If=Z("fetch"),kf=Z("Headers"),X=le("iterator"),Tf="URLSearchParams",wf=Tf+"Iterator",Rf=de.set,Mf=de.getterFor(Tf),Lf=de.getterFor(wf),Pf=/\+/g,Df=Array(4),Uf=/[!'()~]|%20/g,xf={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},jf=dt(function(e,t){Rf(this,{type:wf,iterator:cf(Mf(e).entries),kind:t})},"Iterator",function(){var e=Lf(this),t=e.kind,n=e.iterator.next(),e=n.value;return n.done||(n.value="keys"===t?e.key:"values"===t?e.value:[e.key,e.value]),n}),Ff=function e(){Ut(this,e,Tf);var t,n,r,a,i,s,o,l,u=0<arguments.length?arguments[0]:void 0,h=[];if(Rf(this,{type:Tf,entries:h,updateURL:function(){},updateSearchParams:_f}),void 0!==u)if(c(u))if("function"==typeof(t=Mt(u)))for(r=(n=t.call(u)).next;!(s=r.call(n)).done;){if((s=(i=(a=cf(f(s.value))).next).call(a)).done||(o=i.call(a)).done||!i.call(a).done)throw TypeError("Expected sequence with length 2");h.push({key:s.value+"",value:o.value+""})}else for(l in u)d(u,l)&&h.push({key:l,value:u[l]+""});else pf(h,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")};function Hf(e,t){var n,r,a;if("["==t.charAt(0))return"]"==t.charAt(t.length-1)&&(n=Ep(t.slice(1,-1)))?void(e.host=n):sp;if(Ip(e))return t=function(e){for(var t,n=[],r=e.toLowerCase().replace(Of,".").split("."),a=0;a<r.length;a++)t=r[a],n.push(Cf.test(t)?"xn--"+lf(t):t);return n.join(".")}(t),_p.test(t)||null===(n=yp(t))?sp:void(e.host=n);if(mp.test(t))return sp;for(n="",r=$h(t),a=0;a<r.length;a++)n+=Sp(r[a],bp);e.host=n}function Gf(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=rp(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",r=function(e){for(var t=null,n=1,r=null,a=0,i=0;i<8;i++)0!==e[i]?(n<a&&(t=r,n=a),r=null,a=0):(null===r&&(r=i),++a);return n<a&&(t=r,n=a),t}(e),n=0;n<8;n++)a&&0===e[n]||(a=a&&!1,r===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}function Bf(e){return""!=e.username||""!=e.password}function Vf(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function zf(e,t){return 2==e.length&&lp.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!t&&"|"==e)}function qf(e){var t;return 1<e.length&&zf(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)}function Kf(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&zf(t[0],!0)||t.pop()}function Yf(e,t,n,r){var a,i,s,o,l=n||kp,c=0,u="",h=!1,f=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(gp,"")),t=t.replace(vp,""),a=$h(t);c<=a.length;){switch(i=a[c],l){case kp:if(!i||!lp.test(i)){if(n)return ip;l=wp;continue}u+=i.toLowerCase(),l=Tp;break;case Tp:if(i&&(cp.test(i)||"+"==i||"-"==i||"."==i))u+=i.toLowerCase();else{if(":"!=i){if(n)return ip;u="",l=wp,c=0;continue}if(n&&(Ip(e)!=d(Ap,u)||"file"==u&&(Bf(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=u,n)return void(Ip(e)&&Ap[e.scheme]==e.port&&(e.port=null));u="","file"==e.scheme?l=Gp:Ip(e)&&r&&r.scheme==e.scheme?l=Rp:Ip(e)?l=Dp:"/"==a[c+1]?(l=Mp,c++):(e.cannotBeABaseURL=!0,e.path.push(""),l=Kp)}break;case wp:if(!r||r.cannotBeABaseURL&&"#"!=i)return ip;if(r.cannotBeABaseURL&&"#"==i){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,l=Wp;break}l="file"==r.scheme?Gp:Lp;continue;case Rp:if("/"!=i||"/"!=a[c+1]){l=Lp;continue}l=Up,c++;break;case Mp:if("/"==i){l=xp;break}l=qp;continue;case Lp:if(e.scheme=r.scheme,i==Wf)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==i||"\\"==i&&Ip(e))l=Pp;else if("?"==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",l=Yp;else{if("#"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),l=qp;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=Wp}break;case Pp:if(!Ip(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,l=qp;continue}l=xp}else l=Up;break;case Dp:if(l=Up,"/"!=i||"/"!=u.charAt(c+1))continue;c++;break;case Up:if("/"==i||"\\"==i)break;l=xp;continue;case xp:if("@"==i){h&&(u="%40"+u),h=!0,s=$h(u);for(var _=0;_<s.length;_++){var m=s[_];":"!=m||p?(m=Sp(m,Np),p?e.password+=m:e.username+=m):p=!0}u=""}else if(i==Wf||"/"==i||"?"==i||"#"==i||"\\"==i&&Ip(e)){if(h&&""==u)return"Invalid authority";c-=$h(u).length+1,u="",l=jp}else u+=i;break;case jp:case Fp:if(n&&"file"==e.scheme){l=Vp;continue}if(":"!=i||f){if(i==Wf||"/"==i||"?"==i||"#"==i||"\\"==i&&Ip(e)){if(Ip(e)&&""==u)return sp;if(n&&""==u&&(Bf(e)||null!==e.port))return;if(o=Hf(e,u))return o;if(u="",l=zp,n)return;continue}"["==i?f=!0:"]"==i&&(f=!1),u+=i}else{if(""==u)return sp;if(o=Hf(e,u))return o;if(u="",l=Hp,n==Fp)return}break;case Hp:if(!up.test(i)){if(i==Wf||"/"==i||"?"==i||"#"==i||"\\"==i&&Ip(e)||n){if(""!=u){var g=parseInt(u,10);if(65535<g)return op;e.port=Ip(e)&&g===Ap[e.scheme]?null:g,u=""}if(n)return;l=zp;continue}return op}u+=i;break;case Gp:if(e.scheme="file","/"==i||"\\"==i)l=Bp;else{if(!r||"file"!=r.scheme){l=qp;continue}if(i==Wf)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==i)e.host=r.host,e.path=r.path.slice(),e.query="",l=Yp;else{if("#"!=i){qf(a.slice(c).join(""))||(e.host=r.host,e.path=r.path.slice(),Kf(e)),l=qp;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=Wp}}break;case Bp:if("/"==i||"\\"==i){l=Vp;break}r&&"file"==r.scheme&&!qf(a.slice(c).join(""))&&(zf(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),l=qp;continue;case Vp:if(i==Wf||"/"==i||"\\"==i||"?"==i||"#"==i){if(!n&&zf(u))l=qp;else if(""==u){if(e.host="",n)return;l=zp}else{if(o=Hf(e,u))return o;if("localhost"==e.host&&(e.host=""),n)return;u="",l=zp}continue}u+=i;break;case zp:if(Ip(e)){if(l=qp,"/"!=i&&"\\"!=i)continue}else if(n||"?"!=i)if(n||"#"!=i){if(i!=Wf&&(l=qp,"/"!=i))continue}else e.fragment="",l=Wp;else e.query="",l=Yp;break;case qp:if(i==Wf||"/"==i||"\\"==i&&Ip(e)||!n&&("?"==i||"#"==i)){if(".."===(g=(g=u).toLowerCase())||"%2e."===g||".%2e"===g||"%2e%2e"===g?(Kf(e),"/"==i||"\\"==i&&Ip(e)||e.path.push("")):"."===(g=u)||"%2e"===g.toLowerCase()?"/"==i||"\\"==i&&Ip(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&zf(u)&&(e.host&&(e.host=""),u=u.charAt(0)+":"),e.path.push(u)),u="","file"==e.scheme&&(i==Wf||"?"==i||"#"==i))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",l=Yp):"#"==i&&(e.fragment="",l=Wp)}else u+=Sp(i,Op);break;case Kp:"?"==i?(e.query="",l=Yp):"#"==i?(e.fragment="",l=Wp):i!=Wf&&(e.path[0]+=Sp(i,bp));break;case Yp:n||"#"!=i?i!=Wf&&("'"==i&&Ip(e)?e.query+="%27":e.query+="#"==i?"%23":Sp(i,bp)):(e.fragment="",l=Wp);break;case Wp:i!=Wf&&(e.fragment+=Sp(i,Cp))}c++}}Wt(Be=Ff.prototype,{append:function(e,t){mf(arguments.length,2);var n=Mf(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){mf(arguments.length,1);for(var t=Mf(this),n=t.entries,r=e+"",a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){mf(arguments.length,1);for(var t=Mf(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){mf(arguments.length,1);for(var t=Mf(this).entries,n=e+"",r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){mf(arguments.length,1);for(var t=Mf(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){mf(arguments.length,1);for(var n,r=Mf(this),a=r.entries,i=!1,s=e+"",o=t+"",l=0;l<a.length;l++)(n=a[l]).key===s&&(i?a.splice(l--,1):(i=!0,n.value=o));i||a.push({key:s,value:o}),r.updateURL()},sort:function(){for(var e,t,n=Mf(this),r=n.entries,a=r.slice(),i=r.length=0;i<a.length;i++){for(e=a[i],t=0;t<i;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===i&&r.push(e)}n.updateURL()},forEach:function(e){for(var t,n=Mf(this).entries,r=se(e,1<arguments.length?arguments[1]:void 0,3),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new jf(this,"keys")},values:function(){return new jf(this,"values")},entries:function(){return new jf(this,"entries")}},{enumerable:!0}),he(Be,X,Be.entries),he(Be,"toString",function(){for(var e,t=Mf(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(ff(e.key)+"="+ff(e.value));return n.join("&")},{enumerable:!0}),ct(Ff,Tf),ae({global:!0,forced:!Pe},{URLSearchParams:Ff}),Pe||"function"!=typeof If||"function"!=typeof kf||ae({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r=[e];return 1<arguments.length&&(c(t=arguments[1])&&(n=t.body,Ht(n)===Tf&&((e=t.headers?new kf(t.headers):new kf).has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=tt(t,{body:i(0,String(n)),headers:i(0,e)}))),r.push(t)),If.apply(this,r)}});var Wf,Qf,Jf,Be={URLSearchParams:Ff,getState:Mf},Xf=yn.codeAt,$f=_.URL,Zf=Be.URLSearchParams,ep=Be.getState,tp=de.set,np=de.getterFor("URL"),rp=Math.floor,ap=Math.pow,ip="Invalid scheme",sp="Invalid host",op="Invalid port",lp=/[A-Za-z]/,cp=/[\d+-.A-Za-z]/,up=/\d/,dp=/^(0x|0X)/,hp=/^[0-7]+$/,fp=/^\d+$/,pp=/^[\dA-Fa-f]+$/,_p=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,mp=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,gp=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,vp=/[\u0009\u000A\u000D]/g,yp=function(e){var t,n,r,a,i,s,o,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),4<(t=l.length))return e;for(n=[],r=0;r<t;r++){if(""==(a=l[r]))return e;if(i=10,1<a.length&&"0"==a.charAt(0)&&(i=dp.test(a)?16:8,a=a.slice(8==i?1:2)),""===a)s=0;else{if(!(10==i?fp:8==i?hp:pp).test(a))return e;s=parseInt(a,i)}n.push(s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=ap(256,5-t))return null}else if(255<s)return null;for(o=n.pop(),r=0;r<n.length;r++)o+=n[r]*ap(256,3-r);return o},Ep=function(e){function t(){return e.charAt(h)}var n,r,a,i,s,o,l,c=[0,0,0,0,0,0,0,0],u=0,d=null,h=0;if(":"==t()){if(":"!=e.charAt(1))return;h+=2,d=++u}for(;t();){if(8==u)return;if(":"!=t()){for(n=r=0;r<4&&pp.test(t());)n=16*n+parseInt(t(),16),h++,r++;if("."==t()){if(0==r)return;if(h-=r,6<u)return;for(a=0;t();){if(i=null,0<a){if(!("."==t()&&a<4))return;h++}if(!up.test(t()))return;for(;up.test(t());){if(s=parseInt(t(),10),null===i)i=s;else{if(0==i)return;i=10*i+s}if(255<i)return;h++}c[u]=256*c[u]+i,2!=++a&&4!=a||u++}if(4!=a)return;break}if(":"==t()){if(h++,!t())return}else if(t())return;c[u++]=n}else{if(null!==d)return;h++,d=++u}}if(null!==d)for(o=u-d,u=7;0!=u&&0<o;)l=c[u],c[u--]=c[d+o-1],c[d+--o]=l;else if(8!=u)return;return c},bp={},Cp=xt({},bp,{" ":1,'"':1,"<":1,">":1,"`":1}),Op=xt({},Cp,{"#":1,"?":1,"{":1,"}":1}),Np=xt({},Op,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Sp=function(e,t){var n=Xf(e,0);return 32<n&&n<127&&!d(t,e)?e:encodeURIComponent(e)},Ap={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ip=function(e){return d(Ap,e.scheme)},kp={},Tp={},wp={},Rp={},Mp={},Lp={},Pp={},Dp={},Up={},xp={},jp={},Fp={},Hp={},Gp={},Bp={},Vp={},zp={},qp={},Kp={},Yp={},Wp={},Qp=function e(t){var n,r=Ut(this,e,"URL"),a=1<arguments.length?arguments[1]:void 0,t=String(t),i=tp(r,{type:"URL"});if(void 0!==a)if(a instanceof e)n=np(a);else if(o=Yf(n={},String(a)))throw TypeError(o);if(o=Yf(i,t,null,n))throw TypeError(o);var s=i.searchParams=new Zf,o=ep(s);o.updateSearchParams(i.query),o.updateURL=function(){i.query=String(s)||null},m||(r.href=Jp.call(r),r.origin=Xp.call(r),r.protocol=$p.call(r),r.username=Zp.call(r),r.password=e_.call(r),r.host=t_.call(r),r.hostname=n_.call(r),r.port=r_.call(r),r.pathname=a_.call(r),r.search=i_.call(r),r.searchParams=s_.call(r),r.hash=o_.call(r))},Be=Qp.prototype,Jp=function(){var e=np(this),t=e.scheme,n=e.username,r=e.password,a=e.host,i=e.port,s=e.path,o=e.query,l=e.fragment,c=t+":";return null!==a?(c+="//",Bf(e)&&(c+=n+(r?":"+r:"")+"@"),c+=Gf(a),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==o&&(c+="?"+o),null!==l&&(c+="#"+l),c},Xp=function(){var e=np(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Ip(e)?t+"://"+Gf(e.host)+(null!==n?":"+n:""):"null"},$p=function(){return np(this).scheme+":"},Zp=function(){return np(this).username},e_=function(){return np(this).password},t_=function(){var e=np(this),t=e.host,e=e.port;return null===t?"":null===e?Gf(t):Gf(t)+":"+e},n_=function(){var e=np(this).host;return null===e?"":Gf(e)},r_=function(){var e=np(this).port;return null===e?"":String(e)},a_=function(){var e=np(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},i_=function(){var e=np(this).query;return e?"?"+e:""},s_=function(){return np(this).searchParams},o_=function(){var e=np(this).fragment;return e?"#"+e:""},xt=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};m&&Qe(Be,{href:xt(Jp,function(e){var t=np(this),e=String(e),e=Yf(t,e);if(e)throw TypeError(e);ep(t.searchParams).updateSearchParams(t.query)}),origin:xt(Xp),protocol:xt($p,function(e){var t=np(this);Yf(t,String(e)+":",kp)}),username:xt(Zp,function(e){var t=np(this),n=$h(String(e));if(!Vf(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Sp(n[r],Np)}}),password:xt(e_,function(e){var t=np(this),n=$h(String(e));if(!Vf(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Sp(n[r],Np)}}),host:xt(t_,function(e){var t=np(this);t.cannotBeABaseURL||Yf(t,String(e),jp)}),hostname:xt(n_,function(e){var t=np(this);t.cannotBeABaseURL||Yf(t,String(e),Fp)}),port:xt(r_,function(e){var t=np(this);Vf(t)||(""==(e=String(e))?t.port=null:Yf(t,e,Hp))}),pathname:xt(a_,function(e){var t=np(this);t.cannotBeABaseURL||(t.path=[],Yf(t,e+"",zp))}),search:xt(i_,function(e){var t=np(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Yf(t,e,Yp)),ep(t.searchParams).updateSearchParams(t.query)}),searchParams:xt(s_),hash:xt(o_,function(e){var t=np(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Yf(t,e,Wp)):t.fragment=null})}),he(Be,"toJSON",function(){return Jp.call(this)},{enumerable:!0}),he(Be,"toString",function(){return Jp.call(this)},{enumerable:!0}),$f&&(Qf=$f.createObjectURL,Jf=$f.revokeObjectURL,Qf&&he(Qp,"createObjectURL",function(e){return Qf.apply($f,arguments)}),Jf&&he(Qp,"revokeObjectURL",function(e){return Jf.apply($f,arguments)})),ct(Qp,"URL"),ae({global:!0,forced:!Pe,sham:!m},{URL:Qp});var l_,c_=null,u_=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"downloadRecordedFile",value:function(e,t){var n=window.URL.createObjectURL(e),r=document.createElement("a");r.style.display="none",r.href=n,r.download=t,document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(n)},100)}},{key:"getMergedAudioStream",value:function(e,t){var n=[],r=(c_=c_||new(window.AudioContext||window.webkitAudioContext)).createGain();r.gain.value=1;var a=new MediaStream;a.addTrack(e),n.push(c_.createMediaStreamSource(a).connect(r)),(a=new MediaStream).addTrack(t),n.push(c_.createMediaStreamSource(a).connect(r));for(var i=c_.createMediaStreamDestination(),s=0,o=n;s<o.length;s++)o[s].connect(i);return i.stream.getAudioTracks()[0]}},{key:"getVideoStream",value:function(e){var t=document.createElement("canvas"),n=vl.value,r=n.width,a=n.height;t.width=r,t.height=a;var i=e.videoWidth,s=e.videoHeight,o=t.getContext("2d"),l=setInterval(function(){var n,l=e.videoWidth,c=e.videoHeight;(s<c||i<l)&&(i=l,s=c,o.fillRect(0,0,r,a)),c>t.height&&(n=e.videoWidth/e.videoHeight,l=(c=t.height)*n),o.drawImage(e,t.width/2-l/2,t.height/2-c/2,l,c)},10);return{stream:t.captureStream(),cleanup:function(){return clearInterval(l)}}}}]),e}(),d_=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"getRecorderMimeType",value:function(e){switch(e){case Ci.REMOTE_AUDIO_AND_VIDEO:case Ci.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO:case Ci.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO:return this.getVideoRecordFileMimeType();case Ci.REMOTE_AUDIO_ONLY:case Ci.LOCAL_REMOTE_AUDIOS:return this.getAudioRecordFileMimeType();default:return this.getVideoRecordFileMimeType()}}},{key:"getVideoRecordFileMimeType",value:function(){var e="video/mp4";return MediaRecorder.isTypeSupported(e)||(e="video/webm"),e}},{key:"getAudioRecordFileMimeType",value:function(){var e="audio/mp4";return MediaRecorder.isTypeSupported(e)||(e="audio/webm"),e}},{key:"createStream",value:function(e,t){var n={mimeType:this.getRecorderMimeType(t)},r=e.localMediaView.srcObject,a=e.remoteMediaView.srcObject;switch(t){case Ci.REMOTE_AUDIO_AND_VIDEO:return{stream:a,options:n};case Ci.REMOTE_AUDIO_ONLY:var i=new MediaStream;return i.addTrack(a.getAudioTracks()[0]),{stream:i,options:n};case Ci.LOCAL_REMOTE_AUDIOS:var s=new MediaStream,i=u_.getMergedAudioStream(r.getAudioTracks()[0],a.getAudioTracks()[0]);return s.addTrack(i),{stream:s,options:n};case Ci.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO:var o=u_.getVideoStream(e.remoteMediaView),l=o.stream,c=o.cleanup,o=u_.getMergedAudioStream(r.getAudioTracks()[0],a.getAudioTracks()[0]);return l.addTrack(o),{stream:l,options:n,cleanup:c};case Ci.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO:return o=u_.getVideoStream(e.localMediaView),l=o.stream,c=o.cleanup,o=u_.getMergedAudioStream(r.getAudioTracks()[0],a.getAudioTracks()[0]),l.addTrack(o),{stream:l,options:n,cleanup:c};default:return _i.error("Cannot reach here!"),{options:n}}}}]),e}(),h_=function(){function e(t,n){Fn(this,e),this.call=t,this.stateManager=n,this.timer=null}return Gn(e,[{key:"dialSent",value:function(){_i.verbose("[".concat(this.type,"] dialSent"))}},{key:"dialFailed",value:function(){_i.verbose("[".concat(this.type,"] dialFailed"))}},{key:"accept",value:function(e){_i.verbose("[".concat(this.type,"] accept"))}},{key:"acceptSent",value:function(e){_i.verbose("[".concat(this.type,"] acceptSent"))}},{key:"acceptFailed",value:function(){_i.verbose("[".concat(this.type,"] acceptFailed"))}},{key:"receiveAccept",value:function(){_i.verbose("[".concat(this.type,"] receiveAccept"))}},{key:"receiveAccepted",value:function(){_i.verbose("[".concat(this.type,"] receiveAccepted"))}},{key:"end",value:function(){_i.verbose("[".concat(this.type,"] end"))}},{key:"endSent",value:function(e){_i.verbose("[".concat(this.type,"] endSent"))}},{key:"receiveOffer",value:function(){_i.verbose("[".concat(this.type,"] receiveOffer"))}},{key:"receiveEnd",value:function(e){_i.verbose("[".concat(this.type,"] receiveEnd"))}},{key:"timeout",value:function(){_i.verbose("[".concat(this.type,"] timeout"))}},{key:"pcConnected",value:function(){_i.verbose("[".concat(this.type,"] pc connected"))}},{key:"pcReconnecting",value:function(){_i.verbose("[".concat(this.type,"] pc reconnecting"))}},{key:"closed",value:function(){_i.verbose("[".concat(this.type,"] closed"))}},{key:"onStart",value:function(){}},{key:"onDestroy",value:function(){}},{key:"fireTimeout",value:function(){}},{key:"toggleVideo",value:function(e){_i.verbose("[".concat(this.type,"] toggleVideo ").concat(e))}},{key:"toggleMicrophone",value:function(e){_i.verbose("[".concat(this.type,"] toggleMicrophone ").concat(e))}},{key:"_createTimer",value:function(e,t){var n=this;this.timer?_i.error("Only one timer allowed"):this.timer=setTimeout(function(){n._removeTimer(),e()},t)}},{key:"_removeTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}}]),e}();(Pe=l_=l_||{}).IDLE="idle",Pe.DIALING="dialing",Pe.RINGING="ringing",Pe.ACCEPTING="accepting",Pe.ESTABLISHED="established",Pe.CONNECTED="connected",Pe.RECONNECTING="reconnecting",Pe.ICERESTART="icerestart",Pe.ENDED="ended",Pe.ABORTED="aborted",Pe.CLOSING="closing",Pe.ENDING="ending",Pe.CANCELED="canceled";var f_,p_=function(){qn(t,h_);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"onStart",value:function(){this.call.stopToSendAlive(),this.call.fireOnEnded()}},{key:"dialSent",value:function(){this.call.sendCancelCommand().catch(function(e){return _i.debug(e)})}},{key:"dialFailed",value:function(){this.stateManager.toEnded()}},{key:"endSent",value:function(e){this.call.setEndInfo(e.payload.endedCall),this.stateManager.toEnded()}},{key:"receiveEnd",value:function(e){this.call.setEndInfo(e.payload.endedCall),this.stateManager.toEnded()}},{key:"type",get:function(){return l_.ABORTED}}]),t}();(Pe=f_=f_||{}).ACCEPTING="accepting_timeout",Pe.ANSWERING="answering_timeout",Pe.OFFERING="offering_timeout";var __,m_,g_=function(){qn(n,h_);var e,t=Zn(n);function n(){return Fn(this,n),t.apply(this,arguments)}return Gn(n,[{key:"onStart",value:function(){this.call.sendAcceptCommand().catch(function(e){return _i.debug(e)}),this.call.startCallConnectionTimer()}},{key:"acceptSent",value:function(){this.stateManager.toEstablished()}},{key:"receiveOffer",value:(e=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.stateManager.toEstablished();case 1:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"acceptFailed",value:function(){this.call.setEndResult(di.ACCEPT_FAILED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.sendEndCommand().catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.COMPLETED),this.stateManager.toClosing()}},{key:"fireTimeout",value:function(){this.call.sendTimeoutCommand(f_.ACCEPTING).catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.TIMED_OUT),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch(function(e){return _i.debug(e)})}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch(function(e){return _i.debug(e)})}},{key:"type",get:function(){return l_.ACCEPTING}}]),n}(),v_=function(){qn(t,h_);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"onStart",value:function(){this.call.stopCallConnectionTimer(),this.call.fireOnRinging(),this.stateManager.toClosing()}},{key:"type",get:function(){return l_.CANCELED}}]),t}(),y_=function(){qn(t,h_);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"onStart",value:function(){this.call.stopCallConnectionTimer(),this.call.stopToSendAlive(),this.call.stopCurrentRecording(),this.call.stopScreenShare(),this.call.closeRTCConnection(),this.closed()}},{key:"endSent",value:function(e){this.call.setEndInfo(e.payload.endedCall)}},{key:"closed",value:function(){this.stateManager.toEnding()}},{key:"type",get:function(){return l_.CLOSING}}]),t}(),E_=function(){qn(t,h_);var e=Zn(t);function t(n,r,a){return Fn(this,t),(r=e.call(this,n,r)).isReconnected=a,r}return Gn(t,[{key:"onStart",value:function(){this.call.stopCallConnectionTimer(),this.call.startGetWebRtcStats(),this.call.sendConnectedInfo(),this.isReconnected?(this.call.setIsReconnected(!0),this.call.fireOnReconnected(),this.call.playSound(Wl.RECONNECTED)):(this.call.calcCallSetupTime(),this.call.fireOnConnected())}},{key:"onDestroy",value:function(){this.call.stopGetWebRtcStats(),this.isReconnected&&this.call.stopSound(Wl.RECONNECTED)}},{key:"pcReconnecting",value:function(){this.stateManager.toReconnecting()}},{key:"end",value:function(){this.call.sendEndCommand().catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.COMPLETED),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch(function(e){return _i.debug(e)})}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch(function(e){return _i.debug(e)})}},{key:"type",get:function(){return l_.CONNECTED}}]),t}(),b_=function(){qn(t,h_);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"onStart",value:function(){var e=this;this._createTimer(function(){e._noAnswer()},this._getTimeoutTime()),this.call.startToSendAlive(),this.call.playSound(Wl.DIALING)}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Wl.DIALING)}},{key:"receiveAccept",value:function(){this.stateManager.toEstablished()}},{key:"end",value:function(){this.call.sendCancelCommand().catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.CANCELED),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"_noAnswer",value:function(){this.call.sendNoAnswerCommand().catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.NO_ANSWER),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return this.call.options.ringingTimeoutValue}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch(function(e){return _i.debug(e)})}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch(function(e){return _i.debug(e)})}},{key:"type",get:function(){return l_.DIALING}}]),t}(),C_=function(){qn(t,h_);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"onStart",value:function(){this.call.stopAllSound()}},{key:"endSent",value:function(e){this.call.setEndInfo(e.payload.endedCall)}},{key:"type",get:function(){return l_.ENDED}}]),t}(),O_=function(){qn(t,h_);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"onStart",value:function(){this.call.sendCallSummary(),this.call.fireOnEnded(),this.stateManager.toEnded()}},{key:"type",get:function(){return l_.ENDING}}]),t}(),N_=function(){qn(t,h_);var e=Zn(t);function t(n,r){return Fn(this,t),(r=e.call(this,n,r)).isInitiator=n.isCaller,r}return Gn(t,[{key:"onStart",value:function(){this.call.fireOnEstablished(),this.call.sendAudioCommand(),this.call.sendVideoCommand(),this.call.createPeerConnection(),this.isInitiator&&this.call.startCallConnectionTimer()}},{key:"onDestroy",value:function(){}},{key:"pcConnected",value:function(){this.stateManager.toConnected(!1)}},{key:"end",value:function(){this.call.sendEndCommand().catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.COMPLETED),this.stateManager.toClosing()}},{key:"fireTimeout",value:function(){this.call.sendTimeoutCommand(this.isInitiator?f_.OFFERING:f_.ANSWERING).catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.TIMED_OUT),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch(function(e){return _i.debug(e)})}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch(function(e){return _i.debug(e)})}},{key:"type",get:function(){return l_.ESTABLISHED}}]),t}(),S_=function(){qn(t,h_);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"dialSent",value:function(){this.stateManager.toDialing()}},{key:"dialFailed",value:function(){this.call.setEndResult(di.DIAL_FAILED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.setEndResult(di.CANCELED),this.stateManager.toAborted()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e)}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e)}},{key:"type",get:function(){return l_.IDLE}}]),t}(),A_=function(){qn(t,h_);var e=Zn(t);function t(n,r){return Fn(this,t),e.call(this,n,r)}return Gn(t,[{key:"onStart",value:function(){var e=this;this._createTimer(function(){e.call.sendConnectionLostCommand().catch(function(e){return _i.debug(e)})},this._getTimeoutTime()),this.call.fireOnReconnecting(),this.call.playSound(Wl.RECONNECTING)}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Wl.RECONNECTING)}},{key:"pcConnected",value:function(){this.stateManager.toConnected(!0)}},{key:"end",value:function(){this.call.sendEndCommand().catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.COMPLETED),this.stateManager.toClosing()}},{key:"endSent",value:function(e){this.call.setEndResult(di.CONNECTION_LOST),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return 3e4}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch(function(e){return _i.debug(e)})}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch(function(e){return _i.debug(e)})}},{key:"type",get:function(){return l_.RECONNECTING}}]),t}(),I_=function(){qn(t,h_);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return Gn(t,[{key:"onStart",value:function(){var e=this;this._createTimer(function(){e._noAnswer()},this._getTimeoutTime()),this.call.startToSendAlive(),this.call.playSound(Wl.RINGING),this.call.fireOnRinging()}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Wl.RINGING)}},{key:"accept",value:function(e){this.stateManager.toAccepting()}},{key:"receiveAccepted",value:function(){this.call.setEndResult(di.OTHER_DEVICE_ACCEPTED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.sendDeclineCommand().catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.DECLINED),this.stateManager.toClosing()}},{key:"endSent",value:function(e){this.call.setEndResult(di.DECLINED),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e)}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e)}},{key:"_noAnswer",value:function(){this.call.sendNoAnswerCommand().catch(function(e){return _i.debug(e)}),this.call.setEndResult(di.NO_ANSWER),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return this.call.options.ringingTimeoutValue}},{key:"type",get:function(){return l_.RINGING}}]),t}(),k_=function(){function e(t){Fn(this,e),this.call=t,this._state=null}return Gn(e,[{key:"toAborted",value:function(){this._changeState(new p_(this.call,this))}},{key:"toAccepting",value:function(){this._changeState(new g_(this.call,this))}},{key:"toCanceled",value:function(){this._changeState(new v_(this.call,this))}},{key:"toClosing",value:function(){this._changeState(new y_(this.call,this))}},{key:"toConnected",value:function(e){this._changeState(new E_(this.call,this,e))}},{key:"toDialing",value:function(){this._changeState(new b_(this.call,this))}},{key:"toEnded",value:function(){this._changeState(new C_(this.call,this))}},{key:"toEnding",value:function(){this._changeState(new O_(this.call,this))}},{key:"toEstablished",value:function(){this._changeState(new N_(this.call,this))}},{key:"toIdle",value:function(){this._changeState(new S_(this.call,this))}},{key:"toReconnecting",value:function(){this._changeState(new A_(this.call,this))}},{key:"toRinging",value:function(){this._changeState(new I_(this.call,this))}},{key:"_changeState",value:function(e){this._state&&this._state.type===e.type?_i.error(new Error("self-transition is not allowed")):(_i.debug("state: ".concat(this._state?this._state.type:"null"," -> ").concat(e.type)),this._state&&this._state.onDestroy(),this._state=e,this._state.onStart())}},{key:"state",get:function(){return this._state}}]),e}(),T_=function(){function e(t,n,r){Fn(this,e),this._ctx=t,this.peerConnectionId=n,this.callId=r}return Gn(e,[{key:"sendOfferSdp",value:function(e){return e=ef.createOffer(this.callId,this.peerConnectionId,e.sdp),this._ctx.sender.send(e)}},{key:"sendAnswerSdp",value:function(e){return e=ef.createAnswer(this.callId,this.peerConnectionId,e.sdp),this._ctx.sender.send(e)}},{key:"sendCandidate",value:function(e){return e=ef.createCandidate(this.callId,this.peerConnectionId,e.candidate,e.sdpMLineIndex,e.sdpMid),this._ctx.sender.send(e)}}]),e}(),w_=ur(null,function(e,t){var n,a,i,s,o,l,c,u,d,h;return{F:function(){qn(r,t);var n=Zn(r);function r(t,a){var i;return Fn(this,r),i=n.call(this),e($n(i)),i._ctx=t,i._options=a,i._localMediaView=null,i._remoteMediaView=null,i._caller=null,i._callee=null,i._localConstraints={audio:!0,video:!0},i._remoteConstraints={audio:void 0,video:void 0},i._endResult=null,i._endInfo=null,i._customItems=null,i._remoteRecordingStatus=$l.NONE,i._sendBirdChatOptions=null,i._holdedBy=[],i._wasRelayed=!1,i._logManager=new yf(t,$n(i)),i._stateManager=new k_($n(i)),i._isReconnected=!1,i._rotatablePeerConnection=new Zo(t,{audio:"sendrecv",video:"sendrecv"}),i._rotatablePeerConnection.once("initialized",function(){i._onPeerConnectionInitialized()}),i._rotatablePeerConnection.on("replaced",function(){i._onPeerConnectionReplaced()}),i._localStream=new ql(t.deviceManager),i._localStream.on("streamChanged",function(){i._onLocalStream()}),i._localStream.on("audioOutputChanged",function(){i._onAudioOutputChanged()}),i._localStream.on("screenShareStreamStopped",function(){i.onScreenShareStopped&&i.onScreenShareStopped(),i._dispatchEvent("onScreenShareStopped")}),i}return r}(),d:[{kind:"field",key:"_remoteCapabilities",value:function(){return[]}},{kind:"get",key:"_pc",value:function(){return this._rotatablePeerConnection.activePeerConnection}},{kind:"get",key:"callId",value:function(){return this._callId}},{kind:"get",key:"isVideoCall",value:function(){return this._isVideoCall}},{kind:"get",key:"isCaller",value:function(){return this._isCaller}},{kind:"get",key:"caller",value:function(){return this._caller}},{kind:"get",key:"callee",value:function(){return this._callee}},{kind:"get",key:"localUser",value:function(){return this._isCaller?this.caller:this.callee}},{kind:"get",key:"remoteUser",value:function(){return this._isCaller?this.callee:this.caller}},{kind:"get",key:"isLocalAudioEnabled",value:function(){return this._localConstraints.audio}},{kind:"get",key:"isRemoteAudioEnabled",value:function(){return this._remoteConstraints.audio}},{kind:"get",key:"isLocalVideoEnabled",value:function(){return this._localConstraints.video}},{kind:"get",key:"isRemoteVideoEnabled",value:function(){return this._remoteConstraints.video}},{kind:"get",key:"localRecordingStatus",value:function(){var e;return null!==(e=null===(e=this._record)||void 0===e?void 0:e.recordingStatus)&&void 0!==e?e:$l.NONE}},{kind:"get",key:"remoteRecordingStatus",value:function(){return this._remoteRecordingStatus}},{kind:"get",key:"localMediaView",value:function(){return this._localMediaView}},{kind:"get",key:"remoteMediaView",value:function(){return this._remoteMediaView}},{kind:"get",key:"myRole",value:function(){return this._isCaller?hi.CALLER:hi.CALLEE}},{kind:"get",key:"endedBy",value:function(){return this._endInfo?this._endInfo.endedBy:void 0}},{kind:"get",key:"options",value:function(){return this._options}},{kind:"get",key:"isOngoing",value:function(){return!this.isEnded}},{kind:"get",key:"isOnHold",value:function(){return 0<this._holdedBy.length}},{kind:"get",key:"_isLocalOnHold",value:function(){return-1<this._holdedBy.indexOf(this.localUser.userId)}},{kind:"get",key:"isEnded",value:function(){return!!this._endResult}},{kind:"get",key:"endResult",value:function(){return this._endResult}},{kind:"get",key:"_state",value:function(){return this._stateManager.state}},{kind:"get",key:"customItems",value:function(){return zn({},this._customItems)}},{kind:"get",key:"rtcConnection",value:function(){var e;return null===(e=this._pc)||void 0===e?void 0:e.rtcConnection}},{kind:"get",key:"callLog",value:function(){var e=this._state.type;return e!==l_.ENDING&&e!==l_.ENDED?null:(e=this._endInfo,new _h({call_id:(e||this).callId,is_video_call:(e||this).isVideoCall,custom_items:e?e.customItems:this._customItems,user_role:e?e.userRole:this.myRole,started_at:e?e.startedAt:this._startedAt||Date.now(),ended_at:e?e.endedAt:Date.now(),participants:e?e._participants:[this.caller,this.callee],ended_by:this.endedBy,duration:e?e.duration:this.getDuration(),end_result:(e||this).endResult,call_type:e?e.callType:"direct"},!1))}},{kind:"get",key:"_record",value:function(){return this._ctx.recordingManager.getRecord(this._recordId)}},{kind:"get",key:"_isTurnChangedSupported",value:function(){return Oh.includes("turn_changed")&&this._remoteCapabilities.includes("turn_changed")}},{kind:"method",key:"setLocalMediaView",value:(h=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateLocalMediaView(t);case 2:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{kind:"method",key:"setRemoteMediaView",value:(d=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateRemoteMediaView(t);case 2:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{kind:"method",key:"startDuration",value:function(){void 0===this._startedAt&&(this._startedAt=Date.now())}},{kind:"method",key:"getDuration",value:function(){return this._endInfo?this._endInfo.duration:void 0===this._startedAt?0:Date.now()-this._startedAt}},{kind:"method",key:"_send",value:function(e){return this._ctx.sender.send(e)}},{kind:"method",decorators:[sf({callOption:gi})],key:"dial",value:function(e){var t=this,n=e.userId,r=e.isVideoCall,a=e.callOption,i=e.customItems,s=e.sendBirdChatOptions;return this._isCaller=!0,this._stateManager.toIdle(),e=new Qo,this._dialDeferred=e,this._isVideoCall=r,this._localStream.mediaConstraints={audio:!0,video:r},this._sendBirdChatOptions=s,this._setLocalOption(a),this._getLocalStream(),this._setCustomItems(i),this._logManager.summary.onDial(),this.sendDialCommand(n).then(function(){var e;null!==(e=t._dialDeferred)&&void 0!==e&&e.resolve(),delete t._dialDeferred}).catch(function(e){var n;null!==(n=t._dialDeferred)&&void 0!==n&&n.reject(e),delete t._dialDeferred}),e.promise}},{kind:"method",key:"_dialed",value:function(e){this._isCaller=!1,e=e.payload,this._isVideoCall=e.isVideoCall,this._localStream.mediaConstraints={audio:!0,video:e.isVideoCall},this._remoteCapabilities=e.capabilities,this._initTurnCredential=e.turnCredential,this._isTurnChangedSupported&&(this._initTurnCredential.turnUrls=[this._initTurnCredential.turnUrls[0]]),this._setCallInfo(e.callId,e.caller,e.callee),this._setCustomItems(e.customItems),this._setRemoteOption(e.constraints),this._stateManager.toRinging()}},{kind:"method",key:"_dialSent",value:function(e){e=e.payload,this._setCallInfo(e.callId,e.caller,e.callee),this._logManager.summary.onDialAck(),this._state.dialSent()}},{kind:"method",decorators:[tc(tc.messages.CALL_IS_NOT_SUPPORTED),sf({callOption:gi})],key:"accept",value:function(e){var t=e.callOption,e=e.holdActiveCall;_i.info("accept()"),e?this._ctx.callManager.holdExcept(this):this._ctx.callManager.endExcept(this),this._setLocalOption(t),this._getLocalStream(),this._logManager.summary.onAccept(),this._state.accept(t)}},{kind:"method",key:"_receiveAccept",value:function(e){e=e.payload,this._remoteCapabilities=e.capabilities,this._initTurnCredential=e.turnCredential,this._isTurnChangedSupported&&(this._initTurnCredential.turnUrls=[this._initTurnCredential.turnUrls[0]]),this._setRemoteOption(e.constraints),this._logManager.summary.onAcceptAck(),this._state.receiveAccept()}},{kind:"method",key:"_canceled",value:function(e){e=e.payload.endedCall,this._setCallInfo(e.callId,e.caller,e.callee),this._setCustomItems(e.customItems),this.setEndResult(e.endResult),this.setEndInfo(e),this._stateManager.toCanceled()}},{kind:"method",key:"end",value:function(){_i.info("end()"),this._dialDeferred&&(this._dialDeferred.reject(new sc(Tn.DIAL_CANCELED)),delete this._dialDeferred),this._state.end()}},{kind:"method",key:"_setLocalOption",value:function(e){this._updateLocalMediaView(e.localMediaView),this._updateRemoteMediaView(e.remoteMediaView),this._localConstraints.audio=e.audioEnabled,this._localConstraints.video=e.videoEnabled}},{kind:"method",key:"_setRemoteOption",value:function(e){this._remoteConstraints=e}},{kind:"method",key:"_setCallInfo",value:function(e,t,n){this._callId=e,this._caller=t,this._callee=n}},{kind:"method",key:"setEndResult",value:function(e){this._endResult=e}},{kind:"method",key:"setEndInfo",value:function(e){this._endInfo=e}},{kind:"method",key:"_setRemoteAudioEnabled",value:function(e){this._remoteConstraints.audio!==(this._remoteConstraints.audio=e)&&(this._dispatchEvent("onRemoteAudioSettingsChanged",this),null!==(e=this.onRemoteAudioSettingsChanged)&&void 0!==e&&e.call(this,this))}},{kind:"method",key:"_setRemoteVideoEnabled",value:function(e){this._remoteConstraints.video!==(this._remoteConstraints.video=e)&&(this._dispatchEvent("onRemoteVideoSettingsChanged",this),null!==(e=this.onRemoteVideoSettingsChanged)&&void 0!==e&&e.call(this,this))}},{kind:"method",key:"_setHoldInfo",value:function(e,t,n){var r=t?this.localUser:this.remoteUser;this._wasRelayed?n?this._holdedBy.indexOf(r.userId)<0&&this._holdedBy.push(r.userId):-1<(r=this._holdedBy.indexOf(r.userId))&&this._holdedBy.splice(r,1):this._holdedBy=e,this._updateStreamByHoldStream(),this._dispatchEvent("onUserHoldStatusChanged",this,t,n),null!==(e=this.onUserHoldStatusChanged)&&void 0!==e&&e.call(this,this,t,n)}},{kind:"method",key:"_setCustomItems",value:function(e){this._customItems=e||{}}},{kind:"method",key:"_setRemoteRecordingStatus",value:function(e){var t=this._remoteRecordingStatus;(this._remoteRecordingStatus=e)!==t&&(this._dispatchEvent("onRemoteRecordingStatusChanged",this),null!==(t=this.onRemoteRecordingStatusChanged)&&void 0!==t&&t.call(this,this))}},{kind:"method",key:"closeRTCConnection",value:function(){this._releaseLocalStream(),this._rotatablePeerConnection.removeAllEventListeners(),this._rotatablePeerConnection.close()}},{kind:"method",key:"startVideo",value:function(){_i.info("startVideo()"),this._state.toggleVideo(!0)}},{kind:"method",key:"stopVideo",value:function(){_i.info("stopVideo()"),this._state.toggleVideo(!1)}},{kind:"method",key:"hold",value:(u=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_i.info("hold()"),this._isLocalOnHold)throw new ai(Tn.ERR_CALL_ALREADY_ON_HOLD);e.next=3;break;case 3:return e.next=5,this.sendHoldCommand(!0,this._wasRelayed);case 5:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{kind:"method",key:"unhold",value:(c=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_i.info("unhold()"),this._isLocalOnHold){e.next=3;break}throw new ai(Tn.ERR_ACTIVE_CALL_IN_PROGRESS);case 3:if(t&&this._ctx.callManager.endExcept(this),0<this._ctx.callManager.getActiveCallCount())throw new ai(Tn.ERR_ANOTHER_CALL_IN_PROGRESS);e.next=6;break;case 6:return e.next=8,this.sendHoldCommand(!1,this._wasRelayed);case 8:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{kind:"method",key:"_holdSent",value:function(e,t){(e=e.payload).isRelayed&&(this._wasRelayed=!0),this._setHoldInfo(e.holdedBy,!0,t)}},{kind:"method",key:"_updateStreamByHoldStream",value:function(){var e=this;this.stopScreenShare();var t=this._getLocalStream();t&&(t.getAudioTracks().forEach(function(t){t.enabled=e._isMediaEnabled("audio")}),t.getVideoTracks().forEach(function(t){t.enabled=e._isMediaEnabled("video")})),this._pc.remoteStream&&(this._pc.remoteStream.getAudioTracks().forEach(function(t){t.enabled=!e.isOnHold}),this._pc.remoteStream.getVideoTracks().forEach(function(t){t.enabled=!e.isOnHold}))}},{kind:"method",key:"_checkRecordingCondition",value:function(e){return this._state.type!==l_.CONNECTED?(_i.error(mr.getErrorMessage(Tn.ERR_CALL_NOT_CONNECTED_YET)),!1):!(!this.isVideoCall&&e.isVideo)||(_i.error(mr.getErrorMessage(Tn.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL)),!1)}},{kind:"method",key:"startRecording",value:function(e){var t=this,n=new ki(e);if(!Object.values(Ci).includes(n.recordingType))return _i.error(mr.getErrorMessage(Tn.ERR_INVALID_RECORDING_TYPE)),!1;try{!function(){if(!window.MediaRecorder){var e=mr.getErrorMessage(Tn.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING);throw _i.error(e),e}}()}catch(e){return}if(this._checkRecordingCondition(n))if(this._recordId)_i.error(mr.getErrorMessage(Tn.ERR_RECORDING_ALREADY_IN_PROGRESS));else{var r=d_.createStream(this,n.recordingType),a=r.stream,i=r.options,s=r.cleanup,o=this._ctx.recordingManager.startRecording(a,i,zn(zn({},n),{},{callId:this.callId}));if(o){var l=function(){t.sendRecordingCommand(o.recordId,e.recordingType,o.recordingStatus)};return o.on("start",l),o.on("stop",function(){s&&s(),l()}),o.on("pause",l),o.on("resume",l),o.on("error",l),this._recordId=o.recordId,o.recordId}}}},{kind:"method",key:"stopRecording",value:function(e){return e&&this._recordId===e?(this._ctx.recordingManager.stopRecording(e),delete this._recordId,!0):(_i.error(mr.getErrorMessage(Tn.ERR_FAILED_TO_STOP_RECORDING)),!1)}},{kind:"method",key:"stopCurrentRecording",value:function(){return!!this._recordId&&this.stopRecording(this._recordId)}},{kind:"method",key:"toggleVideo",value:function(e){var t=this;this._localConstraints.video!==e&&(this._localConstraints.video=e,(e=this._getLocalStream())&&e.getVideoTracks().forEach(function(e){e.enabled=t._isMediaEnabled("video")}))}},{kind:"method",key:"muteMicrophone",value:function(){_i.info("muteMicrophone()"),this._state.toggleMicrophone(!1)}},{kind:"method",key:"unmuteMicrophone",value:function(){_i.info("unmuteMicrophone()"),this._state.toggleMicrophone(!0)}},{kind:"method",key:"toggleMicrophone",value:function(e){var t=this;this._localConstraints.audio!==e&&(this._localConstraints.audio=e,(e=this._getLocalStream())&&e.getAudioTracks().forEach(function(e){e.enabled=t._isMediaEnabled("audio")}))}},{kind:"method",key:"_validateScreenShareAvailability",value:function(){if(this._state.type!==l_.CONNECTED&&this._state.type!==l_.RECONNECTING)throw new ai(Tn.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED);if(!this.isVideoCall)throw new ai(Tn.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL);if(this.isLocalScreenShareEnabled)throw new ai(Tn.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS);if(this.isOnHold)throw new ai(Tn.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD)}},{kind:"get",key:"isLocalScreenShareEnabled",value:function(){return this._localStream.isScreenSharing}},{kind:"method",key:"startScreenShare",value:(l=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._validateScreenShareAvailability(),e.next=3,this._localStream.useScreenStream();case 3:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{kind:"method",key:"stopScreenShare",value:function(){this.isLocalScreenShareEnabled&&this._localStream.stopScreenShare()}},{kind:"method",key:"_validateCaptureAvailability",value:function(e){if(this._state.type!==l_.CONNECTED)throw new ai(Tn.ERR_VIDEO_CALL_NOT_CONNECTED_YET);if(!this.isVideoCall)throw new ai(Tn.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL);if(e instanceof HTMLAudioElement)throw new ai(Tn.ERR_VIDEO_VIEW_NOT_READY);if(null==e||!e.srcObject)throw new ai(Tn.ERR_VIDEO_VIEW_NOT_READY);if(this.isOnHold)throw new ai(Tn.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD)}},{kind:"method",key:"captureLocalVideoView",value:function(e){var t=this,n=new Promise(function(e,n){t._validateCaptureAvailability(t._localMediaView),e(t._captureVideoView(t._localMediaView))});return e&&ii(n)(e),n}},{kind:"method",key:"captureRemoteVideoView",value:function(e){var t=this,n=new Promise(function(e,n){t._validateCaptureAvailability(t.remoteMediaView),e(t._captureVideoView(t._remoteMediaView))});return e&&ii(n)(e),n}},{kind:"method",key:"_captureVideoView",value:function(e){try{var t,n=document.createElement("canvas"),r=n.getContext("2d"),a=e;return n.width=null!==(t=a.videoWidth)&&void 0!==t?t:640,n.height=null!==(t=a.videoHeight)&&void 0!==t?t:360,r.drawImage(a,0,0),a={width:n.width,height:n.height,data:n.toDataURL("image/jpeg",1)},n.remove(),a}catch(e){throw _i.error(e),new ai(Tn.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM)}}},{kind:"method",key:"updateCustomItems",value:function(e,t){var n=this,r=tr(si(e,t),2)[1];return r||(e=ef.createUpdateCustomItems(this.callId,e),e=this._send(e).then(function(e){return n._setCustomItems(e.custom_items),{customItems:e.custom_items,affectedKeys:e.updated}}).catch(function(e){throw _i.error("failed to update customItems"),e}),t&&ii(e)(t),e)}},{kind:"method",key:"deleteCustomItems",value:function(e,t){var n=this,r=tr(oi(e,t),2)[1];return r||(e=ef.createDeleteCustomItems(this.callId,e),e=this._send(e).then(function(e){return n._setCustomItems(e.custom_items),{customItems:e.custom_items,affectedKeys:e.deleted}}).catch(function(e){throw _i.error("failed to delete customItems"),e}),t&&ii(e)(t),e)}},{kind:"method",key:"deleteAllCustomItems",value:function(e){var t=this,n=ef.createDeleteAllCustomItems(this.callId),n=this._send(n).then(function(e){return t._setCustomItems(e.custom_items),{customItems:e.custom_items,affectedKeys:e.deleted}}).catch(function(e){throw _i.error("failed to delete all customItems"),e});return e&&ii(n)(e),n}},{kind:"method",key:"fireOnRinging",value:function(){_i.info("onRinging"),this.onRinging&&this.onRinging()}},{kind:"method",key:"fireOnEstablished",value:function(){var e;_i.info("onEstablished"),this._dispatchEvent("onEstablished",this),null!==(e=this.onEstablished)&&void 0!==e&&e.call(this,this)}},{kind:"method",key:"fireOnEnded",value:function(){var e;switch(this.endResult){case di.NO_ANSWER:case di.CANCELED:case di.DECLINED:case di.OTHER_DEVICE_ACCEPTED:case di.COMPLETED:_i.info("onEnded");break;case di.TIMED_OUT:_i.warning("onEnded");break;case di.CONNECTION_LOST:case di.DIAL_FAILED:case di.ACCEPT_FAILED:case di.UNKNOWN:_i.error("onEnded");break;default:_i.info("onEnded")}this._dispatchEvent("onEnded",this),null!==(e=this.onEnded)&&void 0!==e&&e.call(this,this)}},{kind:"method",key:"fireOnConnected",value:function(){var e;_i.info("onConnected"),this._dispatchEvent("onConnected",this),null!==(e=this.onConnected)&&void 0!==e&&e.call(this,this)}},{kind:"method",key:"fireOnReconnecting",value:function(){var e;_i.info("onReconnecting"),this._dispatchEvent("onReconnecting",this),null!==(e=this.onReconnecting)&&void 0!==e&&e.call(this,this)}},{kind:"method",key:"fireOnReconnected",value:function(){var e;_i.info("onReconnected"),this._dispatchEvent("onReconnected",this),null!==(e=this.onReconnected)&&void 0!==e&&e.call(this,this)}},{kind:"method",key:"sendDialCommand",value:function(e){var t=this,e=ef.createDial(e,this._isVideoCall,this._customItems,this._sendBirdChatOptions,this._localConstraints);return this._send(e).then(function(e){t.onEvent(e)}).catch(function(e){throw t._state.dialFailed(),e})}},{kind:"method",key:"sendAcceptCommand",value:function(){var e=this,t=ef.createAccept(this.callId,this._localConstraints);return this._send(t).then(function(t){e.onEvent(t)}).catch(function(t){throw e._state.acceptFailed(),t})}},{kind:"method",key:"sendCancelCommand",value:function(){var e=this,t=ef.createCancel(this.callId);return this._send(t).then(function(t){e.onEvent(t)})}},{kind:"method",key:"sendDeclineCommand",value:function(){var e=this,t=ef.createDecline(this.callId);return this._send(t).then(function(t){e.onEvent(t)})}},{kind:"method",key:"sendEndCommand",value:function(){var e=this,t=ef.createEnd(this.callId);return this._send(t).then(function(t){e.onEvent(t)})}},{kind:"method",key:"sendTimeoutCommand",value:function(e){var t=this,e=ef.createTimeout(this.callId,e);return this._send(e).then(function(e){t.onEvent(e)})}},{kind:"method",key:"sendConnectionLostCommand",value:function(){var e=this,t=ef.createConnectionLost(this.callId);return this._send(t).then(function(t){e.onEvent(t)})}},{kind:"method",key:"sendNoAnswerCommand",value:function(){var e=this,t=ef.createNoAnswer(this.callId);return this._send(t).then(function(t){e.onEvent(t)})}},{kind:"method",key:"sendAliveCommand",value:function(){var e=ef.createAlive(this.callId);return this._send(e)}},{kind:"method",key:"sendAudioCommand",value:function(){var e=ef.createAudio(this.callId,this._localConstraints.audio);return this._send(e)}},{kind:"method",key:"sendVideoCommand",value:function(){var e=ef.createVideo(this.callId,this._localConstraints.video);return this._send(e)}},{kind:"method",key:"sendCallSummaryCommand",value:function(e){return e=ef.createCallSummaryCommand(this._callId,this.myRole,e),this._send(e)}},{kind:"method",key:"sendConnectedCommand",value:function(e,t,n){return n=ef.createConnected(e,t,n),this._send(n)}},{kind:"method",key:"sendRecordingCommand",value:function(e,t,n){return n=ef.createRecording(this.callId,e,t,n),this._send(n)}},{kind:"method",key:"sendHoldCommand",value:function(e,t){var n=this,t=ef.createHoldCommand(this.callId,e,t);return this._send(t).then(function(t){n._holdSent(t,e)})}},{kind:"method",key:"startToSendAlive",value:function(){var e=this;this._aliveIntervalId=setInterval(function(){e.sendAliveCommand().catch(function(e){return _i.debug(e)})},3e4)}},{kind:"method",key:"stopToSendAlive",value:function(){this._aliveIntervalId&&(clearInterval(this._aliveIntervalId),delete this._aliveIntervalId)}},{kind:"method",key:"startGetWebRtcStats",value:function(){this._logManager.startGetWebRtcStats(this._rotatablePeerConnection)}},{kind:"method",key:"stopGetWebRtcStats",value:function(){this._logManager.stopGetWebRtcStats()}},{kind:"method",key:"sendConnectedInfo",value:function(){var e=this;this._pc.getCandidateInfo().then(function(t){t&&e.sendConnectedCommand(e.callId,t,e._isReconnected)})}},{kind:"method",key:"sendCallSummary",value:function(){var e;this.callId&&this.endResult!==di.OTHER_DEVICE_ACCEPTED&&(e=this._logManager.getCallSummary(),this.sendCallSummaryCommand(e))}},{kind:"method",key:"startCallConnectionTimer",value:function(){var e=this;this._callConnectionTimer=setTimeout(function(){e._state.fireTimeout()},this._options.callConnectionTimeoutValue)}},{kind:"method",key:"stopCallConnectionTimer",value:function(){this._callConnectionTimer&&(clearTimeout(this._callConnectionTimer),delete this._callConnectionTimer)}},{kind:"method",key:"playSound",value:(o=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._ctx.soundManager.playSound(t));case 1:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{kind:"method",key:"stopSound",value:function(e){return this._ctx.soundManager.stopSound(e)}},{kind:"method",key:"stopAllSound",value:function(){return this._ctx.soundManager.stopAllSound()}},{kind:"method",key:"_receiveAudio",value:function(e){this._setRemoteAudioEnabled(e.payload.isEnabled)}},{kind:"method",key:"_receiveVideo",value:function(e){this._setRemoteVideoEnabled(e.payload.isEnabled)}},{kind:"method",key:"_receiveHold",value:function(e){e.payload.isRelayed&&(this._wasRelayed=!0),this._setHoldInfo(e.payload.holdedBy,!1,e.payload.isPeerOnHold)}},{kind:"method",key:"_receiveCustomItemsUpdate",value:function(e){var t;this._setCustomItems(e.payload.customItems),this._dispatchEvent("onCustomItemsUpdated",this,e.payload.updated),null!==(t=this.onCustomItemsUpdated)&&void 0!==t&&t.call(this,this,e.payload.updated)}},{kind:"method",key:"_receiveCustomItemsDelete",value:function(e){var t;this._setCustomItems(e.payload.customItems),this._dispatchEvent("onCustomItemsDeleted",this,e.payload.deleted),null!==(t=this.onCustomItemsDeleted)&&void 0!==t&&t.call(this,this,e.payload.deleted)}},{kind:"method",key:"_receiveRecording",value:function(e){this._setRemoteRecordingStatus(e.payload.recordingStatus)}},{kind:"method",key:"_receiveTurnChanged",value:function(e){var t;this._isTurnChangedSupported&&(e=(t=e.payload).turnCredential,t=t.eventId,this.createPeerConnection(t,e))}},{kind:"method",key:"_registerPCListeners",value:function(){var e=this,t=this._pc;t.on("connected",function(){e._onPeerConnectionConnected()}),t.on("reconnecting",function(){e._onPeerConnectionReconnecting()}),t.on("remoteStream",function(){e._onRemoteStream()})}},{kind:"method",key:"createPeerConnection",value:function(e,t){var n=new T_(this._ctx,e,this.callId),t=this._rotatablePeerConnection.createPeerConnection(e,n,this._localStream,this._isCaller,e?t:this._initTurnCredential);return this.isCaller&&t.createOffer(),t}},{kind:"method",key:"_onPeerConnectionConnected",value:function(){this._state.pcConnected()}},{kind:"method",key:"_onPeerConnectionReconnecting",value:function(){this._state.pcReconnecting()}},{kind:"method",key:"_onPeerConnectionInitialized",value:function(){this._registerPCListeners(),this._onRemoteStream()}},{kind:"method",key:"_onPeerConnectionReplaced",value:function(){this._onPeerConnectionInitialized(),this._onPeerConnectionConnected()}},{kind:"method",key:"_receiveSnapshot",value:function(e){_i.verbose("snapshot is received");var t,n,r,a,i=e.payload,s=i.audioEnabled,o=i.videoEnabled,e=i.customItems,i=i.recording;"boolean"==typeof s&&this._setRemoteAudioEnabled(s),"boolean"==typeof o&&this._setRemoteVideoEnabled(o),i?this._setRemoteRecordingStatus($l.RECORDING):this._setRemoteRecordingStatus($l.NONE),e&&(t=e,n=Object.keys(t),r=this._customItems,a=Object.keys(r),o=n.filter(function(e){return!a.includes(e)||t[e]!==r[e]}),i=a.filter(function(e){return!n.includes(e)}),this._setCustomItems(e),0<o.length&&(this._dispatchEvent("onCustomItemsUpdated",this,o),null!==(e=this.onCustomItemsUpdated)&&void 0!==e&&e.call(this,this,o)),0<i.length&&(this._dispatchEvent("onCustomItemsDeleted",this,i),null!==(o=this.onCustomItemsDeleted)&&void 0!==o&&o.call(this,this,i)))}},{kind:"method",key:"_passToPeerConnection",value:function(e){switch(e.type){case mc.CANDIDATE:var t=Lo.createCandidate(e.payload.peerConnectionId,e.payload.candidate);this._rotatablePeerConnection.onEvent(t);break;case mc.OFFER:var n=Lo.createOffer(e.payload.peerConnectionId,e.payload.sdp);this._rotatablePeerConnection.onEvent(n);break;case mc.ANSWER:n=Lo.createAnswer(e.payload.peerConnectionId,e.payload.sdp),this._rotatablePeerConnection.onEvent(n)}}},{kind:"method",key:"onEvent",value:function(e){switch(_i.verbose("'onEvent' on ".concat(e.constructor.name)),e.type){case mc.DIAL:this._dialed(e);break;case mc.DIAL_ACK:this._dialSent(e);break;case mc.DIAL_RCV:break;case mc.ACCEPT:this._receiveAccept(e);break;case mc.ACCEPT_ACK:this._state.acceptSent(e);break;case mc.OTHER_DEVICE_ACCEPTED:this._state.receiveAccepted();break;case mc.CANCEL:this._canceled(e);break;case mc.DECLINE:case mc.END:case mc.TIME_OUT:case mc.NO_ANSWER:case mc.CONNECTION_LOST:case mc.UNKNOWN_END:this._state.receiveEnd(e);break;case mc.CANCEL_ACK:case mc.DECLINE_ACK:case mc.END_ACK:case mc.TIMEOUT_ACK:case mc.NO_ANSWER_ACK:case mc.CONNECTION_LOST_ACK:case mc.UNKNOWN_END_ACK:this._state.endSent(e);break;case mc.REMOVE_CANDIDATES:break;case mc.AUDIO:this._receiveAudio(e);break;case mc.VIDEO:this._receiveVideo(e);break;case mc.HOLD:this._receiveHold(e);break;case mc.CUSTOM_ITEMS_UPDATE:this._receiveCustomItemsUpdate(e);break;case mc.CUSTOM_ITEMS_DELETE:this._receiveCustomItemsDelete(e);break;case mc.RECORDING:this._receiveRecording(e);break;case mc.TURN_CHANGED:this._receiveTurnChanged(e);break;case mc.SNAPSHOT:this._receiveSnapshot(e);break;case mc.CANDIDATE:this._passToPeerConnection(e);break;case mc.OFFER:this._passToPeerConnection(e),"accepting"===this._state.type&&this._state.receiveOffer(),this._startedAt||this.startDuration();break;case mc.ANSWER:this._passToPeerConnection(e),this._startedAt||this.startDuration();break;default:_i.error(new Error("unhandled call event ".concat(e.type)))}}},{kind:"method",key:"_onAudioOutputChanged",value:(s=jn(r.mark(function e(){var t,n,a,i;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._ctx.deviceManager.getCurrentAudioOutputDevice(),e.next=3,null===(n=this._localMediaView)||void 0===n||null===(t=n.setSinkId)||void 0===t?void 0:t.call(n,i.deviceId);case 3:return e.next=5,null===(n=this._remoteMediaView)||void 0===n||null===(a=n.setSinkId)||void 0===a?void 0:a.call(n,i.deviceId);case 5:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{kind:"method",key:"_onLocalStream",value:function(){var e=this._getLocalStream();this._localMediaView&&(this._localMediaView.srcObject=e);var t=lr(e.getTracks());try{for(t.s();!(n=t.n()).done;){var n,r=n.value;r.enabled=null===(n=this._isMediaEnabled)||void 0===n?void 0:n.call(this,r.kind)}}catch(e){t.e(e)}finally{t.f()}}},{kind:"method",key:"_onRemoteStream",value:function(){this._remoteMediaView&&(this._remoteMediaView.srcObject=this._pc.remoteStream)}},{kind:"method",key:"calcCallSetupTime",value:function(){this._logManager.summary.onConnected()}},{kind:"method",key:"setIsReconnected",value:function(e){this._isReconnected=e,this._logManager.summary.increaseReconnectedCount()}},{kind:"method",key:"_isMediaEnabled",value:function(e){switch(e){case"audio":return this._localConstraints.audio&&!this.isOnHold;case"video":return this._localConstraints.video&&!this.isOnHold;default:return _i.error(new Error("unrecognized media type ".concat(e))),!1}}},{kind:"method",key:"_updateLocalMediaView",value:(i=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._localMediaView===t)return e.abrupt("return");e.next=2;break;case 2:if(this._localMediaView&&(this._localMediaView.srcObject=null),t){e.next=6;break}return this._localMediaView=null,e.abrupt("return");case 6:return e.next=8,this._updateMediaView(t,this._getLocalStream());case 8:this._localMediaView=e.sent;case 9:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{kind:"method",key:"_updateRemoteMediaView",value:(a=jn(r.mark(function e(t){var n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._remoteMediaView===t)return e.abrupt("return");e.next=2;break;case 2:if(this._remoteMediaView&&(this._remoteMediaView.srcObject=null),t){e.next=6;break}return this._remoteMediaView=null,e.abrupt("return");case 6:return e.next=8,this._updateMediaView(t,null===(n=this._pc)||void 0===n?void 0:n.remoteStream);case 8:this._remoteMediaView=e.sent;case 9:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{kind:"method",key:"_updateMediaView",value:(n=jn(r.mark(function e(t,n){var a,i;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._ctx.deviceManager.getCurrentAudioOutputDevice())return e.next=4,null===(i=t.setSinkId)||void 0===i?void 0:i.call(t,a.deviceId);e.next=4;break;case 4:return n&&(t.srcObject=n),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{kind:"method",key:"_getLocalStream",value:function(){return this._localStream.localStream}},{kind:"method",key:"_releaseLocalStream",value:function(){this._localStream&&(this._localStream.removeAllEventListeners(),this._localStream.release())}}]}},e),R_=function(){function e(t){var n=t.ringingTimeout,r=t.callConnectionTimeout,t=t.statsInterval;Fn(this,e),this._ringingTimeout=n,this._callConnectionTimeout=r,this._statsInterval=t}return Gn(e,[{key:"ringingTimeoutValue",get:function(){return this._ringingTimeout}},{key:"callConnectionTimeoutValue",get:function(){return this._callConnectionTimeout}},{key:"statsIntervalValue",get:function(){return this._statsInterval}}]),e}(),M_=function(){function e(t){Fn(this,e),this._ctx=t,this.options={ringingTimeout:6e4,callConnectionTimeout:6e4,statsInterval:3e3}}return Gn(e,[{key:"createDirectCall",value:function(){return new w_(this._ctx,new R_(this.options))}},{key:"setRingingTimeout",value:function(e){"number"==typeof e&&0<e&&(this.options.ringingTimeout=1e3*e)}},{key:"setStatsInterval",value:function(e){"number"==typeof e&&((e=e)<1&&(e=1),60<e&&(e=60),this.options.statsInterval=1e3*e)}},{key:"setCallConnectionTimeout",value:function(e){"number"==typeof e&&0<e&&(this.options.callConnectionTimeout=1e3*e)}}]),e}(),L_=function e(t){Fn(this,e),this.audioEnabled=t.is_audio_enabled,this.videoEnabled=t.is_video_enabled,this.customItems=null===(t=t.custom_items)||void 0===t?void 0:t.custom_items},P_=function(){function e(t){Fn(this,e),this.callId=t.call_id,this.callType=t.call_type,this.userRole=t.user_role,this.callerClientId=t.caller_client_id,this.calleeClientId=t.callee_client_id,this.signalSeq=t.signal_seq.map(ef.parse).filter(function(e){return!!e}),this.signalSnapshot=new L_(t.signal_snapshot)}return Gn(e,[{key:"getAcceptResponse",value:function(){return this.signalSeq.find(function(e){return e.type===mc.ACCEPT_ACK})}},{key:"getDeclineResponse",value:function(){return this.signalSeq.find(function(e){return e.type===mc.DECLINE_ACK})}},{key:"commands",get:function(){return this.signalSeq}},{key:"snapshot",get:function(){return this.signalSnapshot}}]),e}(),D_=function(){function e(t){Fn(this,e),this._ctx=t,this._callFactory=new M_(t),this._calls=new Map,this.dialListeners=new Map}return Gn(e,[{key:"setRingingTimeout",value:function(e){this._callFactory.setRingingTimeout(e)}},{key:"setStatsInterval",value:function(e){this._callFactory.setStatsInterval(e)}},{key:"setCallConnectionTimeout",value:function(e){this._callFactory.setCallConnectionTimeout(e)}},{key:"getCall",value:function(e){return this._calls.get(e)}},{key:"_hasCall",value:function(e){return this._calls.has(e)}},{key:"getOngoingCalls",value:function(){return nr(this._calls.values())}},{key:"getOngoingCallCount",value:function(){return nr(this._calls.values()).reduce(function(e,t){return t.isOngoing?e+1:e},0)}},{key:"getActiveCallCount",value:function(){return nr(this._calls.values()).reduce(function(e,t){return t.isOnHold?e:e+1},0)}},{key:"dial",value:function(e,t){var n=this,r=this._callFactory.createDirectCall();return e.holdActiveCall?this.holdExcept(r):this.endExcept(r),e=r.dial(e).then(function(){return n._register(r.callId,r),r}).catch(function(e){throw _i.error(e),e}),t&&ii(e)(t),r}},{key:"holdExcept",value:function(e){var t=lr(this._calls.values());try{for(t.s();!(n=t.n()).done;){var n=n.value;n.callId===e.callId||n.isOnHold||n.hold()}}catch(e){t.e(e)}finally{t.f()}}},{key:"endExcept",value:function(e){var t=lr(this._calls.values());try{for(t.s();!(n=t.n()).done;){var n=n.value;n.callId!==e.callId&&n.end()}}catch(e){t.e(e)}finally{t.f()}}},{key:"onEvent",value:function(e){switch(e.type){case mc.DIAL:this._onCallDialed(e);break;case mc.CANCEL:this._hasCall(e.getCallId())?this._passToCall(e):this._onCallCanceled(e);break;case Qh.CONNECTED:this._requestCommandLists();break;default:this._passToCall(e)}}},{key:"addListener",value:function(e,t){this.dialListeners.set(e,t)}},{key:"removeListener",value:function(e){this.dialListeners.delete(e)}},{key:"removeAllListeners",value:function(){this.dialListeners.clear()}},{key:"clear",value:function(){var e,t=lr(this._calls.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n.end()}catch(e){_i.error("failed to clear call.")}}}catch(e){t.e(e)}finally{t.f()}this._calls.clear()}},{key:"_register",value:function(e,t){if(!e)throw new Error("call id is not set in call");if(!t)throw new Error("call is null");this._calls.set(e,t)}},{key:"_sendDialReceiveCommand",value:function(e){return e=ef.createDialReceive(e.getCallId(),e.deliveryInfo,e.receivedType,e.payload.shortLivedToken),this._ctx.sender.send(e).catch(function(){})}},{key:"_onCallDialed",value:function(e){var t=this,n=this._callFactory.createDirectCall();this._sendDialReceiveCommand(e),this._register(e.getCallId(),n),n.onRinging=function(){return t._onCallRinging(n)},this._passToCall(e)}},{key:"_onCallCanceled",value:function(e){var t=this,n=this._callFactory.createDirectCall();this._register(e.getCallId(),n),n.onRinging=function(){return t._onCallRinging(n)},this._passToCall(e)}},{key:"_onCallRinging",value:function(e){var t=lr(this.dialListeners.values());try{for(t.s();!(n=t.n()).done;){var n=n.value;n.onRinging&&n.onRinging(e)}}catch(e){t.e(e)}finally{t.f()}}},{key:"_requestCommandLists",value:function(){var e=this;_i.verbose("request command list");var t=Array.from(this._calls.keys()).filter(function(t){return!e._calls.get(t).isEnded}),t=ef.createCommandList(t);this._retrieveCommands(t)}},{key:"_retrieveCommands",value:function(e){var t=this;return this._ctx.sender.send(e).then(function(e){_i.verbose("commandLists is received."),e=e.call_signal.map(function(e){return new P_(e)}),t._ctx.sender.processCommandLists(e)}).catch(function(e){_i.debug("failed to get commandLists",e)})}},{key:"_passToCall",value:function(e){this._hasCall(e.getCallId())?this._calls.get(e.getCallId()).onEvent(e):_i.debug("received command ".concat(e.type," for non-existing call ").concat(e.getCallId()))}}]),e}(),U_="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==U_&&U_,x_="URLSearchParams"in U_,j_="Symbol"in U_&&"iterator"in Symbol,F_="FileReader"in U_&&"Blob"in U_&&function(){try{return new Blob,!0}catch(e){return!1}}(),H_="FormData"in U_,G_="ArrayBuffer"in U_;function B_(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function V_(e){return"string"!=typeof e&&(e=String(e)),e}function z_(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return j_&&(t[Symbol.iterator]=function(){return t}),t}function q_(e){this.map={},e instanceof q_?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function K_(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Y_(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function W_(e){var t=new FileReader,n=Y_(t);return t.readAsArrayBuffer(e),n}function Q_(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function J_(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:F_&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:H_&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:x_&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():G_&&F_&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=Q_(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):G_&&(ArrayBuffer.prototype.isPrototypeOf(e)||m_(e))?this._bodyArrayBuffer=Q_(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):x_&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},F_&&(this.blob=function(){var e=K_(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=K_(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(W_)}),this.text=function(){var e,t,n=K_(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=Y_(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},H_&&(this.formData=function(){return this.text().then(Z_)}),this.json=function(){return this.text().then(JSON.parse)},this}G_&&(__=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m_=ArrayBuffer.isView||function(e){return e&&-1<__.indexOf(Object.prototype.toString.call(e))}),q_.prototype.append=function(e,t){e=B_(e),t=V_(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},q_.prototype.delete=function(e){delete this.map[B_(e)]},q_.prototype.get=function(e){return e=B_(e),this.has(e)?this.map[e]:null},q_.prototype.has=function(e){return this.map.hasOwnProperty(B_(e))},q_.prototype.set=function(e,t){this.map[B_(e)]=V_(t)},q_.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},q_.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),z_(e)},q_.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),z_(e)},q_.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),z_(e)},j_&&(q_.prototype[Symbol.iterator]=q_.prototype.entries);var X_=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $_(e,t){if(!(this instanceof $_))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r=(t=t||{}).body;if(e instanceof $_){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new q_(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new q_(t.headers)),this.method=(n=t.method||this.method||"GET",e=n.toUpperCase(),-1<X_.indexOf(e)?e:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((t=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(t,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function Z_(e){var t=new FormData;return e.trim().split("&").forEach(function(e){var n;e&&(e=(n=e.split("=")).shift().replace(/\+/g," "),n=n.join("=").replace(/\+/g," "),t.append(decodeURIComponent(e),decodeURIComponent(n)))}),t}function em(e,t){if(!(this instanceof em))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new q_(t.headers),this.url=t.url||"",this._initBody(e)}$_.prototype.clone=function(){return new $_(this,{body:this._bodyInit})},J_.call($_.prototype),J_.call(em.prototype),em.prototype.clone=function(){return new em(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new q_(this.headers),url:this.url})},em.error=function(){var e=new em(null,{status:0,statusText:""});return e.type="error",e};var tm=[301,302,303,307,308];em.redirect=function(e,t){if(-1===tm.indexOf(t))throw new RangeError("Invalid status code");return new em(null,{status:t,headers:{location:e}})};var nm=U_.DOMException;try{new nm}catch(ed){(nm=function(e,t){this.message=e,this.name=t,e=Error(e),this.stack=e.stack}).prototype=Object.create(Error.prototype),nm.prototype.constructor=nm}function rm(e,t){return new Promise(function(n,r){var a=new $_(e,t);if(a.signal&&a.signal.aborted)return r(new nm("Aborted","AbortError"));var i=new XMLHttpRequest;function s(){i.abort()}i.onload=function(){var e,t,r={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new q_,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(":"),e=n.shift().trim();e&&(n=n.join(":").trim(),t.append(e,n))}),t)};r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var a="response"in i?i.response:i.responseText;setTimeout(function(){n(new em(a,r))},0)},i.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){r(new nm("Aborted","AbortError"))},0)},i.open(a.method,function(e){try{return""===e&&U_.location.href?U_.location.href:e}catch(r){return e}}(a.url),!0),"include"===a.credentials?i.withCredentials=!0:"omit"===a.credentials&&(i.withCredentials=!1),"responseType"in i&&(F_?i.responseType="blob":G_&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(i.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof q_?a.headers.forEach(function(e,t){i.setRequestHeader(t,e)}):Object.getOwnPropertyNames(t.headers).forEach(function(e){i.setRequestHeader(e,V_(t.headers[e]))}),a.signal&&(a.signal.addEventListener("abort",s),i.onreadystatechange=function(){4===i.readyState&&a.signal.removeEventListener("abort",s)}),i.send(void 0===a._bodyInit?null:a._bodyInit)})}rm.polyfill=!0,U_.fetch||(U_.fetch=rm,U_.Headers=q_,U_.Request=$_,U_.Response=em);var am=function(){var e;return null!==(e=window)&&void 0!==e&&e.fetch?(e=window).fetch.apply(e,arguments):rm.apply(void 0,arguments)},im=function(){function e(){Fn(this,e)}return Gn(e,null,[{key:"getOsVersion",value:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"undefined"}}]),e}(),sm=function(){qn(t,ri);var e=Zn(t);function t(){return Fn(this,t),e.apply(this,arguments)}return t}(),om=function(){function e(t){Fn(this,e),this._ctx=t,this._fetch=am,this._sessionKey=null,this._hostUrl=null!==(t=this._ctx.apiHost)&&void 0!==t?t:"https://api-IDENTIFIER.calls.sendbird.com".replace("IDENTIFIER",this._ctx.appId)}var t;return Gn(e,[{key:"setSessionKey",value:function(e){this._sessionKey=e}},{key:"clearSessionKey",value:function(){this._sessionKey=null}},{key:"send",value:(t=jn(r.mark(function e(t){var n,a,i,s,o;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.getApiOption){e.next=2;break}throw new Error("invalid api request ".concat(JSON.stringify(t)));case 2:if((n=t.getApiOption()).auth&&!this._sessionKey)throw new Error("tried to call private api without auth");e.next=5;break;case 5:return(i=zn({"Content-Type":"application/json"},n.headers)).SendBird="JS,".concat(im.getOsVersion(),",").concat(ic),i["SBCall-Client-Id"]=this._ctx.clientId,this._sessionKey&&(i["SBCall-Session-Token"]=this._sessionKey),e.next=11,this._fetch("".concat(this._getHost()).concat(n.path),{method:n.method,body:JSON.stringify(n.body),headers:i});case 11:return a=e.sent,e.next=14,a.text();case 14:i=e.sent,s=null,e.prev=16,s=JSON.parse(i),e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(16),new ai(Tn.ERR_MALFORMED_DATA);case 23:if(a.ok){e.next=33;break}if(s.error)throw new sm(s.code,{message:s.message});e.next=28;break;case 28:if(500===a.status)throw new ai(Tn.INTERNAL_SERVER_ERROR);e.next=30;break;case 30:if(300<=a.status&&a.status<400)throw new ai(Tn.ERR_MALFORMED_DATA);e.next=32;break;case 32:throw new ai(Tn.ERR_REQUEST_FAILED);case 33:if(t instanceof Yi)return o=Ws.parseResponse(t.type,s),e.abrupt("return",o);e.next=36;break;case 36:if(s.cmd)return o=ef.parse(s),e.abrupt("return",o);e.next=39;break;case 39:return e.abrupt("return",s);case 40:case"end":return e.stop()}},e,this,[[16,20]])})),function(e){return t.apply(this,arguments)})},{key:"_getHost",value:function(){return this._hostUrl}}]),e}(),lm=function(){function e(){Fn(this,e)}return Gn(e,[{key:"parseToJson",value:function(e){try{return JSON.parse(e)}catch(e){return _i.error("failed to parse JSON message",e),{}}}},{key:"validate",value:function(e){var t=e.cmd,n=e.request_id,e=e.call_type;return!!(n||t||e)}},{key:"parseCommand",value:function(e){return e.error?{isValid:!0,error:{requestId:e.request_id,message:e.message,code:e.code}}:"room"===e.call_type?{isValid:!0,command:Ws.parse(e)}:{isValid:!0,command:ef.parse(e)}}},{key:"parse",value:function(e){return e=this.parseToJson(e),this.validate(e)?this.parseCommand(e):{isValid:!1}}}]),e}(),cm=function(){function e(t){Fn(this,e),this._ctx=t,this._ws=null,this._retryTimer=null,this._closed=!0,this._sessionKey=null,this._requestMap=new rl(this._getTimeoutTime()),this._messageParser=new lm,this._hostUrl=null!==(t=this._ctx.websocketHost)&&void 0!==t?t:"wss://ws-IDENTIFIER.calls.sendbird.com".replace("IDENTIFIER",this._ctx.appId)}return Gn(e,[{key:"connect",value:function(){var e=this;return new Promise(function(t,n){e._sessionKey||n(new Error("tried to connect to websocket server without auth")),e._ws=e._createWebSocket(),e._closed=!1,e._ws.onopen=function(){e._onOpen(),t(null)},e._ws.onmessage=function(t){var n=e._messageParser.parse(t.data),r=n.isValid,t=n.error,n=n.command;r&&(t?e._processError(t):e.processCommand(n))},e._ws.onerror=function(t){return e._onError(t)},e._ws.onclose=function(){e._onClose(),n(new ai(Tn.ERR_WEBSOCKET_CONNECTION_FAILED))}})}},{key:"_processError",value:function(e){var t=e.requestId,n=e.code,r=e.message,a=this._requestMap.unregister(t);a&&(_i.debug(t,e.message),a.reject(new sm(n,{message:r})))}},{key:"processCommand",value:function(e){var t,n=this._ctx.router;e instanceof Ec?n.routeDirectCallPeerCommand(e,ac.WS):e instanceof bc?(t=this._requestMap.unregister(e.requestId))&&n.routeDirectCallResponseCommand(e,t):e instanceof Oc?n.routeDirectCallServerCommand(e,ac.WS):e instanceof Wh?n.routeLogServerCommand(e):e instanceof Ki?n.routeServerCommand(e):e instanceof zi&&n.routePeerCommand(e)}},{key:"setSessionKey",value:function(e){this._sessionKey=e}},{key:"clearSessionKey",value:function(){this._disconnect(),this._sessionKey=null}},{key:"_disconnect",value:function(){this._ws&&(this._closed=!0,this._removeRetryTimer(),this._ws.onopen=null,this._ws.onmessage=null,this._ws.onerror=null,this._ws.onclose=null,this._ws.close(),this._requestMap.rejectAll(new ai(Tn.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST)),this._ws=null)}},{key:"send",value:function(e){var t=e.requireResponse()?this._requestMap.register(e.requestId).promise:Promise.resolve(),e=e.serialize();return this._ws.send("".concat(e,"\n")),t}},{key:"_onOpen",value:function(){this._ctx.router.routeWebSocketInternalCommand(ef.createWebSocketConnectedCommand())}},{key:"_onError",value:function(e){_i.error(e)}},{key:"_onClose",value:function(){this._startToReconnect()}},{key:"_createWebSocket",value:function(){var e="/?sbcall_session_token=".concat(encodeURIComponent(this._sessionKey),"&sbcall_client_id=").concat(encodeURIComponent(this._ctx.clientId),"&sendbird=").concat(encodeURIComponent(this._getVersion()));return new WebSocket(this._getHost()+e)}},{key:"_getVersion",value:function(){return"JS,".concat(im.getOsVersion(),",").concat(ic)}},{key:"_getHost",value:function(){return this._hostUrl}},{key:"_startToReconnect",value:function(){this._closed||this._retryTimer||(this._retryTimer=setTimeout(this._reconnect.bind(this),this._getRetryTime()))}},{key:"_reconnect",value:function(){this._removeRetryTimer(),this.connect().catch(function(){_i.error("websocket reconnection is failed.")})}},{key:"_removeRetryTimer",value:function(){this._retryTimer&&(clearTimeout(this._retryTimer),this._retryTimer=null)}},{key:"_getTimeoutTime",value:function(){return 6e4}},{key:"_getRetryTime",value:function(){return 2e3}},{key:"isConnected",get:function(){return!!this._ws&&1===this._ws.readyState}}]),e}(),um=function(){function e(t){Fn(this,e),this._ctx=t,this.wsClient=new cm(t),this.apiClient=new om(t)}var t,n;return Gn(e,[{key:"connectWs",value:function(){return this.wsClient.connect()}},{key:"sendAPI",value:function(e){return this.apiClient.send(e)}},{key:"sendWs",value:function(e){return this.wsClient.send(e)}},{key:"send",value:(n=jn(r.mark(function e(t){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof gc)){e.next=11;break}if(t.sendStrategy===rc.API)return e.abrupt("return",this.sendAPI(t));e.next=3;break;case 3:if(t.sendStrategy!==rc.WS){e.next=7;break}if(this.wsClient.isConnected)return e.abrupt("return",this.sendWs(t));e.next=6;break;case 6:throw new ai(Tn.ERR_WEBSOCKET_CONNECTION_NOT_OPENED);case 7:if(t.sendStrategy!==rc.BOTH){e.next=11;break}if(this.wsClient.isConnected)return e.abrupt("return",this.sendWs(t));e.next=10;break;case 10:case 11:return e.abrupt("return",this.sendAPI(t));case 12:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"sendWithRetry",value:(t=jn(r.mark(function e(t){var n,a,i,s,o,l=this,c=arguments;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<c.length&&void 0!==c[1]?c[1]:new tl,a=2<c.length&&void 0!==c[2]?c[2]:{count:0,deferred:new Qo},i=a.deferred,s=a.count,e.prev=3,e.next=6,this.send(t);case 6:o=e.sent,i.resolve(o),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),0<(o=n.calcTimeout(s))?setTimeout(function(){l.sendWithRetry(t,n,{count:s+1,deferred:i})},o):i.reject(e.t0);case 14:return e.abrupt("return",i.promise);case 15:case"end":return e.stop()}},e,this,[[3,10]])})),function(e){return t.apply(this,arguments)})},{key:"_setSessionKey",value:function(e){this.apiClient.setSessionKey(e),this.wsClient.setSessionKey(e)}},{key:"authenticate",value:function(e){var t=this,n=e.userId,e=e.accessToken,e=ef.createAuthRequest(this._ctx.appId,n,e);return this.send(e).then(function(e){t._setSessionKey(e.sbcall_session_token);var n=ui(e.user);return{user:new fs(n),statsInterval:e.stats_interval}}).catch(function(e){throw _i.error("failed to authenticate user ".concat(n)),e})}},{key:"deauthenticate",value:function(){this.apiClient.clearSessionKey(),this.wsClient.clearSessionKey()}},{key:"processCommandLists",value:function(e){var t=lr(e);try{for(t.s();!(r=t.n()).done;){var n=r.value;if(n.userRole!==hi.CALLER||this._ctx.clientId===n.callerClientId){if(n.userRole===hi.CALLEE&&this._ctx.clientId!==n.calleeClientId){var r=n.getAcceptResponse();if(r){var a=r.payload.callId,a=ef.createAccepted(a);this._ctx.router.routeDirectCallPeerCommand(a,ac.WS);continue}(a=n.getDeclineResponse())&&(s=(i=a.payload).callId,i=i.endedCall,s=ef.createDeclined(s,i),this._ctx.router.routeDirectCallInternalCommand(s))}var i=n.commands,s=n.snapshot;_i.verbose("process commandList. length: ".concat(i.length));var o=lr(i);try{for(o.s();!(l=o.n()).done;){var l=l.value;this.wsClient.processCommand(l)}}catch(e){o.e(e)}finally{o.f()}s=ef.createSnapshot(n.callId,s),this._ctx.router.routeDirectCallInternalCommand(s)}}}catch(e){t.e(e)}finally{t.f()}}}]),e}(),dm=function(){qn(n,Ui);var t=Zn(n);function n(e,r){var a;return Fn(this,n),(a=t.call(this))._recordId=$s(),a._blobs=[],a._mediaRecorder=new MediaRecorder(e,r),a._mediaRecorder.ondataavailable=function(e){e.data&&0<e.data.size&&a._blobs.push(e.data)},a._mediaRecorder.onstart=function(){return a._onStart()},a._mediaRecorder.onstop=function(){return a._onStop()},a._mediaRecorder.onpause=function(){return a._onPause()},a._mediaRecorder.onresume=function(){return a._onResume()},a._mediaRecorder.onerror=function(){return a._onError()},a}return Gn(n,[{key:"startRecording",value:function(){try{this._mediaRecorder.start()}catch(e){return _i.error("start recording failed with error : ",e),!1}return!0}},{key:"stopRecording",value:function(){try{this._mediaRecorder.stop()}catch(e){return _i.error("stop recording failed with error : ",e),!1}return!0}},{key:"_onStart",value:function(){this._dispatchEvent("start")}},{key:"_onStop",value:function(){this._dispatchEvent("stop"),this._onRecordingSucceeded(new Blob(this._blobs))}},{key:"_onPause",value:function(){this._dispatchEvent("pause")}},{key:"_onResume",value:function(){this._dispatchEvent("resume")}},{key:"_onError",value:function(){this._dispatchEvent("error"),this._onRecordingFailed(new ai(Tn.ERR_FAILED_TO_STOP_RECORDING))}},{key:"_onRecordingSucceeded",value:function(e){this._dispatchEvent("succeeded",e)}},{key:"_onRecordingFailed",value:function(e){this._dispatchEvent("failed",e)}},{key:"recordId",get:function(){return this._recordId}},{key:"recordingStatus",get:function(){switch(this._mediaRecorder.state){case"recording":return $l.RECORDING;case"inactive":case"paused":default:return $l.NONE}}}]),n}(),hm=function(){function e(){Fn(this,e),this._listeners=new Map,this._recorders=new Map}return Gn(e,[{key:"getRecord",value:function(e){return this._recorders.get(e)}},{key:"addListener",value:function(e,t){this._listeners.set(e,t)}},{key:"removeListener",value:function(e){this._listeners.delete(e)}},{key:"removeAllListeners",value:function(){this._listeners.clear()}},{key:"_fireOnSucceeded",value:function(e,t){this._listeners.forEach(function(n){n.onRecordingSucceeded&&n.onRecordingSucceeded(t.callId,e,t.recordingOptions,t.fileName)})}},{key:"_fireOnFailed",value:function(e,t,n){this._listeners.forEach(function(r){r.onRecordingFailed&&r.onRecordingFailed(t.callId,e,n)})}},{key:"startRecording",value:function(e,t,n){var r=this,a=new dm(e,t);if(a.startRecording())return this._recorders.set(a.recordId,a),a.on("succeeded",function(e){u_.downloadRecordedFile(e,n.fileName),r._fireOnSucceeded(a.recordId,n)}),a.on("failed",function(e){r._fireOnFailed(a.recordId,n,e)}),a}},{key:"stopRecording",value:function(e){return 0<this._recorders.size&&!!(e=this._recorders.get(e))&&e.stopRecording()}},{key:"listeners",get:function(){return this._listeners}}]),e}(),fm=function(){function e(){Fn(this,e),this.processed=new Map}return Gn(e,[{key:"process",value:function(e){return!e.messageId||(this._isProcessed(e)?(this.processed.delete(e.messageId),!1):(this._setProcessed(e),!0))}},{key:"_isProcessed",value:function(e){return this.processed.has(e.messageId)}},{key:"_setProcessed",value:function(e){this.processed.set(e.messageId,!0)}}]),e}(),pm=function(){function e(){Fn(this,e),this.lastSeqNumber=-1,this.queue=new Map}var t,n;return Gn(e,[{key:"insert",value:(n=jn(r.mark(function e(t,n){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lastSeqNumber>=t.sequenceNumber)return e.abrupt("return");e.next=2;break;case 2:return this.queue.set(t.sequenceNumber,{command:t,handler:n}),_i.verbose("".concat(t.constructor.name," is inserted")),e.next=6,this.flush();case 6:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"flush",value:(t=jn(r.mark(function e(){var t,n,a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_i.verbose("try flushing sequence queue"),t=this.next();case 2:if(t)return n=t.command,a=t.handler,_i.verbose("flush ".concat(n.constructor.name)),e.next=7,a(n);e.next=10;break;case 7:t=this.next(),e.next=2;break;case 10:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"next",value:function(){var e=this.lastSeqNumber+1;if(this.queue.has(e)){var t=this.queue.get(e),n=t.command,t=t.handler;return this.queue.delete(e),this.lastSeqNumber=e,{command:n,handler:t}}return null}}]),e}(),_m=function(){function e(){Fn(this,e),this.sequences=new Map,this.lock=new Gi}var t;return Gn(e,[{key:"insert",value:(t=jn(r.mark(function e(t,n){var a,i;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquire();case 2:if(e.prev=2,_i.verbose("try to insert in SequenceManager with ".concat(t.constructor.name)),a=t.getCallId(),t.isSequential()&&a){e.next=10;break}return _i.verbose("not sequential; immediately flush ".concat(t.constructor.name)),this.lock.release(),n(t),e.abrupt("return");case 10:if(this.sequences.has(a))return i=this.sequences.get(a),e.next=14,i.insert(t,n);e.next=16;break;case 14:e.next=20;break;case 16:return i=new pm,this.sequences.set(a,i),e.next=20,i.insert(t,n);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),_i.warning("failed to SequenceManager.insert()",e.t0);case 25:return e.prev=25,this.lock.release(),e.finish(25);case 28:case"end":return e.stop()}},e,this,[[2,22,25,28]])})),function(e,n){return t.apply(this,arguments)})}]),e}(),mm=function(){qn(t,Ui);var e=Zn(t);function t(){var n;return Fn(this,t),(n=e.call(this))._sequenceManager=new _m,n._eventDeduplicator=new fm,n}return Gn(t,[{key:"routeWebSocketInternalCommand",value:function(e){this._dispatchEvent("webSocketInternal",e)}},{key:"routeLogServerCommand",value:function(e){this._dispatchEvent("logServer",e)}},{key:"routeDirectCallInternalCommand",value:function(e){this._dispatchEvent("directCallInternal",e)}},{key:"routeDirectCallPeerCommand",value:function(e,t){var n=this;this._eventDeduplicator.process(e)&&(e.receivedType=t,this._sequenceManager.insert(e,function(e){n._dispatchEvent("directCallPeer",e)}))}},{key:"routeDirectCallResponseCommand",value:function(e,t){this._sequenceManager.insert(e,function(){var e=jn(r.mark(function e(n){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.resolve(n),e.abrupt("return",t.promise);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"routeDirectCallServerCommand",value:function(e,t){var n=this;this._eventDeduplicator.process(e)&&(e.receivedType=t,this._sequenceManager.insert(e,function(e){n._dispatchEvent("directCallServer",e)}))}},{key:"routeServerCommand",value:function(e){e instanceof Ji&&this._dispatchEvent("roomServer",e)}},{key:"routePeerCommand",value:function(e){e instanceof Wi&&this._dispatchEvent("roomPeer",e)}}]),t}(),gm=function(){function e(t,n,r){Fn(this,e),this.isLoading=!1,this.hasNext=!0,this.userId=t,this.params=n,this.sender=r,this.nextToken=null}var t;return Gn(e,[{key:"next",value:(t=jn(r.mark(function e(t){var n,a=this;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading)throw new ai(Tn.ERR_QUERY_IN_PROGRESS);e.next=2;break;case 2:if(this.hasNext){e.next=4;break}return e.abrupt("return",[]);case 4:return this.isLoading=!0,n=this.sender.send(this._createCommand()).then(function(e){return a.nextToken=e.next,a.hasNext=e.has_next,a.isLoading=!1,e.calls.map(function(e){return new _h(e,!0)})}),t&&ii(n)(t),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_createCommand",value:function(){return new dc(this.userId,this.params,this.nextToken)}}]),e}(),vm=function(){function e(t,n){Fn(this,e),this.isLoading=!1,this.params=t,this.sender=n,this.prevToken=null,this.nextToken=null}var t,n,a;return Gn(e,[{key:"next",value:(a=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading)throw new ai(Tn.ERR_QUERY_IN_PROGRESS);e.next=2;break;case 2:if(this.hasNext){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",this._sendQueryCommand(null,this.nextToken));case 5:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"prev",value:(n=jn(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading)throw new ai(Tn.ERR_QUERY_IN_PROGRESS);e.next=2;break;case 2:if(this.hasPrev){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",this._sendQueryCommand(this.prevToken,null));case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_sendQueryCommand",value:(t=jn(r.mark(function e(t,n){var a;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n)throw new Error("internal error while creating RoomListQueryCommand");e.next=2;break;case 2:return a=Ws.createRoomListQuery(this.params,t,n),e.next=5,this.sender.send(a);case 5:return a=(a=e.sent).payload,this.isLoading=!0,this.prevToken=a.prev,this.nextToken=a.next,this.isLoading=!1,e.abrupt("return",a.rooms);case 12:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"hasPrev",get:function(){return!!this.prevToken}},{key:"hasNext",get:function(){return!this.prevToken&&!this.nextToken||!!this.nextToken}}]),e}(),ym=function(){function e(t,n,r){if(Fn(this,e),Bn(this,"_ctx",{}),this._appId=t,this._apiHost=n,this._websocketHost=r,!t)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"appId"});this._ctx.appId=t,this._ctx.apiHost=n,this._ctx.websocketHost=r,this._user=null,this.init()}return Gn(e,[{key:"init",value:function(){this._ctx.clientId=$s();var e=new mm;this._ctx.router=e,this._ctx.sender=new um(this._ctx),this._ctx.deviceManager=new Ul,this._ctx.recordingManager=new hm,this._ctx.soundManager=new ec;var t=new D_(this._ctx);this._ctx.callManager=t,this._callManager=t;var n=new Jl(this._ctx);this._roomManager=n,e.on("directCallInternal",function(e){return t.onEvent(e)}),e.on("directCallPeer",function(e){return t.onEvent(e)}),e.on("directCallServer",function(e){return t.onEvent(e)}),e.on("webSocketInternal",function(e){return t.onEvent(e)}),e.on("roomServer",function(e){return n.onEvent(e)}),e.on("roomPeer",function(e){return n.onEvent(e)});var r=new tf(this._ctx);_i.logCollector=r,e.on("logServer",function(e){return r.onEvent(e)})}},{key:"_checkAuthed",value:function(){if(!this.currentUser)throw new mi(Tn.USER_NOT_AUTHENTICATED)}},{key:"authenticate",value:function(e,t){var n=this,r=e.userId,e=e.accessToken;if(_i.info("authenticate()"),!r)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"userId"});return e=this._ctx.sender.authenticate({userId:r,accessToken:e}).then(function(e){return n._user=e.user,n._callManager.setStatsInterval(e.statsInterval),n._user}),t&&ii(e)(t),e}},{key:"deauthenticate",value:function(){_i.info("deauthenticate()"),this._callManager&&this._callManager.clear(),this._roomManager&&this._roomManager.clear(),this._ctx.sender.deauthenticate(),this._user=null}},{key:"connectWebSocket",value:function(){return this._ctx.sender.connectWs()}},{key:"handleWebhookData",value:function(e){if(!(e=e.sendbird_call))throw new ai(Tn.ERR_MALFORMED_DATA);if(!e.cmd)throw new ai(Tn.ERR_MALFORMED_DATA);(e=ef.parse(e))instanceof Ec&&this._ctx.router.routeDirectCallPeerCommand(e,ac.WEBHOOK)}},{key:"addListener",value:function(e,t){if(!t)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"listener"});this._callManager.addListener(e,t),this._ctx.deviceManager.addSendBirdCallListener(e,t)}},{key:"removeListener",value:function(e){this._callManager.removeListener(e),this._ctx.deviceManager.removeSendBirdCallListener(e)}},{key:"removeAllListeners",value:function(){this._callManager.removeAllListeners(),this._ctx.deviceManager.removeAllSendBirdCallListener()}},{key:"addRecordingListener",value:function(e,t){this._ctx.recordingManager.addListener(e,t)}},{key:"removeRecordingListener",value:function(e){this._ctx.recordingManager.removeListener(e)}},{key:"removeAllRecordingListeners",value:function(){this._ctx.recordingManager.removeAllListeners()}},{key:"useMedia",value:function(e){return this._ctx.deviceManager.useMedia(e)}},{key:"updateMediaDevices",value:function(e){return this._ctx.deviceManager.refreshMediaDevices(e)}},{key:"getCurrentAudioInputDevice",value:function(){return this._ctx.deviceManager.getCurrentAudioInputDevice()}},{key:"getAvailableAudioInputDevices",value:function(){return this._ctx.deviceManager.getAvailableAudioInputDevices()}},{key:"selectAudioInputDevice",value:function(e){return this._ctx.deviceManager.selectDevice("audioinput",e)}},{key:"getCurrentAudioOutputDevice",value:function(){return this._ctx.deviceManager.getCurrentAudioOutputDevice()}},{key:"getAvailableAudioOutputDevices",value:function(){return this._ctx.deviceManager.getAvailableAudioOutputDevices()}},{key:"selectAudioOutputDevice",value:function(e){return this._ctx.deviceManager.selectDevice("audiooutput",e)}},{key:"getCurrentVideoInputDevice",value:function(){return this._ctx.deviceManager.getCurrentVideoInputDevice()}},{key:"getAvailableVideoInputDevices",value:function(){return this._ctx.deviceManager.getAvailableVideoInputDevices()}},{key:"selectVideoInputDevice",value:function(e){return this._ctx.deviceManager.selectDevice("videoinput",e)}},{key:"getCall",value:function(e){return this._callManager.getCall(e)}},{key:"getOngoingCalls",value:function(){return this._callManager.getOngoingCalls()}},{key:"getOngoingCallCount",value:function(){return this._callManager.getOngoingCallCount()}},{key:"setRingingTimeout",value:function(e){this._callManager.setRingingTimeout(e)}},{key:"setCallConnectionTimeout",value:function(e){this._callManager.setCallConnectionTimeout(e)}},{key:"isPlaying",value:function(e){return this._ctx.soundManager.isPlaying(e)}},{key:"addDirectCallSound",value:function(e,t){return this._ctx.soundManager.loadSound(e,t)}},{key:"removeDirectCallSound",value:function(e){return this._ctx.soundManager.unloadSound(e)}},{key:"dial",value:function(e,t){_i.info("dial()"),this._checkAuthed();var n=e.userId;if(this._user.userId===n)throw new sc(Tn.MY_USER_ID_NOT_ALLOWED);return this._callManager.dial(e,t)}},{key:"updateCustomItems",value:function(e,t,n){var r=tr(si(t,n),2)[1];return r||((r=this._callManager.getCall(e))?r.updateCustomItems(t,n):(t=ef.createUpdateCustomItems(e,t),t=this._ctx.sender.send(t).then(function(e){return{customItems:e.custom_items,affectedKeys:e.updated}}).catch(function(e){throw _i.error("failed to update customItems"),e}),n&&ii(t)(n),t))}},{key:"deleteCustomItems",value:function(e,t,n){var r=tr(oi(t,n),2)[1];return r||((r=this._callManager.getCall(e))?r.deleteCustomItems(t,n):(t=ef.createDeleteCustomItems(e,t),t=this._ctx.sender.send(t).then(function(e){return{customItems:e.custom_items,affectedKeys:e.deleted}}).catch(function(e){throw _i.error("failed to delete customItems"),e}),n&&ii(t)(n),t))}},{key:"deleteAllCustomItems",value:function(e,t){var n=this._callManager.getCall(e);return n?n.deleteAllCustomItems(t):(e=ef.createDeleteAllCustomItems(e),e=this._ctx.sender.send(e).then(function(e){return{customItems:e.custom_items,affectedKeys:e.deleted}}).catch(function(e){throw _i.error("failed to delete all customItems"),e}),t&&ii(e)(t),e)}},{key:"createDirectCallLogListQuery",value:function(e){return new gm(this._user.userId,e,this._ctx.sender)}},{key:"createRoom",value:function(e){return this._roomManager.createRoom(e)}},{key:"getCachedRoomById",value:function(e){return this._roomManager.getCachedRoomById(e)}},{key:"fetchRoomById",value:function(e){return this._roomManager.fetchRoomById(e)}},{key:"createRoomListQuery",value:function(e){return new vm(e,this._ctx.sender)}},{key:"registerPushToken",value:function(e,t){if(!e)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"pushToken"});if(!t)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});return t=ef.createRegisterPushToken(this._user.userId,e,t),this._ctx.sender.send(t).catch(function(e){throw _i.error("failed to register the user's push token"),e})}},{key:"unregisterPushToken",value:function(e,t){if(!e)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"pushToken"});if(!t)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});return t=ef.createUnregisterPushToken(this._user.userId,e,t),this._ctx.sender.send(t).catch(function(e){throw _i.error("failed to unregister the user's push token"),e})}},{key:"unregisterAllPushTokens",value:function(e){if(!e)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});return e=ef.createUnregisterAllPushTokens(this._user.userId,e),this._ctx.sender.send(e).catch(function(e){throw _i.error("failed to unregister the user's all push token"),e})}},{key:"appId",get:function(){return this._appId}},{key:"currentUser",get:function(){return this._user}},{key:"dialListeners",get:function(){return this._callManager.dialListeners}},{key:"recordingListeners",get:function(){return this._ctx.recordingManager.listeners}}]),e}(),Em=null;function bm(){if(!Em)throw new mi(Tn.INSTANCE_NOT_INITIALIZED)}return ur(null,function(e){function t(){Fn(this,t),e(this)}return{F:t,d:[{kind:"get",static:!0,key:"sdkVersion",value:function(){return ic}},{kind:"get",static:!0,key:"LoggerLevel",value:function(){return Xl}},{kind:"method",static:!0,key:"setLoggerLevel",value:function(e){return _i.setLoggerLevel(kr[e])}},{kind:"get",static:!0,key:"SoundType",value:function(){return Wl}},{kind:"get",static:!0,key:"RoomType",value:function(){return Hl}},{kind:"get",static:!0,key:"DirectCallUserRole",value:function(){return hi}},{kind:"get",static:!0,key:"DirectCallEndResult",value:function(){return di}},{kind:"get",static:!0,key:"DirectCallOption",value:function(){return gi}},{kind:"get",static:!0,key:"DirectCallRecordOption",value:function(){return ki}},{kind:"get",static:!0,key:"RecordingType",value:function(){return Ci}},{kind:"get",static:!0,key:"ErrorCode",value:function(){return Tn}},{kind:"get",static:!0,key:"TokenType",value:function(){return Zl}},{kind:"method",static:!0,key:"init",value:function(e,t,n){if(!e)throw new mi(Tn.INVALID_PARAMETER_VALUE,{invalidParameter:"appId"});if(function(){if("undefined"==typeof window){var e="SendBirdCall needs 'window' in global";throw _i.error(e),e}if(void 0===window.RTCPeerConnection){var t="SendBirdCall needs 'RTCPeerConnection' in global";throw _i.error(t),t}if(t=(e=window.location).protocol,e=e.hostname,"file:"!==t&&"https:"!==t&&"127.0.0.1"!==e&&"localhost"!==e){var n="SendBirdCall needs https connection, except for 'localhost' or '127.0.0.1'";throw _i.error(n),n}if(void 0===window.RTCPeerConnection.prototype.addTrack||void 0===window.RTCPeerConnection.prototype.getSenders)throw n="SendBirdCall can't support the browser using legacy WebRTC module",_i.error(n),n}(),Em&&Em.appId===e)return!1;var r=null,a=null,i=null;return Em&&(Em.deauthenticate(),a=new Map(Em.dialListeners),i=new Map(Em.recordingListeners),Em.removeAllListeners(),Em.removeAllRecordingListeners(),r=Em),Em=new ym(e,t,n),r&&(a.forEach(function(e,t){Em.addListener(t,e)}),i.forEach(function(e,t){Em.addRecordingListener(t,e)})),!0}},{kind:"get",static:!0,key:"appId",value:function(){return null===Em||void 0===Em?void 0:Em.appId}},{kind:"get",static:!0,key:"currentUser",value:function(){return null===Em||void 0===Em?void 0:Em.currentUser}},{kind:"method",static:!0,key:"authenticate",value:function(e,n){bm();var r=e.userId,e=e.accessToken;return Em&&Em.currentUser&&Em.currentUser.userId!==r&&t.deauthenticate(),Em.authenticate({userId:r,accessToken:e},n)}},{kind:"method",static:!0,key:"deauthenticate",value:function(){bm(),Em.deauthenticate()}},{kind:"method",static:!0,key:"connectWebSocket",value:function(){return bm(),Em.connectWebSocket()}},{kind:"method",static:!0,key:"handleWebhookData",value:function(e){bm(),Em.handleWebhookData(e)}},{kind:"method",static:!0,key:"addListener",value:function(e,t){bm(),Em.addListener(e,t)}},{kind:"method",static:!0,key:"removeListener",value:function(e){bm(),Em.removeListener(e)}},{kind:"method",static:!0,key:"removeAllListeners",value:function(){bm(),Em.removeAllListeners()}},{kind:"method",static:!0,key:"addRecordingListener",value:function(e,t){bm(),Em.addRecordingListener(e,t)}},{kind:"method",static:!0,key:"removeRecordingListener",value:function(e){bm(),Em.removeRecordingListener(e)}},{kind:"method",static:!0,key:"removeAllRecordingListeners",value:function(){bm(),Em.removeAllRecordingListeners()}},{kind:"method",static:!0,key:"useMedia",value:function(e){return bm(),Em.useMedia(e)}},{kind:"method",static:!0,key:"updateMediaDevices",value:function(e){return bm(),Em.updateMediaDevices(e)}},{kind:"method",static:!0,key:"getCurrentAudioInputDevice",value:function(){return bm(),Em.getCurrentAudioInputDevice()}},{kind:"method",static:!0,key:"getAvailableAudioInputDevices",value:function(){return bm(),Em.getAvailableAudioInputDevices()}},{kind:"method",static:!0,key:"selectAudioInputDevice",value:function(e){return bm(),Em.selectAudioInputDevice(e)}},{kind:"method",static:!0,key:"getCurrentAudioOutputDevice",value:function(){return bm(),Em.getCurrentAudioOutputDevice()}},{kind:"method",static:!0,key:"getAvailableAudioOutputDevices",value:function(){return bm(),Em.getAvailableAudioOutputDevices()}},{kind:"method",static:!0,key:"selectAudioOutputDevice",value:function(e){return bm(),Em.selectAudioOutputDevice(e)}},{kind:"method",static:!0,key:"getCurrentVideoInputDevice",value:function(){return bm(),Em.getCurrentVideoInputDevice()}},{kind:"method",static:!0,key:"getAvailableVideoInputDevices",value:function(){return bm(),Em.getAvailableVideoInputDevices()}},{kind:"method",static:!0,key:"selectVideoInputDevice",value:function(e){return bm(),Em.selectVideoInputDevice(e)}},{kind:"method",static:!0,key:"getCall",value:function(e){return bm(),Em.getCall(e)}},{kind:"method",static:!0,key:"getOngoingCalls",value:function(){return bm(),Em.getOngoingCalls()}},{kind:"method",static:!0,key:"getOngoingCallCount",value:function(){return bm(),Em.getOngoingCallCount()}},{kind:"method",static:!0,key:"setRingingTimeout",value:function(e){bm(),Em.setRingingTimeout(e)}},{kind:"method",static:!0,key:"setCallConnectionTimeout",value:function(e){bm(),Em.setCallConnectionTimeout(e)}},{kind:"method",static:!0,key:"isPlaying",value:function(e){return bm(),Em.isPlaying(e)}},{kind:"method",static:!0,key:"addDirectCallSound",value:function(e,t){return bm(),Em.addDirectCallSound(e,t)}},{kind:"method",static:!0,key:"removeDirectCallSound",value:function(e){return bm(),Em.removeDirectCallSound(e)}},{kind:"method",decorators:[tc(tc.messages.CALL_IS_NOT_SUPPORTED)],static:!0,key:"dial",value:function(e,t){return bm(),Em.dial(e,t)}},{kind:"method",static:!0,key:"updateCustomItems",value:function(e,t,n){return bm(),Em.updateCustomItems(e,t,n)}},{kind:"method",static:!0,key:"deleteCustomItems",value:function(e,t,n){return bm(),Em.deleteCustomItems(e,t,n)}},{kind:"method",static:!0,key:"deleteAllCustomItems",value:function(e,t){return bm(),Em.deleteAllCustomItems(e,t)}},{kind:"method",static:!0,key:"createDirectCallLogListQuery",value:function(e){return bm(),Em.createDirectCallLogListQuery(e)}},{kind:"method",static:!0,key:"createRoom",value:function(e){return bm(),Em.createRoom(e)}},{kind:"method",static:!0,key:"getCachedRoomById",value:function(e){return bm(),Em.getCachedRoomById(e)}},{kind:"method",static:!0,key:"fetchRoomById",value:function(e){return bm(),Em.fetchRoomById(e)}},{kind:"method",static:!0,key:"createRoomListQuery",value:function(e){return bm(),Em.createRoomListQuery(e)}},{kind:"method",static:!0,key:"registerPushToken",value:function(e,t){return bm(),Em.registerPushToken(e,t)}},{kind:"method",static:!0,key:"unregisterPushToken",value:function(e,t){return bm(),Em.unregisterPushToken(e,t)}},{kind:"method",static:!0,key:"unregisterAllPushTokens",value:function(e){return bm(),Em.unregisterAllPushTokens(e)}}]}})}()}).call(this,n(73))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),a=n.n(r),i=n(3);n(4);function s(e){var t=e.height,n=void 0===t?24:t,r=e.width,s=void 0===r?24:r;return a.a.createElement("div",{className:"sendbird-muted-avatar",style:{height:n+"px",width:s+"px"}},a.a.createElement("div",{className:"sendbird-muted-avatar__icon"},a.a.createElement("div",{className:"sendbird-muted-avatar__bg",style:{height:n+"px",width:s+"px"}}),a.a.createElement(i.c,{type:i.b.MUTE,fillColor:i.a.WHITE,width:n-8+"px",height:s-8+"px"})))}},function(e,t,n){"use strict";var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(20),c=n(90),u=n.n(c),d=n(52),h=n(6),f=n(5);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mimeType:t.mimeType||null,onBeforeSend:t.onBeforeSend||Function.prototype,onSuccess:t.onSuccess||Function.prototype,onError:t.onError||Function.prototype,onComplete:t.onComplete||Function.prototype},r=Array.isArray(e)?e:[e],a=Array.apply(null,Array(r.length)).map(function(e){return null});function i(e){var t="string"===typeof e,n=t&&"<"===e.trim().charAt(0);return t&&!n}function s(e,t){n.onError(e,r[t],t)}function o(e,t){var i=n.onSuccess(e,r[t],t);e=!1===i?"":i||e,a[t]=e,-1===a.indexOf(null)&&n.onComplete(a)}var l=document.createElement("a");r.forEach(function(e,t){if(l.setAttribute("href",e),l.href=String(l.href),Boolean(document.all&&!window.atob)&&l.host.split(":")[0]!==location.host.split(":")[0]){if(l.protocol===location.protocol){var r=new XDomainRequest;r.open("GET",e),r.timeout=0,r.onprogress=Function.prototype,r.ontimeout=Function.prototype,r.onload=function(){var e=r.responseText;i(e)?o(e,t):s(r,t)},r.onerror=function(e){s(r,t)},setTimeout(function(){r.send()},0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(e,")")),s(null,t)}else{var a=new XMLHttpRequest;a.open("GET",e),n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.onBeforeSend(a,e,t),a.onreadystatechange=function(){if(4===a.readyState){var e=a.responseText;a.status<400&&i(e)?o(e,t):0===a.status&&i(e)?o(e,t):s(a,t)}},a.send()}})}function m(e){var t={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},n={rootElement:e.rootElement||document,include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,skipDisabled:!1!==e.skipDisabled,useCSSOM:e.useCSSOM||!1,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},r=Array.apply(null,n.rootElement.querySelectorAll(n.include)).filter(function(e){return t=e,r=n.exclude,!(t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector).call(t,r);var t,r}),a=Array.apply(null,Array(r.length)).map(function(e){return null});function i(){if(-1===a.indexOf(null)){a.reduce(function(e,t,n){return""===t&&e.push(n),e},[]).reverse().forEach(function(e){return[r,a].forEach(function(t){return t.splice(e,1)})});var e=a.join("");n.onComplete(e,a,r)}}function s(e,t,r,s){var l=n.onSuccess(e,r,s);(function e(t,r,a,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var c=o(t,a,l);c.rules.length?_(c.absoluteUrls,{onBeforeSend:function(e,t,a){n.onBeforeSend(e,r,t)},onSuccess:function(e,t,a){var i=n.onSuccess(e,r,t),s=o(e=!1===i?"":i||e,t,l);return s.rules.forEach(function(t,n){e=e.replace(t,s.absoluteRules[n])}),e},onError:function(n,o,u){s.push({xhr:n,url:o}),l.push(c.rules[u]),e(t,r,a,i,s,l)},onComplete:function(n){n.forEach(function(e,n){t=t.replace(c.rules[n],e)}),e(t,r,a,i,s,l)}}):i(t,s)})(e=void 0!==l&&!1===Boolean(l)?"":l||e,r,s,function(e,s){null===a[t]&&(s.forEach(function(e){return n.onError(e.xhr,r,e.url)}),!n.filter||n.filter.test(e)?a[t]=e:a[t]="",i())})}function o(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={};return a.rules=(e.replace(t.cssComments,"").match(t.cssImports)||[]).filter(function(e){return-1===r.indexOf(e)}),a.urls=a.rules.map(function(e){return e.replace(t.cssImports,"$1")}),a.absoluteUrls=a.urls.map(function(e){return g(e,n)}),a.absoluteRules=a.rules.map(function(e,t){var r=a.urls[t],i=g(a.absoluteUrls[t],n);return e.replace(r,i)}),a}r.length?r.forEach(function(e,t){var r=e.getAttribute("href"),o=e.getAttribute("rel"),l="link"===e.nodeName.toLowerCase()&&r&&o&&-1!==o.toLowerCase().indexOf("stylesheet"),c=!1!==n.skipDisabled&&e.disabled,u="style"===e.nodeName.toLowerCase();if(l&&!c)_(r,{mimeType:"text/css",onBeforeSend:function(t,r,a){n.onBeforeSend(t,e,r)},onSuccess:function(n,a,i){var o=g(r);s(n,t,e,o)},onError:function(r,s,o){a[t]="",n.onError(r,e,s),i()}});else if(u&&!c){var d=e.textContent;n.useCSSOM&&(d=Array.apply(null,e.sheet.cssRules).map(function(e){return e.cssText}).join("")),s(d,t,e,location.href)}else a[t]="",i()}):n.onComplete("",[])}function g(e,t){var n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),r.href=t||document.baseURI||(document.querySelector("base")||{}).href||location.href,a.href=e,a.href}var v=y;function y(e,t,n){e instanceof RegExp&&(e=E(e,n)),t instanceof RegExp&&(t=E(t,n));var r=b(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function E(e,t){var n=t.match(e);return n?n[0]:null}function b(e,t,n){var r,a,i,s,o,l=n.indexOf(e),c=n.indexOf(t,l+1),u=l;if(l>=0&&c>0){if(e===t)return[l,c];for(r=[],i=n.length;u>=0&&!o;)u==l?(r.push(u),l=n.indexOf(e,u+1)):1==r.length?o=[r.pop(),c]:((a=r.pop())<i&&(i=a,s=c),c=n.indexOf(t,u+1)),u=l<c&&l>=0?l:c;r.length&&(o=[i,s])}return o}function C(e){var t=p({},{preserveStatic:!0,removeComments:!1},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});function n(e){throw new Error("CSS parse error: ".concat(e))}function r(t){var n=t.exec(e);if(n)return e=e.slice(n[0].length),n}function a(){return r(/^{\s*/)}function i(){return r(/^}/)}function s(){r(/^\s*/)}function o(){if(s(),"/"===e[0]&&"*"===e[1]){for(var t=2;e[t]&&("*"!==e[t]||"/"!==e[t+1]);)t++;if(!e[t])return n("end of comment is missing");var r=e.slice(2,t);return e=e.slice(t+2),{type:"comment",comment:r}}}function l(){for(var e,n=[];e=o();)n.push(e);return t.removeComments?[]:n}function c(){for(s();"}"===e[0];)n("extra closing bracket");var t=r(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(t){var a,i=t[0].trim();/\/\*/.test(i)&&(i=i.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var o=/["']\w*,\w*["']/.test(i);return o&&(i=i.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(e){return e.replace(/,/g,"\u200c")})),a=/,/.test(i)?i.split(/\s*(?![^(]*\)),\s*/):[i],o&&(a=a.map(function(e){return e.replace(/\u200C/g,",")})),a}}function u(){if("@"===e[0])return f();r(/^([;\s]*)+/);var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,a=r(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(a){if(a=a[0].trim(),!r(/^:\s*/))return n("property missing ':'");var i=r(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),s={type:"declaration",property:a.replace(t,""),value:i?i[0].replace(t,"").trim():""};return r(/^[;\s]*/),s}}function d(){if(!a())return n("missing '{'");for(var e,t=l();e=u();)t.push(e),t=t.concat(l());return i()?t:n("missing '}'")}function h(){s();for(var e,t=[];e=r(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),r(/^,\s*/);if(t.length)return{type:"keyframe",values:t,declarations:d()}}function f(){if(s(),"@"===e[0]){var o=function(){var e=r(/^@(import|charset|namespace)\s*([^;]+);/);if(e)return{type:e[1],name:e[2].trim()}}()||function(){if(r(/^@font-face\s*/))return{type:"font-face",declarations:d()}}()||function(){var e=r(/^@media([^{]+)*/);if(e)return{type:"media",media:(e[1]||"").trim(),rules:m()}}()||function(){var e=r(/^@([-\w]+)?keyframes\s*/);if(e){var t=e[1];if(!(e=r(/^([-\w]+)\s*/)))return n("@keyframes missing name");var s,o=e[1];if(!a())return n("@keyframes missing '{'");for(var c=l();s=h();)c.push(s),c=c.concat(l());return i()?{type:"keyframes",name:o,vendor:t,keyframes:c}:n("@keyframes missing '}'")}}()||function(){var e=r(/^@supports *([^{]+)/);if(e)return{type:"supports",supports:e[1].trim(),rules:m()}}()||function(){var e=r(/^@([-\w]+)?document *([^{]+)/);if(e)return{type:"document",document:e[2].trim(),vendor:e[1]?e[1].trim():null,rules:m()}}()||function(){var e=r(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return{type:"custom-media",name:e[1].trim(),media:e[2].trim()}}()||function(){if(r(/^@host\s*/))return{type:"host",rules:m()}}()||function(){if(r(/^@page */))return{type:"page",selectors:c()||[],declarations:d()}}()||function(){var e=r(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(e)return{type:"page-margin-box",name:"".concat(e[1],"-").concat(e[2])+(e[3]?"-".concat(e[3]):""),declarations:d()}}();if(o&&!t.preserveStatic){var u=!1;if(o.declarations)u=o.declarations.some(function(e){return/var\(/.test(e.value)});else u=(o.keyframes||o.rules||[]).some(function(e){return(e.declarations||[]).some(function(e){return/var\(/.test(e.value)})});return u?o:{}}return o}}function _(){if(!t.preserveStatic){var r=v("{","}",e);if(r){var a=/:(?:root|host)(?![.:#(])/.test(r.pre)&&/--\S*\s*:/.test(r.body),i=/var\(/.test(r.body);if(!a&&!i)return e=e.slice(r.end+1),{}}}var s=c()||[],o=t.preserveStatic?d():d().filter(function(e){var t=s.some(function(e){return/:(?:root|host)(?![.:#(])/.test(e)})&&/^--\S/.test(e.property),n=/var\(/.test(e.value);return t||n});return s.length||n("selector missing"),{type:"rule",selectors:s,declarations:o}}function m(t){if(!t&&!a())return n("missing '{'");for(var r,s=l();e.length&&(t||"}"!==e[0])&&(r=f()||_());)r.type&&s.push(r),s=s.concat(l());return t||i()?s:n("missing '}'")}return{type:"stylesheet",stylesheet:{rules:m(!0),errors:[]}}}function O(e){var t=p({},{parseHost:!1,store:{},onWarning:function(){}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=new RegExp(":".concat(t.parseHost?"host":"root","$"));return"string"===typeof e&&(e=C(e,t)),e.stylesheet.rules.forEach(function(e){"rule"===e.type&&e.selectors.some(function(e){return n.test(e)})&&e.declarations.forEach(function(e,n){var r=e.property,a=e.value;r&&0===r.indexOf("--")&&(t.store[r]=a)})}),t.store}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r={charset:function(e){return"@charset "+e.name+";"},comment:function(e){return 0===e.comment.indexOf("__CSSVARSPONYFILL")?"/*"+e.comment+"*/":""},"custom-media":function(e){return"@custom-media "+e.name+" "+e.media+";"},declaration:function(e){return e.property+":"+e.value+";"},document:function(e){return"@"+(e.vendor||"")+"document "+e.document+"{"+a(e.rules)+"}"},"font-face":function(e){return"@font-face{"+a(e.declarations)+"}"},host:function(e){return"@host{"+a(e.rules)+"}"},import:function(e){return"@import "+e.name+";"},keyframe:function(e){return e.values.join(",")+"{"+a(e.declarations)+"}"},keyframes:function(e){return"@"+(e.vendor||"")+"keyframes "+e.name+"{"+a(e.keyframes)+"}"},media:function(e){return"@media "+e.media+"{"+a(e.rules)+"}"},namespace:function(e){return"@namespace "+e.name+";"},page:function(e){return"@page "+(e.selectors.length?e.selectors.join(", "):"")+"{"+a(e.declarations)+"}"},"page-margin-box":function(e){return"@"+e.name+"{"+a(e.declarations)+"}"},rule:function(e){var t=e.declarations;if(t.length)return e.selectors.join(",")+"{"+a(t)+"}"},supports:function(e){return"@supports "+e.supports+"{"+a(e.rules)+"}"}};function a(e){for(var a="",i=0;i<e.length;i++){var s=e[i];n&&n(s);var o=r[s.type](s);o&&(a+=o,o.length&&s.selectors&&(a+=t))}return a}return a(e.stylesheet.rules)}y.range=b;var S="--",A="var";function I(e){var t=p({},{preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return"string"===typeof e&&(e=C(e,t)),function e(t,n){t.rules.forEach(function(r){r.rules?e(r,n):r.keyframes?r.keyframes.forEach(function(e){"keyframe"===e.type&&n(e.declarations,r)}):r.declarations&&n(r.declarations,t)})}(e.stylesheet,function(e,n){for(var r=0;r<e.length;r++){var a=e[r],i=a.type,s=a.property,o=a.value;if("declaration"===i)if(t.preserveVars||!s||0!==s.indexOf(S)){if(-1!==o.indexOf(A+"(")){var l=T(o,t);l!==a.value&&(l=k(l),t.preserveVars?(e.splice(r,0,{type:i,property:s,value:l}),r++):a.value=l)}}else e.splice(r,1),r--}}),N(e)}function k(e){return(e.match(/calc\(([^)]+)\)/g)||[]).forEach(function(t){var n="calc".concat(t.split("calc").join(""));e=e.replace(t,n)}),e}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(-1===e.indexOf("var("))return e;var r=v("(",")",e);return r?"var"===r.pre.slice(-3)?0===r.body.trim().length?(t.onWarning("var() must contain a non-whitespace string"),e):r.pre.slice(0,-3)+function(e){var r=e.split(",")[0].replace(/[\s\n\t]/g,""),a=(e.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],i=Object.prototype.hasOwnProperty.call(t.variables,r)?String(t.variables[r]):void 0,s=i||(a?String(a):void 0),o=n||e;return i||t.onWarning('variable "'.concat(r,'" is undefined')),s&&"undefined"!==s&&s.length>0?T(s,t,o):"var(".concat(o,")")}(r.body)+T(r.post,t):r.pre+"(".concat(T(r.body,t),")")+T(r.post,t):(-1!==e.indexOf("var(")&&t.onWarning('missing closing ")" in the value "'.concat(e,'"')),e)}var w="undefined"!==typeof window,R=w&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),M={group:0,job:0},L={rootElement:w?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},P={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},D={dom:{},job:{},user:{}},U=!1,x=null,j=0,F=null,H=!1;function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="cssVars(): ",n=p({},L,e);function r(e,r,a,i){!n.silent&&window.console&&console.error("".concat(t).concat(e,"\n"),r),n.onError(e,r,a,i)}function a(e){!n.silent&&window.console&&console.warn("".concat(t).concat(e)),n.onWarning(e)}function i(e){n.onFinally(Boolean(e),R,V()-n.__benchmark)}if(w){if(n.watch)return n.watch=L.watch,function(e){function t(e){var t=n(e)&&e.hasAttribute("disabled"),r=(e.sheet||{}).disabled;return t||r}function n(e){var t="link"===e.nodeName.toLowerCase()&&-1!==(e.getAttribute("rel")||"").indexOf("stylesheet");return t}function r(e){return"style"===e.nodeName.toLowerCase()}if(!window.MutationObserver)return;x&&(x.disconnect(),x=null);(x=new MutationObserver(function(a){var i=a.some(function(a){return function(r){var a=!1;if("attributes"===r.type&&n(r.target)&&!t(r.target)){var i="disabled"===r.attributeName,s="href"===r.attributeName,o="skip"===r.target.getAttribute("data-cssvars"),l="src"===r.target.getAttribute("data-cssvars");i?a=!o&&!l:s&&(o?r.target.setAttribute("data-cssvars",""):l&&z(e.rootElement,!0),a=!0)}return a}(a)||function(e){var t=!1;if("childList"===e.type){var n=r(e.target),a="out"===e.target.getAttribute("data-cssvars");t=n&&!a}return t}(a)||function(e){var a=!1;"childList"===e.type&&(a=[].slice.call(e.addedNodes).some(function(e){var a=1===e.nodeType,i=a&&e.hasAttribute("data-cssvars"),s=r(e)&&P.cssVars.test(e.textContent),o=!i&&(n(e)||s);return o&&!t(e)}));return a}(a)||function(t){var n=!1;"childList"===t.type&&(n=[].slice.call(t.removedNodes).some(function(t){var n=1===t.nodeType,r=n&&"out"===t.getAttribute("data-cssvars"),a=n&&"src"===t.getAttribute("data-cssvars"),i=a;if(a||r){var s=t.getAttribute("data-cssvars-group"),o=e.rootElement.querySelector('[data-cssvars-group="'.concat(s,'"]'));a&&z(e.rootElement,!0),o&&o.parentNode.removeChild(o)}return i}));return n}(a)});i&&G(e)})).observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0})}(n),void G(n);if(!1===n.watch&&x&&(x.disconnect(),x=null),!n.__benchmark){if(U===n.rootElement)return void function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;clearTimeout(F),F=setTimeout(function(){e.__benchmark=null,G(e)},t)}(e);var s=[].slice.call(n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(n.__benchmark=V(),n.exclude=[x?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",n.exclude].filter(function(e){return e}).join(","),n.variables=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=/^-{2}/;return Object.keys(e).reduce(function(n,r){var a=t.test(r)?r:"--".concat(r.replace(/^-+/,""));return n[a]=e[r],n},{})}(n.variables),s.forEach(function(e){var t="style"===e.nodeName.toLowerCase()&&e.__cssVars.text,n=t&&e.textContent!==e.__cssVars.text;t&&n&&(e.sheet&&(e.sheet.disabled=!1),e.setAttribute("data-cssvars",""))}),!x)[].slice.call(n.rootElement.querySelectorAll('[data-cssvars="out"]')).forEach(function(e){var t=e.getAttribute("data-cssvars-group");(t?n.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(t,'"]')):null)||e.parentNode.removeChild(e)}),j&&s.length<j&&(j=s.length,D.dom={})}if("loading"!==document.readyState)if(R&&n.onlyLegacy){var o=!1;if(n.updateDOM){var l=n.rootElement.host||(n.rootElement===document?document.documentElement:n.rootElement);Object.keys(n.variables).forEach(function(e){var t=n.variables[e];o=o||t!==getComputedStyle(l).getPropertyValue(e),l.style.setProperty(e,t)})}i(o)}else!H&&(n.shadowDOM||n.rootElement.shadowRoot||n.rootElement.host)?m({rootElement:L.rootElement,include:L.include,exclude:n.exclude,skipDisabled:!1,onSuccess:function(e,t,n){return!((t.sheet||{}).disabled&&!t.__cssVars)&&((e=((e=e.replace(P.cssComments,"").replace(P.cssMediaQueries,"")).match(P.cssVarDeclRules)||[]).join(""))||!1)},onComplete:function(e,t,r){O(e,{store:D.dom,onWarning:a}),H=!0,G(n)}}):(U=n.rootElement,m({rootElement:n.rootElement,include:n.include,exclude:n.exclude,skipDisabled:!1,onBeforeSend:n.onBeforeSend,onError:function(e,t,n){var a=e.responseURL||B(n,location.href),i=e.statusText?"(".concat(e.statusText,")"):"Unspecified Error"+(0===e.status?" (possibly CORS related)":"");r("CSS XHR Error: ".concat(a," ").concat(e.status," ").concat(i),t,e,a)},onSuccess:function(e,t,r){if((t.sheet||{}).disabled&&!t.__cssVars)return!1;var a="link"===t.nodeName.toLowerCase(),i="style"===t.nodeName.toLowerCase()&&e!==t.textContent,s=n.onSuccess(e,t,r);return e=void 0!==s&&!1===Boolean(s)?"":s||e,n.updateURLs&&(a||i)&&(e=function(e,t){return(e.replace(P.cssComments,"").match(P.cssUrls)||[]).forEach(function(n){var r=n.replace(P.cssUrls,"$1"),a=B(r,t);e=e.replace(n,n.replace(r,a))}),e}(e,r)),e},onComplete:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=p({},D.dom,D.user);if(D.job={},s.forEach(function(e,i){var s=t[i];if(e.__cssVars=e.__cssVars||{},e.__cssVars.text=s,P.cssVars.test(s))try{var o=C(s,{preserveStatic:n.preserveStatic,removeComments:!0});O(o,{parseHost:Boolean(n.rootElement.host),store:D.dom,onWarning:a}),e.__cssVars.tree=o}catch(l){r(l.message,e)}}),p(D.job,D.dom),n.updateDOM?(p(D.user,n.variables),p(D.job,D.user)):(p(D.job,D.user,n.variables),p(o,n.variables)),M.job>0&&Boolean(Object.keys(D.job).length>Object.keys(o).length||Boolean(Object.keys(o).length&&Object.keys(D.job).some(function(e){return D.job[e]!==o[e]}))))z(n.rootElement),G(n);else{var l=[],c=[],u=!1;if(n.updateDOM&&M.job++,s.forEach(function(e,i){var s=!e.__cssVars.tree;if(e.__cssVars.tree)try{I(e.__cssVars.tree,p({},n,{variables:D.job,onWarning:a}));var o=N(e.__cssVars.tree);if(n.updateDOM){var d=t[i],h=P.cssVarFunc.test(d);if(e.getAttribute("data-cssvars")||e.setAttribute("data-cssvars","src"),o.length&&h){var f=e.getAttribute("data-cssvars-group")||++M.group,_=o.replace(/\s/g,""),m=n.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(f,'"]'))||document.createElement("style");u=u||P.cssKeyframes.test(o),n.preserveStatic&&e.sheet&&(e.sheet.disabled=!0),m.hasAttribute("data-cssvars")||m.setAttribute("data-cssvars","out"),_===e.textContent.replace(/\s/g,"")?(s=!0,m&&m.parentNode&&(e.removeAttribute("data-cssvars-group"),m.parentNode.removeChild(m))):_!==m.textContent.replace(/\s/g,"")&&([e,m].forEach(function(e){e.setAttribute("data-cssvars-job",M.job),e.setAttribute("data-cssvars-group",f)}),m.textContent=o,l.push(o),c.push(m),m.parentNode||e.parentNode.insertBefore(m,e.nextSibling))}}else e.textContent.replace(/\s/g,"")!==o&&l.push(o)}catch(g){r(g.message,e)}s&&e.setAttribute("data-cssvars","skip"),e.hasAttribute("data-cssvars-job")||e.setAttribute("data-cssvars-job",M.job)}),j=n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,n.shadowDOM)for(var d,h=[].concat(n.rootElement).concat([].slice.call(n.rootElement.querySelectorAll("*"))),f=0;d=h[f];++f){if(d.shadowRoot&&d.shadowRoot.querySelector("style"))G(p({},n,{rootElement:d.shadowRoot}))}n.updateDOM&&u&&function(e){var t=["animation-name","-moz-animation-name","-webkit-animation-name"].filter(function(e){return getComputedStyle(document.body)[e]})[0];if(t){for(var n=e.getElementsByTagName("*"),r=[],a=0,i=n.length;a<i;a++){var s=n[a],o=getComputedStyle(s)[t];"none"!==o&&(s.style[t]+="__CSSVARSPONYFILL-KEYFRAMES__",r.push(s))}document.body.offsetHeight;for(var l=0,c=r.length;l<c;l++){var u=r[l].style;u[t]=u[t].replace("__CSSVARSPONYFILL-KEYFRAMES__","")}}}(n.rootElement),U=!1,n.onComplete(l.join(""),c,JSON.parse(JSON.stringify(D.job)),V()-n.__benchmark),i(c.length)}}}));else document.addEventListener("DOMContentLoaded",function t(n){G(e),document.removeEventListener("DOMContentLoaded",t)})}}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),r.href=t,a.href=e,a.href}function V(){return w&&(window.performance||{}).now?window.performance.now():(new Date).getTime()}function z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];[].slice.call(e.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]')).forEach(function(e){return e.setAttribute("data-cssvars","")}),t&&(D.dom={})}G.reset=function(){for(var e in M.job=0,M.group=0,U=!1,x&&(x.disconnect(),x=null),j=0,F=null,H=!1,D)D[e]={}};var q=G,K=n(13),Y=n(7),W=n(11);n(15);n.d(t,"a",function(){return fe});var Q="INIT_SDK",J="SET_SDK_LOADING",X="RESET_SDK",$="SDK_ERROR",Z=function(e,t){var n=e.userId,r=e.appId,a=e.nickname,i=e.profileUrl,s=e.accessToken,o=e.sdk,l=e.logger,c=t.sdkDispatcher,f=t.userDispatcher;!function(e){var t=e.sdkDispatcher,n=e.userDispatcher,r=e.sdk,a=e.onDisconnect;t({type:J,payload:!0}),r&&r.disconnect?r.disconnect().then(function(){t({type:X}),n({type:d.b})}).finally(function(){a()}):a()}({sdkDispatcher:c,userDispatcher:f,sdk:o,logger:l,onDisconnect:function(){if(l.info("Setup connection"),c({type:J,payload:!0}),n&&r){var e=new u.a({appId:r});e.addExtension("sb_uikit","3.0.0-alpha");var t=function(t){c({type:Q,payload:e}),f({type:d.a,payload:t}),a===t.nickname&&i===t.profileUrl||Object(h.u)(a)&&Object(h.u)(i)||e.updateCurrentUserInfo(a||t.nickname,i||t.profileUrl).then(function(e){f({type:d.c,payload:e})})},o=function(e){l.error("Connection failed","".concat(e)),c({type:X}),c({type:d.b}),c({type:$})};s?e.connect(n,s).then(function(e){return t(e)}).catch(function(e){return o(e)}):e.connect(n).then(function(e){return t(e)}).catch(function(e){return o(e)})}else c({type:$}),l.warning("Connection failed","UserId or appId missing")}})},ee=function(e){Object(a.useLayoutEffect)(function(){(function(e){if(null===e||void 0===e)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})})(e)||q({variables:Object(f.a)({"--sendbird-dark-primary-500":"#4d2aa6","--sendbird-dark-primary-400":"#6440C4","--sendbird-dark-primary-300":"#7B53EF","--sendbird-dark-primary-200":"#9E8CF5","--sendbird-dark-primary-100":"#E2DFFF","--sendbird-dark-secondary-500":"#007A7A","--sendbird-dark-secondary-400":"#189A8D","--sendbird-dark-secondary-300":"#2EBA9F","--sendbird-dark-secondary-200":"#6FD6BE","--sendbird-dark-secondary-100":"#AEF2DC","--sendbird-dark-information-100":"#b2d9ff","--sendbird-dark-error-500":"#A30E2D","--sendbird-dark-error-400":"#C11F41","--sendbird-dark-error-300":"#E53157","--sendbird-dark-error-200":"#FF6183","--sendbird-dark-error-100":"#FFABBD","--sendbird-dark-background-700":"#000000","--sendbird-dark-background-600":"#161616","--sendbird-dark-background-500":"#2C2C2C","--sendbird-dark-background-400":"#393939","--sendbird-dark-background-300":"#A8A8A8","--sendbird-dark-background-200":"#D9D9D9","--sendbird-dark-background-100":"#F0F0F0","--sendbird-dark-background-50":"#FFFFFF","--sendbird-dark-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-dark-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-dark-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-dark-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-dark-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-dark-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-dark-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-dark-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-dark-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-dark-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-primary-500":"#4d2aa6","--sendbird-light-primary-400":"#6440C4","--sendbird-light-primary-300":"#7B53EF","--sendbird-light-primary-200":"#9E8CF5","--sendbird-light-primary-100":"#E2DFFF","--sendbird-light-secondary-500":"#007A7A","--sendbird-light-secondary-400":"#189A8D","--sendbird-light-secondary-300":"#2EBA9F","--sendbird-light-secondary-200":"#6FD6BE","--sendbird-light-secondary-100":"#AEF2DC","--sendbird-light-information-100":"#b2d9ff","--sendbird-light-error-500":"#A30E2D","--sendbird-light-error-400":"#C11F41","--sendbird-light-error-300":"#E53157","--sendbird-light-error-200":"#FF6183","--sendbird-light-error-100":"#FFABBD","--sendbird-light-background-700":"#000000","--sendbird-light-background-600":"#161616","--sendbird-light-background-500":"#2C2C2C","--sendbird-light-background-400":"#393939","--sendbird-light-background-300":"#A8A8A8","--sendbird-light-background-200":"#D9D9D9","--sendbird-light-background-100":"#F0F0F0","--sendbird-light-background-50":" #FFFFFF","--sendbird-light-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-light-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-light-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-light-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-light-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-light-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-light-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-light-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-light-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-light-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},e)})},[e])},te={initialized:!1,loading:!1,sdk:{},error:!1};function ne(e,t){switch(t.type){case J:return Object(r.a)(Object(r.a)({},e),{},{initialized:!1,loading:t.payload});case $:return Object(r.a)(Object(r.a)({},e),{},{initialized:!1,loading:!1,error:!0});case Q:return{sdk:t.payload,initialized:!0,loading:!1,error:!1};case X:return te;default:return e}}var re={initialized:!1,loading:!1,user:{}};function ae(e,t){switch(t.type){case d.a:return{initialized:!0,loading:!1,user:t.payload};case d.b:return re;case d.c:return Object(r.a)(Object(r.a)({},e),{},{user:t.payload});default:return e}}var ie="debug",se="warning",oe="error",le="info",ce="all",ue=function(e){var t=e.level,n=e.title,r=e.description,a=void 0===r?"":r;console.log("%c SendbirdUIKit | ".concat(t," | ").concat((new Date).toISOString()," | ").concat(n," ").concat(a&&"|"),function(e){switch(e){case se:return"color: Orange";case oe:return"color: Red";default:return"color: Gray"}}(t),a)},de=function(e,t){var n=t||ue,a=Array.isArray(e)?e:[e],i=function(e){return function(t,r){return n({level:e,title:t,description:r})}};return a.reduce(function(e,t){return t===ie||t===ce?Object(r.a)(Object(r.a)({},e),{},{info:i(le),error:i(oe),warning:i(se)}):t===le?Object(r.a)(Object(r.a)({},e),{},{info:i(le)}):t===oe?Object(r.a)(Object(r.a)({},e),{},{error:i(oe)}):t===se?Object(r.a)(Object(r.a)({},e),{},{warning:i(se)}):Object(r.a)({},e)},{info:function(){},error:function(){},warning:function(){}})},he=function(){var e={},t=e.hasOwnProperty;return{__getTopics:function(){return e},subscribe:function(n,r){t.call(e,n)||(e[n]=[]);var a=e[n].push(r)-1;return{remove:function(){delete e[n][a]}}},publish:function(n,r){t.call(e,n)&&e[n].forEach(function(e){e(void 0!==r?r:{})})}}};function fe(e){var t=e.userId,n=e.dateLocale,s=e.appId,o=e.accessToken,c=e.children,u=e.disableUserProfile,d=e.renderUserProfile,h=e.allowProfileEdit,f=e.theme,p=e.nickname,_=e.profileUrl,m=e.userListQuery,g=e.config,v=void 0===g?{}:g,y=e.colorSet,E=e.stringSet,b=e.imageCompression,C=e.useReaction,O=v.logLevel,N=void 0===O?"":O,S=Object(a.useState)(de(N)),A=Object(r.b)(S,2),I=A[0],k=A[1],T=Object(a.useState)(),w=Object(r.b)(T,2),R=w[0],M=w[1],L=Object(a.useReducer)(ne,te),P=Object(r.b)(L,2),D=P[0],U=P[1],x=Object(a.useReducer)(ae,re),j=Object(r.b)(x,2),F=j[0],H=j[1];ee(y),Object(a.useEffect)(function(){M(he())},[]),Object(a.useEffect)(function(){I.info("App Init"),Z({userId:t,appId:s,accessToken:o,sdkStore:D,nickname:p,profileUrl:_,sdk:D.sdk,logger:I},{sdkDispatcher:U,userDispatcher:H})},[t,s,o]),Object(a.useEffect)(function(){k(de(N))},[N]),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;Object(a.useEffect)(function(){var n=document.querySelector(t);return e.forEach(function(e){var t=document.createElement("div");t.setAttribute("id",e),n.appendChild(t)}),function(){e.forEach(function(e){var t=document.getElementById(e);t&&n.removeChild(t)})}},[])}(["sendbird-modal-root","sendbird-dropdown-portal","sendbird-emoji-list-portal"],"body");var G=Object(a.useState)(f),B=Object(r.b)(G,2),V=B[0],z=B[1];Object(a.useEffect)(function(){z(f)},[f]),Object(a.useEffect)(function(){I.info("Setup theme","Theme: ".concat(V));try{var e=document.querySelector("body");e.classList.remove("sendbird-theme--light"),e.classList.remove("sendbird-theme--dark"),e.classList.add("sendbird-theme--".concat(V||"light")),I.info("Finish setup theme")}catch(t){I.warning("Setup theme failed","".concat(t))}return function(){try{var e=document.querySelector("body");e.classList.remove("sendbird-theme--light"),e.classList.remove("sendbird-theme--dark")}catch(t){}}},[V]);var q=function(e,t){var n=Object(a.useState)(!0),i=Object(r.b)(n,2),s=i[0],o=i[1];return Object(a.useEffect)(function(){var n,r=Object(K.a)();return t.warning("sdk changed",r),e&&e.ConnectionHandler&&((n=new e.ConnectionHandler).onReconnectStarted=function(){o(!1),t.warning("onReconnectStarted",{isOnline:s})},n.onReconnectSucceeded=function(){o(!0),t.warning("onReconnectSucceeded",{isOnline:s})},n.onReconnectFailed=function(){e.reconnect(),t.warning("onReconnectFailed")},t.info("Added ConnectionHandler",r),e.addConnectionHandler(r,n)),function(){try{e.removeConnectionHandler(r),t.info("Removed ConnectionHandler",r)}catch(n){}}},[e]),Object(a.useEffect)(function(){var n=function(){try{t.warning("Try reconnecting SDK"),"OPEN"!==e.getConnectionState()&&e.reconnect()}catch(n){}};return window.addEventListener("online",n),function(){window.removeEventListener("online",n)}},[e]),Object(a.useEffect)(function(){var e=document.querySelector("body");if(s)try{e.classList.remove("sendbird__offline"),t.info("Removed class sendbird__offline from body")}catch(n){}else try{e.classList.add("sendbird__offline"),t.info("Added class sendbird__offline to body")}catch(n){}},[s]),s}(D.sdk,I),Q=i.a.useMemo(function(){return E?Object(r.a)(Object(r.a)({},Object(W.a)("en")),E):Object(W.a)("en")},[E]);return i.a.createElement(l.a.Provider,{value:{stores:{sdkStore:D,userStore:F},dispatchers:{sdkDispatcher:U,userDispatcher:H,reconnect:function(){Z({userId:t,appId:s,accessToken:o,sdkStore:D,nickname:p,profileUrl:_,logger:I,sdk:D.sdk},{sdkDispatcher:U,userDispatcher:H})}},config:{disableUserProfile:u,renderUserProfile:d,allowProfileEdit:h,isOnline:q,userId:t,appId:s,accessToken:o,theme:V,setCurrenttheme:z,userListQuery:m,logger:I,pubSub:R,imageCompression:b,useReaction:C}}},i.a.createElement(Y.a,{stringSet:Q,dateLocale:n},c))}fe.propTypes={userId:o.a.string.isRequired,appId:o.a.string.isRequired,accessToken:o.a.string,children:o.a.oneOfType([o.a.element,o.a.arrayOf(o.a.element),o.a.any]).isRequired,theme:o.a.string,nickname:o.a.string,dateLocale:o.a.shape({}),profileUrl:o.a.string,disableUserProfile:o.a.bool,renderUserProfile:o.a.func,allowProfileEdit:o.a.bool,userListQuery:o.a.func,config:o.a.shape({logLevel:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),pubSub:o.a.shape({subscribe:o.a.func,publish:o.a.func})}),stringSet:o.a.objectOf(o.a.string),colorSet:o.a.objectOf(o.a.string),useReaction:o.a.bool,imageCompression:o.a.shape({compressionRate:o.a.number,resizingWidth:o.a.oneOfType([o.a.number,o.a.string]),resizingHeight:o.a.oneOfType([o.a.number,o.a.string])})},fe.defaultProps={accessToken:"",theme:"light",nickname:"",dateLocale:null,profileUrl:"",disableUserProfile:!1,renderUserProfile:null,allowProfileEdit:!1,userListQuery:null,config:{},stringSet:null,colorSet:null,imageCompression:{},useReaction:!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return u});var r,a=n(0),i=n.n(a),s=n(31),o=n(10);!function(e){e.GROUP="group",e.SUPERGROUP="supergroup",e.BROADCAST="broadcast"}(r||(r={}));var l=i.a.createContext(void 0),c=function(e){var t,n=e.children,c=e.onCreateChannel,u=e.onBeforeCreateChannel,d=e.userListQuery,h=Object(o.a)(),f=null===(t=null===h||void 0===h?void 0:h.config)||void 0===t?void 0:t.userListQuery,p=Object(s.b)(h),_=Object(a.useState)(0),m=_[0],g=_[1],v=Object(a.useState)(r.GROUP),y=v[0],E=v[1];return i.a.createElement(l.Provider,{value:{onBeforeCreateChannel:u,createChannel:p,onCreateChannel:c,userListQuery:d||f,step:m,setStep:g,type:y,setType:E}},n)},u=function(){return i.a.useContext(l)}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s);function l(e){var t=e.id,n=e.checked,s=e.onChange,o=Object(a.useState)(n),l=Object(r.b)(o,2),c=l[0],u=l[1];return i.a.createElement("label",{className:"sendbird-checkbox",htmlFor:t},i.a.createElement("input",{id:t,type:"checkbox",checked:c,onClick:function(){return u(!c)},onChange:s}),i.a.createElement("span",{className:"sendbird-checkbox--checkmark"}))}l.propTypes={id:o.a.string,checked:o.a.bool,onChange:o.a.func},l.defaultProps={id:"sendbird-checkbox-input",checked:!1,onChange:function(){}}},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return s});var r=n(38),a=n(17),i=n(15);function s(e){return Object(a.d)(1,arguments),Object(r.a)(e,Date.now())}var o=864e5;function l(e,t,n){Object(a.d)(2,arguments);var s=Object(a.f)(e),l=Object(a.f)(t),c=n||{},u=c.locale,d=void 0===u?i.a:u,h=c.weekStartsOn,f=void 0===h?0:h;if(!d.localize)throw new RangeError("locale must contain localize property");if(!d.formatLong)throw new RangeError("locale must contain formatLong property");if(!d.formatRelative)throw new RangeError("locale must contain formatRelative property");var p,_=function(e,t){Object(a.d)(2,arguments);var n=Object(r.b)(e),i=Object(r.b)(t),s=n.getTime()-Object(a.c)(n),l=i.getTime()-Object(a.c)(i);return Math.round((s-l)/o)}(s,l);if(isNaN(_))throw new RangeError("Invalid time value");p=_<-6?"other":_<-1?"lastWeek":_<0?"yesterday":_<1?"today":_<2?"tomorrow":_<7?"nextWeek":"other";var m=Object(a.e)(s,Object(a.c)(s)),g=Object(a.e)(l,Object(a.c)(l)),v=d.formatRelative(p,m,g,{locale:d,weekStartsOn:f});return Object(a.b)(s,v,{locale:d,weekStartsOn:f})}function c(e,t){return Object(a.d)(2,arguments),function(e,t){Object(a.d)(2,arguments);var n=Object(a.f)(e),r=Object(a.a)(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}(e,-Object(a.a)(t))}function u(e){return Object(a.d)(1,arguments),Object(r.a)(e,c(Date.now(),1))}},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return g}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));var i=function(e){return e};var s="beforeunload",o="hashchange",l="popstate";function c(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,o=n.history;function c(){var e=n.location,t=e.pathname,r=e.search,a=e.hash,s=o.state||{};return[s.idx,i({pathname:t,search:r,hash:a,state:s.usr||null,key:s.key||"default"})]}var u=null;n.addEventListener(l,function(){if(u)b.call(u),u=null;else{var e=a.Pop,t=c(),n=t[0],r=t[1];if(b.length){if(null!=n){var i=v-n;i&&(u={action:e,location:r,retry:function(){I(-1*i)}},I(i))}}else A(e)}});var d=a.Pop,h=c(),v=h[0],y=h[1],E=p(),b=p();function C(e){return"string"===typeof e?e:m(e)}function O(e,t){return void 0===t&&(t=null),i(r({pathname:y.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:_()}))}function N(e,t){return[{usr:e.state,key:e.key,idx:t},C(e)]}function S(e,t,n){return!b.length||(b.call({action:e,location:t,retry:n}),!1)}function A(e){d=e;var t=c();v=t[0],y=t[1],E.call({action:d,location:y})}function I(e){o.go(e)}return null==v&&(v=0,o.replaceState(r({},o.state,{idx:v}),"")),{get action(){return d},get location(){return y},createHref:C,push:function e(t,r){var i=a.Push,s=O(t,r);if(S(i,s,function(){e(t,r)})){var l=N(s,v+1),c=l[0],u=l[1];try{o.pushState(c,"",u)}catch(d){n.location.assign(u)}A(i)}},replace:function e(t,n){var r=a.Replace,i=O(t,n);if(S(r,i,function(){e(t,n)})){var s=N(i,v),l=s[0],c=s[1];o.replaceState(l,"",c),A(r)}},go:I,back:function(){I(-1)},forward:function(){I(1)},listen:function(e){return E.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&n.addEventListener(s,f),function(){t(),b.length||n.removeEventListener(s,f)}}}}function u(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,c=n.history;function u(){var e=g(n.location.hash.substr(1)),t=e.pathname,r=void 0===t?"/":t,a=e.search,s=void 0===a?"":a,o=e.hash,l=void 0===o?"":o,u=c.state||{};return[u.idx,i({pathname:r,search:s,hash:l,state:u.usr||null,key:u.key||"default"})]}var d=null;function h(){if(d)O.call(d),d=null;else{var e=a.Pop,t=u(),n=t[0],r=t[1];if(O.length){if(null!=n){var i=E-n;i&&(d={action:e,location:r,retry:function(){T(-1*i)}},T(i))}}else k(e)}}n.addEventListener(l,h),n.addEventListener(o,function(){m(u()[1])!==m(b)&&h()});var v=a.Pop,y=u(),E=y[0],b=y[1],C=p(),O=p();function N(e){return function(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var r=n.location.href,a=r.indexOf("#");t=-1===a?r:r.slice(0,a)}return t}()+"#"+("string"===typeof e?e:m(e))}function S(e,t){return void 0===t&&(t=null),i(r({pathname:b.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:_()}))}function A(e,t){return[{usr:e.state,key:e.key,idx:t},N(e)]}function I(e,t,n){return!O.length||(O.call({action:e,location:t,retry:n}),!1)}function k(e){v=e;var t=u();E=t[0],b=t[1],C.call({action:v,location:b})}function T(e){c.go(e)}return null==E&&(E=0,c.replaceState(r({},c.state,{idx:E}),"")),{get action(){return v},get location(){return b},createHref:N,push:function e(t,r){var i=a.Push,s=S(t,r);if(I(i,s,function(){e(t,r)})){var o=A(s,E+1),l=o[0],u=o[1];try{c.pushState(l,"",u)}catch(d){n.location.assign(u)}k(i)}},replace:function e(t,n){var r=a.Replace,i=S(t,n);if(I(r,i,function(){e(t,n)})){var s=A(i,E),o=s[0],l=s[1];c.replaceState(o,"",l),k(r)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return C.push(e)},block:function(e){var t=O.push(e);return 1===O.length&&n.addEventListener(s,f),function(){t(),O.length||n.removeEventListener(s,f)}}}}function d(e){void 0===e&&(e={});var t=e,n=t.initialEntries,s=void 0===n?["/"]:n,o=t.initialIndex,l=s.map(function(e){return i(r({pathname:"/",search:"",hash:"",state:null,key:_()},"string"===typeof e?g(e):e))}),c=h(null==o?l.length-1:o,0,l.length-1),u=a.Pop,d=l[c],f=p(),v=p();function y(e,t){return void 0===t&&(t=null),i(r({pathname:d.pathname,search:"",hash:""},"string"===typeof e?g(e):e,{state:t,key:_()}))}function E(e,t,n){return!v.length||(v.call({action:e,location:t,retry:n}),!1)}function b(e,t){u=e,d=t,f.call({action:u,location:d})}function C(e){var t=h(c+e,0,l.length-1),n=a.Pop,r=l[t];E(n,r,function(){C(e)})&&(c=t,b(n,r))}return{get index(){return c},get action(){return u},get location(){return d},createHref:function(e){return"string"===typeof e?e:m(e)},push:function e(t,n){var r=a.Push,i=y(t,n);E(r,i,function(){e(t,n)})&&(c+=1,l.splice(c,l.length,i),b(r,i))},replace:function e(t,n){var r=a.Replace,i=y(t,n);E(r,i,function(){e(t,n)})&&(l[c]=i,b(r,i))},go:C,back:function(){C(-1)},forward:function(){C(1)},listen:function(e){return f.push(e)},block:function(e){return v.push(e)}}}function h(e,t,n){return Math.min(Math.max(e,t),n)}function f(e){e.preventDefault(),e.returnValue=""}function p(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter(function(e){return e!==t})}},call:function(t){e.forEach(function(e){return e&&e(t)})}}}function _(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,s=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),s&&"#"!==s&&(n+="#"===s.charAt(0)?s:"#"+s),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}},function(e,t,n){"use strict";n(71);var r=n(28),a=n(0),i=n(45),s=n(26);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var c=["onClick","reloadDocument","replace","state","target","to"];function u(e){var t=e.basename,n=e.children,o=e.window,l=Object(a.useRef)();null==l.current&&(l.current=Object(i.b)({window:o}));var c=l.current,u=Object(a.useState)({action:c.action,location:c.location}),d=Object(r.a)(u,2),h=d[0],f=d[1];return Object(a.useLayoutEffect)(function(){return c.listen(f)},[c]),Object(a.createElement)(s.b,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:c})}var d=Object(a.forwardRef)(function(e,t){var n=e.onClick,r=e.reloadDocument,u=e.replace,d=void 0!==u&&u,h=e.state,f=e.target,p=e.to,_=l(e,c),m=Object(s.d)(p),g=function(e,t){var n=void 0===t?{}:t,r=n.target,o=n.replace,l=n.state,c=Object(s.f)(),u=Object(s.e)(),d=Object(s.g)(e);return Object(a.useCallback)(function(t){if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!o||Object(i.e)(u)===Object(i.e)(d);c(e,{replace:n,state:l})}},[u,c,d,o,l,r,e])}(p,{replace:d,state:h,target:f});return Object(a.createElement)("a",o({},_,{href:m,onClick:function(e){n&&n(e),e.defaultPrevented||r||g(e)},ref:t,target:f}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(1),c=(n(11),/https?:\/\//);function u(e){var t=e.className,n=e.src,a=e.type,s=e.color,o=e.children,u=c.test(n)?n:"http://".concat(n);return i.a.createElement("a",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),["sendbird-link-label",s?Object(l.e)(s):""]).join(" "),href:u,target:"_blank",rel:"noopener noreferrer"},i.a.createElement(l.a,{className:"sendbird-link-label__label",type:a,color:s},o))}u.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),src:o.a.string.isRequired,type:o.a.oneOf(Object.keys(l.b)).isRequired,color:o.a.oneOf(Object.keys(l.c)).isRequired,children:o.a.oneOfType([o.a.string,o.a.element,o.a.arrayOf(o.a.string),o.a.arrayOf(o.a.element)]).isRequired},u.defaultProps={className:""};l.b,l.c},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),a=n.n(r),i=n(18),s=n(3),o=n(37);n(5),n(14),n(4),n(13);function l(e){var t=e.channel,n=e.userId,l=e.theme,c=e.width,u=void 0===c?56:c,d=e.height,h=void 0===d?56:d,f=null===t||void 0===t?void 0:t.isBroadcast,p=Object(r.useMemo)(function(){return f?Object(o.c)(t)?a.a.createElement("div",{className:"sendbird-chat-header--default-avatar",style:{width:u,height:h,display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement(s.c,{type:s.b.BROADCAST,fillColor:s.a.CONTENT,width:.575*u,height:.575*h})):a.a.createElement(i.a,{className:"sendbird-chat-header--avatar--broadcast-channel",src:Object(o.a)(t,n),width:u,height:h,alt:t.name}):a.a.createElement(i.a,{className:"sendbird-chat-header--avatar--group-channel",src:Object(o.a)(t,n),width:u+"px",height:h+"px",alt:t.name})},[null===t||void 0===t?void 0:t.members,null===t||void 0===t?void 0:t.coverUrl,l]);return a.a.createElement(a.a.Fragment,null,p)}},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(16),c=n(12),u=n(3),d=n(1),h=n(7),f=n(6),p=(n(11),n(15),n(5),function(){}),_=16,m=13,g=i.a.forwardRef(function(e,t){var n=e.className,s=e.isEdit,o=e.disabled,p=e.value,g=e.name,v=e.placeholder,y=e.maxLength,E=e.onFileUpload,b=e.onSendMessage,C=e.onCancelEdit,O=e.onStartTyping,N=e.channelUrl,S=Object(a.useContext)(h.b).stringSet,A=Object(a.useRef)(null),I=Object(a.useState)(p),k=Object(r.b)(I,2),T=k[0],w=k[1],R=Object(a.useState)(!1),M=Object(r.b)(R,2),L=M[0],P=M[1],D=function(){try{var e=t.current,n=.6*window.document.body.offsetHeight;e&&e.scrollHeight>=76?n<e.scrollHeight?(e.style.height="auto",e.style.height="".concat(n,"px")):(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")):e.style.height=""}catch(r){}};Object(a.useEffect)(function(){return D(),D},[T]),Object(a.useEffect)(function(){s||w("")},[N]);var U,x=function(){if(T&&T.trim().length>0){var e=T.trim();s?b(g,e,function(){C()}):(b(),w(""))}};return i.a.createElement("form",{className:Object(f.p)([n,s?"sendbird-message-input__edit":"",o?"sendbird-message-input-form__disabled":""])},i.a.createElement("div",{className:Object(f.p)(["sendbird-message-input",o?"sendbird-message-input__disabled":""])},i.a.createElement("textarea",{className:"sendbird-message-input--textarea",disabled:o,ref:t,name:g,value:T,maxLength:y,onChange:function(e){w(e.target.value),O()},onKeyDown:function(e){e.keyCode===_&&P(!0),L||e.keyCode!==m||(e.preventDefault(),x())},onKeyUp:function(e){e.keyCode===_&&P(!1)}}),!T&&i.a.createElement(d.a,{className:"sendbird-message-input--placeholder",type:d.b.BODY_1,color:d.c.ONBACKGROUND_3},v||S.MESSAGE_INPUT__PLACE_HOLDER),!s&&T&&T.trim().length>0&&i.a.createElement(l.a,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:x},i.a.createElement(u.c,{type:u.b.SEND,fillColor:u.a.PRIMARY,width:"20px",height:"20px"})),!s&&(!T||!(T.trim().length>0))&&i.a.createElement(l.a,{className:"sendbird-message-input--attach",height:"32px",width:"32px",onClick:function(){A.current.click()}},i.a.createElement(u.c,{type:u.b.ATTACH,fillColor:u.a.CONTENT_INVERSE,width:"20px",height:"20px"}),i.a.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:A,onChange:(U=E,function(e){e.target.files&&e.target.files[0]&&U(e.target.files[0]),e.target.value=""})}))),s&&i.a.createElement("div",{className:"sendbird-message-input--edit-action"},i.a.createElement(c.a,{className:"sendbird-message-input--edit-action__cancel",type:c.c.SECONDARY,size:c.d.SMALL,onClick:C},S.BUTTON__CANCEL),i.a.createElement(c.a,{className:"sendbird-message-input--edit-action__save",type:c.c.PRIMARY,size:c.d.SMALL,onClick:function(){if(T){var e=T.trim();b(g,e,function(){C()})}}},S.BUTTON__SAVE)))});g.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),placeholder:o.a.oneOfType([o.a.string,o.a.bool]),isEdit:o.a.bool,name:o.a.oneOfType([o.a.string,o.a.number]),value:o.a.string,disabled:o.a.bool,maxLength:o.a.number,onFileUpload:o.a.func,onSendMessage:o.a.func,onStartTyping:o.a.func,onCancelEdit:o.a.func,channelUrl:o.a.string},g.defaultProps={className:"",value:"",channelUrl:"",onSendMessage:p,name:"sendbird-message-input",isEdit:!1,disabled:!1,placeholder:"",maxLength:5e3,onFileUpload:p,onCancelEdit:p,onStartTyping:p}},function(e,t,n){"use strict";n.d(t,"a",function(){return V}),n.d(t,"b",function(){return E}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return g}),n.d(t,"e",function(){return C}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return z});var r=n(5),a=n(0),i=n.n(a),s=n(9),o=n(13),l=n(23),c=n(19),u=n(10),d=n(4),h=n(6),f="RESET_CHANNEL_LIST",p="CREATE_CHANNEL",_="SET_AUTO_SELECT_CHANNEL_ITEM",m="LEAVE_CHANNEL_SUCCESS",g="SET_CURRENT_CHANNEL",v="SHOW_CHANNEL_SETTINGS",y="HIDE_CHANNEL_SETTINGS",E="FETCH_CHANNELS_START",b="FETCH_CHANNELS_SUCCESS",C="FETCH_CHANNELS_FAILURE",O="INIT_CHANNELS_START",N="INIT_CHANNELS_SUCCESS",S="INIT_CHANNELS_FAILURE",A="ON_USER_JOINED",I="ON_CHANNEL_DELETED",k="ON_LAST_MESSAGE_UPDATED",T="ON_USER_LEFT",w="ON_CHANNEL_CHANGED",R="ON_CHANNEL_ARCHIVED",M="ON_CHANNEL_FROZEN",L="ON_CHANNEL_UNFROZEN",P="ON_READ_RECEIPT_UPDATED",D="ON_DELIVERY_RECEIPT_UPDATED",U="CHANNEL_REPLACED_TO_TOP",x="CHANNEL_LIST_PARAMS_UPDATED",j=function(e){var t=e.sdk,n=e.sdkChannelHandlerId,r=e.channelListDispatcher,a=e.logger,i=new t.ChannelHandler;i.onChannelChanged=function(e){a.info("ChannelList: onChannelChanged",e),r({type:w,payload:e})},i.onChannelDeleted=function(e){a.info("ChannelList: onChannelDeleted",e),r({type:I,payload:e})},i.onUserJoined=function(e){a.info("ChannelList: onUserJoined",e),e.lastMessage&&r({type:A,payload:e})},i.onUserBanned=function(e,n){var i=t.currentUser;a.info("Channel | useHandleChannelEvents: onUserBanned",e),n.userId===i.userId?r({type:T,payload:{channel:e,isMe:!0}}):r({type:T,payload:{channel:e,isMe:!1}})},i.onUserLeft=function(e,n){var i=t.currentUser.userId===n.userId;a.info("ChannelList: onUserLeft",e),r({type:T,payload:{channel:e,isMe:i}})},i.onReadStatus=function(e){a.info("ChannelList: onReadStatus",e),r({type:P,payload:e})},i.onDeliveryReceiptUpdated=function(e){a.info("ChannelList: onDeliveryReceiptUpdated",e),e.lastMessage&&r({type:D,payload:e})},i.onMessageUpdated=function(e,t){e.lastMessage.isEqual(t)&&(a.info("ChannelList: onMessageUpdated",e),r({type:k,payload:e}))},i.onChannelHidden=function(e){a.info("ChannelList: onChannelHidden",e),r({type:R,payload:e})},i.onChannelFrozen=function(e){a.info("ChannelList: onChannelFrozen",e),r({type:M,payload:e})},i.onChannelUnfrozen=function(e){a.info("ChannelList: onChannelUnfrozen",e),r({type:L,payload:e})},a.info("ChannelList: Added channelHandler"),t.addChannelHandler(n,i)},F=function(e){var t=e.sdk,n=e.userFilledChannelListQuery,r=void 0===n?{}:n,a=t.GroupChannel.createMyGroupChannelListQuery();return a.includeEmpty=!1,a.order="latest_last_message",a.limit=20,r&&Object.keys(r).forEach(function(e){a[e]=r[e]}),a};var H={initialized:!1,loading:!1,allChannels:[],currentChannel:null,showSettings:!1,channelListQuery:null,currentUserId:"",disableAutoSelect:!1};function G(e,t){switch(t.type){case O:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case f:return H;case N:return Object(d.a)(Object(d.a)({},e),{},{initialized:!0,loading:!1,allChannels:t.payload,currentChannel:!e.disableAutoSelect&&t.payload&&t.payload.length&&t.payload.length>0?t.payload[0]:null});case b:var n=e.allChannels.map(function(e){return e.url}),r=t.payload.filter(function(e){var t=e.url;return!n.find(function(e){return e===t})});return Object(d.a)(Object(d.a)({},e),{},{allChannels:[].concat(Object(d.c)(e.allChannels),Object(d.c)(r))});case p:var a=t.payload;return e.channelListQuery?Object(h.r)(e.channelListQuery,a,e.currentUserId)?Object(d.a)(Object(d.a)({},e),{},{allChannels:Object(h.s)(e.allChannels,a)}):Object(d.a)(Object(d.a)({},e),{},{currentChannel:a}):Object(d.a)(Object(d.a)({},e),{},{allChannels:[a].concat(Object(d.c)(e.allChannels.filter(function(e){return e.url!==a.url}))),currentChannel:a});case R:var i,s=t.payload;if(e.channelListQuery&&Object(h.r)(e.channelListQuery,s,e.currentUserId))return Object(d.a)(Object(d.a)({},e),{},{allChannels:Object(h.s)(e.allChannels,s)});var o=s.url===(null===(i=e.currentChannel)||void 0===i?void 0:i.url)?e.allChannels[e.allChannels[0].url===s.url?1:0]:e.currentChannel;return Object(d.a)(Object(d.a)({},e),{},{allChannels:e.allChannels.filter(function(e){return e.url!==s.url}),currentChannel:e.disableAutoSelect?null:o});case m:case I:var l,c=t.payload;return Object(d.a)(Object(d.a)({},e),{},{currentChannel:c===(null===(l=e.currentChannel)||void 0===l?void 0:l.url)?e.allChannels[0]:e.currentChannel,allChannels:e.allChannels.filter(function(e){return e.url!==c})});case T:var u,E=t.payload,C=E.channel,S=E.isMe;if(e.channelListQuery){var j;if(Object(h.r)(e.channelListQuery,C,e.currentUserId)){var F,G=Object(h.s)(e.allChannels,C),B=S&&C.url===(null===(F=e.currentChannel)||void 0===F?void 0:F.url)?G[0]:e.currentChannel;return Object(d.a)(Object(d.a)({},e),{},{currentChannel:e.disableAutoSelect?null:B,allChannels:G})}var V=C.url===(null===(j=e.currentChannel)||void 0===j?void 0:j.url)?e.allChannels[0]:e.currentChannel;return Object(d.a)(Object(d.a)({},e),{},{currentChannel:e.disableAutoSelect?null:V,allChannels:e.allChannels.filter(function(e){return e.url!==C.url})})}var z=e.allChannels.filter(function(e){return!(e.url===C.url&&S)}),q=S&&C.url===(null===(u=e.currentChannel)||void 0===u?void 0:u.url)?z[0]:e.currentChannel;return Object(d.a)(Object(d.a)({},e),{},{currentChannel:e.disableAutoSelect?null:q,allChannels:z});case A:case w:case P:case D:var K=e.allChannels,Y=void 0===K?[]:K,W=t.payload,Q=W.unreadMessageCount;if(!W.lastMessage)return e;if(e.channelListQuery){var J;if(Object(h.r)(e.channelListQuery,W,e.currentUserId))return Object(d.a)(Object(d.a)({},e),{},{allChannels:Object(h.s)(Y,W)});var X=W.url===(null===(J=e.currentChannel)||void 0===J?void 0:J.url)?e.allChannels[e.allChannels[0].url===W.url?1:0]:e.currentChannel;return Object(d.a)(Object(d.a)({},e),{},{currentChannel:e.disableAutoSelect?null:X,allChannels:e.allChannels.filter(function(e){return e.url!==W.url})})}if(0===Q){var $=Y.find(function(e){return e.url===W.url});if(0===($&&$.unreadMessageCount))return Object(d.a)(Object(d.a)({},e),{},{allChannels:e.allChannels.map(function(e){return e.url===W.url?W:e})})}return Object(d.a)(Object(d.a)({},e),{},{allChannels:[W].concat(Object(d.c)(e.allChannels.filter(function(e){return e.url!==t.payload.url})))});case g:return Object(d.a)(Object(d.a)({},e),{},{currentChannel:t.payload});case v:return Object(d.a)(Object(d.a)({},e),{},{showSettings:!0});case y:return Object(d.a)(Object(d.a)({},e),{},{showSettings:!1});case k:return Object(d.a)(Object(d.a)({},e),{},{allChannels:e.allChannels.map(function(e){return e.url===t.payload.url?t.payload:e})});case M:var Z=t.payload;if(e.channelListQuery){var ee;if(Object(h.r)(e.channelListQuery,Z,e.currentUserId))return Object(d.a)(Object(d.a)({},e),{},{allChannels:Object(h.s)(e.allChannels,Z)});var te=Z.url===(null===(ee=e.currentChannel)||void 0===ee?void 0:ee.url)?e.allChannels[e.allChannels[0].url===Z.url?1:0]:e.currentChannel;return Object(d.a)(Object(d.a)({},e),{},{allChannels:e.allChannels.filter(function(e){return e.url!==Z.url}),currentChannel:e.disableAutoSelect?null:te})}return Object(d.a)(Object(d.a)({},e),{},{allChannels:e.allChannels.map(function(e){return e.url===Z.url?(e.isFrozen=!0,e):e})});case L:var ne=t.payload;if(e.channelListQuery){var re;if(Object(h.r)(e.channelListQuery,ne,e.currentUserId))return Object(d.a)(Object(d.a)({},e),{},{allChannels:Object(h.s)(e.allChannels,ne)});var ae=ne.url===(null===(re=e.currentChannel)||void 0===re?void 0:re.url)?e.allChannels[e.allChannels[0].url===ne.url?1:0]:e.currentChannel;return Object(d.a)(Object(d.a)({},e),{},{allChannels:e.allChannels.filter(function(e){return e.url!==ne.url}),currentChannel:e.disableAutoSelect?null:ae})}return Object(d.a)(Object(d.a)({},e),{},{allChannels:e.allChannels.map(function(e){return e.url===ne.url?(e.isFrozen=!1,e):e})});case U:return Object(d.a)(Object(d.a)({},e),{},{allChannels:[t.payload].concat(Object(d.c)(e.allChannels.filter(function(e){return e.url!==t.payload.url})))});case x:return Object(d.a)(Object(d.a)({},e),{},{currentUserId:t.payload.currentUserId,channelListQuery:t.payload.channelListQuery});case _:return Object(d.a)(Object(d.a)({},e),{},{ableAutoSelect:t.payload});default:return e}}var B=i.a.createContext({disableUserProfile:!0,allowProfileEdit:!0,onBeforeCreateChannel:null,onThemeChange:null,onProfileEditSuccess:null,onChannelSelect:null,queries:{},className:null,initialized:!1,loading:!1,allChannels:[],currentChannel:null,showSettings:!1,channelListQuery:{},currentUserId:null,channelListDispatcher:null,channelSource:null}),V=function(e){var t=e.children,n=e.className,d=e.disableUserProfile,h=e.allowProfileEdit,p=e.queries,g=e.onProfileEditSuccess,v=e.onThemeChange,y=e.onBeforeCreateChannel,E=e.sortChannelList,b=e.disableAutoSelect,C=(null===e||void 0===e?void 0:e.onChannelSelect)||l.a,A=Object(u.a)(),I=A.config,T=A.stores.sdkStore,w=I.pubSub,R=I.logger,M=T.sdk,L=d||(null===I||void 0===I?void 0:I.disableUserProfile),P=null===I||void 0===I?void 0:I.renderUserProfile,D=h||(null===I||void 0===I?void 0:I.allowProfileEdit),V=null===p||void 0===p?void 0:p.channelListQuery,z=null===p||void 0===p?void 0:p.applicationUserListQuery,q=null===T||void 0===T?void 0:T.initialized,K=Object(a.useReducer)(G,H),Y=K[0],W=K[1],Q=Object(a.useState)(),J=Q[0],X=Q[1],$=Object(a.useState)(null),Z=$[0],ee=$[1],te=Y.loading,ne=Y.currentChannel;Object(a.useEffect)(function(){var e=function(e,t){var n=new Map;return e?(n.set(s.a,e.subscribe(s.a,function(e){var n=e.channel;t({type:"CREATE_CHANNEL",payload:n})})),n.set(s.e,e.subscribe(s.e,function(e){var n,r=e.channel,a=e.message,i=r;(null===i||void 0===i?void 0:null===(n=i.lastMessage)||void 0===n?void 0:n.messageId)===a.messageId&&(i.lastMessage=a),r&&t({type:k,payload:i})})),n.set(s.c,e.subscribe(s.c,function(e){var n=e.channel;t({type:m,payload:n.url})})),n.set(s.g,e.subscribe(s.g,function(e){var n=e.channel;t({type:U,payload:n})})),n):n}(w,W);return function(){!function(e){e.forEach(function(e){try{e.remove()}catch(t){}})}(e)}},[q]),Object(a.useEffect)(function(){W({type:_,payload:b})},[b]),Object(a.useEffect)(function(){return ee(o.a),q?(R.info("ChannelList: Setup channelHandlers"),function(e){var t=e.sdk,n=e.sdkChannelHandlerId,r=e.channelListDispatcher,a=e.setChannelSource,i=e.onChannelSelect,s=e.userFilledChannelListQuery,o=e.logger,l=e.sortChannelList,c=e.disableAutoSelect;t&&t.ChannelHandler?j({sdk:t,channelListDispatcher:r,sdkChannelHandlerId:n,logger:o}):o.console.warning("ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist",t),o.info("ChannelList - creating query",{userFilledChannelListQuery:s});var u=F({sdk:t,userFilledChannelListQuery:s});o.info("ChannelList - created query",u),a(u),r({type:O}),s&&(o.info("ChannelList - setting up channelListQuery",u),r({type:x,payload:{channelListQuery:u,currentUserId:t&&t.currentUser&&t.currentUser.userId}})),o.info("ChannelList - fetching channels"),u.hasNext?u.next(function(e,n){var a=e,s=n;if(t.getErrorFirstCallback()&&(a=n,s=e),o.info("ChannelList - fetched channels",a),s)return o.error("ChannelList - couldnt fetch channels",s),void r({type:S});o.info("ChannelList - highlight channel",a[0]);var u=a;l&&"function"===typeof l&&(u=l(a),o.info("ChannelList - channel list sorted",u)),c||i(u[0]),r({type:N,payload:u}),a&&"function"===typeof a.forEach&&(o.info("ChannelList - mark all channels as delivered"),a.forEach(function(e){return e.markAsDelivered()}))}):o.warning("ChannelList - there are no more channels")}({sdk:M,sdkChannelHandlerId:Z,channelListDispatcher:W,setChannelSource:X,onChannelSelect:C,userFilledChannelListQuery:V,logger:R,sortChannelList:E,disableAutoSelect:b})):(R.info("ChannelList: Removing channelHandlers"),M&&(null===M||void 0===M?void 0:M.removeChannelHandler)&&M.removeChannelHandler(Z),X(null),W({type:f,payload:null})),function(){R.info("ChannelList: Removing channelHandlers"),M&&M.removeChannelHandler&&M.removeChannelHandler(Z)}},[q,V,E]);var re=Object(a.useMemo)(function(){return{applicationUserListQuery:z,channelListQuery:V}},[z,V]),ae=Y.allChannels,ie=E&&"function"===typeof E?E(ae):ae;if(ie.length!==ae.length){var se="ChannelList: You have removed/added extra channels on sortChannelList\n      this could cause unexpected problems";console.warn(se,{before:ae,after:ie}),R.warning(se,{before:ae,after:ie})}return Object(a.useEffect)(function(){M&&M.GroupChannel&&ne&&(null===ne||void 0===ne?void 0:ne.url)&&M.GroupChannel.getChannel(ne.url,function(e){C(e||null)})},[null===ne||void 0===ne?void 0:ne.url]),i.a.createElement(B.Provider,{value:Object(r.a)(Object(r.a)({className:n,disableUserProfile:d,queries:re,onProfileEditSuccess:g,onThemeChange:v,onBeforeCreateChannel:y,onChannelSelect:C,sortChannelList:E,loading:te,allowProfileEdit:D,channelListDispatcher:W,channelSource:J},Y),{allChannels:ie})},i.a.createElement(c.a,{disableUserProfile:L,renderUserProfile:P},i.a.createElement("div",{className:"sendbird-channel-list "+n},t)))};function z(){return Object(a.useContext)(B)}},function(e,t,n){"use strict";var r=n(82),a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function s(e){return"undefined"===typeof e}function o(e){return null!==e&&"object"===typeof e}function l(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===a.call(e)}function u(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:o,isPlainObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:c,isStream:function(e){return o(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!==typeof window&&"undefined"!==typeof document},forEach:u,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,function(t,a){e[a]=n&&"function"===typeof t?r(t,n):t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i});var r="INIT_USER",a="RESET_USER",i="UPDATE_USER_INFO"},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n(5),a=n(0),i=n.n(a),s=n(3),o=n(57),l=n(54);n(4),n(23);function c(e){var t=e.className,n=e.id,o=e.renderTitle,c=e.renderContent,u=e.renderFooter,d=Object(a.useState)(!1),h=d[0],f=d[1];return i.a.createElement(l.a,null,function(e){var a=e.opened,l=e.setOpened;f(n===a);var d=function(){l(h?"":n)};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Object(r.b)(Object(r.b)([],Array.isArray(t)?t:[t],!0),["sendbird-accordion__panel-header"],!1).join(" "),id:n,role:"switch","aria-checked":!1,onClick:d,onKeyDown:d,tabIndex:0},o(),i.a.createElement(s.c,{type:s.b.CHEVRON_RIGHT,className:["sendbird-accordion__panel-icon-right","sendbird-accordion__panel-icon--chevron",h?"sendbird-accordion__panel-icon--open":""].join(" "),height:"24px",width:"24px"})),h&&i.a.createElement("div",{className:"sendbird-accordion"},i.a.createElement("div",{className:"sendbird-accordion__list"},c()),u&&i.a.createElement("div",{className:"sendbird-accordion__footer"},u())))})}var u=o.a},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return l});var r=n(0),a=n.n(r),i=n(23),s=a.a.createContext({opened:"",setOpened:i.a}),o=s.Consumer,l=s.Provider},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(33),c=n(1);n(11);function u(e){var t=e.className,n=e.children,a=e.separatorColor;return i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(t)?t:[t]),["sendbird-separator"]).join(" ")},i.a.createElement("div",{className:["sendbird-separator__left","".concat(Object(l.b)(a),"--background-color")].join(" ")}),i.a.createElement("div",{className:"sendbird-separator__text"},n),i.a.createElement("div",{className:["sendbird-separator__right","".concat(Object(l.b)(a),"--background-color")].join(" ")}))}u.propTypes={className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),children:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string),o.a.element]),separatorColor:o.a.string},u.defaultProps={className:"",children:i.a.createElement(c.a,{type:c.b.CAPTION_2,color:c.c.ONBACKGROUND_2},"Date Separator"),separatorColor:l.a.ONBACKGROUND_4}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(1),c=n(7);n(11),n(15);function u(e){var t=e.count,n=e.maxLevel,s=e.className,o=Object(a.useContext)(c.b).stringSet,u=parseInt("9".repeat(n>6?6:n),10);return i.a.createElement("div",{className:[].concat(Object(r.c)(Array.isArray(s)?s:[s]),["sendbird-badge"]).join(" ")},i.a.createElement("div",{className:"sendbird-badge__text"},i.a.createElement(l.a,{type:l.b.CAPTION_2,color:l.c.ONCONTENT_1},t>u?"".concat(u).concat(o.BADGE__OVER):t)))}u.propTypes={count:o.a.number.isRequired,maxLevel:o.a.number,className:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)])},u.defaultProps={maxLevel:2,className:[]}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),a=n.n(r),i=n(54);n(23);function s(e){var t=e.children,n=e.className,s=void 0===n?"":n,o=Object(r.useState)(""),l=o[0],c=o[1];return a.a.createElement(i.b,{value:{opened:l,setOpened:c}},a.a.createElement("div",{className:s},t))}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),a=n.n(r),i=n(50),s=n(69),o=(n(5),n(9),n(13),n(23),n(19),n(10),n(20),n(4),n(6),n(75),n(7),n(11),n(15),n(1),n(16),n(18),n(14),n(3),n(76),n(61),n(66),n(42),n(31),n(59),n(25),n(21),n(29),n(12),n(36),n(40),n(43),n(30),n(8),n(27),n(60),n(77),n(48),n(37),n(56),n(44),n(38),n(17),n(78),n(67),n(68),n(35),n(32),n(33),n(52),n(24),n(34),function(e){return a.a.createElement(i.a,{className:null===e||void 0===e?void 0:e.className,disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile,allowProfileEdit:null===e||void 0===e?void 0:e.allowProfileEdit,onBeforeCreateChannel:null===e||void 0===e?void 0:e.onBeforeCreateChannel,onThemeChange:null===e||void 0===e?void 0:e.onThemeChange,onProfileEditSuccess:null===e||void 0===e?void 0:e.onProfileEditSuccess,onChannelSelect:null===e||void 0===e?void 0:e.onChannelSelect,sortChannelList:null===e||void 0===e?void 0:e.sortChannelList,queries:null===e||void 0===e?void 0:e.queries,disableAutoSelect:null===e||void 0===e?void 0:e.disableAutoSelect},a.a.createElement(s.a,{renderChannelPreview:null===e||void 0===e?void 0:e.renderChannelPreview,renderUserProfile:null===e||void 0===e?void 0:e.renderUserProfile,renderHeader:null===e||void 0===e?void 0:e.renderHeader,renderPlaceHolderEmptyList:null===e||void 0===e?void 0:e.renderPlaceHolderEmptyList,renderPlaceHolderError:null===e||void 0===e?void 0:e.renderPlaceHolderError,renderPlaceHolderLoading:null===e||void 0===e?void 0:e.renderPlaceHolderLoading}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(5),a=n(0),i=n.n(a),s=n(7),o=n(42),l=n(10),c=n(25),u=n(1),d=n(12),h=n(36),f=(n(11),n(15),n(31),n(9),n(20),n(4),n(21),n(29),n(16),n(3),n(23),n(19),n(18),n(14),n(13),n(40),n(43),n(30),n(8),n(6),n(27),function(e,t){return"broadcast"===t&&(e.isBroadcast=!0),"supergroup"===t&&(e.isSuper=!0),e}),p=function(e){var t,n,p,_=e.onCancel,m=Object(o.c)(),g=m.onBeforeCreateChannel,v=m.onCreateChannel,y=m.createChannel,E=m.type,b=Object(l.a)(),C=null===(t=null===b||void 0===b?void 0:b.config)||void 0===t?void 0:t.userId,O=null===(p=null===(n=null===b||void 0===b?void 0:b.stores)||void 0===n?void 0:n.sdkStore)||void 0===p?void 0:p.sdk,N=[C],S=Object(a.useState)([]),A=S[0],I=S[1],k=Object(a.useState)({}),T=k[0],w=k[1],R=Object(a.useContext)(s.b).stringSet,M=Object(a.useState)(null),L=M[0],P=M[1],D=Object.keys(T).length,U=R.MODAL__CREATE_CHANNEL__TITLE,x=R.BUTTON__CREATE,j=function(e){var t=e.sdk,n=e.userFilledApplicationUserListQuery,r=t.createApplicationUserListQuery();return n&&Object.keys(n).forEach(function(e){r[e]=n[e]}),r}({sdk:O});return Object(a.useEffect)(function(){var e=j;P(e),e.next(function(e){I(e)})},[]),i.a.createElement(c.a,{titleText:U,submitText:x,type:d.c.PRIMARY,onCancel:_,onSubmit:function(){var e=Object.keys(T);if(e.length>0){if(g){var t=g(e);f(t,E),y(t).then(function(e){v(e)})}else{(t=new O.GroupChannelParams).addUserIds(e),t.isDistinct=!1,C&&(t.operatorUserIds=[C]),f(t,E),y(t).then(function(e){v(e)})}_()}}},i.a.createElement("div",null,i.a.createElement(u.a,{color:D>0?u.c.PRIMARY:u.c.ONBACKGROUND_3,type:u.b.CAPTION_1},D+" "+R.MODAL__INVITE_MEMBER__SELECTEC),i.a.createElement("div",{className:"sendbird-create-channel--scroll",onScroll:function(e){var t=e.target,n=L.hasNext,a=t.clientHeight+t.scrollTop===t.scrollHeight;n&&a&&L.next(function(e,t){t||I(Object(r.b)(Object(r.b)([],A,!0),e,!0))})}},A.map(function(e){return!function(e){return function(t){return null===e||void 0===e?void 0:e.includes(t)}}(N)(e.userId)&&i.a.createElement(h.a,{key:e.userId,user:e,checkBox:!0,checked:T[e.userId],onChange:function(e){var t,n=Object(r.a)(Object(r.a)({},T),((t={})[e.target.id]=e.target.checked,t));e.target.checked||delete n[e.target.id],w(n)}})}))))}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),a=n.n(r),i=n(31),s=n(10),o=n(42),l=n(7),c=n(1),u=n(3),d=n(25),h=(n(9),n(20),n(4),n(11),n(15),n(21),n(29),n(16),n(12),n(23),function(e){var t=e.onCancel,n=Object(s.a)(),h=i.a.getSdk(n),f=Object(o.c)(),p=f.setStep,_=f.setType,m=Object(r.useContext)(l.b).stringSet,g=function(e){var t,n=null===(t=null===e||void 0===e?void 0:e.appInfo)||void 0===t?void 0:t.applicationAttributes;return!!Array.isArray(n)&&n.includes("allow_broadcast_channel")}(h),v=function(e){var t,n=null===(t=null===e||void 0===e?void 0:e.appInfo)||void 0===t?void 0:t.applicationAttributes;return!!Array.isArray(n)&&n.includes("allow_super_group_channel")}(h);return a.a.createElement(d.a,{titleText:null===m||void 0===m?void 0:m.MODAL__CREATE_CHANNEL__TITLE,hideFooter:!0,onCancel:function(){t()}},a.a.createElement("div",{className:"sendbird-add-channel__rectangle-wrap"},a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){_(o.b.GROUP),p(1)},role:"button",tabIndex:0,onKeyDown:function(){_(o.b.GROUP),p(1)}},a.a.createElement(u.c,{className:"sendbird-add-channel__rectangle__chat-icon",type:u.b.CHAT,fillColor:u.a.PRIMARY,width:"28px",height:"28px"}),a.a.createElement(c.a,{type:c.b.SUBTITLE_1,color:c.c.ONBACKGROUND_1},m.MODAL__CREATE_CHANNEL__GROUP)),v&&a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){_(o.b.SUPERGROUP),p(1)},role:"button",tabIndex:0,onKeyDown:function(){_(o.b.SUPERGROUP),p(1)}},a.a.createElement(u.c,{className:"sendbird-add-channel__rectangle__supergroup-icon",type:u.b.SUPERGROUP,fillColor:u.a.PRIMARY,width:"28px",height:"28px"}),a.a.createElement(c.a,{type:c.b.SUBTITLE_1,color:c.c.ONBACKGROUND_1},m.MODAL__CREATE_CHANNEL__SUPER)),g&&a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){_(o.b.BROADCAST),p(1)},role:"button",tabIndex:0,onKeyDown:function(){_(o.b.BROADCAST),p(1)}},a.a.createElement(u.c,{className:"sendbird-add-channel__rectangle__broadcast-icon",type:u.b.BROADCAST,fillColor:u.a.PRIMARY,width:"28px",height:"28px"}),a.a.createElement(c.a,{type:c.b.SUBTITLE_1,color:c.c.ONBACKGROUND_1},m.MODAL__CREATE_CHANNEL__BROADCAST))))})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),a=n.n(r),i=n(66),s=n(42),o=(n(59),n(5),n(7),n(11),n(15),n(10),n(20),n(4),n(25),n(21),n(29),n(16),n(3),n(12),n(1),n(23),n(36),n(19),n(18),n(14),n(13),n(40),n(43),n(30),n(31),n(9),n(8),n(6),n(27),n(60),function(e){var t=e.onBeforeCreateChannel,n=e.userListQuery,r=e.onCreateChannel,o=e.onCancel,l=e.renderStepOne;return a.a.createElement(s.a,{onBeforeCreateChannel:t,userListQuery:n,onCreateChannel:r},a.a.createElement(i.a,{renderStepOne:l,onCancel:o}))})},function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";(function(e){var r=n(70),a=n(0),i=n.n(a),s=n(92),o=n.n(s),l=n(93),c=n(94),u=n(80),d=n(79),h=n.n(d);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},_=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!Object(r.typeOf)(e)},m=Object.freeze([]),g=Object.freeze({});function v(e){return"function"==typeof e}function y(e){return e.displayName||e.name||"Component"}function E(e){return e&&"string"==typeof e.styledComponentId}var b="undefined"!=typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SC_ATTR||Object({NODE_ENV:"production",PUBLIC_URL:""}).SC_ATTR)||"data-styled",C="undefined"!=typeof window&&"HTMLElement"in window,O=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof e&&void 0!==Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SC_DISABLE_SPEEDY&&""!==Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SC_DISABLE_SPEEDY?"false"!==Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SC_DISABLE_SPEEDY&&Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof e&&void 0!==Object({NODE_ENV:"production",PUBLIC_URL:""}).SC_DISABLE_SPEEDY&&""!==Object({NODE_ENV:"production",PUBLIC_URL:""}).SC_DISABLE_SPEEDY&&("false"!==Object({NODE_ENV:"production",PUBLIC_URL:""}).SC_DISABLE_SPEEDY&&Object({NODE_ENV:"production",PUBLIC_URL:""}).SC_DISABLE_SPEEDY));function N(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var S=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&N(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var i=r;i<a;i++)this.groupSizes[i]=0}for(var s=this.indexOfGroup(e+1),o=0,l=t.length;o<l;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,i=r;i<a;i++)t+=this.tag.getRule(i)+"/*!sc*/\n";return t},e}(),A=new Map,I=new Map,k=1,T=function(e){if(A.has(e))return A.get(e);for(;I.has(k);)k++;var t=k++;return A.set(e,t),I.set(t,e),t},w=function(e){return I.get(e)},R=function(e,t){t>=k&&(k=t+1),A.set(e,t),I.set(t,e)},M="style["+b+'][data-styled-version="5.3.5"]',L=new RegExp("^"+b+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),P=function(e,t,n){for(var r,a=n.split(","),i=0,s=a.length;i<s;i++)(r=a[i])&&e.registerName(t,r)},D=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],a=0,i=n.length;a<i;a++){var s=n[a].trim();if(s){var o=s.match(L);if(o){var l=0|parseInt(o[1],10),c=o[2];0!==l&&(R(c,l),P(e,c,o[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(s)}}},U=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},x=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(b))return r}}(n),i=void 0!==a?a.nextSibling:null;r.setAttribute(b,"active"),r.setAttribute("data-styled-version","5.3.5");var s=U();return s&&r.setAttribute("nonce",s),n.insertBefore(r,i),r},j=function(){function e(e){var t=this.element=x(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}N(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),F=function(){function e(e){var t=this.element=x(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),H=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),G=C,B={isServer:!C,useCSSOMInjection:!O},V=function(){function e(e,t,n){void 0===e&&(e=g),void 0===t&&(t={}),this.options=f({},B,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&C&&G&&(G=!1,function(e){for(var t=document.querySelectorAll(M),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(b)&&(D(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return T(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(f({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new H(a):r?new j(a):new F(a),new S(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(T(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(T(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(T(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var i=w(a);if(void 0!==i){var s=e.names.get(i),o=t.getGroup(a);if(s&&o&&s.size){var l=b+".g"+a+'[id="'+i+'"]',c="";void 0!==s&&s.forEach(function(e){e.length>0&&(c+=e+",")}),r+=""+o+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),z=/(a)(d)/gi,q=function(e){return String.fromCharCode(e+(e>25?39:97))};function K(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=q(t%52)+n;return(q(t%52)+n).replace(z,"$1-$2")}var Y=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},W=function(e){return Y(5381,e)};function Q(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(v(n)&&!E(n))return!1}return!0}var J=W("5.3.5"),X=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Q(e),this.componentId=t,this.baseHash=Y(J,t),this.baseStyle=n,V.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var i=_e(this.rules,e,t,n).join(""),s=K(Y(this.baseHash,i)>>>0);if(!t.hasNameForId(r,s)){var o=n(i,"."+s,void 0,r);t.insertRules(r,s,o)}a.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=Y(this.baseHash,n.hash),u="",d=0;d<l;d++){var h=this.rules[d];if("string"==typeof h)u+=h;else if(h){var f=_e(h,e,t,n),p=Array.isArray(f)?f.join(""):f;c=Y(c,p+d),u+=p}}if(u){var _=K(c>>>0);if(!t.hasNameForId(r,_)){var m=n(u,"."+_,void 0,r);t.insertRules(r,_,m)}a.push(_)}}return a.join(" ")},e}(),$=/^\s*\/\/.*$/gm,Z=[":","[",".","#"];function ee(e){var t,n,r,a,i=void 0===e?g:e,s=i.options,o=void 0===s?g:s,c=i.plugins,u=void 0===c?m:c,d=new l.a(o),h=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,i,s,o,l,c,u,d){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}(function(e){h.push(e)}),p=function(e,r,i){return 0===r&&-1!==Z.indexOf(i[n.length])||i.match(a)?e:"."+t};function _(e,i,s,o){void 0===o&&(o="&");var l=e.replace($,""),c=i&&s?s+" "+i+" { "+l+" }":l;return t=o,n=i,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),d(s||!i?"":i,c)}return d.use([].concat(u,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,p))},f,function(e){if(-2===e){var t=h;return h=[],t}}])),_.hash=u.length?u.reduce(function(e,t){return t.name||N(15),Y(e,t.name)},5381).toString():"",_}var te=i.a.createContext(),ne=(te.Consumer,i.a.createContext()),re=(ne.Consumer,new V),ae=ee();function ie(){return Object(a.useContext)(te)||re}function se(){return Object(a.useContext)(ne)||ae}function oe(e){var t=Object(a.useState)(e.stylisPlugins),n=t[0],r=t[1],s=ie(),l=Object(a.useMemo)(function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target]),c=Object(a.useMemo)(function(){return ee({options:{prefix:!e.disableVendorPrefixes},plugins:n})},[e.disableVendorPrefixes,n]);return Object(a.useEffect)(function(){o()(n,e.stylisPlugins)||r(e.stylisPlugins)},[e.stylisPlugins]),i.a.createElement(te.Provider,{value:l},i.a.createElement(ne.Provider,{value:c},e.children))}var le=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ae);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return N(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ae),this.name+e.hash},e}(),ce=/([A-Z])/,ue=/([A-Z])/g,de=/^ms-/,he=function(e){return"-"+e.toLowerCase()};function fe(e){return ce.test(e)?e.replace(ue,he).replace(de,"-ms-"):e}var pe=function(e){return null==e||!1===e||""===e};function _e(e,t,n,r){if(Array.isArray(e)){for(var a,i=[],s=0,o=e.length;s<o;s+=1)""!==(a=_e(e[s],t,n,r))&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));return i}return pe(e)?"":E(e)?"."+e.styledComponentId:v(e)?"function"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!t?e:_e(e(t),t,n,r):e instanceof le?n?(e.inject(n,r),e.getName(r)):e:_(e)?function e(t,n){var r,a,i=[];for(var s in t)t.hasOwnProperty(s)&&!pe(t[s])&&(Array.isArray(t[s])&&t[s].isCss||v(t[s])?i.push(fe(s)+":",t[s],";"):_(t[s])?i.push.apply(i,e(t[s],s)):i.push(fe(s)+": "+(r=s,null==(a=t[s])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in c.a?String(a).trim():a+"px")+";"));return n?[n+" {"].concat(i,["}"]):i}(e):e.toString();var l}var me=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e)||_(e)?me(_e(p(m,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:me(_e(p(e,n)))}new Set;var ve=function(e,t,n){return void 0===n&&(n=g),e.theme!==n.theme&&e.theme||t||n.theme},ye=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ee=/(^-|-$)/g;function be(e){return e.replace(ye,"-").replace(Ee,"")}var Ce=function(e){return K(W(e)>>>0)};function Oe(e){return"string"==typeof e&&!0}var Ne=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Se=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ae(e,t,n){var r=e[n];Ne(t)&&Ne(r)?Ie(r,t):e[n]=t}function Ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var s=i[a];if(Ne(s))for(var o in s)Se(o)&&Ae(e,s[o],o)}return e}var ke=i.a.createContext();ke.Consumer;var Te={};function we(e,t,n){var r=E(e),s=!Oe(e),o=t.attrs,l=void 0===o?m:o,c=t.componentId,d=void 0===c?function(e,t){var n="string"!=typeof e?"sc":be(e);Te[n]=(Te[n]||0)+1;var r=n+"-"+Ce("5.3.5"+n+Te[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):c,p=t.displayName,_=void 0===p?function(e){return Oe(e)?"styled."+e:"Styled("+y(e)+")"}(e):p,b=t.displayName&&t.componentId?be(t.displayName)+"-"+t.componentId:t.componentId||d,C=r&&e.attrs?Array.prototype.concat(e.attrs,l).filter(Boolean):l,O=t.shouldForwardProp;r&&e.shouldForwardProp&&(O=t.shouldForwardProp?function(n,r,a){return e.shouldForwardProp(n,r,a)&&t.shouldForwardProp(n,r,a)}:e.shouldForwardProp);var N,S=new X(n,b,r?e.componentStyle:void 0),A=S.isStatic&&0===l.length,I=function(e,t){return function(e,t,n,r){var i=e.attrs,s=e.componentStyle,o=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,d=e.styledComponentId,h=e.target,p=function(e,t,n){void 0===e&&(e=g);var r=f({},t,{theme:e}),a={};return n.forEach(function(e){var t,n,i,s=e;for(t in v(s)&&(s=s(r)),s)r[t]=a[t]="className"===t?(n=a[t],i=s[t],n&&i?n+" "+i:n||i):s[t]}),[r,a]}(ve(t,Object(a.useContext)(ke),o)||g,t,i),_=p[0],m=p[1],y=function(e,t,n,r){var a=ie(),i=se();return t?e.generateAndInjectStyles(g,a,i):e.generateAndInjectStyles(n,a,i)}(s,r,_),E=n,b=m.$as||t.$as||m.as||t.as||h,C=Oe(b),O=m!==t?f({},t,{},m):t,N={};for(var S in O)"$"!==S[0]&&"as"!==S&&("forwardedAs"===S?N.as=O[S]:(c?c(S,u.a,b):!C||Object(u.a)(S))&&(N[S]=O[S]));return t.style&&m.style!==t.style&&(N.style=f({},t.style,{},m.style)),N.className=Array.prototype.concat(l,d,y!==d?y:null,t.className,m.className).filter(Boolean).join(" "),N.ref=E,Object(a.createElement)(b,N)}(N,e,t,A)};return I.displayName=_,(N=i.a.forwardRef(I)).attrs=C,N.componentStyle=S,N.displayName=_,N.shouldForwardProp=O,N.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):m,N.styledComponentId=b,N.target=r?e.target:e,N.withComponent=function(e){var r=t.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["componentId"]),i=r&&r+"-"+(Oe(e)?e:be(y(e)));return we(e,f({},a,{attrs:C,componentId:i}),n)},Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ie({},e.defaultProps,t):t}}),N.toString=function(){return"."+N.styledComponentId},s&&h()(N,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),N}var Re=function(e){return function e(t,n,a){if(void 0===a&&(a=g),!Object(r.isValidElementType)(n))return N(1,String(n));var i=function(){return t(n,a,ge.apply(void 0,arguments))};return i.withConfig=function(r){return e(t,n,f({},a,{},r))},i.attrs=function(r){return e(t,n,f({},a,{attrs:Array.prototype.concat(a.attrs,r).filter(Boolean)}))},i}(we,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){Re[e]=Re(e)});!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Q(e),V.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var a=r(_e(this.rules,t,n,r).join(""),""),i=this.componentId+e;n.insertRules(i,i,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&V.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=U();return"<style "+[n&&'nonce="'+n+'"',b+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?N(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return N(2);var n=((t={})[b]="",t["data-styled-version"]="5.3.5",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=U();return r&&(n.nonce=r),[i.a.createElement("style",f({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new V({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?N(2):i.a.createElement(oe,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return N(3)}}();t.a=Re}).call(this,n(72))},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(19),s=n(10),o=n(4),l=n(17),c=n(9),u=n(6),d=n(22),h=n(13),f=n(8),p=n(2),_=n.n(p),m=a.a.forwardRef(function(e,t){var n=e.className,r=e.width,i=e.height,s=e.selected,l=e.onClick,c=e.children;return a.a.createElement("div",{className:[].concat(Object(o.c)(Array.isArray(n)?n:[n]),["sendbird-reaction-button".concat(s?"--selected":"")]).join(" "),ref:t,role:"button",style:{width:"".concat("string"===typeof r?r.slice(0,-2)-2:r-2,"px"),height:"".concat("string"===typeof i?i.slice(0,-2)-2:i-2,"px")},onClick:function(e){return l(e)},onKeyDown:function(e){return l(e)},tabIndex:0},a.a.createElement("div",{className:"sendbird-reaction-button__inner"},c))});m.propTypes={className:_.a.oneOfType([_.a.string,_.a.arrayOf(_.a.string)]),width:_.a.oneOfType([_.a.number,_.a.string]),height:_.a.oneOfType([_.a.number,_.a.string]),selected:_.a.bool,onClick:_.a.func,children:_.a.element.isRequired},m.defaultProps={className:"",width:"36px",height:"36px",selected:!1,onClick:function(){}};var g=n(14),v=n(3),y="RESET_MESSAGES",E="FETCH_INITIAL_MESSAGES_START",b="FETCH_INITIAL_MESSAGES_SUCCESS",C="FETCH_INITIAL_MESSAGES_FAILURE",O="FETCH_PREV_MESSAGES_SUCCESS",N="FETCH_PREV_MESSAGES_FAILURE",S="FETCH_NEXT_MESSAGES_SUCCESS",A="FETCH_NEXT_MESSAGES_FAILURE",I="SEND_MESSAGEGE_START",k="SEND_MESSAGEGE_SUCESS",T="SEND_MESSAGEGE_FAILURE",w="RESEND_MESSAGEGE_START",R="ON_MESSAGE_RECEIVED",M="ON_MESSAGE_UPDATED",L="ON_MESSAGE_THREAD_INFO_UPDATED",P="ON_MESSAGE_DELETED",D="ON_MESSAGE_DELETED_BY_REQ_ID",U="SET_CURRENT_CHANNEL",x="SET_CHANNEL_INVALID",j="MARK_AS_READ",F="ON_REACTION_UPDATED",H="SET_EMOJI_CONTAINER",G="MESSAGE_LIST_PARAMS_CHANGED",B=Object.freeze({__proto__:null,RESET_MESSAGES:y,FETCH_INITIAL_MESSAGES_START:E,FETCH_INITIAL_MESSAGES_SUCCESS:b,FETCH_INITIAL_MESSAGES_FAILURE:C,FETCH_PREV_MESSAGES_SUCCESS:O,FETCH_PREV_MESSAGES_FAILURE:N,FETCH_NEXT_MESSAGES_SUCCESS:S,FETCH_NEXT_MESSAGES_FAILURE:A,SEND_MESSAGEGE_START:I,SEND_MESSAGEGE_SUCESS:k,SEND_MESSAGEGE_FAILURE:T,RESEND_MESSAGEGE_START:w,ON_MESSAGE_RECEIVED:R,ON_MESSAGE_UPDATED:M,ON_MESSAGE_THREAD_INFO_UPDATED:L,ON_MESSAGE_DELETED:P,ON_MESSAGE_DELETED_BY_REQ_ID:D,SET_CURRENT_CHANNEL:U,SET_CHANNEL_INVALID:x,MARK_AS_READ:j,ON_REACTION_UPDATED:F,SET_EMOJI_CONTAINER:H,MESSAGE_LIST_PARAMS_CHANGED:G});Object(u.m)();var V=Object(u.n)(),z=V.SUCCEEDED;V.FAILED;var q=V.PENDING,K=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(t>10))try{var n=document.querySelector(".sendbird-conversation__messages-padding");n.scrollTop=n.scrollHeight}catch(r){setTimeout(function(){e(t+1)},500*t)}},Y=function(){return"operator"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).myRole},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.isFrozen&&!Y(e)},Q=function(){return"muted"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).myMutedState},J=function(e){return Object(l.b)(e.createdAt,"p")},X=function(e,t){var n,r,a,i;return!!(e&&t&&"admin"!==(null===e||void 0===e?void 0:e.messageType)&&"admin"!==(null===t||void 0===t?void 0:t.messageType)&&null!==e&&void 0!==e&&e.sender&&null!==t&&void 0!==t&&t.sender&&null!==e&&void 0!==e&&e.createdAt&&null!==t&&void 0!==t&&t.createdAt&&null!==e&&void 0!==e&&null!==(n=e.sender)&&void 0!==n&&n.userId&&null!==t&&void 0!==t&&null!==(r=t.sender)&&void 0!==r&&r.userId)&&((null===e||void 0===e?void 0:e.sendingStatus)===(null===t||void 0===t?void 0:t.sendingStatus)&&(null===e||void 0===e?void 0:null===(a=e.sender)||void 0===a?void 0:a.userId)===(null===t||void 0===t?void 0:null===(i=t.sender)||void 0===i?void 0:i.userId)&&J(e)===J(t))},$=function(e,t){var n=t.sendingStatus,r=void 0===n?"undefined":n;if(r===z||r===q){var a=e.map(function(e){return e.sendingStatus||(e.isAdminMessage&&e.isAdminMessage()?z:"undefined")}).lastIndexOf(z);if(a+1<e.length){var i=Object(o.c)(e);return i.splice(a+1,0,t),i}}return[].concat(Object(o.c)(e),[t])},Z=function(e){if("number"===typeof e)return e;if("string"===typeof e){var t=Number.parseFloat(e);if(!Number.isNaN(t))return t}return null},ee={initialized:!1,loading:!1,allMessages:[],currentGroupChannel:{members:[]},hasMorePrev:!1,oldestMessageTimeStamp:0,hasMoreNext:!1,latestMessageTimeStamp:0,emojiContainer:{},unreadSince:null,isInvalid:!1,messageListParams:null},te=30,ne=15,re=Object(u.n)(),ae=re.SUCCEEDED,ie=re.FAILED,se=re.PENDING,oe=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0];return e&&e.createdAt||null},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[e.length-1];return t&&t.createdAt||null};function ce(e,t){var n,r,a;switch(t.type){case y:return Object(o.a)(Object(o.a)({},e),{},{hasMorePrev:!1,hasMoreNext:!1,allMessages:[]});case E:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,allMessages:Object(o.c)(e.allMessages.filter(function(e){return e.sendingStatus!==ae}))});case b:var i,s=t.payload,c=s.currentGroupChannel,h=s.messages;if((null===c||void 0===c?void 0:c.url)!==(null===(i=e.currentGroupChannel)||void 0===i?void 0:i.url))return e;var f=oe(h),p=le(h);return Object(o.a)(Object(o.a)({},e),{},{loading:!1,initialized:!0,hasMorePrev:!0,hasMoreNext:!0,oldestMessageTimeStamp:f,latestMessageTimeStamp:p,allMessages:Object(o.c)(h)});case O:var _,m=t.payload,g=m.currentGroupChannel,v=m.messages;if((null===g||void 0===g?void 0:g.url)!==(null===(_=e.currentGroupChannel)||void 0===_?void 0:_.url))return e;var B=v&&v.length===te+1,V=oe(v),z=[],q=e.allMessages.map(function(e){var t=v.find(function(t){var n=t.messageId;return Object(d.a)(n,e.messageId)});return t?(z.push(t.messageId),t.updatedAt>e.updatedAt?t:e):e}),K=z.length>0?v.filter(function(e){return!z.find(function(t){return Object(d.a)(t,e.messageId)})}):v;return Object(o.a)(Object(o.a)({},e),{},{hasMorePrev:B,oldestMessageTimeStamp:V,allMessages:[].concat(Object(o.c)(K),Object(o.c)(q))});case S:var Y,W=t.payload,Q=W.currentGroupChannel,J=W.messages;if((null===Q||void 0===Q?void 0:Q.url)!==(null===(Y=e.currentGroupChannel)||void 0===Y?void 0:Y.url))return e;var X=J&&J.length===ne+1,Z=le(J),ee=[],re=e.allMessages.map(function(e){var t=J.find(function(t){var n=t.messageId;return Object(d.a)(n,e.messageId)});return t?(ee.push(t.messageId),t.updatedAt>e.updatedAt?t:e):e}),ce=ee.length>0?J.filter(function(e){return!ee.find(function(t){return Object(d.a)(t,e.messageId)})}):J;return Object(o.a)(Object(o.a)({},e),{},{hasMoreNext:X,latestMessageTimeStamp:Z,allMessages:[].concat(Object(o.c)(re),Object(o.c)(ce))});case C:case N:case A:var ue,de=t.payload.currentGroupChannel;return(null===de||void 0===de?void 0:de.url)!==(null===e||void 0===e?void 0:null===(ue=e.currentGroupChannel)||void 0===ue?void 0:ue.url)?e:Object(o.a)(Object(o.a)({},e),{},{loading:!1,initialized:!1,allMessages:[],hasMorePrev:!1,hasMoreNext:!1,oldestMessageTimeStamp:null,latestMessageTimeStamp:null});case I:return Object(o.a)(Object(o.a)({},e),{},{allMessages:[].concat(Object(o.c)(e.allMessages),[Object(o.a)({},t.payload)])});case k:var he=e.allMessages.map(function(e){return Object(d.a)(e.reqId,t.payload.reqId)?t.payload:e});return Object(o.c)(he).sort(function(e,t){return e.sendingStatus&&t.sendingStatus&&e.sendingStatus===ae&&(t.sendingStatus===se||t.sendingStatus===ie)?-1:1}),Object(o.a)(Object(o.a)({},e),{},{allMessages:he});case T:return t.payload.failed=!0,Object(o.a)(Object(o.a)({},e),{},{allMessages:e.allMessages.map(function(e){return Object(d.a)(e.reqId,t.payload.reqId)?t.payload:e})});case U:return Object(o.a)(Object(o.a)({},e),{},{currentGroupChannel:t.payload,isInvalid:!1});case x:return Object(o.a)(Object(o.a)({},e),{},{isInvalid:!0});case R:var fe=t.payload,pe=fe.channel,_e=fe.message,me=pe.members,ge=_e.sender,ve=e.currentGroupChannel,ye=void 0===ve?{}:ve,Ee=e.unreadSince,be=ye.url;if(!Object(d.a)(pe.url,be))return e;if(e.allMessages.some(function(e){return e.messageId===_e.messageId}))return e;if(e.messageListParams&&!Object(u.o)(e.messageListParams,_e))return e;if(_e.isAdminMessage&&_e.isAdminMessage())return Object(o.a)(Object(o.a)({},e),{},{allMessages:$(e.allMessages,_e)});var Ce=null===me||void 0===me?void 0:me.find(function(e){return(null===e||void 0===e?void 0:e.userId)===(null===ge||void 0===ge?void 0:ge.userId)});return(null===Ce||void 0===Ce?void 0:Ce.profileUrl)===(null===ge||void 0===ge?void 0:ge.profileUrl)&&(null===Ce||void 0===Ce?void 0:Ce.friendName)===(null===ge||void 0===ge?void 0:ge.friendName)&&(null===Ce||void 0===Ce?void 0:Ce.nickname)===(null===ge||void 0===ge?void 0:ge.nickname)||(pe.members=me.map(function(e){return e.userId===ge.userId?ge:e})),Object(o.a)(Object(o.a)({},e),{},{currentGroupChannel:pe,unreadSince:null!==e&&void 0!==e&&e.unreadSince?Ee:Object(l.b)(new Date,"p MMM dd"),allMessages:$(e.allMessages,_e)});case M:var Oe=t.payload,Ne=Oe.channel,Se=Oe.message,Ae=e.currentGroupChannel&&e.currentGroupChannel.url||"";return Object(d.a)(Ne.url,Ae)?e.messageListParams&&!Object(u.o)(e.messageListParams,Se)?Object(o.a)(Object(o.a)({},e),{},{allMessages:e.allMessages.filter(function(e){return!Object(d.a)(e.messageId,null===Se||void 0===Se?void 0:Se.messageId)})}):Object(o.a)(Object(o.a)({},e),{},{allMessages:e.allMessages.map(function(e){return Object(d.a)(e.messageId,t.payload.message.messageId)?t.payload.message:e})}):e;case L:var Ie=t.payload,ke=Ie.channel,Te=Ie.event,we=Te.channelUrl,Re=Te.threadInfo,Me=Te.targetMessageId,Le=e.currentGroupChannel&&e.currentGroupChannel.url||"";return Object(d.a)(ke.url,Le)&&Object(d.a)(ke.url,we)?Object(o.a)(Object(o.a)({},e),{},{allMessages:e.allMessages.map(function(e){return Object(d.a)(e.messageId,Me)&&(e.threadInfo=Re),e})}):e;case w:return Object(o.a)(Object(o.a)({},e),{},{allMessages:e.allMessages.map(function(e){return Object(d.a)(e.reqId,t.payload.reqId)?t.payload:e})});case j:return(null===(n=e.currentGroupChannel)||void 0===n?void 0:n.url)!==(null===(r=t.payload)||void 0===r?void 0:null===(a=r.channel)||void 0===a?void 0:a.url)?e:Object(o.a)(Object(o.a)({},e),{},{unreadSince:null});case P:return Object(o.a)(Object(o.a)({},e),{},{allMessages:e.allMessages.filter(function(e){return!Object(d.a)(e.messageId,t.payload)})});case D:return Object(o.a)(Object(o.a)({},e),{},{allMessages:e.allMessages.filter(function(e){return!Object(d.a)(e.reqId,t.payload)})});case H:return Object(o.a)(Object(o.a)({},e),{},{emojiContainer:t.payload});case F:return Object(o.a)(Object(o.a)({},e),{},{allMessages:e.allMessages.map(function(e){return Object(d.a)(e.messageId,t.payload.messageId)?(e.applyReactionEvent&&"function"===typeof e.applyReactionEvent&&e.applyReactionEvent(t.payload),e):e})});case G:return Object(o.a)(Object(o.a)({},e),{},{messageListParams:t.payload});default:return e}}var ue=a.a.createContext(void 0),de=function(e){var t,n,l,u,p=e.channelUrl,_=e.children,j=e.useMessageGrouping,V=e.useReaction,z=e.showSearchIcon,q=e.highlightedMessage,Y=e.startingPoint,W=e.onBeforeSendUserMessage,Q=e.onBeforeSendFileMessage,J=e.onBeforeUpdateUserMessage,X=e.onChatHeaderActionClick,$=e.onSearchClick,re=e.replyType,ae=e.queries,ie=Object(s.a)(),se=ie.config,oe=se.pubSub,le=se.logger,de=se.userId,he=se.isOnline,fe=se.imageCompression,pe=null===(n=null===(t=null===ie||void 0===ie?void 0:ie.stores)||void 0===t?void 0:t.sdkStore)||void 0===n?void 0:n.sdk,_e=null===(u=null===(l=null===ie||void 0===ie?void 0:ie.stores)||void 0===l?void 0:l.sdkStore)||void 0===u?void 0:u.initialized,me=Object(r.useState)(Y),ge=me[0],ve=me[1];Object(r.useEffect)(function(){ve(Y)},[Y,p]);var ye=Object(r.useState)(null),Ee=ye[0],be=ye[1],Ce=Object(r.useState)(q),Oe=Ce[0],Ne=Ce[1];Object(r.useEffect)(function(){Ne(q)},[q]);var Se=null===ae||void 0===ae?void 0:ae.messageListParams,Ae=Object(r.useState)(null),Ie=Ae[0],ke=Ae[1],Te=Object(r.useReducer)(ce,ee),we=Te[0],Re=Te[1],Me=Object(r.useRef)(null),Le=we.allMessages,Pe=we.loading,De=we.initialized,Ue=we.unreadSince,xe=we.isInvalid,je=we.currentGroupChannel,Fe=we.hasMorePrev,He=we.oldestMessageTimeStamp,Ge=we.hasMoreNext,Be=we.latestMessageTimeStamp,Ve=we.emojiContainer,ze=we.readStatus,qe=je.isBroadcast,Ke=je.isSuper,Ye=pe.appInfo,We=(null===Ye||void 0===Ye?void 0:Ye.isUsingReaction)&&!qe&&!Ke&&V,Qe=Object(r.useMemo)(function(){return We?function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).emojiCategories,t=void 0===e?[]:e,n=new Map,r=0;r<t.length;r+=1)for(var a=t[r].emojis,i=0;i<a.length;i+=1){var s=a[i],o=s.key,l=s.url;n.set(o,l)}return n}(Ve):new Map},[Ve]),Je=Object(r.useMemo)(function(){return We?function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).emojiCategories,t=void 0===e?[]:e,n=[],r=0;r<t.length;r+=1)for(var a=t[r].emojis,i=0;i<a.length;i+=1)n.push(a[i]);return n}(Ve):[]},[Ve]),Xe=Object(r.useMemo)(function(){return We?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Map,n=0;n<e.length;n+=1){var r=e[n],a=r.userId,i=r.nickname;t.set(a,i)}return t}(je.members):new Map},[je.members]),$e=function(e,t){var n=e.currentGroupChannel,a=e.oldestMessageTimeStamp,i=e.userFilledMessageListQuery,s=e.replyType,o=t.hasMorePrev,l=t.logger,c=t.messagesDispatcher,u=t.sdk;return Object(r.useCallback)(function(e){if(o){var t=u.appInfo,r=(void 0===t?{}:t).isUsingReaction||!1,d=new u.MessageListParams;d.prevResultSize=te,d.isInclusive=!0,d.includeReplies=!1,d.includeReaction=r,s&&"QUOTE_REPLY"===s&&(d.includeThreadInfo=!0,d.includeParentMessageInfo=!0,d.replyType="only_reply_to_channel"),i&&Object.keys(i).forEach(function(e){d[e]=i[e]}),l.info("Channel: Fetching messages",{currentGroupChannel:n,userFilledMessageListQuery:i}),n.getMessagesByTimestamp(a||(new Date).getTime(),d).then(function(t){c({type:O,payload:{currentGroupChannel:n,messages:t}}),e([t,null])}).catch(function(t){l.error("Channel: Fetching messages failed",t),c({type:N,payload:{currentGroupChannel:n}}),e([null,t])})}},[n,a,s])}({currentGroupChannel:je,oldestMessageTimeStamp:He,userFilledMessageListQuery:Se,replyType:re},{hasMorePrev:Fe,logger:le,messagesDispatcher:Re,sdk:pe}),Ze=function(e,t){var n=e.setInitialTimeStamp,a=e.setAnimatedMessageId,i=e.allMessages,s=t.logger;return Object(r.useCallback)(function(e,t){var r=i.find(function(e){return e.messageId===t});a(null),setTimeout(function(){r?(s.info("Channel: scroll to message - message is present"),a(t)):(s.info("Channel: scroll to message - fetching older messages"),n(null),n(e),a(t))})},[n,a,i])}({setInitialTimeStamp:ve,setAnimatedMessageId:be,allMessages:Le},{logger:le}),et=function(e,t){var n=e.currentGroupChannel,a=e.latestMessageTimeStamp,i=e.userFilledMessageListQuery,s=e.hasMoreNext,o=e.replyType,l=t.logger,c=t.messagesDispatcher,u=t.sdk;return Object(r.useCallback)(function(e){if(s){var t=u.appInfo,r=(void 0===t?{}:t).isUsingReaction||!1,d=new u.MessageListParams;d.nextResultSize=ne,d.isInclusive=!0,d.includeReplies=!1,d.includeReaction=r,o&&"QUOTE_REPLY"===o&&(d.includeThreadInfo=!0,d.includeParentMessageInfo=!0,d.replyType="only_reply_to_channel"),i&&Object.keys(i).forEach(function(e){d[e]=i[e]}),l.info("Channel: Fetching later messages",{currentGroupChannel:n,userFilledMessageListQuery:i}),n.getMessagesByTimestamp(a||(new Date).getTime(),d).then(function(t){c({type:S,payload:{currentGroupChannel:n,messages:t}}),e([t,null])}).catch(function(t){l.error("Channel: Fetching later messages failed",t),c({type:A,payload:{currentGroupChannel:n}}),e([null,t])})}},[n,a,s,o])}({currentGroupChannel:je,latestMessageTimeStamp:Be,userFilledMessageListQuery:Se,hasMoreNext:Ge,replyType:re},{logger:le,messagesDispatcher:Re,sdk:pe}),tt=function(e,t){var n=e.currentGroupChannel,a=t.logger;return Object(r.useCallback)(function(e,t,r){r?n.deleteReaction(e,t).then(function(e){a.info("Delete reaction success",e)}).catch(function(e){a.warning("Delete reaction failed",e)}):n.addReaction(e,t).then(function(e){a.info("Add reaction success",e)}).catch(function(e){a.warning("Add reaction failed",e)})},[n])}({currentGroupChannel:je},{logger:le}),nt=function(e,t){var n=e.emojiContainer,i=e.toggleReaction,s=t.useReaction,o=t.logger,l=t.userId,c=t.emojiAllList;return Object(r.useMemo)(function(){return function(e){var t=e.parentRef,n=e.parentContainRef,r=e.message,u=e.closeDropdown,d=e.spaceFromTrigger,h=void 0===d?{}:d;return s&&(t||n||r||u)?a.a.createElement(f.a,{parentRef:t,parentContainRef:n,closeDropdown:u,spaceFromTrigger:h},c.map(function(e){var t=r.reactions.filter(function(t){return t.key===e.key})[0],n=!!t&&!(t.userIds.indexOf(l)<0);return a.a.createElement(m,{key:e.key,width:"36px",height:"36px",selected:n,onClick:function(){u(),i(r,e.key,n)}},a.a.createElement(g.a,{url:e.url,width:"28px",height:"28px",defaultComponent:a.a.createElement(v.c,{width:"28px",height:"28px",type:v.b.QUESTION})}))})):(o.warning("Channel: Invalid Params in memoizedEmojiListItems"),null)}},[n,i])}({emojiContainer:Ve,toggleReaction:tt},{useReaction:We,logger:le,userId:de,emojiAllList:Je});!function(e,t){var n=e.channelUrl,a=e.sdkInit,i=t.messagesDispatcher,s=t.sdk,o=t.logger;Object(r.useEffect)(function(){n&&a&&s&&s.GroupChannel&&(o.info("Channel | useSetChannel fetching channel",n),s.GroupChannel.getChannel(n).then(function(e){o.info("Channel | useSetChannel fetched channel",e),i({type:U,payload:e}),o.info("Channel: Mark as read",e),e.markAsRead()}).catch(function(e){o.warning("Channel | useSetChannel fetch channel failed",{channelUrl:n,e:e}),i({type:x})}),s.getAllEmoji(function(e,t){t?o.error("Channel: Getting emojis failed",t):(o.info("Channel: Getting emojis success",e),i({type:H,payload:e}))}))},[n,a])}({channelUrl:p,sdkInit:_e},{messagesDispatcher:Re,sdk:pe,logger:le}),Object(r.useEffect)(function(){ke(null)},[p]),function(e,t){var n=e.currentGroupChannel,a=e.sdkInit,i=e.hasMoreNext,s=t.messagesDispatcher,o=t.sdk,l=t.logger,c=t.scrollRef,u=t.setQuoteMessage;Object(r.useEffect)(function(){var e=n&&(null===n||void 0===n?void 0:n.url),t=Object(h.a)();if(e&&o&&o.ChannelHandler){var r=new o.ChannelHandler;l.info("Channel | useHandleChannelEvents: Setup event handler",t),r.onMessageReceived=function(t,r){if(Object(d.a)(t.url,e)&&!i){var a=!1;try{var o=c.current;a=o.offsetHeight+o.scrollTop>=o.scrollHeight}catch(u){}if(l.info("Channel | useHandleChannelEvents: onMessageReceived",r),s({type:R,payload:{channel:t,message:r}}),a)try{setTimeout(function(){n.markAsRead(),K()})}catch(u){l.warning("Channel | onMessageReceived | scroll to end failed")}}},r.onReadReceiptUpdated=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onReadReceiptUpdated",t),s({type:U,payload:t}))},r.onDeliveryReceiptUpdated=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onDeliveryReceiptUpdated",t),s({type:U,payload:t}))},r.onMessageUpdated=function(e,t){l.info("Channel | useHandleChannelEvents: onMessageUpdated",t),s({type:M,payload:{channel:e,message:t}})},r.onThreadInfoUpdated=function(e,t){l.info("Channel | useHandleChannelEvents: onThreadInfoUpdated",t),s({type:L,payload:{channel:e,event:t}})},r.onMessageDeleted=function(e,t){l.info("Channel | useHandleChannelEvents: onMessageDeleted",t),u(null),s({type:P,payload:t})},r.onReactionUpdated=function(e,t){l.info("Channel | useHandleChannelEvents: onReactionUpdated",t),s({type:F,payload:t})},r.onChannelChanged=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onChannelChanged",t),s({type:U,payload:t}))},r.onChannelFrozen=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onChannelFrozen",t),s({type:U,payload:t}))},r.onChannelUnfrozen=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onChannelUnFrozen",t),s({type:U,payload:t}))},r.onUserMuted=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onUserMuted",t),s({type:U,payload:t}))},r.onUserUnmuted=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onUserUnmuted",t),s({type:U,payload:t}))},r.onUserBanned=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onUserBanned",t),s({type:U,payload:t}))},r.onOperatorUpdated=function(t){Object(d.a)(t.url,e)&&(l.info("Channel | useHandleChannelEvents: onOperatorUpdated",t),s({type:U,payload:t}))},o.addChannelHandler(t,r)}return function(){o&&o.removeChannelHandler&&(l.info("Channel | useHandleChannelEvents: Removing message reciver handler",t),o.removeChannelHandler(t))}},[null===n||void 0===n?void 0:n.url,a])}({currentGroupChannel:je,sdkInit:_e,hasMoreNext:Ge},{messagesDispatcher:Re,sdk:pe,logger:le,scrollRef:Me,setQuoteMessage:ke}),function(e,t){var n=e.currentGroupChannel,a=e.userFilledMessageListQuery,i=e.initialTimeStamp,s=e.replyType,o=t.sdk,l=t.logger,c=t.messagesDispatcher,u=n&&n.url;Object(r.useEffect)(function(){if(l.info("Channel useInitialMessagesFetch: Setup started",n),c({type:y,payload:null}),o&&o.MessageListParams&&n&&n.getMessagesByTimestamp){var e=new o.MessageListParams;e.prevResultSize=te,i&&(e.nextResultSize=ne),e.isInclusive=!0,e.includeReplies=!1,e.includeReaction=!0,s&&"QUOTE_REPLY"===s&&(e.includeThreadInfo=!0,e.includeParentMessageInfo=!0,e.replyType="only_reply_to_channel"),a&&Object.keys(a).forEach(function(t){e[t]=a[t]}),(s&&"QUOTE_REPLY"===s||a)&&(l.info("Channel useInitialMessagesFetch: Setup messageListParams",e),c({type:G,payload:e})),l.info("Channel: Fetching messages",{currentGroupChannel:n,userFilledMessageListQuery:a}),c({type:E,payload:null}),n.getMessagesByTimestamp(i||(new Date).getTime(),e).then(function(e){c({type:b,payload:{currentGroupChannel:n,messages:e}})}).catch(function(e){l.error("Channel: Fetching messages failed",e),c({type:C,payload:{currentGroupChannel:n}})}).finally(function(){i||setTimeout(function(){return K()})})}},[u,a,i])}({currentGroupChannel:je,userFilledMessageListQuery:Se,initialTimeStamp:ge,latestMessageTimeStamp:Be,replyType:re},{sdk:pe,logger:le,messagesDispatcher:Re}),Object(r.useEffect)(function(){var e=function(e,t,n){var r=new Map;return t&&t.subscribe?(r.set(c.d,t.subscribe(c.d,function(t){var r=t.channel,a=t.message;K(),r&&e===r.url&&n({type:k,payload:a})})),r.set(c.g,t.subscribe(c.g,function(t){var r=t.channel,a=t.message;r&&e===r.url&&n({type:I,payload:a})})),r.set(c.f,t.subscribe(c.f,function(t){var r=t.channel,a=t.message;K(),r&&e===r.url&&n({type:k,payload:a})})),r.set(c.e,t.subscribe(c.e,function(t){var r=t.channel,a=t.message;t.fromSelector&&r&&e===r.url&&n({type:M,payload:{channel:r,message:a}})})),r.set(c.b,t.subscribe(c.b,function(t){var r=t.channel,a=t.messageId;r&&e===r.url&&n({type:P,payload:a})})),r):r}(p,oe,Re);return function(){e.forEach(function(e){try{e.remove()}catch(t){}})}},[p,_e]),function(e,t){var n=e.isOnline,a=e.replyType,i=t.logger,s=t.sdk,o=t.currentGroupChannel,l=t.messagesDispatcher,c=t.userFilledMessageListQuery;Object(r.useEffect)(function(){var e=!n;return function(){var t;if(e&&(null===o||void 0===o?void 0:o.url)){i.info("Refreshing conversation state");var n=(null===(t=null===s||void 0===s?void 0:s.appInfo)||void 0===t?void 0:t.isUsingReaction)||!1,r=new s.MessageListParams;r.prevResultSize=te,r.isInclusive=!0,r.includeReplies=!1,r.includeReaction=n,a&&"QUOTE_REPLY"===a&&(r.includeThreadInfo=!0,r.includeParentMessageInfo=!0,r.replyType="only_reply_to_channel"),c&&Object.keys(c).forEach(function(e){r[e]=c[e]}),i.info("Channel: Fetching messages",{currentGroupChannel:o,userFilledMessageListQuery:c}),l({type:E,payload:null}),s.GroupChannel.getChannel(o.url).then(function(e){var t=(new Date).getTime();e.getMessagesByTimestamp(t,r).then(function(e){l({type:b,payload:{currentGroupChannel:o,messages:e}}),setTimeout(function(){return K()})}).catch(function(e){i.error("Channel: Fetching messages failed",e),l({type:C,payload:{currentGroupChannel:o}})}).finally(function(){var e;null===(e=o.markAsRead)||void 0===e||e.call(o)})})}}},[n,a])}({isOnline:he,replyType:re},{logger:le,sdk:pe,currentGroupChannel:je,messagesDispatcher:Re,userFilledMessageListQuery:Se});var rt=function(e,t){var n=e.currentGroupChannel,a=e.messagesDispatcher,i=t.logger;return Object(r.useCallback)(function(e){i.info("Channel | useDeleteMessageCallback: Deleting message",e);var t=e.requestState;return new Promise(function(r,s){i.info("Channel | useDeleteMessageCallback: Deleting message requestState:",t),"failed"!==t&&"pending"!==t||(i.info("Channel | useDeleteMessageCallback: Deleted message from local:",e),a({type:D,payload:e.reqId}),r(e)),n.deleteMessage(e,function(n){i.info("Channel | useDeleteMessageCallback: Deleting message from remote:",t),n?(i.warning("Channel | useDeleteMessageCallback: Deleting message failed!",n),s(n)):(i.info("Channel | useDeleteMessageCallback: Deleting message success!",e),a({type:P,payload:e.messageId}),r(e))})})},[n,a])}({currentGroupChannel:je,messagesDispatcher:Re},{logger:le}),at=function(e,t){var n=e.currentGroupChannel,a=e.messagesDispatcher,i=e.onBeforeUpdateUserMessage,s=t.logger,o=t.pubSub,l=t.sdk;return Object(r.useCallback)(function(e,t,r){i&&"function"===typeof i&&s.info("Channel: creating params using onBeforeUpdateUserMessage",i);var u=i?i(t):function(e){var t=new l.UserMessageParams;return t.message=e,t}(t);n.updateUserMessage(e,u,function(e,t){s.info("Channel: Updating message!",u);var i=e,d=t;l.getErrorFirstCallback()&&(i=t,d=e),r&&r(d,i),d?s.warning("Channel: Updating message failed!",d):(s.info("Channel: Updating message success!",i),a({type:M,payload:{channel:n,message:i}}),o.publish(c.e,{message:i,channel:n}))})},[n.url,a,i])}({currentGroupChannel:je,messagesDispatcher:Re,onBeforeUpdateUserMessage:J},{logger:le,sdk:pe,pubSub:oe}),it=function(e,t){var n=e.currentGroupChannel,a=e.messagesDispatcher,i=t.logger;return Object(r.useCallback)(function(e){i.info("Channel: Resending message has started",e);var t=e.messageType,r=e.file;if(e&&"function"===typeof e.isResendable&&e.isResendable()){if(e.requestState="pending",e.sendingStatus="pending",a({type:w,payload:e}),"user"===t)return n.resendUserMessage(e).then(function(e){i.info("Channel: Resending message success!",e),a({type:k,payload:e})}).catch(function(t){i.warning("Channel: Resending message failed!",t),e.requestState="failed",e.sendingStatus="failed",a({type:T,payload:e})}),e.requestState="pending",e.sendingStatus="pending",void a({type:w,payload:e});"file"===t&&(n.resendFileMessage(e,r).then(function(e){i.info("Channel: Resending file message success!",e),a({type:k,payload:e})}).catch(function(t){i.warning("Channel: Resending file message failed!",t),e.requestState="failed",e.sendingStatus="failed",a({type:T,payload:e})}),e.requestState="pending",e.sendingStatus="pending",a({type:w,payload:e}))}else console.error("Message is not resendable"),i.warning("Message is not resendable",e)},[n,a])}({currentGroupChannel:je,messagesDispatcher:Re},{logger:le}),st=function(e,t){var n=e.currentGroupChannel,a=e.onBeforeSendUserMessage,i=t.sdk,s=t.logger,o=t.pubSub,l=t.messagesDispatcher,u=Object(r.useRef)(null),d=Object(r.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=u.current.value;a&&"function"===typeof a&&s.info("Channel: creating params using onBeforeSendUserMessage",a);var r=a?a(t,e):function(t){var n="string"===typeof t?t.trim():t,r=new i.UserMessageParams;return r.message=n,e&&(r.isReplyToChannel=!0,r.parentMessageId=e.messageId),r}(t);s.info("Channel: Sending message has started",r);var d=n.sendUserMessage(r,function(e,t){var n=e,r=t;if(i.getErrorFirstCallback()&&(n=t,r=e),r)return s.warning("Channel: Sending message failed!",{message:n}),void l({type:T,payload:n});s.info("Channel: Sending message success!",n),l({type:k,payload:n})});o.publish(c.g,{message:d,channel:n}),setTimeout(function(){return K()})},[n,a]);return[u,d]}({currentGroupChannel:je,onBeforeSendUserMessage:W},{sdk:pe,logger:le,pubSub:oe,messagesDispatcher:Re}),ot=st[0],lt=st[1],ct=function(e,t){var n=e.currentGroupChannel,a=e.onBeforeSendFileMessage,i=e.imageCompression,s=void 0===i?{}:i,l=t.sdk,u=t.logger,d=t.pubSub,h=t.messagesDispatcher;return[Object(r.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=s.compressionRate,i=s.resizingWidth,f=s.resizingHeight,p=a&&"function"===typeof a,_="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,m=r>0&&r<1,g=Z(i)||Z(f),v=function(e){var n=new l.FileMessageParams;return n.file=e,t&&(n.isReplyToChannel=!0,n.parentMessageId=t.messageId),n};if(_&&(m||g))try{var y=document.createElement("img");y.src=URL.createObjectURL(e),y.onload=function(){URL.revokeObjectURL(y.src);var s=document.createElement("canvas"),_=y.naturalWidth||y.width,m=y.naturalHeight||y.height,E=Z(i)||_,b=Z(f)||m;"image/png"!==e.type||g||(E*=r,b*=r),s.width=E,s.height=b;var C=s.getContext("2d");C.drawImage(y,0,0,E,b),C.canvas.toBlob(function(r){var i=new File([r],e.name,{type:e.type});p&&u.info("Channel: Creating params using onBeforeSendFileMessage",a);var s=p?a(i,t):v(i);u.info("Channel: Uploading file message start!",s);var f=n.sendFileMessage(s,function(e,t){var n=l.getErrorFirstCallback()?[t,e]:[e,t],r=Object(o.b)(n,2),a=r[0],s=r[1];if(s)return u.error("Channel: Sending file message failed!",{message:a,error:s}),a.localUrl=URL.createObjectURL(i),a.file=i,void h({type:T,payload:a});u.info("Channel: Sending file message success!",a),h({type:k,payload:a})});d.publish(c.g,{message:Object(o.a)(Object(o.a)({},f),{},{url:URL.createObjectURL(i),requestState:"pending"}),channel:n}),setTimeout(function(){return K()},1e3)},e.type,r)}}catch(C){u.error("Channel: Sending file message failed!",C)}else{p&&u.info("Channel: creating params using onBeforeSendFileMessage",a);var E=a?a(e,t):v(e);u.info("Channel: Uploading file message start!",E);var b=n.sendFileMessage(E,function(t,n){var r=l.getErrorFirstCallback()?[n,t]:[t,n],a=Object(o.b)(r,2),i=a[0],s=a[1];if(s)return u.error("Channel: Sending file message failed!",{message:i,error:s}),i.localUrl=URL.createObjectURL(e),i.file=e,void h({type:T,payload:i});u.info("Channel: Sending message success!",i),h({type:k,payload:i})});d.publish(c.g,{message:Object(o.a)(Object(o.a)({},b),{},{url:URL.createObjectURL(e),requestState:"pending"}),channel:n}),setTimeout(function(){return K()},1e3)}},[n,a,s])]}({currentGroupChannel:je,onBeforeSendFileMessage:Q,imageCompression:fe},{sdk:pe,logger:le,pubSub:oe,messagesDispatcher:Re})[0];return a.a.createElement(ue.Provider,{value:{channelUrl:p,useMessageGrouping:j,useReaction:We,showSearchIcon:z,highlightedMessage:q,startingPoint:Y,onBeforeSendUserMessage:W,onBeforeSendFileMessage:Q,onBeforeUpdateUserMessage:J,onChatHeaderActionClick:X,onSearchClick:$,replyType:re,queries:ae,allMessages:Le,loading:Pe,initialized:De,unreadSince:Ue,isInvalid:xe,currentGroupChannel:je,hasMorePrev:Fe,hasMoreNext:Ge,oldestMessageTimeStamp:He,latestMessageTimeStamp:Be,emojiContainer:Ve,readStatus:ze,scrollToMessage:Ze,quoteMessage:Ie,setQuoteMessage:ke,deleteMessage:rt,updateMessage:at,resendMessage:it,messageInputRef:ot,sendMessage:lt,sendFileMessage:ct,initialTimeStamp:ge,messageActionTypes:B,messagesDispatcher:Re,setInitialTimeStamp:ve,setAnimatedMessageId:be,setHighLightedMessageId:Ne,animatedMessageId:Ee,highLightedMessageId:Oe,nicknamesMap:Xe,emojiAllMap:Qe,onScrollCallback:$e,onScrollDownCallback:et,memoizedEmojiListItems:nt,scrollRef:Me,toggleReaction:tt}},a.a.createElement(i.a,{disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile,renderUserProfile:null===e||void 0===e?void 0:e.renderUserProfile},_))},he=function(){return a.a.useContext(ue)},fe=n(24),pe=n(1),_e=n(7);n(11),n(15);function me(){var e=Object(r.useContext)(_e.b).stringSet;return a.a.createElement("div",{className:"sendbird-connection-status"},a.a.createElement(pe.a,{type:pe.b.BODY_2,color:pe.c.ONBACKGROUND_2},e.TRYING_TO_CONNECT),a.a.createElement(v.c,{type:v.b.DISCONNECTED,fillColor:v.a.SENT,width:"14px",height:"14px"}))}var ge=n(16),ve=n(48),ye=n(18),Ee=n(5),be=(n(37),n(20),n(21)),Ce=(n(27),function(){var e,t,n,i=Object(s.a)(),o=null===(e=null===i||void 0===i?void 0:i.config)||void 0===e?void 0:e.userId,l=null===(t=null===i||void 0===i?void 0:i.config)||void 0===t?void 0:t.theme,c=he(),u=c.currentGroupChannel,d=c.showSearchIcon,h=c.onSearchClick,f=c.onChatHeaderActionClick,p=(null===u||void 0===u?void 0:u.members)&&2!==(null===(n=null===u||void 0===u?void 0:u.members)||void 0===n?void 0:n.length),_="muted"===(null===u||void 0===u?void 0:u.myMutedState),m=Object(r.useContext)(_e.b).stringSet;return a.a.createElement("div",{className:"sendbird-chat-header"},a.a.createElement("div",{className:"sendbird-chat-header__left"},a.a.createElement(ve.a,{theme:l,channel:u,userId:o,height:32,width:32}),a.a.createElement(pe.a,{className:"sendbird-chat-header__left__title",type:pe.b.H_2,color:pe.c.ONBACKGROUND_1},function(e,t,n){var r=n||pe.d;return e&&(e.name||e.members)?e.name&&"Group Channel"!==e.name?e.name:1===e.members.length?r.NO_MEMBERS:e.members.filter(function(e){return e.userId!==t}).map(function(e){return e.nickname||r.NO_NAME}).join(", "):r.NO_TITLE}(u,o,m)),a.a.createElement(pe.a,{className:"sendbird-chat-header__left__subtitle",type:pe.b.BODY_1,color:pe.c.ONBACKGROUND_2},p)),a.a.createElement("div",{className:"sendbird-chat-header__right"},("string"===typeof _&&"true"===_||"boolean"===typeof _&&_)&&a.a.createElement(v.c,{className:"sendbird-chat-header__right__mute",type:v.b.NOTIFICATIONS_OFF_FILLED,width:"24px",height:"24px"}),d&&a.a.createElement(ge.a,{className:"sendbird-chat-header__right__search",width:"32px",height:"32px",onClick:h},a.a.createElement(v.c,{type:v.b.SEARCH,fillColor:v.a.PRIMARY,width:"24px",height:"24px"})),a.a.createElement(ge.a,{className:"sendbird-chat-header__right__info",width:"32px",height:"32px",onClick:f},a.a.createElement(v.c,{type:v.b.INFO,fillColor:v.a.PRIMARY,width:"24px",height:"24px"}))))}),Oe=n(38),Ne=n(55),Se=n(49),Ae=n(30),Ie=n(34);function ke(e){var t,n,i=e.className,s=e.message,o=e.channel,l=e.isByMe,c=void 0!==l&&l,d=e.disabled,h=void 0!==d&&d,p=e.replyType,_=e.showEdit,m=e.showRemove,g=e.resendMessage,y=e.setQuoteMessage,E=e.setSupposedHover,b=Object(r.useContext)(_e.b).stringSet,C=Object(r.useRef)(null),O=Object(r.useRef)(null),N=Object(u.z)(s),S=Object(u.z)(s)&&Object(u.L)(s)&&c,A=Object(u.a)(s)&&(null===(t=null===s||void 0===s?void 0:s.isResendable)||void 0===t?void 0:t.call(s))&&c,I=!Object(u.b)(s)&&c,k="QUOTE_REPLY"===p&&!Object(u.a)(s)&&!Object(u.b)(s)&&(null===o||void 0===o?void 0:o.isGroupChannel())&&!(null===(n=o)||void 0===n?void 0:n.isBroadcast);return N||k||S||A||I?a.a.createElement("div",{className:Object(u.p)([i,"sendbird-message-item-menu"]),ref:O},a.a.createElement(f.d,{menuTrigger:function(e){return a.a.createElement(ge.a,{className:"sendbird-message-item-menu__trigger",ref:C,width:"32px",height:"32px",onClick:function(){e(),E(!0)},onBlur:function(){E(!1)}},a.a.createElement(v.c,{className:"sendbird-message-item-menu__trigger__icon",type:v.b.MORE,fillColor:v.a.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){var t,n=function(){e(),E(!1)};return a.a.createElement(f.c,{className:"sendbird-message-item-menu__list",parentRef:C,parentContainRef:O,closeDropdown:n,openLeft:c},N&&a.a.createElement(f.b,{className:"sendbird-message-item-menu__list__menu-item menu-item-copy",onClick:function(){var e;Object(u.c)(null===(e=s)||void 0===e?void 0:e.message),n()}},b.MESSAGE_MENU__COPY),k&&a.a.createElement(f.b,{className:"sendbird-message-item-menu__list__menu-item menu-item-reply",onClick:function(){y(s),n()},disable:(null===s||void 0===s?void 0:s.parentMessageId)>0},b.MESSAGE_MENU__REPLY),S&&a.a.createElement(f.b,{className:"sendbird-message-item-menu__list__menu-item menu-item-edit",onClick:function(){h||(_(!0),n())}},b.MESSAGE_MENU__EDIT),A&&a.a.createElement(f.b,{className:"sendbird-message-item-menu__list__menu-item menu-item-resend",onClick:function(){h||(g(s),n())}},b.MESSAGE_MENU__RESEND),I&&a.a.createElement(f.b,{className:"sendbird-message-item-menu__list__menu-item menu-item-delete",onClick:function(){h||(m(!0),n())},disable:(null===(t=null===s||void 0===s?void 0:s.threadInfo)||void 0===t?void 0:t.replyCount)>0},b.MESSAGE_MENU__DELETE))}})):null}function Te(e){var t=e.className,n=e.message,i=e.userId,s=e.spaceFromTrigger,o=void 0===s?{}:s,l=e.emojiContainer,c=e.toggleReaction,d=e.setSupposedHover,h=Object(r.useRef)(null),p=Object(r.useRef)(null);return Object(u.b)(n)||Object(u.a)(n)?null:a.a.createElement("div",{className:Object(u.p)([t,"sendbird-message-item-reaction-menu"]),ref:p},a.a.createElement(f.d,{menuTrigger:function(e){return a.a.createElement(ge.a,{className:"sendbird-message-item-reaction-menu__trigger",ref:h,width:"32px",height:"32px",onClick:function(){e(),d(!0)},onBlur:function(){d(!1)}},a.a.createElement(v.c,{className:"sendbird-message-item-reaction-menu__trigger__icon",type:v.b.EMOJI_MORE,fillColor:v.a.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){var t=function(){e(),d(!1)};return a.a.createElement(f.a,{parentRef:h,parentContainRef:p,closeDropdown:t,spaceFromTrigger:o},Object(u.d)(l).map(function(e){var r,s,o,l=null===(o=null===(s=null===(r=null===n||void 0===n?void 0:n.reactions)||void 0===r?void 0:r.filter(function(t){return t.key===e.key})[0])||void 0===s?void 0:s.userIds)||void 0===o?void 0:o.some(function(e){return e===i});return a.a.createElement(m,{key:e.key,width:"36px",height:"36px",selected:l,onClick:function(){t(),c(n,e.key,l)}},a.a.createElement(g.a,{url:e.url,width:"28px",height:"28px",placeHolder:function(e){return a.a.createElement("div",{style:e},a.a.createElement(v.c,{type:v.b.QUESTION,fillColor:v.a.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}))}function we(e){var t=e.className,n=e.children;return a.a.createElement("div",{className:[].concat(Object(o.c)(Array.isArray(t)?t:[t]),["sendbird-tooltip"]).join(" ")},a.a.createElement(pe.a,{className:"sendbird-tooltip__text",type:pe.b.CAPTION_2,color:pe.c.ONCONTENT_1},n))}we.propTypes={className:_.a.string,children:_.a.oneOfType([_.a.element,_.a.arrayOf(_.a.string),_.a.string])},we.defaultProps={className:"",children:""};var Re=8;function Me(e){var t=e.className,n=e.children,i=e.hoverTooltip,s=Object(r.useState)(!1),l=Object(o.b)(s,2),c=l[0],u=l[1],d=Object(r.useRef)(null);return a.a.createElement("div",{className:[].concat(Object(o.c)(Array.isArray(t)?t:[t]),["sendbird-tooltip-wrapper"]).join(" "),onMouseOver:function(){u(!0)},onFocus:function(){u(!0)},onMouseOut:function(){u(!1)},onBlur:function(){u(!1)}},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__children",ref:d},n),c&&a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip",style:{bottom:"calc(100% + ".concat(Re,"px)")}},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner"},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",style:{left:d.current&&"calc(".concat(d.current.offsetWidth/2,"px - 50%)")}},i))))}Me.propTypes={className:_.a.oneOfType([_.a.string,_.a.arrayOf(_.a.string)]),children:_.a.element.isRequired,hoverTooltip:_.a.oneOfType([_.a.element,_.a.func]).isRequired},Me.defaultProps={className:""};var Le=a.a.forwardRef(function(e,t){var n=e.className,r=e.children,i=e.count,s=e.selected,l=e.isAdd,c=e.onClick;return a.a.createElement("div",{className:[].concat(Object(o.c)(Array.isArray(n)?n:[n]),["sendbird-reaction-badge".concat(s&&!l?"--selected":l?"--is-add":"")]).join(" "),role:"button",ref:t,onClick:c,onKeyDown:c,tabIndex:0},a.a.createElement("div",{className:"sendbird-reaction-badge__inner"},a.a.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},r),a.a.createElement(pe.a,{className:r&&i&&"sendbird-reaction-badge__inner__count",type:pe.b.CAPTION_3,color:pe.c.ONBACKGROUND_1},i)))});function Pe(e){var t,n,i=e.className,s=e.userId,o=e.message,l=e.emojiContainer,c=e.memberNicknamesMap,d=e.spaceFromTrigger,h=void 0===d?{}:d,p=e.isByMe,_=void 0!==p&&p,y=e.toggleReaction,E=Object(r.useContext)(_e.b).stringSet,b=Object(u.e)(l),C=Object(r.useRef)(null);return a.a.createElement("div",{className:Object(u.p)([i,"sendbird-emoji-reactions",_?"outgoing":"incoming"])},(null===(t=null===o||void 0===o?void 0:o.reactions)||void 0===t?void 0:t.length)>0&&o.reactions.map(function(e){var t,n,r=Object(u.f)(s,e);return a.a.createElement(Me,{className:"sendbird-emoji-reactions__reaction-badge",key:null===e||void 0===e?void 0:e.key,hoverTooltip:(null===(t=null===e||void 0===e?void 0:e.userIds)||void 0===t?void 0:t.length)>0&&a.a.createElement(we,null,Object(u.g)(e,s,c,E))},a.a.createElement(Le,{count:e.userIds.length,selected:r,onClick:function(){return y(o,e.key,r)}},a.a.createElement(g.a,{circle:!0,url:(null===(n=b.get(null===e||void 0===e?void 0:e.key))||void 0===n?void 0:n.url)||"",width:"20px",height:"20px",defaultComponent:a.a.createElement(v.c,{width:"20px",height:"20px",type:v.b.QUESTION})})))}),(null===(n=null===o||void 0===o?void 0:o.reactions)||void 0===n?void 0:n.length)<b.size&&a.a.createElement(f.d,{menuTrigger:function(e){return a.a.createElement(Le,{className:"sendbird-emoji-reactions__add-reaction-badge",ref:C,isAdd:!0,onClick:e},a.a.createElement(v.c,{type:v.b.EMOJI_MORE,fillColor:v.a.ON_BACKGROUND_3,width:"20px",height:"20px"}))},menuItems:function(e){return a.a.createElement(f.a,{parentRef:C,parentContainRef:C,closeDropdown:e,spacefromTrigger:h},Object(u.d)(l).map(function(t){var n,r,i,l=null===(i=null===(r=null===(n=null===o||void 0===o?void 0:o.reactions)||void 0===n?void 0:n.filter(function(e){return e.key===t.key})[0])||void 0===r?void 0:r.userIds)||void 0===i?void 0:i.some(function(e){return e===s});return a.a.createElement(m,{key:t.key,width:"36px",height:"36px",selected:l,onClick:function(){e(),y(o,t.key,l)}},a.a.createElement(g.a,{url:(null===t||void 0===t?void 0:t.url)||"",width:"28px",height:"28px",placeHolder:function(e){return a.a.createElement("div",{style:e},a.a.createElement(v.c,{type:v.b.QUESTION,fillColor:v.a.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}))}function De(e){var t=e.className,n=e.message;return(n.isAdminMessage||n.messageType)&&n.isAdminMessage()&&"admin"===n.messageType?a.a.createElement("div",{className:[].concat(Object(o.c)(Array.isArray(t)?t:[t]),["sendbird-admin-message"]).join(" ")},a.a.createElement(pe.a,{className:"sendbird-admin-message__text",type:pe.b.CAPTION_2,color:pe.c.ONBACKGROUND_2},n.message)):null}function Ue(e){var t,n=e.className,i=e.message,s=e.isByMe,o=void 0!==s&&s,l=e.mouseHover,c=void 0!==l&&l,d=Object(r.useContext)(_e.b).stringSet;return a.a.createElement(pe.a,{type:pe.b.BODY_1,color:o?pe.c.ONCONTENT_1:pe.c.ONBACKGROUND_1},a.a.createElement("p",{className:Object(u.p)([n,"sendbird-text-message-item-body",o?"outgoing":"incoming",c?"mouse-hover":"",(null===(t=null===i||void 0===i?void 0:i.reactions)||void 0===t?void 0:t.length)>0?"reactions":""])},null===i||void 0===i?void 0:i.message,Object(u.h)(i)&&a.a.createElement(pe.a,{className:"sendbird-text-message-item-body__message edited",type:pe.b.BODY_1,color:o?pe.c.ONCONTENT_2:pe.c.ONBACKGROUND_2}," "+d.MESSAGE_EDITED+" ")))}Le.propTypes={className:_.a.oneOfType([_.a.string,_.a.arrayOf(_.a.string)]),children:_.a.element.isRequired,count:_.a.oneOfType([_.a.number,_.a.string]),selected:_.a.bool,isAdd:_.a.bool,onClick:_.a.func},Le.defaultProps={className:"",count:"",selected:!1,isAdd:!1,onClick:function(){}},De.propTypes={message:_.a.shape({message:_.a.string,messageType:_.a.string,isAdminMessage:_.a.func}),className:_.a.oneOfType([_.a.string,_.a.arrayOf(_.a.string)])},De.defaultProps={message:{},className:""};var xe=n(32);n(33);function je(e){var t,n=e.className,r=e.message,i=e.isByMe,s=void 0!==i&&i,o=e.mouseHover,l=void 0!==o&&o;return a.a.createElement("div",{className:Object(u.p)([n,"sendbird-file-message-item-body",s?"outgoing":"incoming",l?"mouse-hover":"",(null===(t=null===r||void 0===r?void 0:r.reactions)||void 0===t?void 0:t.length)>0?"reactions":""])},a.a.createElement("div",{className:"sendbird-file-message-item-body__file-icon"},a.a.createElement(v.c,{className:"sendbird-file-message-item-body__file-icon__icon",type:{IMAGE:v.b.PHOTO,VIDEO:v.b.PLAY,AUDIO:v.b.FILE_AUDIO,GIF:v.b.GIF,OTHERS:v.b.FILE_DOCUMENT}[Object(u.i)(null===r||void 0===r?void 0:r.type)],fillColor:v.a.PRIMARY,width:"24px",height:"24px"})),a.a.createElement(xe.a,{className:"sendbird-file-message-item-body__file-name",onClick:function(){window.open(null===r||void 0===r?void 0:r.url)},color:s?pe.c.ONCONTENT_1:pe.c.ONBACKGROUND_1},a.a.createElement(pe.a,{className:"sendbird-file-message-item-body__file-name__text",type:pe.b.BODY_1,color:s?pe.c.ONCONTENT_1:pe.c.ONBACKGROUND_1},Object(u.F)((null===r||void 0===r?void 0:r.name)||(null===r||void 0===r?void 0:r.url)))))}function Fe(e){var t,n,i=e.className,s=e.message,o=e.isByMe,l=void 0!==o&&o,c=e.mouseHover,d=void 0!==c&&c,h=e.showFileViewer,f=s.thumbnails,p=void 0===f?[]:f,_=p.length>0?null===(t=p[0])||void 0===t?void 0:t.url:"",m=Object(r.useState)(!1),y=m[0],E=m[1];return a.a.createElement("div",{className:Object(u.p)([i,"sendbird-thumbnail-message-item-body",l?"outgoing":"incoming",d?"mouse-hover":"",(null===(n=null===s||void 0===s?void 0:s.reactions)||void 0===n?void 0:n.length)>0?"reactions":""]),onClick:function(){Object(u.L)(s)&&h(!0)}},a.a.createElement(g.a,{className:"sendbird-thumbnail-message-item-body__thumbnail",url:_||(null===s||void 0===s?void 0:s.url),alt:null===s||void 0===s?void 0:s.type,width:"360px",height:"270px",onLoad:function(){E(!0)},placeHolder:function(e){return a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder",style:e},a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder__icon"},a.a.createElement(v.c,{type:Object(u.y)(s)?v.b.PLAY:v.b.PHOTO,fillColor:v.a.ON_BACKGROUND_2,width:"34px",height:"34px"})))}}),Object(u.y)(s)&&!_&&!y&&a.a.createElement("video",{className:"sendbird-thumbnail-message-item-body__video"},a.a.createElement("source",{src:null===s||void 0===s?void 0:s.url,type:null===s||void 0===s?void 0:s.type})),a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__image-cover"}),(Object(u.y)(s)||Object(u.x)(s))&&a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper"},a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper__icon"},a.a.createElement(v.c,{type:Object(u.y)(s)?v.b.PLAY:v.b.GIF,fillColor:v.a.GRAY,width:"34px",height:"34px"}))))}var He=n(47);function Ge(e){var t,n,i,s,o,l,c,d,f=e.className,p=e.message,_=e.isByMe,m=void 0!==_&&_,y=e.mouseHover,E=void 0!==y&&y,b=Object(r.useContext)(_e.b).stringSet,C=function(){var e,t;(null===(e=null===p||void 0===p?void 0:p.ogMetaData)||void 0===e?void 0:e.url)&&window.open(null===(t=null===p||void 0===p?void 0:p.ogMetaData)||void 0===t?void 0:t.url)};return a.a.createElement("div",{className:Object(u.p)([f,"sendbird-og-message-item-body",m?"outgoing":"incoming",E?"mouse-hover":"",(null===(t=null===p||void 0===p?void 0:p.reactions)||void 0===t?void 0:t.length)>0?"reactions":""])},a.a.createElement(pe.a,{key:Object(h.a)(),type:pe.b.BODY_1,color:m?pe.c.ONCONTENT_1:pe.c.ONBACKGROUND_1},a.a.createElement("p",{className:"sendbird-og-message-item-body__text-bubble"},null===p||void 0===p?void 0:p.message.split(" ").map(function(e){return Object(u.j)(e)?a.a.createElement(He.a,{className:"sendbird-og-message-item-body__text-bubble__message",key:Object(h.a)(),src:e,type:pe.b.BODY_1,color:m?pe.c.ONCONTENT_1:pe.c.ONBACKGROUND_1},e):e+" "}),Object(u.h)(p)&&a.a.createElement(pe.a,{className:"sendbird-og-message-item-body__text-bubble__message",type:pe.b.BODY_1,color:m?pe.c.ONCONTENT_2:pe.c.ONBACKGROUND_2}," "+b.MESSAGE_EDITED+" "))),a.a.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail",onClick:C},a.a.createElement(g.a,{className:"sendbird-og-message-item-body__og-thumbnail__image",url:(null===(i=null===(n=null===p||void 0===p?void 0:p.ogMetaData)||void 0===n?void 0:n.defaultImage)||void 0===i?void 0:i.url)||"",alt:null===(o=null===(s=null===p||void 0===p?void 0:p.ogMetaData)||void 0===s?void 0:s.defaultImage)||void 0===o?void 0:o.alt,width:"320px",height:"180px",defaultComponent:a.a.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail__place-holder"},a.a.createElement(v.c,{className:"sendbird-og-message-item-body__og-thumbnail__place-holder__icon",type:v.b.THUMBNAIL_NONE,width:"56px",height:"56px"}))})),a.a.createElement("div",{className:"sendbird-og-message-item-body__description",onClick:C},(null===(l=null===p||void 0===p?void 0:p.ogMetaData)||void 0===l?void 0:l.title)&&a.a.createElement(pe.a,{className:"sendbird-og-message-item-body__description__title",type:pe.b.SUBTITLE_2,color:pe.c.ONBACKGROUND_1},p.ogMetaData.title),(null===(c=null===p||void 0===p?void 0:p.ogMetaData)||void 0===c?void 0:c.description)&&a.a.createElement(pe.a,{className:"sendbird-og-message-item-body__description__description",type:pe.b.BODY_2,color:pe.c.ONBACKGROUND_1},p.ogMetaData.description),(null===(d=null===p||void 0===p?void 0:p.ogMetaData)||void 0===d?void 0:d.url)&&a.a.createElement(pe.a,{className:"sendbird-og-message-item-body__description__url",type:pe.b.CAPTION_3,color:pe.c.ONBACKGROUND_2},p.ogMetaData.url)),a.a.createElement("div",{className:"sendbird-og-message-item-body__cover"}))}function Be(e){var t,n=e.className,i=e.message,s=e.isByMe,o=void 0!==s&&s,l=e.mouseHover,c=void 0!==l&&l,d=Object(r.useContext)(_e.b).stringSet;return a.a.createElement("div",{className:Object(u.p)([n,"sendbird-unknown-message-item-body",o?"outgoing":"incoming",c?"mouse-hover":"",(null===(t=null===i||void 0===i?void 0:i.reactions)||void 0===t?void 0:t.length)>0?"reactions":""])},a.a.createElement(pe.a,{className:"sendbird-unknown-message-item-body__header",type:pe.b.BODY_1,color:o?pe.c.ONCONTENT_1:pe.c.ONBACKGROUND_1},d.UNKNOWN__UNKNOWN_MESSAGE_TYPE),a.a.createElement(pe.a,{className:"sendbird-unknown-message-item-body__description",type:pe.b.BODY_1,color:o?pe.c.ONCONTENT_2:pe.c.ONBACKGROUND_2},d.UNKNOWN__CANNOT_READ_MESSAGE))}function Ve(e){var t,n,i,s,o,l,c,d,h,f,p,_,m=e.message,y=e.userId,E=void 0===y?"":y,b=e.isByMe,C=void 0!==b&&b,O=e.className,N=e.onClick,S=Object(r.useContext)(_e.b).stringSet,A=m.parentMessage,I=null===(n=A)||void 0===n?void 0:n.sender,k=E===(null===I||void 0===I?void 0:I.userId)?S.QUOTED_MESSAGE__CURRENT_USER:null===I||void 0===I?void 0:I.nickname,T=(null===(i=A)||void 0===i?void 0:i.url)||"",w=null===(s=A)||void 0===s?void 0:s.type,R=E===(null===(o=null===m||void 0===m?void 0:m.sender)||void 0===o?void 0:o.userId)?S.QUOTED_MESSAGE__CURRENT_USER:null===(l=null===m||void 0===m?void 0:m.sender)||void 0===l?void 0:l.nickname,M=Object(r.useState)(!1),L=M[0],P=M[1],D=Object(u.k)(),U=(null===(c=A)||void 0===c?void 0:c.name)?A.name.split("/"):T.split("/");return a.a.createElement("div",{className:Object(u.p)([O,"sendbird-quote-message",C?"outgoing":"incoming"]),key:null===A||void 0===A?void 0:A.messageId,onClick:function(){N&&N()}},a.a.createElement("div",{className:"sendbird-quote-message__replied-to"},a.a.createElement(v.c,{className:"sendbird-quote-message__replied-to__icon",type:v.b.REPLY,fillColor:v.a.ON_BACKGROUND_3,width:"12px",height:"12px"}),a.a.createElement(pe.a,{className:"sendbird-quote-message__replied-to__text",type:pe.b.CAPTION_2,color:pe.c.ONBACKGROUND_3},R+" "+S.QUOTED_MESSAGE__REPLIED_TO+" "+k)),a.a.createElement("div",{className:"sendbird-quote-message__replied-message"},Object(u.z)(A)&&(null===(h=null===(d=A)||void 0===d?void 0:d.message)||void 0===h?void 0:h.length)>0&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},a.a.createElement(pe.a,{className:"sendbird-quote-message__replied-message__text-message__word",type:pe.b.BODY_2,color:pe.c.ONBACKGROUND_1},null===(f=A)||void 0===f?void 0:f.message)),Object(u.v)(A)&&T&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message"},a.a.createElement(g.a,{className:"sendbird-quote-message__replied-message__thumbnail-message__image",url:T,alt:w,width:"144px",height:"108px",onLoad:function(){return P(!0)},defaultComponent:a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"},a.a.createElement(v.c,{type:Object(u.J)(w)?v.b.PLAY:v.b.PHOTO,fillColor:v.a.ON_BACKGROUND_2,width:"22px",height:"22px"})))}),Object(u.J)(w)&&!((null===(_=null===(p=A)||void 0===p?void 0:p.thumbnails)||void 0===_?void 0:_.length)>0)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("video",{className:"sendbird-quote-message__replied-message__thumbnail-message__video"},a.a.createElement("source",{src:T,type:w})),a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},a.a.createElement(v.c,{type:v.b.PLAY,fillColor:v.a.GRAY,width:"14px",height:"14px"})))),L&&Object(u.l)(w)&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},a.a.createElement(v.c,{type:v.b.GIF,fillColor:v.a.GRAY,width:"14px",height:"14px"})))),Object(u.q)(A)&&!Object(u.I)(A.type)&&T&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__file-message"},a.a.createElement(v.c,{className:"sendbird-quote-message__replied-message__file-message__type-icon",type:(t={},t[D.IMAGE]=v.b.PHOTO,t[D.VIDEO]=v.b.PLAY,t[D.AUDIO]=v.b.FILE_AUDIO,t[D.GIF]=v.b.GIF,t[D.OTHERS]=v.b.FILE_DOCUMENT,t)[Object(u.i)(w)],fillColor:v.a.ON_BACKGROUND_3,width:"16px",height:"16px"}),a.a.createElement(pe.a,{className:"sendbird-quote-message__replied-message__file-message__file-name",type:pe.b.BODY_2,color:pe.c.ONBACKGROUND_3},Object(u.F)(U[U.length-1])))))}n(31);var ze=n(12),qe=Object(u.m)();function Ke(e){var t,n,i,s,o=e.className,c=e.message,d=e.channel,h=Object(_e.c)().dateLocale,f=Object(r.useMemo)(function(){return Object(u.A)(d,c)},[null===(i=null===d||void 0===d?void 0:d.getUnreadMemberCount)||void 0===i?void 0:i.call(d,c),null===(s=null===d||void 0===d?void 0:d.getUndeliveredMemberCount)||void 0===s?void 0:s.call(d,c)]),p=(null===d||void 0===d?void 0:d.isGroupChannel())&&!(null===d||void 0===d?void 0:d.isSuper)&&!(null===d||void 0===d?void 0:d.isPublic)&&!(null===d||void 0===d?void 0:d.isBroadcast),_=((t={})[qe.SENT]=v.b.DONE,t[qe.DELIVERED]=v.b.DONE_ALL,t[qe.READ]=v.b.DONE_ALL,t[qe.FAILED]=v.b.ERROR,t),m=((n={})[qe.SENT]=v.a.SENT,n[qe.DELIVERED]=v.a.SENT,n[qe.READ]=v.a.READ,n[qe.FAILED]=v.a.ERROR,n);return a.a.createElement("div",{className:Object(Ee.b)(Object(Ee.b)([],Array.isArray(o)?o:[o],!0),["sendbird-message-status"],!1).join(" ")},f===qe.PENDING?a.a.createElement(Ie.a,{className:"sendbird-message-status__icon "+(p?"":"hide-icon"),width:"16px",height:"16px"},a.a.createElement(v.c,{type:v.b.SPINNER,fillColor:v.a.PRIMARY,width:"16px",height:"16px"})):a.a.createElement(v.c,{className:"sendbird-message-status__icon "+(p?"":"hide-icon"),type:_[f]||v.b.ERROR,fillColor:m[f],width:"16px",height:"16px"}),Object(u.B)(f)&&a.a.createElement(pe.a,{className:"sendbird-message-status__text",type:pe.b.CAPTION_3,color:pe.c.ONBACKGROUND_2},Object(l.b)((null===c||void 0===c?void 0:c.createdAt)||0,"p",{locale:h})))}function Ye(e){var t,n,s,o,c,d,h=e.className,p=e.userId,_=e.channel,m=e.message,g=e.disabled,v=void 0!==g&&g,y=e.chainTop,E=void 0!==y&&y,b=e.chainBottom,C=void 0!==b&&b,O=e.useReaction,N=void 0!==O&&O,S=e.replyType,A=e.nicknamesMap,I=e.emojiContainer,k=e.scrollToMessage,T=e.showEdit,w=e.showRemove,R=e.showFileViewer,M=e.resendMessage,L=e.toggleReaction,P=e.setQuoteMessage,D=Object(u.C)(),U=Object(_e.c)().dateLocale,x=Object(r.useContext)(i.b),j=x.disableUserProfile,F=x.renderUserProfile,H=Object(r.useRef)(null),G=Object(r.useState)(!1),B=G[0],V=G[1],z=Object(r.useState)(!1),q=z[0],K=z[1],Y=p===(null===(n=null===(t=m)||void 0===t?void 0:t.sender)||void 0===n?void 0:n.userId)||"pending"===m.sendingStatus||"failed"===m.sendingStatus,W=Y?"outgoing":"incoming",Q=E?"chain-top":"",J=N?"use-reactions":"",X=q?"supposed-hover":"",$=!!("QUOTE_REPLY"===S&&(null===m||void 0===m?void 0:m.parentMessageId)&&(null===m||void 0===m?void 0:m.parentMessage)),Z=$?"use-quote":"";return(null===(s=null===m||void 0===m?void 0:m.isAdminMessage)||void 0===s?void 0:s.call(m))||"admin"===(null===m||void 0===m?void 0:m.messageType)?a.a.createElement(De,{message:m}):a.a.createElement("div",{className:Object(u.p)([h,"sendbird-message-content",W]),onMouseOver:function(){return V(!0)},onMouseLeave:function(){return V(!1)}},a.a.createElement("div",{className:Object(u.p)(["sendbird-message-content__left",J,W,Z])},!Y&&!C&&a.a.createElement(f.d,{menuTrigger:function(e){var t,n,r;return a.a.createElement(ye.a,{className:"sendbird-message-content__left__avatar",src:(null===(n=null===(t=null===_||void 0===_?void 0:_.members)||void 0===t?void 0:t.find(function(e){var t;return(null===e||void 0===e?void 0:e.userId)===(null===(t=null===m||void 0===m?void 0:m.sender)||void 0===t?void 0:t.userId)}))||void 0===n?void 0:n.profileUrl)||(null===(r=null===m||void 0===m?void 0:m.sender)||void 0===r?void 0:r.profileUrl)||"",ref:H,width:"28px",height:"28px",onClick:function(){j||e()}})},menuItems:function(e){return a.a.createElement(f.c,{parentRef:H,parentContainRef:H,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},F?F({user:null===m||void 0===m?void 0:m.sender,close:e}):a.a.createElement(Ae.a,{user:m.sender,onSuccess:e}))}}),Y&&a.a.createElement("div",{className:Object(u.p)(["sendbird-message-content-menu",J,X,W])},a.a.createElement(ke,{className:"sendbird-message-content-menu__normal-menu",channel:_,message:m,isByMe:Y,replyType:S,disabled:v,showEdit:T,showRemove:w,resendMessage:M,setQuoteMessage:P,setSupposedHover:K}),N&&a.a.createElement(Te,{className:"sendbird-message-content-menu__reaction-menu",message:m,userId:p,spaceFromTrigger:{},emojiContainer:I,toggleReaction:L,setSupposedHover:K}))),a.a.createElement("div",{className:"sendbird-message-content__middle"},!Y&&!E&&!$&&a.a.createElement(pe.a,{className:"sendbird-message-content__middle__sender-name",type:pe.b.CAPTION_2,color:pe.c.ONBACKGROUND_2},(null===(c=null===(o=null===_||void 0===_?void 0:_.members)||void 0===o?void 0:o.find(function(e){var t;return(null===e||void 0===e?void 0:e.userId)===(null===(t=null===m||void 0===m?void 0:m.sender)||void 0===t?void 0:t.userId)}))||void 0===c?void 0:c.nickname)||Object(u.D)(m)),$?a.a.createElement("div",{className:Object(u.p)(["sendbird-message-content__middle__quote-message",Y?"outgoing":"incoming",Z])},a.a.createElement(Ve,{message:m,userId:p,isByMe:Y,onClick:function(){var e;(null===(e=null===m||void 0===m?void 0:m.parentMessage)||void 0===e?void 0:e.createdAt)&&(null===m||void 0===m?void 0:m.parentMessageId)&&k(m.parentMessage.createdAt,m.parentMessageId)}})):null,a.a.createElement("div",{className:Object(u.p)(["sendbird-message-content__middle__body-container"])},Y&&!C&&a.a.createElement("div",{className:Object(u.p)(["sendbird-message-content__middle__body-container__created-at","left",X])},a.a.createElement("div",{className:"sendbird-message-content__middle__body-container__created-at__component-container"},a.a.createElement(Ke,{message:m,channel:_}))),Object(u.E)(m)&&a.a.createElement(Ue,{className:"sendbird-message-content__middle__message-item-body",message:m,isByMe:Y,mouseHover:B}),Object(u.G)(m)&&a.a.createElement(Ge,{className:"sendbird-message-content__middle__message-item-body",message:m,isByMe:Y,mouseHover:B}),Object(u.H)(m)===D.FILE&&a.a.createElement(je,{className:"sendbird-message-content__middle__message-item-body",message:m,isByMe:Y,mouseHover:B}),Object(u.v)(m)&&a.a.createElement(Fe,{className:"sendbird-message-content__middle__message-item-body",message:m,isByMe:Y,mouseHover:B,showFileViewer:R}),Object(u.H)(m)===D.UNKNOWN&&a.a.createElement(Be,{className:"sendbird-message-content__middle__message-item-body",message:m,isByMe:Y,mouseHover:B}),N&&(null===(d=null===m||void 0===m?void 0:m.reactions)||void 0===d?void 0:d.length)>0&&a.a.createElement("div",{className:Object(u.p)(["sendbird-message-content-reactions",!Y||Object(u.v)(m)||Object(u.G)(m)?"":"primary",B?"mouse-hover":""])},a.a.createElement(Pe,{userId:p,message:m,isByMe:Y,emojiContainer:I,memberNicknamesMap:A,toggleReaction:L})),!Y&&!C&&a.a.createElement(pe.a,{className:Object(u.p)(["sendbird-message-content__middle__body-container__created-at","right",X]),type:pe.b.CAPTION_3,color:pe.c.ONBACKGROUND_2},Object(l.b)((null===m||void 0===m?void 0:m.createdAt)||0,"p",{locale:U})))),a.a.createElement("div",{className:Object(u.p)(["sendbird-message-content__right",Q,J,Z])},!Y&&a.a.createElement("div",{className:Object(u.p)(["sendbird-message-content-menu",Q,X,W])},N&&a.a.createElement(Te,{className:"sendbird-message-content-menu__reaction-menu",message:m,userId:p,spaceFromTrigger:{},emojiContainer:I,toggleReaction:L,setSupposedHover:K}),a.a.createElement(ke,{className:"sendbird-message-content-menu__normal-menu",channel:_,message:m,isByMe:Y,replyType:S,disabled:v,showEdit:T,showRemove:w,resendMessage:M,setQuoteMessage:P,setSupposedHover:K}))))}var We=n(29),Qe=function(e){var t=e.profileUrl,n=e.nickname,r=e.name,i=e.type,s=e.url,o=e.isByMe,l=e.onCancel,c=e.onDelete,d=e.disableDelete;return a.a.createElement("div",{className:"sendbird-fileviewer"},a.a.createElement("div",{className:"sendbird-fileviewer__header"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},a.a.createElement(ye.a,{height:"32px",width:"32px",src:t})),a.a.createElement(pe.a,{className:"sendbird-fileviewer__header__left__filename",type:pe.b.H_2,color:pe.c.ONBACKGROUND_1},r),a.a.createElement(pe.a,{className:"sendbird-fileviewer__header__left__sender-name",type:pe.b.BODY_1,color:pe.c.ONBACKGROUND_2},n)),a.a.createElement("div",{className:"sendbird-fileviewer__header__right"},Object(u.I)(i)&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},a.a.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:s,target:"_blank"},a.a.createElement(v.c,{type:v.b.DOWNLOAD,fillColor:v.a.ON_BACKGROUND_1,height:"24px",width:"24px"})),c&&o&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},a.a.createElement(v.c,{className:d?"disabled":"",type:v.b.DELETE,fillColor:d?v.a.GRAY:v.a.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(){d||c()}}))),a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},a.a.createElement(v.c,{type:v.b.CLOSE,fillColor:v.a.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:l})))),a.a.createElement("div",{className:"sendbird-fileviewer__content"},Object(u.J)(i)&&a.a.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},a.a.createElement("source",{src:s,type:i})),Object(u.K)(i)&&a.a.createElement("img",{src:s,alt:r,className:"sendbird-fileviewer__content__img"}),!Object(u.I)(i)&&a.a.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},a.a.createElement(pe.a,{type:pe.b.H_1,color:pe.c.ONBACKGROUND_1},"Unsupoprted message"))))},Je=function(e){var t,n,r,i=e.onCancel,o=e.message,l=he().deleteMessage,c=o.sender,u=o.type,d=o.url,h=o.name,f=void 0===h?"":h,p=o.threadInfo,_=(null===(n=null===(t=Object(s.a)())||void 0===t?void 0:t.config)||void 0===n?void 0:n.userId)===(null===(r=null===o||void 0===o?void 0:o.sender)||void 0===r?void 0:r.userId),m=(null===p||void 0===p?void 0:p.replyCount)>0,g=c.profileUrl,v=c.nickname,y=void 0===v?"":v;return Object(be.createPortal)(a.a.createElement(Qe,{profileUrl:g,nickname:y,type:u,url:d,name:f,onCancel:i,onDelete:function(){l(o).then(function(){i()})},isByMe:_,disableDelete:m}),document.getElementById(We.a))},Xe=n(25),$e=(n(23),function(e){var t,n=e.onCancel,i=e.message,s=Object(r.useContext)(_e.b).stringSet,o=he().deleteMessage;return a.a.createElement(Xe.a,{type:ze.c.DANGER,disabled:(null===(t=null===i||void 0===i?void 0:i.threadInfo)||void 0===t?void 0:t.replyCount)>0,onCancel:n,onSubmit:function(){o(i).then(function(){n()})},submitText:s.MESSAGE_MENU__DELETE,titleText:s.MODAL__DELETE_MESSAGE__TITLE})}),Ze=function(e){var t,n,i,o,c=e.message,d=e.hasSeparator,h=e.chainTop,f=e.chainBottom,p=e.handleScroll,_=e.renderCustomSeperator,m=e.renderEditInput,g=e.renderMessage,v=e.renderMessageContent,y=Object(_e.c)().dateLocale,E=Object(s.a)(),b=null===(t=null===E||void 0===E?void 0:E.config)||void 0===t?void 0:t.userId,C=null===(n=null===E||void 0===E?void 0:E.config)||void 0===n?void 0:n.isOnline,O=he(),N=O.currentGroupChannel,S=O.highLightedMessageId,A=O.setHighLightedMessageId,I=O.animatedMessageId,k=O.setAnimatedMessageId,T=O.updateMessage,w=O.scrollToMessage,R=O.replyType,M=O.useReaction,L=O.toggleReaction,P=O.emojiContainer,D=O.nicknamesMap,U=O.quoteMessage,x=O.setQuoteMessage,j=O.resendMessage,F=Object(r.useState)(!1),H=F[0],G=F[1],B=Object(r.useState)(!1),V=B[0],z=B[1],q=Object(r.useState)(!1),K=q[0],Y=q[1],Q=Object(r.useState)(!1),J=Q[0],X=Q[1],$=Object(r.useState)(!1),Z=$[0],ee=$[1],te=Object(r.useRef)(null),ne=Object(r.useRef)(null);Object(r.useLayoutEffect)(function(){null===p||void 0===p||p()},[H,null===(i=null===c||void 0===c?void 0:c.reactions)||void 0===i?void 0:i.length]),Object(r.useLayoutEffect)(function(){S===c.messageId?ne&&ne.current&&(ne.current.scrollIntoView({block:"center",inline:"center"}),X(!1),setTimeout(function(){ee(!0)},500),setTimeout(function(){A(0)},1600)):ee(!1)},[S,ne.current,c.messageId]),Object(r.useLayoutEffect)(function(){I===c.messageId?ne&&ne.current&&(ne.current.scrollIntoView({block:"center",inline:"center"}),ee(!1),setTimeout(function(){X(!0)},500),setTimeout(function(){k(0)},1600)):X(!1)},[I,ne.current,c.messageId]);var re=Object(r.useMemo)(function(){return null===g||void 0===g?void 0:g({message:c,chainTop:h,chainBottom:f})},[c,g]);return re?a.a.createElement("div",{ref:ne,className:Object(u.p)(["sendbird-msg-hoc sendbird-msg--scroll-ref",J?"sendbird-msg-hoc__animated":"",Z?"sendbird-msg-hoc__highlighted":""])},d&&(null===_||void 0===_?void 0:_())||a.a.createElement(Ne.a,null,a.a.createElement(pe.a,{type:pe.b.CAPTION_2,color:pe.c.ONBACKGROUND_2},Object(l.b)(c.createdAt,"MMMM dd, yyyy",{locale:y}))),re):H&&c.isUserMessage()?(null===m||void 0===m?void 0:m())||a.a.createElement(Se.a,{isEdit:!0,disabled:W(N),ref:te,name:c.messageId,onSendMessage:T,onCancelEdit:function(){G(!1)},value:null===(o=c)||void 0===o?void 0:o.message}):a.a.createElement("div",{className:Object(u.p)(["sendbird-msg-hoc sendbird-msg--scroll-ref",J?"sendbird-msg-hoc__animated":"",Z?"sendbird-msg-hoc__highlighted":""]),style:{marginBottom:"2px"},ref:ne},d&&((null===_||void 0===_?void 0:_())||a.a.createElement(Ne.a,null,a.a.createElement(pe.a,{type:pe.b.CAPTION_2,color:pe.c.ONBACKGROUND_2},Object(l.b)(c.createdAt,"MMMM dd, yyyy",{locale:y})))),(null===v||void 0===v?void 0:v())||a.a.createElement(Ye,{className:"sendbird-message-hoc__message-content",userId:b,scrollToMessage:w,channel:N,message:c,disabled:!C,chainTop:h,chainBottom:f,useReaction:M,replyType:R,nicknamesMap:D,emojiContainer:P,showEdit:G,showRemove:z,showFileViewer:Y,resendMessage:j,toggleReaction:L,quoteMessage:U,setQuoteMessage:x}),V&&a.a.createElement($e,{message:c,onCancel:function(){return z(!1)}}),K&&a.a.createElement(Je,{message:c,onCancel:function(){return Y(!1)}}))},et=function(e){var t=e.renderMessage,n=e.renderPlaceholderEmpty,i=e.renderCustomSeperator,s=he(),o=s.allMessages,l=s.hasMorePrev,c=s.setInitialTimeStamp,u=s.setAnimatedMessageId,d=s.setHighLightedMessageId,f=s.useMessageGrouping,p=s.scrollRef,_=s.onScrollCallback,m=s.onScrollDownCallback,g=s.messagesDispatcher,y=s.messageActionTypes,E=s.currentGroupChannel,b=Object(r.useState)(0),C=b[0],O=b[1],N=function(){var e,t,n;null===c||void 0===c||c(null),null===u||void 0===u||u(null),null===d||void 0===d||d(null),(null===(e=null===p||void 0===p?void 0:p.current)||void 0===e?void 0:e.scrollTop)&&(p.current.scrollTop=(null===(t=null===p||void 0===p?void 0:p.current)||void 0===t?void 0:t.scrollHeight)-(null===(n=null===p||void 0===p?void 0:p.current)||void 0===n?void 0:n.offsetHeight))};return o.length<1?a.a.createElement(a.a.Fragment,null,(null===n||void 0===n?void 0:n())||a.a.createElement(fe.a,{className:"sendbird-conversation__no-messages",type:fe.b.NO_MESSAGES})):a.a.createElement("div",{className:"sendbird-conversation__messages"},a.a.createElement("div",{className:"sendbird-conversation__scroll-container"},a.a.createElement("div",{className:"sendbird-conversation__padding"}),a.a.createElement("div",{className:"sendbird-conversation__messages-padding",ref:p,onScroll:function(e){var t,n,r,a=e.target,i=a.scrollTop,s=a.clientHeight,o=a.scrollHeight;if(0===i){if(!l)return;var c=p.current.querySelectorAll(".sendbird-msg--scroll-ref"),u=c&&c[0];_(function(e){if(e[0])try{u.scrollIntoView({block:"start",inline:"nearest"})}catch(t){}})}if(t=s+i,n=o,r=10,Math.abs(t-n)<=r&&m(function(e){if(e[0])try{a.scrollTop=o-s}catch(t){}}),null===p||void 0===p?void 0:p.current){var d=null===p||void 0===p?void 0:p.current;O(d.scrollHeight-d.scrollTop-d.offsetHeight)}setTimeout(function(){s+i===o&&(g({type:y.MARK_AS_READ,payload:{channel:E}}),E.markAsRead())},500)}},o.map(function(e,n){var r=o[n-1],s=o[n+1],l=f?function(e,t,n){var r=(null===t||void 0===t?void 0:t.sendingStatus)||"",a="pending"!==r&&"failed"!==r;return[X(e,t)&&a,X(t,n)&&a]}(r,e,s):[!1,!1],c=l[0],u=l[1],d=null===r||void 0===r?void 0:r.createdAt,_=e.createdAt,m=!(d&&Object(Oe.a)(_,d));return a.a.createElement(Ze,{handleScroll:function(){var e=null===p||void 0===p?void 0:p.current;if(e){var t=e.scrollHeight-e.scrollTop-e.offsetHeight;C<t&&(e.scrollTop+=t-C)}},renderMessage:t,message:e,hasSeparator:m,chainTop:c,chainBottom:u,renderCustomSeperator:i,key:(null===e||void 0===e?void 0:e.messageId)+Object(h.a)()})}))),C>1&&a.a.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:N,onKeyDown:N,tabIndex:0,role:"button"},a.a.createElement(v.c,{width:"24px",height:"24px",type:v.b.CHEVRON_DOWN,fillColor:v.a.PRIMARY})))},tt=function(e){var t=e.members,n=Object(r.useContext)(_e.b).stringSet;return t&&0!==t.length?t&&1===t.length?t[0].nickname+" "+n.TYPING_INDICATOR__IS_TYPING:t&&2===t.length?t[0].nickname+" "+n.TYPING_INDICATOR__AND+" "+t[1].nickname+" "+n.TYPING_INDICATOR__ARE_TYPING:n.TYPING_INDICATOR__MULTIPLE_TYPING:""},nt=function(){var e,t,n,i=he().channelUrl,o=Object(s.a)(),l=null===(t=null===(e=null===o||void 0===o?void 0:o.stores)||void 0===e?void 0:e.sdkStore)||void 0===t?void 0:t.sdk,c=null===(n=null===o||void 0===o?void 0:o.config)||void 0===n?void 0:n.logger,u=Object(r.useState)(Object(h.a)()),d=u[0],f=u[1],p=Object(r.useState)([]),_=p[0],m=p[1];return Object(r.useEffect)(function(){if(l&&l.ChannelHandler){l.removeChannelHandler(d);var e=Object(h.a)(),t=new l.ChannelHandler;t.onTypingStatusUpdated=function(e){if(c.info("Channel > Typing Indicator: onTypingStatusUpdated",e),e.url===i){var t=e.getTypingMembers();m(t)}},l.addChannelHandler(e,t),f(e)}return function(){m([]),l&&l.removeChannelHandler&&l.removeChannelHandler(d)}},[i]),a.a.createElement(pe.a,{className:"sendbird-conversation__footer__typing-indicator__text",type:pe.b.CAPTION_2,color:pe.c.ONBACKGROUND_2},a.a.createElement(tt,{members:_}))},rt=function(){var e=Object(r.useContext)(_e.b).stringSet;return a.a.createElement("div",{className:"sendbird-notification sendbird-notification--frozen"},a.a.createElement(pe.a,{className:"sendbird-notification__text",type:pe.b.CAPTION_2},e.CHANNEL_FROZEN))},at=function(e){var t,n,i=e.count,s=e.time,o=void 0===s?"":s,l=e.onClick,c=Object(r.useContext)(_e.b).stringSet,u=(null===(n=null===(t=null===o||void 0===o?void 0:o.toString)||void 0===t?void 0:t.call(o))||void 0===n?void 0:n.split(" "))||[];if(null===u||void 0===u||u.splice(-2,0,c.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON),!(i<1))return a.a.createElement("div",{className:"sendbird-notification",onClick:l},a.a.createElement(pe.a,{className:"sendbird-notification__text",color:pe.c.ONCONTENT_1,type:pe.b.CAPTION_2},i+" ",c.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE," "+u.join(" ")),a.a.createElement(v.c,{width:"24px",height:"24px",type:v.b.CHEVRON_DOWN,fillColor:v.a.CONTENT}))},it="sendbird-quote_message_input__avatar";function st(e){var t=e.message;if(!Object(u.q)(t))return null;var n=t.thumbnails&&t.thumbnails.length>0&&t.thumbnails[0].url||Object(u.t)(t)&&t.url;return Object(u.v)(t)&&n?a.a.createElement(g.a,{className:it,url:n,alt:t.type,width:"44px",height:"44px",fixedSize:!0}):Object(u.w)(t)?a.a.createElement("div",{className:it},a.a.createElement(v.c,{type:v.b.FILE_AUDIO,fillColor:v.a.ON_BACKGROUND_2,width:"24px",height:"24px"})):a.a.createElement("div",{className:it},a.a.createElement(v.c,{type:v.b.FILE_DOCUMENT,fillColor:v.a.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function ot(e){var t,n=e.className,i=e.replyingMessage,s=e.onClose,o=Object(r.useContext)(_e.b).stringSet,l=i,c=null===(t=i)||void 0===t?void 0:t.sender;return a.a.createElement("div",{className:Object(u.p)(["sendbird-quote_message_input",n])},a.a.createElement(st,{message:l}),a.a.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:"calc(100% - "+(l.isFileMessage()?"164px":"120px")+")",left:l.isFileMessage()?"92px":"40px"}},a.a.createElement(pe.a,{className:"sendbird-quote_message_input__body__sender-name",type:pe.b.CAPTION_1,color:pe.c.ONBACKGROUND_1},o.QUOTE_MESSAGE_INPUT__REPLY_TO+" "+(c&&c.nickname?c.nickname:o.NO_NAME)),a.a.createElement(pe.a,{className:"sendbird-quote_message_input__body__message-content",type:pe.b.BODY_2,color:pe.c.ONBACKGROUND_3},Object(u.t)(l)&&!Object(u.x)(l)&&o.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,Object(u.y)(l)&&o.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,Object(u.x)(l)&&o.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,Object(u.z)(i)&&i.message,Object(u.q)(l)&&!Object(u.v)(l)&&l.name)),a.a.createElement(v.c,{className:"sendbird-quote_message_input__close-button",type:v.b.CLOSE,fillColor:v.a.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:function(){return s(i)}}))}var lt=function(){var e,t=he(),n=t.currentGroupChannel,i=t.initialized,o=t.quoteMessage,l=t.sendMessage,c=t.sendFileMessage,u=t.setQuoteMessage,d=t.messageInputRef,h=Object(s.a)(),f=n,p=null===(e=null===h||void 0===h?void 0:h.config)||void 0===e?void 0:e.isOnline,_=Object(r.useContext)(_e.b).stringSet,m=!i||W(f)||Q(f)||!p,g=Y(f);return f.isBroadcast&&!g?null:a.a.createElement("div",{className:"sendbird-message-input-wrapper"},o&&a.a.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},a.a.createElement(ot,{replyingMessage:o,onClose:function(){return u(null)}})),a.a.createElement(Se.a,{className:"sendbird-message-input-wrapper__message-input",channelUrl:null===f||void 0===f?void 0:f.url,placeholder:o&&_.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||W(f)&&_.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||Q(f)&&_.MESSAGE_INPUT__PLACE_HOLDER__MUTED,ref:d,disabled:m,onStartTyping:function(){null===f||void 0===f||f.startTyping()},onSendMessage:function(){l(o),u(null),null===f||void 0===f||f.endTyping()},onFileUpload:function(e){c(e,o),u(null)}}))},ct=a.a.forwardRef(lt),ut=function(e){var t,n,i,o,l=e.renderPlaceholderLoader,c=e.renderPlaceholderInvalid,u=e.renderPlaceholderEmpty,d=e.renderChannelHeader,h=e.renderMessage,f=e.renderMessageInput,p=e.renderTypingIndicator,_=e.renderCustomSeperator,m=he(),g=m.currentGroupChannel,v=m.channelUrl,y=m.isInvalid,E=m.unreadSince,b=m.loading,C=m.setInitialTimeStamp,O=m.setAnimatedMessageId,N=m.setHighLightedMessageId,S=m.scrollRef,A=m.messagesDispatcher,I=Object(r.useState)(0),k=I[0],T=I[1];Object(r.useEffect)(function(){T(g.unreadMessageCount)},[null===g||void 0===g?void 0:g.unreadMessageCount]);var w=Object(s.a)(),R=null===(n=null===(t=null===w||void 0===w?void 0:w.stores)||void 0===t?void 0:t.sdkStore)||void 0===n?void 0:n.error,M=null===(i=null===w||void 0===w?void 0:w.config)||void 0===i?void 0:i.logger,L=null===(o=null===w||void 0===w?void 0:w.config)||void 0===o?void 0:o.isOnline;return v?y?a.a.createElement("div",{className:"sendbird-conversation"},(null===c||void 0===c?void 0:c())||a.a.createElement(fe.a,{type:fe.b.WRONG})):R?a.a.createElement("div",{className:"sendbird-conversation"},(null===c||void 0===c?void 0:c())||a.a.createElement(fe.a,{type:fe.b.WRONG,retryToConnect:function(){M.info("Channel: reconnecting")}})):a.a.createElement("div",{className:"sendbird-conversation"},(null===d||void 0===d?void 0:d())||a.a.createElement(Ce,null),(null===g||void 0===g?void 0:g.isFrozen)&&a.a.createElement(rt,null),k>0&&a.a.createElement(at,{count:k,time:E,onClick:function(){var e,t,n;T(0),(null===(e=null===S||void 0===S?void 0:S.current)||void 0===e?void 0:e.scrollTop)&&(S.current.scrollTop=(null===(t=null===S||void 0===S?void 0:S.current)||void 0===t?void 0:t.scrollHeight)-(null===(n=null===S||void 0===S?void 0:S.current)||void 0===n?void 0:n.offsetHeight)),null===g||void 0===g||g.markAsRead(),A({type:j,payload:{channel:g}}),C(null),O(null),N(null)}}),b?a.a.createElement("div",{className:"sendbird-conversation"},(null===l||void 0===l?void 0:l())||a.a.createElement(fe.a,{type:fe.b.LOADING})):a.a.createElement(et,{renderMessage:h,renderPlaceholderEmpty:u,renderCustomSeperator:_}),a.a.createElement("div",{className:"sendbird-conversation__footer"},(null===f||void 0===f?void 0:f())||a.a.createElement(ct,null),a.a.createElement("div",{className:"sendbird-conversation__footer__typing-indicator"},(null===p||void 0===p?void 0:p())||a.a.createElement(nt,null),!L&&a.a.createElement(me,null)))):a.a.createElement("div",{className:"sendbird-conversation"},(null===c||void 0===c?void 0:c())||a.a.createElement(fe.a,{type:fe.b.NO_CHANNELS}))};n.d(t,"a",function(){return dt});var dt=function(e){return a.a.createElement(de,{channelUrl:null===e||void 0===e?void 0:e.channelUrl,useMessageGrouping:null===e||void 0===e?void 0:e.useMessageGrouping,useReaction:null===e||void 0===e?void 0:e.useReaction,showSearchIcon:null===e||void 0===e?void 0:e.showSearchIcon,highlightedMessage:null===e||void 0===e?void 0:e.highlightedMessage,startingPoint:null===e||void 0===e?void 0:e.startingPoint,onBeforeSendUserMessage:null===e||void 0===e?void 0:e.onBeforeSendUserMessage,onBeforeSendFileMessage:null===e||void 0===e?void 0:e.onBeforeSendFileMessage,onBeforeUpdateUserMessage:null===e||void 0===e?void 0:e.onBeforeUpdateUserMessage,onChatHeaderActionClick:null===e||void 0===e?void 0:e.onChatHeaderActionClick,onSearchClick:null===e||void 0===e?void 0:e.onSearchClick,replyType:null===e||void 0===e?void 0:e.replyType,queries:null===e||void 0===e?void 0:e.queries,renderUserProfile:null===e||void 0===e?void 0:e.renderUserProfile,disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile},a.a.createElement(ut,{renderPlaceholderLoader:null===e||void 0===e?void 0:e.renderPlaceholderLoader,renderPlaceholderInvalid:null===e||void 0===e?void 0:e.renderPlaceholderInvalid,renderPlaceholderEmpty:null===e||void 0===e?void 0:e.renderPlaceholderEmpty,renderChannelHeader:null===e||void 0===e?void 0:e.renderChannelHeader,renderMessage:null===e||void 0===e?void 0:e.renderMessage,renderMessageInput:null===e||void 0===e?void 0:e.renderMessageInput,renderTypingIndicator:null===e||void 0===e?void 0:e.renderTypingIndicator,renderCustomSeperator:null===e||void 0===e?void 0:e.renderCustomSeperator}))}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(10),s=n(19),o=n(13),l=(n(20),n(4),a.a.createContext(void 0)),c=function(e){var t=e.children,n=e.className,c=e.channelUrl,u=e.onCloseClick,d=e.onChannelModified,h=e.onBeforeUpdateChannel,f=e.queries,p=Object(i.a)(),_=p.config,m=p.stores.sdkStore,g=_.logger,v=m.sdk,y=m.initialized,E=Object(r.useState)(Object(o.a)()),b=E[0],C=E[1],O=Object(r.useState)(null),N=O[0],S=O[1],A=Object(r.useState)(!1),I=A[0],k=A[1];return Object(r.useEffect)(function(){if(g.info("ChannelSettings: Setting up"),c&&y&&v){if(!v||!v.GroupChannel)return void g.warning("ChannelSettings: No GroupChannel");v.GroupChannel.getChannel(c,function(e){e?(g.info("ChannelSettings: Fetched group channel",e),k(!1),S(e)):(g.warning("ChannelSettings: Channel not found"),k(!0))})}else g.warning("ChannelSettings: Setting up failed","No channelUrl or sdk uninitialized"),k(!1)},[c,y,b]),a.a.createElement(l.Provider,{value:{channelUrl:c,onCloseClick:u,onChannelModified:d,onBeforeUpdateChannel:h,queries:f,setChannelUpdateId:C,forceUpdateUI:function(){C(Object(o.a)())},channel:N,invalidChannel:I}},a.a.createElement(s.a,{renderUserProfile:null===e||void 0===e?void 0:e.renderUserProfile,disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile},a.a.createElement("div",{className:"sendbird-channel-settings "+n},t)))},u=function(){return a.a.useContext(l)},d=n(24),h=n(1),f=n(7),p=n(3),_=n(16),m=n(48),g=n(32),v=n(25),y=n(35),E=n(18),b=n(12),C=(n(11),n(15),n(21),n(29),n(23)),O=n(5),N=(n(14),n(33),n(37),function(e){var t,n,s,l=e.onSubmit,c=e.onCancel,d=u(),p=d.channel,_=d.onChannelModified,C=d.onBeforeUpdateChannel,O=d.setChannelUpdateId,N=null===p||void 0===p?void 0:p.name,S=Object(i.a)(),A=null===(t=null===S||void 0===S?void 0:S.config)||void 0===t?void 0:t.userId,I=null===(n=null===S||void 0===S?void 0:S.config)||void 0===n?void 0:n.theme,k=null===(s=null===S||void 0===S?void 0:S.config)||void 0===s?void 0:s.logger,T=Object(r.useRef)(null),w=Object(r.useRef)(null),R=Object(r.useRef)(null),M=Object(r.useState)(null),L=M[0],P=M[1],D=Object(r.useState)(null),U=D[0],x=D[1],j=Object(r.useContext)(f.b).stringSet;return a.a.createElement(v.a,{titleText:j.MODAL__CHANNEL_INFORMATION__TITLE,submitText:j.BUTTON__SAVE,onCancel:c,onSubmit:function(){if(""===N||T.current.value){var e=T.current.value,t=U;if(k.info("ChannelSettings: Channel information being updated",{currentTitle:e,currentImg:t}),C){k.info("ChannelSettings: onBeforeUpdateChannel");var n=C(e,t,p.data);p.updateChannel(n,function(e){null===_||void 0===_||_(e),O(Object(o.a)()),l()})}else k.info("ChannelSettings: normal"),p.updateChannel(e,t,p.data,function(e){k.info("ChannelSettings: Channel information updated",e),null===_||void 0===_||_(e),O(Object(o.a)()),l()})}else w.current.reportValidity&&w.current.reportValidity()},type:b.b.PRIMARY},a.a.createElement("form",{className:"channel-profile-form",ref:w,onSubmit:function(e){e.preventDefault()}},a.a.createElement("div",{className:"channel-profile-form__img-section"},a.a.createElement(y.a,null,j.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),a.a.createElement("div",{className:"channel-profile-form__avatar"},L?a.a.createElement(E.a,{height:"80px",width:"80px",src:L}):a.a.createElement(m.a,{height:80,width:80,channel:p,userId:A,theme:I})),a.a.createElement("input",{ref:R,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){P(URL.createObjectURL(e.target.files[0])),x(e.target.files[0]),R.current.value=""}}),a.a.createElement(g.a,{className:"channel-profile-form__avatar-button",onClick:function(){return R.current.click()},notUnderline:!0},a.a.createElement(h.a,{type:h.b.BUTTON_1,color:h.c.PRIMARY},j.MODAL__CHANNEL_INFORMATION__UPLOAD))),a.a.createElement("div",{className:"channel-profile-form__name-section"},a.a.createElement(y.a,null,j.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),a.a.createElement(y.b,{required:""!==N,name:"channel-profile-form__name",ref:T,value:N,placeHolder:j.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))}),S=function(){var e,t,n,s=Object(i.a)(),o=u(),l=Object(r.useContext)(f.b).stringSet,c=Object(r.useState)(!1),d=c[0],p=c[1],_=null===(e=null===s||void 0===s?void 0:s.config)||void 0===e?void 0:e.userId,v=(null===(t=null===s||void 0===s?void 0:s.config)||void 0===t?void 0:t.theme)||"light",y=!(null===(n=null===s||void 0===s?void 0:s.config)||void 0===n?void 0:n.isOnline),E=o.channel;return a.a.createElement("div",{className:"sendbird-channel-profile"},a.a.createElement("div",{className:"sendbird-channel-profile--inner"},a.a.createElement("div",{className:"sendbird-channel-profile__avatar"},a.a.createElement(m.a,{channel:E,userId:_,theme:v,width:80,height:80})),a.a.createElement(h.a,{className:"sendbird-channel-profile__title",type:h.b.SUBTITLE_2,color:h.c.ONBACKGROUND_1},(null===E||void 0===E?void 0:E.name)&&"Group Channel"!==(null===E||void 0===E?void 0:E.name)?E.name:"Group Channel"!==(null===E||void 0===E?void 0:E.name)&&(null===E||void 0===E?void 0:E.name)?l.NO_TITLE:E.members.map(function(e){return e.nickname||l.NO_NAME}).join(", ")),a.a.createElement(g.a,{disabled:y,className:"sendbird-channel-profile__edit",onClick:function(){y||p(!0)},notUnderline:!0},a.a.createElement(h.a,{type:h.b.BUTTON_1,color:y?h.c.ONBACKGROUND_2:h.c.PRIMARY},l.CHANNEL_SETTING__PROFILE__EDIT)),d&&a.a.createElement(N,{onCancel:function(){return p(!1)},onSubmit:function(){return p(!1)}})))},A=n(53),I=n(56),k=n(8),T=n(40),w=n(30),R=(n(31),n(9),n(6),n(27),"sendbird-user-list-item--small"),M=function(e){var t=e.user,n=e.className,i=e.currentUser,o=e.action,l=Object(r.useRef)(null),c=Object(r.useRef)(null),u=Object(r.useRef)(null),d=Object(r.useContext)(f.b).stringSet,p=Object(r.useContext)(s.b),_=p.disableUserProfile,m=p.renderUserProfile,g=Array.isArray(n)?n:[n];return a.a.createElement("div",{ref:c,className:Object(O.b)([R],g,!0).join(" ")},t.isMuted&&a.a.createElement(T.a,null),a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(E.a,{onClick:function(){_||e()},ref:u,className:R+"__avatar",src:t.profileUrl,width:24,height:24})},menuItems:function(e){return a.a.createElement(k.c,{openLeft:!0,parentRef:u,parentContainRef:u,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},m?m({user:t,currentUserId:i,close:e}):a.a.createElement(w.a,{user:t,currentUserId:i,onSuccess:e}))}}),a.a.createElement(h.a,{className:R+"__title",type:h.b.SUBTITLE_1,color:h.c.ONBACKGROUND_1},t.nickname||d.NO_NAME,i===t.userId&&" (You)"),!t.nickname&&a.a.createElement(h.a,{className:R+"__subtitle",type:h.b.CAPTION_3,color:h.c.ONBACKGROUND_2},t.userId),"operator"===t.role&&a.a.createElement(h.a,{className:R+"__operator",type:h.b.SUBTITLE_2,color:h.c.ONBACKGROUND_2},"Operator"),o&&a.a.createElement("div",{ref:l,className:R+"__action"},o({actionRef:l,parentRef:c})))},L=n(36);function P(e){var t,n=e.onCancel,s=Object(r.useState)([]),o=s[0],l=s[1],c=Object(r.useState)(null),d=c[0],h=c[1],f=u().channel,m=Object(i.a)(),g=null===(t=null===m||void 0===m?void 0:m.config)||void 0===t?void 0:t.userId;return Object(r.useEffect)(function(){var e=f.createMemberListQuery();e.limit=20,e.next(function(e,t){t||l(e)}),h(e)},[]),a.a.createElement("div",null,a.a.createElement(v.a,{hideFooter:!0,onCancel:function(){return n()},onSubmit:C.a,titleText:"All Members"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=d.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&d.next(function(e,t){t||l(Object(O.b)(Object(O.b)([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(L.a,{user:e,key:e.userId,currentUser:g,action:function(t){var n=t.parentRef,r=t.actionRef;return a.a.createElement(a.a.Fragment,null,"operator"===f.myRole&&a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(_.a,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(p.c,{width:"24px",height:"24px",type:p.b.MORE,fillColor:p.a.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(k.c,{parentContainRef:n,parentRef:r,closeDropdown:t,openLeft:!0},a.a.createElement(k.b,{onClick:function(){"operator"!==e.role?f.addOperators([e.userId],function(){l(o.map(function(t){return t.userId===e.userId?Object(O.a)(Object(O.a)({},e),{role:"operator"}):t})),t()}):f.removeOperators([e.userId],function(){l(o.map(function(t){return t.userId===e.userId?Object(O.a)(Object(O.a)({},e),{role:""}):t})),t()})}},"operator"!==e.role?"Promote to operator":"Demote operator"),!f.isBroadcast&&a.a.createElement(k.b,{onClick:function(){e.isMuted?f.unmuteUser(e,function(){l(o.map(function(t){return t.userId===e.userId?Object(O.a)(Object(O.a)({},e),{isMuted:!1}):t})),t()}):f.muteUser(e,function(){l(o.map(function(t){return t.userId===e.userId?Object(O.a)(Object(O.a)({},e),{isMuted:!0}):t})),t()})}},e.isMuted?"Unmute":"Mute"),a.a.createElement(k.b,{onClick:function(){f.banUser(e,-1,"",function(){l(o.filter(function(t){return t.userId!==e.userId}))})}},"Ban"))}}))}})}))))}function D(e){var t,n,s=e.onCancel,o=e.onSubmit,l=Object(r.useState)([]),c=l[0],d=l[1],h=Object(r.useState)({}),f=h[0],p=h[1],_=Object(r.useState)(null),m=_[0],g=_[1],y=Object(i.a)(),E=null===(n=null===(t=null===y||void 0===y?void 0:y.stores)||void 0===t?void 0:t.sdkStore)||void 0===n?void 0:n.sdk,C=u().channel;return Object(r.useEffect)(function(){var e=null===E||void 0===E?void 0:E.createApplicationUserListQuery();e.next(function(e,t){t||d(e)}),g(e)},[E]),a.a.createElement("div",null,a.a.createElement(v.a,{disabled:0===Object.keys(f).length,submitText:"Invite",type:b.b.PRIMARY,onCancel:function(){return s()},onSubmit:function(){var e=Object.keys(f).filter(function(e){return f[e]});C.inviteWithUserIds(e).then(function(){o(e)})},titleText:"Select members"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=m.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&m.next(function(e,t){t||d(Object(O.b)(Object(O.b)([],c,!0),e,!0))})}},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll__inner"},c.map(function(e){return a.a.createElement(L.a,{checkBox:!0,checked:f[e.userId],onChange:function(e){var t,n=Object(O.a)(Object(O.a)({},f),((t={})[e.target.id]=e.target.checked,t));e.target.checked||delete n[e.target.id],p(n)},user:e,key:e.userId})})))))}var U=function(){var e,t,n,s=Object(r.useState)([]),l=s[0],c=s[1],d=Object(r.useState)(!1),h=d[0],f=d[1],m=Object(r.useState)(!1),g=m[0],v=m[1],y=Object(r.useState)(!1),E=y[0],C=y[1],O=Object(i.a)(),N=u(),S=N.channel,A=N.setChannelUpdateId,I=null===(t=null===(e=null===O||void 0===O?void 0:O.stores)||void 0===e?void 0:e.sdkStore)||void 0===t?void 0:t.sdk,T=null===(n=null===O||void 0===O?void 0:O.config)||void 0===n?void 0:n.userId;Object(r.useEffect)(function(){if(S){var e=S.createMemberListQuery();e.limit=10,e.next(function(t,n){n||(c(t),f(e.hasNext))})}else c([])},[S]);var w=Object(r.useCallback)(function(){if(S){var e=S.createMemberListQuery();e.limit=10,e.next(function(t,n){n||(c(t),f(e.hasNext),A(Object(o.a)()))})}else c([])},[S]);return a.a.createElement(a.a.Fragment,null,l.map(function(e){return a.a.createElement(M,{key:e.userId,user:e,currentUser:I.currentUser.userId,action:T!==e.userId?function(t){var n=t.actionRef,r=t.parentRef;return a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(_.a,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(p.c,{width:"24px",height:"24px",type:p.b.MORE,fillColor:p.a.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(k.c,{parentContainRef:r,parentRef:n,closeDropdown:t,openLeft:!0},a.a.createElement(k.b,{onClick:function(){"operator"!==e.role?S.addOperators([e.userId],function(){w(),t()}):S.removeOperators([e.userId],function(){w(),t()})}},"operator"!==e.role?"Promote to operator":"Demote operator"),!S.isBroadcast&&a.a.createElement(k.b,{onClick:function(){e.isMuted?S.unmuteUser(e,function(){w(),t()}):S.muteUser(e,function(){w(),t()})}},e.isMuted?"Unmute":"Mute"),a.a.createElement(k.b,{onClick:function(){S.banUser(e,-1,"",function(){w(),t()})}},"Ban"))}})}:null})}),a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},h&&a.a.createElement(b.a,{type:b.c.SECONDARY,size:b.d.SMALL,onClick:function(){return v(!0)}},"All members"),a.a.createElement(b.a,{type:b.c.SECONDARY,size:b.d.SMALL,onClick:function(){return C(!0)}},"Invite members")),g&&a.a.createElement(P,{onCancel:function(){v(!1),w()}}),E&&a.a.createElement(D,{onSubmit:function(){C(!1),w()},onCancel:function(){return C(!1)}}))};n(57),n(54),n(43);function x(e){var t,n=e.onCancel,s=Object(r.useState)([]),o=s[0],l=s[1],c=Object(r.useState)(null),d=c[0],h=c[1],f=u().channel,m=Object(i.a)(),g=null===(t=null===m||void 0===m?void 0:m.config)||void 0===t?void 0:t.userId;return Object(r.useEffect)(function(){var e=f.createOperatorListQuery();e.limit=20,e.next(function(e,t){t||l(e)}),h(e)},[]),a.a.createElement("div",null,a.a.createElement(v.a,{hideFooter:!0,titleText:"All operators",onCancel:n},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=d.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&d.next(function(e,t){t||l(Object(O.b)(Object(O.b)([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(L.a,{currentUser:g,user:e,key:e.userId,action:function(t){var n=t.parentRef,r=t.actionRef;return a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(_.a,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(p.c,{width:"24px",height:"24px",type:p.b.MORE,fillColor:p.a.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(k.c,{parentContainRef:n,parentRef:r,closeDropdown:t,openLeft:!0},a.a.createElement(k.b,{onClick:function(){f.removeOperators([e.userId],function(t,n){n||l(o.filter(function(t){return t.userId!==e.userId}))}),t()}},"Dismiss operator"))}})}})}))))}function j(e){var t=e.onCancel,n=e.onSubmit,i=Object(r.useState)([]),s=i[0],o=i[1],l=Object(r.useState)({}),c=l[0],d=l[1],p=Object(r.useState)(null),_=p[0],m=p[1],g=Object(r.useContext)(f.b).stringSet,y=u().channel;Object(r.useEffect)(function(){var e=y.createMemberListQuery();e.limit=20,e.next(function(e,t){t||o(e)}),m(e)},[]);var E=Object.keys(c).filter(function(e){return c[e]}).length;return a.a.createElement("div",null,a.a.createElement(v.a,{type:b.b.PRIMARY,submitText:"Add",onCancel:t,onSubmit:function(){var e=Object.keys(c).filter(function(e){return c[e]});null===y||void 0===y||y.addOperators(e).then(function(){n(e)})},titleText:"Select members"},a.a.createElement(h.a,{color:E>0?h.c.PRIMARY:h.c.ONBACKGROUND_3,type:h.b.CAPTION_1},E+" "+g.MODAL__INVITE_MEMBER__SELECTEC),a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=_.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&_.next(function(e,t){t||o(Object(O.b)(Object(O.b)([],s,!0),e,!0))})}},s.map(function(e){return a.a.createElement(L.a,{checkBox:!0,checked:c[e.userId],onChange:function(e){var t,n=Object(O.a)(Object(O.a)({},c),((t={})[e.target.id]=e.target.checked,t));e.target.checked||delete n[e.target.id],d(n)},user:e,key:e.userId})}))))}var F=function(){var e,t=Object(r.useState)([]),n=t[0],s=t[1],o=Object(r.useState)(!1),l=o[0],c=o[1],d=Object(r.useState)(!1),h=d[0],m=d[1],g=Object(r.useState)(!1),v=g[0],y=g[1],E=Object(r.useContext)(f.b).stringSet,C=Object(i.a)(),O=u().channel,N=null===(e=null===C||void 0===C?void 0:C.config)||void 0===e?void 0:e.userId;Object(r.useEffect)(function(){if(O){var e=O.createOperatorListQuery();e.limit=10,e.next(function(t,n){n||(s(t),y(e.hasNext))})}else s([])},[O]);var S=Object(r.useCallback)(function(){if(O){var e=O.createOperatorListQuery();e.limit=10,e.next(function(t,n){n||(s(t),y(e.hasNext))})}else s([])},[O]);return a.a.createElement(a.a.Fragment,null,n.map(function(e){return a.a.createElement(M,{key:e.userId,user:e,currentUser:N,action:function(t){var r=t.actionRef,i=t.parentRef;return a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(_.a,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(p.c,{width:"24px",height:"24px",type:p.b.MORE,fillColor:p.a.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(k.c,{parentContainRef:i,parentRef:r,closeDropdown:t,openLeft:!0},a.a.createElement(k.b,{onClick:function(){O.removeOperators([e.userId],function(t,r){r||s(n.filter(function(t){return t.userId!==e.userId}))}),t()}},"Dismiss operator"))}})}})}),a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(b.a,{type:b.c.SECONDARY,size:b.d.SMALL,onClick:function(){m(!0)}},E.CHANNEL_SETTING__OPERATORS__TITLE_ADD),v&&a.a.createElement(b.a,{type:b.c.SECONDARY,size:b.d.SMALL,onClick:function(){c(!0)}},E.CHANNEL_SETTING__OPERATORS__TITLE_ALL)),l&&a.a.createElement(x,{onCancel:function(){c(!1),S()}}),h&&a.a.createElement(j,{onCancel:function(){return m(!1)},onSubmit:function(){S(),m(!1)}}))};function H(e){var t=e.onCancel,n=Object(r.useState)([]),i=n[0],s=n[1],o=Object(r.useState)(null),l=o[0],c=o[1],d=u().channel;return Object(r.useEffect)(function(){var e=d.createBannedUserListQuery();e.next(function(e,t){t||s(e)}),c(e)},[]),a.a.createElement("div",null,a.a.createElement(v.a,{hideFooter:!0,onCancel:function(){return t()},onSubmit:C.a,titleText:"Muted members"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=l.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&l.next(function(e,t){t||s(Object(O.b)(Object(O.b)([],i,!0),e,!0))})}},i.map(function(e){return a.a.createElement(L.a,{user:e,key:e.userId,action:function(t){var n=t.parentRef,r=t.actionRef;return a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(_.a,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(p.c,{width:"24px",height:"24px",type:p.b.MORE,fillColor:p.a.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(k.c,{parentContainRef:n,parentRef:r,closeDropdown:t,openLeft:!0},a.a.createElement(k.b,{onClick:function(){d.unbanUser(e,function(){t(),s(i.filter(function(t){return t.userId!==e.userId}))})}},"Unban"))}})}})}))))}var G=function(){var e=Object(r.useState)([]),t=e[0],n=e[1],i=Object(r.useState)(!1),s=i[0],o=i[1],l=Object(r.useState)(!1),c=l[0],d=l[1],f=u().channel;Object(r.useEffect)(function(){if(f){var e=f.createBannedUserListQuery();e.next(function(t,r){r||(n(t),o(e.hasNext))})}else n([])},[f]);var m=Object(r.useCallback)(function(){if(f){var e=f.createBannedUserListQuery();e.next(function(t,r){r||(n(t),o(e.hasNext))})}else n([])},[f]);return a.a.createElement(a.a.Fragment,null,t.map(function(e){return a.a.createElement(M,{key:e.userId,user:e,action:function(t){var n=t.actionRef,r=t.parentRef;return a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(_.a,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(p.c,{width:"24px",height:"24px",type:p.b.MORE,fillColor:p.a.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(k.c,{parentContainRef:r,parentRef:n,closeDropdown:t,openLeft:!0},a.a.createElement(k.b,{onClick:function(){f.unbanUser(e,function(){t(),m()})}},"Unban"))}})}})}),t&&0===t.length&&a.a.createElement(h.a,{className:"sendbird-channel-settings__empty-list",type:h.b.SUBTITLE_2,color:h.c.ONBACKGROUND_3},"No banned members yet"),s&&a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(b.a,{type:b.c.SECONDARY,size:b.d.SMALL,onClick:function(){d(!0)}},"All banned members")),c&&a.a.createElement(H,{onCancel:function(){d(!1),m()}}))};function B(e){var t,n=e.onCancel,s=Object(r.useState)([]),o=s[0],l=s[1],c=Object(r.useState)(null),d=c[0],h=c[1],f=u().channel,m=Object(i.a)(),g=null===(t=null===m||void 0===m?void 0:m.config)||void 0===t?void 0:t.userId;return Object(r.useEffect)(function(){var e=f.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next(function(e,t){t||l(e)}),h(e)},[]),a.a.createElement("div",null,a.a.createElement(v.a,{hideFooter:!0,onCancel:function(){return n()},onSubmit:C.a,titleText:"Muted members"},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=d.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&d.next(function(e,t){t||l(Object(O.b)(Object(O.b)([],o,!0),e,!0))})}},o.map(function(e){return a.a.createElement(L.a,{currentUser:g,user:e,key:e.userId,action:function(t){var n=t.actionRef,r=t.parentRef;return a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(_.a,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(p.c,{width:"24px",height:"24px",type:p.b.MORE,fillColor:p.a.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(k.c,{parentContainRef:r,parentRef:n,closeDropdown:t,openLeft:!0},a.a.createElement(k.b,{onClick:function(){f.unmuteUser(e,function(){t(),l(o.filter(function(t){return t.userId!==e.userId}))})}},"Unmute"))}})}})}))))}var V=function(){var e,t=Object(r.useState)([]),n=t[0],s=t[1],o=Object(r.useState)(!1),l=o[0],c=o[1],d=Object(r.useState)(!1),f=d[0],m=d[1],g=u().channel,v=Object(i.a)(),y=null===(e=null===v||void 0===v?void 0:v.config)||void 0===e?void 0:e.userId;Object(r.useEffect)(function(){if(g){var e=g.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next(function(t,n){n||(s(t),c(e.hasNext))})}else s([])},[g]);var E=Object(r.useCallback)(function(){if(g){var e=g.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next(function(t,n){n||(s(t),c(e.hasNext))})}else s([])},[g]);return a.a.createElement(a.a.Fragment,null,n.map(function(e){return a.a.createElement(M,{key:e.userId,user:e,currentUser:y,action:function(t){var n=t.actionRef,r=t.parentRef;return a.a.createElement(k.d,{menuTrigger:function(e){return a.a.createElement(_.a,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(p.c,{width:"24px",height:"24px",type:p.b.MORE,fillColor:p.a.CONTENT_INVERSE}))},menuItems:function(t){return a.a.createElement(k.c,{closeDropdown:t,openLeft:!0,parentContainRef:r,parentRef:n},a.a.createElement(k.b,{onClick:function(){g.unmuteUser(e,function(){E(),t()})}},"Unmute"))}})}})}),n&&0===n.length&&a.a.createElement(h.a,{className:"sendbird-channel-settings__empty-list",type:h.b.SUBTITLE_2,color:h.c.ONBACKGROUND_3},"No muted members yet"),l&&a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(b.a,{type:b.c.SECONDARY,size:b.d.SMALL,onClick:function(){m(!0)}},"All muted members")),f&&a.a.createElement(B,{onCancel:function(){m(!1),E()}}))},z=function(e){return Math.abs(e)>999?(Math.abs(e)/1e3).toFixed(1)+"K":e};function q(){var e=Object(r.useState)(!1),t=e[0],n=e[1],i=Object(r.useContext)(f.b).stringSet,s=u().channel;return Object(r.useEffect)(function(){n(s.isFrozen)},[s]),a.a.createElement(A.a,{className:"sendbird-channel-settings__operator"},a.a.createElement(A.b,{className:"sendbird-channel-settings__operators-list",id:"operators",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.c,{type:p.b.OPERATOR,fillColor:p.a.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(h.a,{type:h.b.SUBTITLE_1,color:h.c.ONBACKGROUND_1},i.CHANNEL_SETTING__OPERATORS__TITLE))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(F,null))}}),a.a.createElement(A.b,{className:"sendbird-channel-settings__members-list",id:"members",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.c,{type:p.b.MEMBERS,fillColor:p.a.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(h.a,{type:h.b.SUBTITLE_1,color:h.c.ONBACKGROUND_1},i.CHANNEL_SETTING__MEMBERS__TITLE),a.a.createElement(I.a,{count:z(s.memberCount)}))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(U,null))}}),!s.isBroadcast&&a.a.createElement(A.b,{id:"mutedMembers",className:"sendbird-channel-settings__muted-members-list",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.c,{type:p.b.MUTE,fillColor:p.a.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(h.a,{type:h.b.SUBTITLE_1,color:h.c.ONBACKGROUND_1},i.CHANNEL_SETTING__MUTED_MEMBERS__TITLE))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(V,null))}}),a.a.createElement(A.b,{className:"sendbird-channel-settings__banned-members-list",id:"bannedMembers",renderTitle:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.c,{type:p.b.BAN,fillColor:p.a.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(h.a,{type:h.b.SUBTITLE_1,color:h.c.ONBACKGROUND_1},i.CHANNEL_SETTING__BANNED_MEMBERS__TITLE))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(G,null))}}),!s.isBroadcast&&a.a.createElement("div",{className:"sendbird-channel-settings__freeze"},a.a.createElement(p.c,{type:p.b.FREEZE,fillColor:p.a.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(h.a,{type:h.b.SUBTITLE_1,color:h.c.ONBACKGROUND_1},i.CHANNEL_SETTING__FREEZE_CHANNEL),a.a.createElement("div",{className:"sendbird-channel-settings__frozen-icon"},t?a.a.createElement(p.c,{onClick:function(){s.unfreeze(function(){n(!1)})},type:p.b.TOGGLE_ON,fillColor:p.a.PRIMARY,width:44,height:24}):a.a.createElement(p.c,{onClick:function(){s.freeze(function(){n(!0)})},type:p.b.TOGGLE_OFF,fillColor:p.a.PRIMARY,width:44,height:24}))))}var K=function(e){var t,n,r,s=e.onSubmit,o=void 0===s?C.a:s,l=e.onCancel,c=void 0===l?C.a:l,d=null===(t=u())||void 0===t?void 0:t.channel,h=Object(i.a)(),f=null===(n=null===h||void 0===h?void 0:h.config)||void 0===n?void 0:n.logger,p=null===(r=null===h||void 0===h?void 0:h.config)||void 0===r?void 0:r.isOnline;if(d)return a.a.createElement(v.a,{disabled:!p,onCancel:c,onSubmit:function(){f.info("ChannelSettings: Leaving channel",d),d.leave().then(function(){f.info("ChannelSettings: Leaving channel successful!",d),o()})},submitText:"Leave",titleText:"Leave this channel?"})},Y=function(){var e,t=Object(r.useContext)(f.b).stringSet,n=Object(r.useState)(!1),i=n[0],s=n[1],o=u().channel;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:["sendbird-channel-settings__panel-item","sendbird-channel-settings__members"].join(" "),role:"switch","aria-checked":i,onKeyDown:function(){return s(!i)},onClick:function(){return s(!i)},tabIndex:0},a.a.createElement(p.c,{className:"sendbird-channel-settings__panel-icon-left",type:p.b.MEMBERS,fillColor:p.a.PRIMARY,height:"24px",width:"24px"}),a.a.createElement(h.a,{type:h.b.SUBTITLE_1,color:h.c.ONBACKGROUND_1},t.CHANNEL_SETTING__MEMBERS__TITLE,a.a.createElement(I.a,{count:(e=o.memberCount,Math.abs(e)>999?(Math.abs(e)/1e3).toFixed(1)+"K":e)})),a.a.createElement(p.c,{className:["sendbird-channel-settings__panel-icon-right","sendbird-channel-settings__panel-icon--chevron",i?"sendbird-channel-settings__panel-icon--open":""].join(" "),type:p.b.CHEVRON_RIGHT,height:"24px",width:"24px"})),i&&a.a.createElement(U,null))},W=(n(34),function(e){var t,n,s=Object(r.useContext)(f.b).stringSet,o=Object(i.a)(),l=u(),c=Object(r.useState)(!1),m=c[0],g=c[1],v=null===(t=null===o||void 0===o?void 0:o.config)||void 0===t?void 0:t.isOnline,y=null===(n=null===o||void 0===o?void 0:o.config)||void 0===n?void 0:n.logger,E=l.channel,b=l.invalidChannel,C=l.onCloseClick,O=e.renderPlaceholderError,N=e.renderChannelProfile,A=e.renderModerationPanel,I=e.renderLeaveChannel;return!E||b?a.a.createElement("div",null,a.a.createElement("div",{className:"sendbird-channel-settings__header"},a.a.createElement(h.a,{type:h.b.H_2,color:h.c.ONBACKGROUND_1},s.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement(p.c,{className:"sendbird-channel-settings__close-icon",type:p.b.CLOSE,height:"24px",width:"24px",onClick:function(){y.info("ChannelSettings: Click close"),null===C||void 0===C||C()}})),a.a.createElement("div",null,O?O():a.a.createElement(d.a,{type:d.b.WRONG}))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-channel-settings__header"},a.a.createElement(h.a,{type:h.b.H_2,color:h.c.ONBACKGROUND_1},s.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement("div",{className:"sendbird-channel-settings__header-icon"},a.a.createElement(_.a,{width:"32px",height:"32px",onClick:function(){y.info("ChannelSettings: Click close"),null===C||void 0===C||C()}},a.a.createElement(p.c,{className:"sendbird-channel-settings__close-icon",type:p.b.CLOSE,height:"22px",width:"22px"})))),a.a.createElement("div",{className:"sendbird-channel-settings__scroll-area"},(null===N||void 0===N?void 0:N())||a.a.createElement(S,null),(null===A||void 0===A?void 0:A())||("operator"===E.myRole?a.a.createElement(q,null):a.a.createElement(Y,null)),(null===I||void 0===I?void 0:I())||a.a.createElement("div",{className:["sendbird-channel-settings__panel-item","sendbird-channel-settings__leave-channel",v?"":"sendbird-channel-settings__panel-item__disabled"].join(" "),role:"button",onKeyDown:function(){v&&g(!0)},onClick:function(){v&&g(!0)},tabIndex:0},a.a.createElement(p.c,{className:["sendbird-channel-settings__panel-icon-left","sendbird-channel-settings__panel-icon__leave"].join(" "),type:p.b.LEAVE,fillColor:p.a.ERROR,height:"24px",width:"24px"}),a.a.createElement(h.a,{type:h.b.SUBTITLE_1,color:h.c.ONBACKGROUND_1},s.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE)),m&&a.a.createElement(K,{onCancel:function(){g(!1)},onSubmit:function(){g(!1),null===C||void 0===C||C()}})))});n.d(t,"a",function(){return Q});var Q=function(e){return a.a.createElement(c,{channelUrl:e.channelUrl,onCloseClick:null===e||void 0===e?void 0:e.onCloseClick,onChannelModified:null===e||void 0===e?void 0:e.onChannelModified,onBeforeUpdateChannel:null===e||void 0===e?void 0:e.onBeforeUpdateChannel,queries:null===e||void 0===e?void 0:e.queries,className:null===e||void 0===e?void 0:e.className,disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile,renderUserProfile:null===e||void 0===e?void 0:e.renderChannelProfile},a.a.createElement(W,{renderPlaceholderError:null===e||void 0===e?void 0:e.renderPlaceholderError,renderChannelProfile:null===e||void 0===e?void 0:e.renderChannelProfile,renderModerationPanel:null===e||void 0===e?void 0:e.renderModerationPanel,renderLeaveChannel:null===e||void 0===e?void 0:e.renderLeaveChannel}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),a=n.n(r),i=n(42),s=n(59),o=n(60),l=(n(31),n(9),n(10),n(20),n(4),n(5),n(7),n(11),n(15),n(25),n(21),n(29),n(16),n(3),n(12),n(1),n(23),n(36),n(19),n(18),n(14),n(13),n(40),n(43),n(30),n(8),n(6),n(27),function(e){var t=e.onCancel,n=e.renderStepOne,r=Object(i.c)(),l=r.step,c=r.setStep;return a.a.createElement(a.a.Fragment,null,0===l&&((null===n||void 0===n?void 0:n())||a.a.createElement(o.a,{onCancel:t})),1===l&&a.a.createElement(s.a,{onCancel:function(){c(0),t()}}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),a=n.n(r),i=n(68),s=(n(25),n(21),n(7),n(11),n(15),n(29),n(16),n(4),n(3),n(12),n(1),n(23),n(10),n(20),n(35),n(18),n(5),n(14),n(13),n(32),n(33),n(52),function(e){var t=e.onEditProfile,n=e.onCancel,r=e.onThemeChange;return a.a.createElement(i.a,{onEditProfile:t,onCancel:n,onThemeChange:r},a.a.createElement(i.b,null))})},function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return y});var r=n(0),a=n.n(r),i=n(25),s=n(7),o=n(10),l=n(35),c=n(18),u=n(3),d=n(12),h=n(1),f=n(32),p=n(23),_=n(52),m=a.a.createContext(void 0),g=function(e){var t=e.children,n=e.onEditProfile,i=e.onCancel,s=e.onThemeChange,o=Object(r.useMemo)(function(){return{onEditProfile:n,onCancel:i,onThemeChange:s}},[]);return a.a.createElement(m.Provider,{value:o},t)},v=function(){return a.a.useContext(m)};function y(){var e,t,n,m,g,y,E,b=v(),C=Object(o.a)(),O=Object(r.useRef)(null),N=Object(r.useRef)(null),S=Object(r.useRef)(null),A=Object(r.useContext)(s.b).stringSet,I=Object(r.useState)(null),k=I[0],T=I[1],w=Object(r.useState)(null),R=w[0],M=w[1],L=b.onEditProfile,P=b.onCancel,D=b.onThemeChange,U=(null===(e=null===C||void 0===C?void 0:C.config)||void 0===e?void 0:e.theme)||"light",x=(null===(t=null===C||void 0===C?void 0:C.config)||void 0===t?void 0:t.setCurrenttheme)||p.a,j=null===(m=null===(n=null===C||void 0===C?void 0:C.stores)||void 0===n?void 0:n.userStore)||void 0===m?void 0:m.user,F=null===(y=null===(g=null===C||void 0===C?void 0:C.stores)||void 0===g?void 0:g.sdkStore)||void 0===y?void 0:y.sdk,H=null===(E=null===C||void 0===C?void 0:C.dispatchers)||void 0===E?void 0:E.userDispatcher;return a.a.createElement(i.a,{titleText:A.EDIT_PROFILE__TITLE,submitText:A.BUTTON__SAVE,type:d.b.PRIMARY,onCancel:P,onSubmit:function(){var e;""===(null===j||void 0===j?void 0:j.nickname)||N.current.value?null===F||void 0===F||F.updateCurrentUserInfoWithProfileImage(null===(e=null===N||void 0===N?void 0:N.current)||void 0===e?void 0:e.value,R,function(e){H({type:_.c,payload:e}),L&&"function"===typeof L&&L(e)}):S.current.reportValidity&&S.current.reportValidity()}},a.a.createElement("form",{className:"sendbird-edit-user-profile",ref:S,onSubmit:function(e){e.preventDefault()}},a.a.createElement("section",{className:"sendbird-edit-user-profile__img"},a.a.createElement(l.a,null,A.EDIT_PROFILE__IMAGE_LABEL),a.a.createElement("div",{className:"sendbird-edit-user-profile__img__avatar"},a.a.createElement(c.a,{width:"80px",height:"80px",src:k||(null===j||void 0===j?void 0:j.profileUrl)})),a.a.createElement("input",{ref:O,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){T(URL.createObjectURL(e.target.files[0])),M(e.target.files[0]),O.current.value=""}}),a.a.createElement(f.a,{className:"sendbird-edit-user-profile__img__avatar-button",notUnderline:!0,onClick:function(){return O.current.click()}},a.a.createElement(h.a,{type:h.b.BUTTON_1,color:h.c.PRIMARY},A.EDIT_PROFILE__IMAGE_UPLOAD))),a.a.createElement("section",{className:"sendbird-edit-user-profile__name"},a.a.createElement(l.a,null,A.EDIT_PROFILE__NICKNAME_LABEL),a.a.createElement(l.b,{required:""!==(null===j||void 0===j?void 0:j.nickname),name:"sendbird-edit-user-profile__name__input",ref:N,value:null===j||void 0===j?void 0:j.nickname,placeHolder:A.EDIT_PROFILE__NICKNAME_PLACEHOLDER})),a.a.createElement("section",{className:"sendbird-edit-user-profile__userid"},a.a.createElement(l.a,null,A.EDIT_PROFILE__USERID_LABEL),a.a.createElement(l.b,{disabled:!0,name:"sendbird-edit-user-profile__userid__input",value:null===j||void 0===j?void 0:j.userId})),a.a.createElement("section",{className:"sendbird-edit-user-profile__theme"},a.a.createElement(l.a,null,A.EDIT_PROFILE__THEME_LABEL),a.a.createElement("div",{className:"sendbird-edit-user-profile__theme__theme-icon"},"dark"===U?a.a.createElement(u.c,{onClick:function(){x("light"),null===D||void 0===D||D("light")},type:u.b.TOGGLE_ON,width:44,height:24}):a.a.createElement(u.c,{onClick:function(){x("dark"),null===D||void 0===D||D("dark")},type:u.b.TOGGLE_OFF,width:44,height:24})))))}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),a=n.n(r),i=n(75),s=n(76),o=n(77),l=n(78),c=n(50),u=n(10),d=n(67),h=n(24),f=(n(7),n(11),n(15),n(1),n(4),n(16),n(18),n(5),n(14),n(3),n(13),n(61),n(66),n(42),n(31),n(9),n(59),n(25),n(21),n(29),n(12),n(23),n(36),n(19),n(40),n(43),n(30),n(20),n(8),n(6),n(27),n(60),n(48),n(37),n(56),n(44),n(38),n(17),n(68),n(35),n(32),n(33),n(52),n(34),function(e){var t,n,f=e.renderHeader,p=e.renderChannelPreview,_=e.renderPlaceHolderError,m=e.renderPlaceHolderLoading,g=e.renderPlaceHolderEmptyList,v=Object(r.useState)(!1),y=v[0],E=v[1],b=Object(c.g)(),C=b.onThemeChange,O=b.allowProfileEdit,N=b.allChannels,S=b.loading,A=b.currentChannel,I=b.channelListDispatcher,k=b.channelSource,T=Object(u.a)(),w=null===(t=null===T||void 0===T?void 0:T.stores)||void 0===t?void 0:t.sdkStore,R=null===T||void 0===T?void 0:T.config,M=null===(n=null===T||void 0===T?void 0:T.config)||void 0===n?void 0:n.isOnline,L=null===R||void 0===R?void 0:R.logger,P=null===w||void 0===w?void 0:w.sdk,D=null===w||void 0===w?void 0:w.error,U=(null===w||void 0===w?void 0:w.initialized)||!1;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-channel-list__header"},a.a.createElement(i.a,{renderHeader:f,onEdit:function(){O&&E(!0)},allowProfileEdit:O,renderIconButton:function(){return a.a.createElement(s.a,null)}})),y&&a.a.createElement(d.a,{onThemeChange:C,onCancel:function(){E(!1)},onEditProfile:function(){E(!1)}}),a.a.createElement("div",{className:"sendbird-channel-list__body",onScroll:function(e){var t=null===e||void 0===e?void 0:e.target;t.clientHeight+t.scrollTop===t.scrollHeight&&(null===k||void 0===k?void 0:k.hasNext)&&(L.info("ChannelList: Fetching more channels"),I({type:c.b,payload:null}),null===k||void 0===k||k.next(function(e,t){if(t)return L.info("ChannelList: Fetching channels failed",t),void I({type:c.e,payload:e});L.info("ChannelList: Fetching channels successful",e),I({type:c.f,payload:e}),e&&"function"===typeof e.forEach&&(L.info("ChannelList: Marking all channels as read"),e.forEach(function(e){P.markAsDelivered(e.url)}))}))}},D&&(_&&"function"===typeof _?null===_||void 0===_?void 0:_():a.a.createElement(h.a,{type:h.b.WRONG})),a.a.createElement("div",null,N&&N.map(function(e,t){var n=function(t,n){L.info("ChannelList: Leaving channel",t),t.leave().then(function(t){L.info("ChannelList: Leaving channel success",t),n&&"function"===typeof n&&n(t,null),I({type:c.c,payload:e.url})}).catch(function(e){L.error("ChannelList: Leaving channel failed",e),n&&"function"===typeof n&&n(null,e)})},r=function(){M&&(L.info("ChannelList: Clicked on channel:",e),I({type:c.d,payload:e}))};return p?a.a.createElement("div",{key:e.url,onClick:r},p({channel:e,onLeaveChannel:n})):a.a.createElement(o.a,{key:e.url,tabIndex:t,onClick:r,channel:e,isActive:e.url===(null===A||void 0===A?void 0:A.url),renderChannelAction:function(){return a.a.createElement(l.a,{disabled:!M,onLeaveChannel:function(){return n(e,null)}})}})})),(!U||S)&&(m&&"function"===typeof m?null===m||void 0===m?void 0:m():a.a.createElement(h.a,{type:h.b.LOADING})),(!N||0===N.length)&&(g&&"function"===typeof g?null===g||void 0===g?void 0:g():a.a.createElement(h.a,{type:h.b.NO_CHANNELS}))))})},function(e,t,n){"use strict";e.exports=n(133)},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}n.d(t,"a",function(){return a})},function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=o(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function _(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(t){var r=n(51),a=n(114),i=n(84),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=n(85):"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t)&&(e=n(85)),e}(),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(o(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s){if("SyntaxError"===o.name)throw i(o,this,"E_JSON_PARSE");throw o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){l.headers[e]={}}),r.forEach(["post","put","patch"],function(e){l.headers[e]=r.merge(s)}),e.exports=l}).call(this,n(72))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),a=n.n(r),i=n(7),s=n(10),o=n(1),l=n(16),c=n(18),u=(n(11),n(15),n(20),n(4),n(5),n(14),n(3),n(13),function(e){var t,n=e.renderHeader,u=e.renderIconButton,d=e.onEdit,h=e.allowProfileEdit,f=Object(s.a)(),p=(null===(t=null===f||void 0===f?void 0:f.stores)||void 0===t?void 0:t.userStore).user,_=Object(r.useContext)(i.b).stringSet;return a.a.createElement("div",{className:["sendbird-channel-header",h?"sendbird-channel-header--allow-edit":""].join(" ")},n?n():a.a.createElement("div",{className:"sendbird-channel-header__title",role:"button",onClick:function(){d()},onKeyDown:function(){d()},tabIndex:0},a.a.createElement("div",{className:"sendbird-channel-header__title__left"},a.a.createElement(c.a,{width:"32px",height:"32px",src:p.profileUrl,alt:p.nickname})),a.a.createElement("div",{className:"sendbird-channel-header__title__right"},a.a.createElement(o.a,{className:"sendbird-channel-header__title__right__name",type:o.b.SUBTITLE_2,color:o.c.ONBACKGROUND_1},p.nickname||_.NO_NAME),a.a.createElement(o.a,{className:"sendbird-channel-header__title__right__user-id",type:o.b.BODY_2,color:o.c.ONBACKGROUND_2},p.userId))),a.a.createElement("div",{className:"sendbird-channel-header__right-icon"},u()||a.a.createElement(l.a,null)))})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),a=n.n(r),i=n(16),s=n(3),o=n(61),l=n(10),c=(n(4),n(66),n(42),n(31),n(9),n(59),n(5),n(7),n(11),n(15),n(25),n(21),n(29),n(12),n(1),n(23),n(36),n(19),n(18),n(14),n(13),n(40),n(43),n(30),n(20),n(8),n(6),n(27),n(60),function(){var e,t=Object(r.useState)(!1),n=t[0],c=t[1],u=Object(l.a)(),d=!(null===(e=null===u||void 0===u?void 0:u.config)||void 0===e?void 0:e.isOnline);return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{height:"32px",width:"32px",onClick:function(){c(!0)},disabled:d},a.a.createElement(s.c,{type:s.b.CREATE,fillColor:s.a.PRIMARY,width:"24px",height:"24px"})),n&&a.a.createElement(o.a,{onCancel:function(){c(!1)},onCreateChannel:function(){c(!1)}}))})},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),a=n.n(r),i=n(48),s=n(56),o=n(3),l=n(1),c=n(44),u=n(17),d=n(6),h=n(10),f=n(7),p=(n(18),n(5),n(14),n(4),n(13),n(37),n(11),n(38),n(15),n(20),function(e){return e&&e.lastMessage?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageType,n=e.name;return"file"===t?Object(d.F)(n,30):e.message}(e.lastMessage):""}),_=function(e){return e&&e.unreadMessageCount?e.unreadMessageCount:0},m=function(e){var t,n,r,d,m=e.channel,g=e.isActive,v=void 0!==g&&g,y=e.renderChannelAction,E=e.onClick,b=e.tabIndex,C=Object(h.a)(),O=Object(f.c)(),N=O.dateLocale,S=O.stringSet,A=null===(r=null===(n=null===(t=null===C||void 0===C?void 0:C.stores)||void 0===t?void 0:t.userStore)||void 0===n?void 0:n.user)||void 0===r?void 0:r.userId,I=null===(d=null===C||void 0===C?void 0:C.config)||void 0===d?void 0:d.theme,k=m.isBroadcast,T=m.isFrozen;return a.a.createElement("div",{className:["sendbird-channel-preview",v?"sendbird-channel-preview--active":""].join(" "),role:"link",onClick:E,onKeyPress:E,tabIndex:b},a.a.createElement("div",{className:"sendbird-channel-preview__avatar"},a.a.createElement(i.a,{channel:m,userId:A,theme:I})),a.a.createElement("div",{className:"sendbird-channel-preview__content"},a.a.createElement("div",{className:"sendbird-channel-preview__content__upper"},a.a.createElement("div",{className:"sendbird-channel-preview__content__upper__header"},k&&a.a.createElement("div",{className:"sendbird-channel-preview__content__upper__header__broadcast-icon"},a.a.createElement(o.c,{type:o.b.BROADCAST,fillColor:o.a.SECONDARY,height:"16px",width:"16px"})),a.a.createElement(l.a,{className:"sendbird-channel-preview__content__upper__header__channel-name",type:l.b.SUBTITLE_2,color:l.c.ONBACKGROUND_1},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.d;return e&&(e.name||e.members)?e.name&&"Group Channel"!==e.name?e.name:1===e.members.length?n.NO_MEMBERS:e.members.filter(function(e){return e.userId!==t}).map(function(e){return e.nickname||n.NO_NAME}).join(", "):n.NO_TITLE}(m,A,S)),a.a.createElement(l.a,{className:"sendbird-channel-preview__content__upper__header__total-members",type:l.b.CAPTION_2,color:l.c.ONBACKGROUND_2},function(e){return e&&e.memberCount?e.memberCount:0}(m)),T&&a.a.createElement("div",{title:"Frozen",className:"sendbird-channel-preview__content__upper__header__frozen-icon"},a.a.createElement(o.c,{type:o.b.FREEZE,fillColor:o.a.PRIMARY,height:12,width:12}))),a.a.createElement(l.a,{className:"sendbird-channel-preview__content__upper__last-message-at",type:l.b.CAPTION_3,color:l.c.ONBACKGROUND_2},function(e,t){var n,r=null===e||void 0===e?void 0:null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt,a=t?{locale:t}:null;return r?Object(c.c)(r)?Object(u.b)(r,"p",a):Object(c.a)(r)?Object(c.b)(r,new Date,a):Object(u.b)(r,"MMM dd",a):""}(m,N))),a.a.createElement("div",{className:"sendbird-channel-preview__content__lower"},a.a.createElement(l.a,{className:"sendbird-channel-preview__content__lower__last-message",type:l.b.BODY_2,color:l.c.ONBACKGROUND_3},p(m)),a.a.createElement("div",{className:"sendbird-channel-preview__content__lower__unread-message-count"},_(m)?a.a.createElement(s.a,{count:_(m)}):null))),a.a.createElement("div",{className:"sendbird-channel-preview__action"},y({channel:m})))}},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(4),a=n(0),i=n.n(a),s=n(2),o=n.n(s),l=n(7),c=n(8),u=n(16),d=n(3),h=n(10),f=n(23),p=n(25),_=n(50),m=(n(11),n(15),n(1),n(6),n(5),n(21),n(27),n(20),n(29),n(12),n(9),n(13),n(19),function(e){var t,n,r,a=e.onSubmit,s=void 0===a?f.a:a,o=e.onCancel,l=void 0===o?f.a:o,c=null===(t=Object(_.g)())||void 0===t?void 0:t.currentChannel,u=Object(h.a)(),d=null===(n=null===u||void 0===u?void 0:u.config)||void 0===n?void 0:n.logger,m=null===(r=null===u||void 0===u?void 0:u.config)||void 0===r?void 0:r.isOnline;if(c)return i.a.createElement(p.a,{disabled:!m,onCancel:l,onSubmit:function(){d.info("ChannelSettings: Leaving channel",c),c.leave().then(function(){d.info("ChannelSettings: Leaving channel successful!",c),s()})},submitText:"Leave",titleText:"Leave this channel?"})});function g(e){var t=e.disabled,n=e.onLeaveChannel,s=Object(a.useRef)(null),o=Object(a.useState)(!1),h=Object(r.b)(o,2),f=h[0],p=h[1],_=Object(a.useContext)(l.b).stringSet;return i.a.createElement("div",{role:"button",style:{display:"inline-block"},onKeyDown:function(e){e.stopPropagation()},tabIndex:0,onClick:function(e){e.stopPropagation()}},i.a.createElement(c.d,{menuTrigger:function(e){return i.a.createElement(u.a,{ref:s,onClick:e,height:"32px",width:"32px"},i.a.createElement(d.c,{type:d.b.MORE,fillColor:d.a.PRIMARY,width:"24px",height:"24px"}))},menuItems:function(e){return i.a.createElement(c.c,{parentRef:s,parentContainRef:s,closeDropdown:e},i.a.createElement(c.b,{onClick:function(){t||(p(!0),e())}},_.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))}}),f&&i.a.createElement(m,{onSubmit:function(){p(!1),n()},onCancel:function(){return p(!1)}}))}g.propTypes={disabled:o.a.bool,onLeaveChannel:o.a.func.isRequired},g.defaultProps={disabled:!1}},function(e,t,n){"use strict";var r=n(70),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?s:o[e.$$typeof]||a}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=f(n);a&&a!==p&&e(t,a,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var o=l(t),_=l(n),m=0;m<s.length;++m){var g=s[m];if(!i[g]&&(!r||!r[g])&&(!_||!_[g])&&(!o||!o[g])){var v=h(n,g);try{c(t,g,v)}catch(y){}}}}return t}},function(e,t,n){"use strict";var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}(function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91});t.a=a},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,t){for(var n,s,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))a.call(n,c)&&(o[c]=n[c]);if(r){s=r(n);for(var u=0;u<s.length;u++)i.call(n,s[u])&&(o[s[u]]=n[s[u]])}}return o}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(51);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(a(t)+"="+a(e))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(51),a=n(115),i=n(116),s=n(83),o=n(117),l=n(120),c=n(121),u=n(86);e.exports=function(e){return new Promise(function(t,n){var d=e.data,h=e.headers,f=e.responseType;r.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(_+":"+m)}var g=o(e.baseURL,e.url);function v(){if(p){var r="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,i={data:f&&"text"!==f&&"json"!==f?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};a(t,n,i),p=null}}if(p.open(e.method.toUpperCase(),s(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=v:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(v)},p.onabort=function(){p&&(n(u("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var y=(e.withCredentials||c(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;y&&(h[e.xsrfHeaderName]=y)}"setRequestHeader"in p&&r.forEach(h,function(e,t){"undefined"===typeof d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),f&&"json"!==f&&(p.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),n(e),p=null)}),d||(d=null),p.send(d)})}},function(e,t,n){"use strict";var r=n(84);e.exports=function(e,t,n,a,i){var s=new Error(e);return r(s,t,n,a,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(51);e.exports=function(e,t){t=t||{};var n={},a=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=l(void 0,e[a])):n[a]=l(e[a],t[a])}r.forEach(a,function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))}),r.forEach(i,c),r.forEach(s,function(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=l(void 0,e[a])):n[a]=l(void 0,t[a])}),r.forEach(o,function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))});var u=a.concat(i).concat(s).concat(o),d=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===u.indexOf(e)});return r.forEach(d,c),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){(function(t,r,a){e.exports=function(e,n,i){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(e),l=s(n),c=s(i);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,n)}}function C(){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}}).apply(this,arguments)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}var k=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return"3.1.10"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}(),T={},w=function(){function e(e){this._container=e}return e.create=function(t,n){return T[t]=new e(n),T[t]},e.get=function(e){return e||(e=Ba.getInstance()._iid),T[e]},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._container[e]},e.prototype.set=function(e,t){this._container[e]=t},e.prototype.remove=function(e){this._container.hasOwnProperty(e)&&delete this._container[e]},e}(),R=function(e,t){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function P(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})}function D(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function U(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var x,j=function(e){function t(n,r){var a=e.call(this,r)||this;return a.name="SendBirdException",a.code=r||0,a.message=n,Object.setPrototypeOf(a,t.prototype),a}return M(t,e),Object.defineProperty(t.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===t.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===t.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenRevokedError",{get:function(){return this.code===t.SESSION_TOKEN_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_KEY_EXPIRED",{get:function(){return 400309},enumerable:!1,configurable:!0}),Object.defineProperty(t,"USER_DEACTIVATED",{get:function(){return 400300},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NON_EXISTING_USER",{get:function(){return 400301},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_EXPIRED",{get:function(){return 400302},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_REVOKED",{get:function(){return 400310},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_INITIALIZATION",{get:function(){return 800100},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CONNECTION_REQUIRED",{get:function(){return 800101},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CONNECTION_CANCELED",{get:function(){return 800102},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_PARAMETER",{get:function(){return 800110},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NETWORK_ERROR",{get:function(){return 800120},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NETWORK_ROUTING_ERROR",{get:function(){return 800121},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MALFORMED_DATA",{get:function(){return 800130},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MALFORMED_ERROR_DATA",{get:function(){return 800140},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WRONG_CHANNEL_TYPE",{get:function(){return 800150},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MARK_AS_READ_RATE_LIMIT_EXCEEDED",{get:function(){return 800160},enumerable:!1,configurable:!0}),Object.defineProperty(t,"QUERY_IN_PROGRESS",{get:function(){return 800170},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ACK_TIMEOUT",{get:function(){return 800180},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LOGIN_TIMEOUT",{get:function(){return 800190},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WEBSOCKET_CONNECTION_CLOSED",{get:function(){return 800200},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WEBSOCKET_CONNECTION_FAILED",{get:function(){return 800210},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_FAILED",{get:function(){return 800220},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILE_UPLOAD_CANCEL_FAILED",{get:function(){return 800230},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_CANCELED",{get:function(){return 800240},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_DUPLICATED",{get:function(){return 800250},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILE_SIZE_LIMIT_EXCEEDED",{get:function(){return 800260},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_REQUEST_FAILED",{get:function(){return 800500},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_REFRESH_SUCCESS",{get:function(){return 800501},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_REFRESH_FAILED",{get:function(){return 800502},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CHANNEL_NOT_FOUND",{get:function(){return 900500},enumerable:!1,configurable:!0}),Object.defineProperty(t,"USER_NOT_MEMBER",{get:function(){return 900020},enumerable:!1,configurable:!0}),t}(Error),F=function(){function e(){this.sessionToken=null,this.sessionKey=null,this.eKey=null}return e.prototype.hasSession=function(){return!!this.sessionKey},e}(),H={},G=function(){function e(e,t){void 0===t&&(t={});var n=this;this._iid=e,Object.keys(t).forEach(function(e){var r=t[e];"function"==typeof r&&(n[e]=n.getClonedClass(r))}),H[e]=this}return e.get=function(e){return e?H[e]:{}},e.prototype.getClonedClass=function(e){var t=this._iid,n=function(n){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(this,e)||this}return M(r,n),Object.defineProperty(r,"_iid",{get:function(){return t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"_name",{get:function(){return e.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_iid",{get:function(){return t},enumerable:!1,configurable:!0}),r}(e);return n},e}(),B={verbose:"VERBOSE",info:"INFO",debug:"DEBUG",warn:"WARN",error:"ERROR",none:"NONE"},V=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.apply(this,arguments)}return _(n,[{key:"log",value:function(e){for(var t,n,r,a,i,s=this.getLogLevelText(e);s.length<8;)s+=" ";for(var o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];switch(l.unshift("[".concat(s,"]")),e){case"verbose":(t=console).log.apply(t,l);break;case"debug":(n=console).log.apply(n,l);break;case"info":(r=console).info.apply(r,l);break;case"warn":(a=console).warn.apply(a,l);break;case"error":(i=console).error.apply(i,l)}}},{key:"groupStart",value:function(){var e;(e=console).group.apply(e,arguments)}},{key:"groupEnd",value:function(){var e;(e=console).groupEnd.apply(e,arguments)}}]),n}(function(){function e(){f(this,e)}return _(e,[{key:"getLogLevelText",value:function(e){return B[e]}}]),e}()),z={DEBUG:"debug",PRODUCTION:"production"},q=z.PRODUCTION,K={VERBOSE:"verbose",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",NONE:"none"},Y=[K.NONE,K.ERROR,K.WARN,K.INFO,K.DEBUG,K.VERBOSE],W=K.WARN,Q=Y.indexOf(W),J=[new V],X=function(){function e(){f(this,e)}return _(e,null,[{key:"Mode",get:function(){return z}},{key:"mode",get:function(){return q},set:function(t){Object.keys(e.Mode).map(function(t){return e.Mode[t]}).indexOf(t)>-1&&(q=t)}},{key:"supportedLogLevels",get:function(){return K}},{key:"logLevel",get:function(){return Y[Q]},set:function(e){Y.includes(e)||(e=W),Q=Y.indexOf(e)}},{key:"defaultLogLevel",get:function(){return W}},{key:"isDisplayableLogLevel",value:function(e){var t=Y.indexOf(e);return 0<=t&&t<=Q}},{key:"log",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.isDisplayableLogLevel(t)&&J.forEach(function(e){return e.log.apply(e,[t].concat(r))})}},{key:"verbose",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.VERBOSE].concat(n))}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.DEBUG].concat(n))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.INFO].concat(n))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.WARN].concat(n))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.ERROR].concat(n))}},{key:"group",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=[];Array.isArray(n[n.length-1])&&(a=n.pop()),a.some(function(t){return e.isDisplayableLogLevel(t.level)})&&J.filter(function(e){return e instanceof V}).forEach(function(e){e.groupStart.apply(e,n),a.forEach(function(t){return e.log.apply(e,[t.level].concat(N(t.messages)))}),e.groupEnd()})}}]),e}(),$=function(){function e(){f(this,e),this._queue=[],this.locked=!1}return _(e,[{key:"lock",value:function(e){var t=this;this.locked?this._queue.push(e):(this.locked=!0,e(function(){return t.unlock()}))}},{key:"unlock",value:function(){if(this.locked=!1,this._queue.length>0){var e=this._queue.shift();this.lock(e)}}}]),e}(),Z=function(){function e(t){f(this,e),this.sb=t,this.mutex=new $,this.pingTimer=null,this.pingTimeoutTimer=null}return _(e,[{key:"ping",value:function(){var e=this,t=G.get(this.sb._iid).Command.bPing(),n=w.get(this.sb._iid).container,r=n.wsAdapter,a=n.pongTimeout;r.client.send(t),X.debug("`PING`"),this.pingTimeoutTimer=setTimeout(function(){X.debug("`PING` timeout."),e.stop(),r.client.handler&&r.client.handler.onError()},a)}},{key:"pong",value:function(){this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}},{key:"refreshTimer",value:function(){var e=this,t=w.get(this.sb._iid).container.pingInterval;this.mutex.lock(function(n){e.stop(),e.pingTimer=setInterval(function(){e.ping()},t),n()})}},{key:"start",value:function(){this.refreshTimer(),this.ping()}},{key:"stop",value:function(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}}]),e}(),ee=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},te=function(){return"undefined"==typeof window&&"undefined"!=typeof t&&("node"===t.title||void 0!==t.versions&&t.versions.node||"[object process]"===String(t))},ne=[j.CONNECTION_REQUIRED,j.NETWORK_ERROR,j.ACK_TIMEOUT,j.WEBSOCKET_CONNECTION_CLOSED,j.WEBSOCKET_CONNECTION_FAILED,j.FILE_UPLOAD_CANCEL_FAILED,j.REQUEST_CANCELED,500901,500910,900200],re=[j.SESSION_TOKEN_EXPIRED,j.SESSION_TOKEN_REVOKED,j.USER_DEACTIVATED,j.NON_EXISTING_USER],ae=[j.WEBSOCKET_CONNECTION_CLOSED,j.WEBSOCKET_CONNECTION_FAILED],ie=function(){function e(){}return e.deepEqual=function(e,t){if(e!==t){var n=L({},e),r=L({},t);return(!n.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||n.messageId===r.messageId)&&(!n.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||n.reqId===r.reqId)&&(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)===JSON.stringify(r))}return!0},e.isResendableError=function(e){return e>0&&ne.indexOf(e)>=0},e.isAutoResendableError=function(e){return e>0&&ae.indexOf(e)>=0},e.isNonAutoReconnectableError=function(e){return e>0&&re.indexOf(e)>=0},e.isFile=function(e){var t="object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!t)if(te()){if("undefined"!=typeof r)return e instanceof r}else{if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return t},e}();!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(x||(x={}));var se=function(){function e(){}var t;return e.isFileLikeObject=function(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type},t=e,e.convertFileToDataUrl=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.readAsDataURL(e)})},e.convertFileToArrayBuffer=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.readAsArrayBuffer(e)})},e.convertDataUrlToByteArray=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return[i,n]},e.convertDataURLtoFile=function(e,n){var r=t.convertDataUrlToByteArray(e),a=r[0],i=r[1];return new File([a],n,{type:i})},e.convertDataURLtoBlob=function(e){var n=t.convertDataUrlToByteArray(e),r=n[0],a=n[1];return new Blob([r],{type:a})},e.convertArrayBufferToFile=function(e,t){return new File([e],t)},e.isFile=function(e){return"undefined"!=typeof window&&"File"in window&&"undefined"!=typeof File&&e instanceof File},e.isBlob=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},e.isFileTypeBlob=function(e){return e===x.BLOB||e===x.FILE},e.convertBlobToBuffer=function(n){return P(void 0,void 0,void 0,function(){var a;return D(t,function(t){switch(t.label){case 0:return[4,e.convertFileToArrayBuffer(n)];case 1:return a=t.sent(),[2,r.from(a)]}})})},e}(),oe=function(){function e(e){var t=this;this.fields={},e&&Object.keys(e).forEach(function(n){t.fields[n]={value:e[n]},ie.isFile(e[n])&&(t.fields[n].filename=e[n].name)}),this.options={},this.internal=!1,this.upload={reqId:null,deleteRequest:null,progressHandler:null}}return e.prototype.add=function(e,t,n){void 0===n&&(n=null),this.fields[e]={value:t,filename:n}},e.prototype.remove=function(e){this.fields.hasOwnProperty(e)&&delete this.fields[e]},e.prototype.yield=function(){return P(this,void 0,void 0,function(){var e,n,r,a,i,s,o,c,u,d,h,f,p=this;return D(this,function(_){switch(_.label){case 0:for(e=!1,n=Object.keys(this.fields),r=0,a=n;r<a.length;r++)if(c=a[r],ie.isFile(this.fields[c].value)){e=!0;break}if(!e)return[3,10];i=new l.default,s=0,o=n,_.label=1;case 1:return s<o.length?(c=o[s],u=this.fields[c],ie.isFile(u.value)?(d=u.value).filename||d.name?(i.append(c,u.value,d.filename||d.name),[3,6]):[3,2]:[3,7]):[3,9];case 2:return d.data?(i.append(c,u.value,d.data.name),[3,6]):[3,3];case 3:return h=u.value,"undefined"!=typeof window&&"undefined"!=typeof t&&t.title.endsWith("node")&&t.versions&&t.versions.node&&"undefined"!=typeof Blob&&h instanceof Blob||"undefined"!=typeof File&&h instanceof File?[4,se.convertBlobToBuffer(h)]:[3,5];case 4:h=_.sent(),_.label=5;case 5:i.append(c,h,"unnamed"),_.label=6;case 6:return[3,8];case 7:ee()&&Array.isArray(u.value)?i.append(c,String(u.value)):i.append(c,u.value),_.label=8;case 8:return s++,[3,1];case 9:return[2,i];case 10:return f={},Object.keys(this.fields).forEach(function(e){f[e]=p.fields[e].value}),[2,f]}})})},e}(),le=function(e,t,n){return void 0===n&&(n=null),new Promise(function(r,a){t(function(t,i){void 0===i&&(i=null),n&&(w.get(e).get("isErrorFirstInCallback")?n(t,i):n(i,t)),t?a(t):r(i)})})},ce=function(){function e(t){f(this,e),this.sb=t,this.cls=G.get(this.sb._iid)}return _(e,[{key:"checkRouting",value:function(e){if(this.sb.customApiHost&&this.sb.customWsHost)"function"==typeof e&&e(null,{apiHost:this.sb.customApiHost,wsHost:this.sb.customWsHost});else{var t=this.sb.getApplicationId();e(null,{apiHost:"https://api-".concat(t,".sendbird.com"),wsHost:"wss://ws-".concat(t,".sendbird.com")})}}},{key:"_buildUrl",value:function(e){var t=e.apiHost,n=e.url,r=e.params;return n?r&&r.internal?"".concat(t,"/v").concat(k.SDK_MAJOR_VERSION,"/sdk").concat(n):"".concat(t,"/v").concat(k.SDK_MAJOR_VERSION).concat(n):t}},{key:"_createHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noSessionKey,r=void 0!==n&&n,a=t.accessToken,i=void 0===a?null:a,s=e instanceof l.default&&"function"==typeof e.getHeaders?e.getHeaders():{},o=w.get(this.sb._iid),c=o.container,u=c.appId,d=c.auth,h=c.extensions,f=c.getUserAgentWithExtensions,p=Ba.getAppVersion(),_="JS,".concat(k.OS_VERSION,",").concat(k.SDK_VERSION,",").concat(u);return p&&(_+=",".concat(p)),s.SendBird=_,s["SB-User-Agent"]=encodeURIComponent(f(h)),!r&&d.sessionKey&&(s["Session-Key"]=d.sessionKey),i&&(s["App-Id"]=u,s["Access-Token"]=i),s["Request-Sent-Timestamp"]=(new Date).getTime().toString(),s}},{key:"_createQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=[];return Object.keys(t).forEach(function(e){var r=t[e];if(null!=r){var a="";a="object"===h(r)?Array.isArray(r)?r.map(function(e){return encodeURIComponent("string"==typeof e?e.trim():e)}).join(","):encodeURIComponent(JSON.stringify(r)):encodeURIComponent(r),n.push("".concat(e,"=").concat(a))}}),n.length>0?"".concat(e,"?").concat(n.join("&")):e}catch(t){return X.debug("createWithEncodedGetParams is failed. - ",t),e}}},{key:"_request",value:function(e,t,n,r){var a=this;this.checkRouting(function(i,s){if(i)r(new j("Request failed.",j.REQUEST_FAILED),null);else{var c=a._buildUrl({apiHost:s.apiHost,url:t,params:n});(n?n.yield():Promise.resolve({})).then(function(i){var s=a._createHeader(i,n?n.options:{}),u=[{level:X.supportedLogLevels.DEBUG,messages:["url:",t]},{level:X.supportedLogLevels.DEBUG,messages:["data:",i]}],d=null;switch(e){case"GET":case"DELETE":d=a._createQuery(c,i);break;case"POST":case"PUT":d=c}var h=null;if("undefined"==typeof ServiceWorker||"undefined"==typeof ServiceWorkerRegistration||"undefined"!=typeof ServiceWorkerContainer||te()||"function"!=typeof fetch)switch(e){case"GET":h=o.default.get(d,{headers:s,validateStatus:a._validateStatus});break;case"POST":var f=null;if(i instanceof l.default){var p=o.default.CancelToken.source();f=p.token;var _=a.cls.FileMessageQueue,m=n.upload.reqId;m&&(u.push({level:X.supportedLogLevels.DEBUG,messages:["request id:",m]}),_.uploadRequest[m]=p)}h=o.default.post(d,"function"==typeof i.getBuffer?i.getBuffer():i,{headers:s,validateStatus:a._validateStatus,cancelToken:f,onUploadProgress:function(e){n.upload.progressHandler&&n.upload.progressHandler(e,n.upload.reqId)}});break;case"PUT":h=o.default.put(d,i,{headers:s,validateStatus:a._validateStatus});break;case"DELETE":h=o.default.delete(d,{headers:s,validateStatus:a._validateStatus})}else{var g={method:e,headers:s};switch(e){case"GET":break;case"POST":if(i instanceof l.default){if("function"==typeof AbortController){var v=new AbortController,y=v.signal;g.signal=y;var E=a.cls.FileMessageQueue,b=n.upload.reqId;b&&(u.push({level:X.supportedLogLevels.DEBUG,messages:["request id:",b]}),E.uploadRequest[b]=v)}g.body="function"==typeof i.getBuffer?i.getBuffer():i}else s["Content-Type"]="application/json; charset=utf-8",g.body=JSON.stringify(i);break;case"PUT":i instanceof l.default?g.body="function"==typeof i.getBuffer?i.getBuffer():i:(s["Content-Type"]="application/json; charset=utf-8",g.body=JSON.stringify(i))}h=fetch(d,g).then(function(e){return e.json().then(function(t){if(!a._validateStatus(e.status))throw{request:{isAbort:!1},response:{data:t}};return Promise.resolve({data:t})})})}X.group("".concat(e," request"),u),u=[],h.then(function(t){try{var a=t.data;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest(),u.push({level:X.supportedLogLevels.DEBUG,messages:["data:",a]}),r(null,a)}catch(e){throw{code:888e3,rawError:e}}}).catch(function(i){if(888e3===i.code)throw i.rawError;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest();var s=a._handleError(i);if(u.push({level:X.supportedLogLevels.DEBUG,messages:["error:",s]}),t&&n)if(n.options&&n.options.isSessionRefresh)r(s,null);else{var o=w.get(a.sb._iid).container.sessionManager;o.isSessionError(s)?o.refreshSessionIfExpiredError(s).then(function(){return r(new j("Session is refreshed successfully.",j.SESSION_REFRESH_SUCCESS),null)}).catch(function(e){return r(new j("Session refresh failed.",j.SESSION_REFRESH_FAILED),null)}):r(s,null)}else r(s,null)}).finally(function(){return X.group("".concat(e," response"),u)})})}})}},{key:"_validateStatus",value:function(e){return e>=200&&e<400}},{key:"_handleError",value:function(e){var t=e.request,n=e.response;if(t){if(t.isAbort||t.aborted)return new j("Request has been canceled.",j.REQUEST_CANCELED);if(n){var r=n.data,a=r?r.message:"Request failed.",i=r?r.code:j.REQUEST_FAILED;return new j(a,i)}return new j("Request failed.",j.REQUEST_FAILED)}return new j("There was a network error.",j.NETWORK_ERROR)}},{key:"get",value:function(e,t,n){this._request("GET",e,t,n)}},{key:"dummyCall",value:function(e){this._request("GET",null,null,e)}},{key:"post",value:function(e,t,n){this._request("POST",e,t,n)}},{key:"put",value:function(e,t,n){this._request("PUT",e,t,n)}},{key:"delete",value:function(e,t,n){this._request("DELETE",e,t,n)}},{key:"refreshSessionKey",value:function(t,n){var r=this,a=t.accessToken;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_SESSION_KEY.replace("%s",encodeURIComponent(i.userId)),o=new oe;o.add("expiring_session",1),o.options.isSessionRefresh=!0,o.options.noSessionKey=!0,o.options.accessToken=a,r.post(s,o,n)}})}},{key:"updateCurrentUserInfo",value:function(t,n){var r=this,a=t.nickname,i=t.profileUrl,s=t.profileImage,o=t.preferredLanguages;this.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var c=e.Path.USERS_USERID.replace("%s",encodeURIComponent(l.userId)),u=new oe;a&&u.add("nickname",a),i&&u.add("profile_url",i),s&&u.add("profile_file",s,s.name),o&&u.add("preferred_languages",o),r.put(c,u,n)}})}},{key:"getMyGroupChannelChangeLogs",value:function(t,n){var r=this;return le(this.sb._iid,function(n){var a=t.ts,i=t.token,s=t.customTypes,o=t.includeEmpty,l=t.includeFrozen;r.sb.ConnectionManager.ready(function(t,c){if(t)n(t,null);else{var u=e.Path.USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS.replace("%s",encodeURIComponent(c.userId)),d=new oe({show_read_receipt:!0,show_delivery_receipt:!0,show_member:!0});i&&d.add("token",i),a&&d.add("change_ts",a),s&&s.length>0&&d.add("custom_types",s),"boolean"==typeof o&&d.add("show_empty",o),"boolean"==typeof l&&d.add("show_frozen",l),r.get(u,d,n)}})},n)}},{key:"getChannelInvitationPreference",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"getGroupChannelCount",value:function(t,n){var r=this,a=t.memberStateFilter;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=r.cls.GroupChannel,o=e.Path.USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(i.userId)),l="";switch(a){case s.MemberStateFilter.JOINED:l="joined";break;case s.MemberStateFilter.INVITED:l="invited";break;case s.MemberStateFilter.INVITED_BY_FRIEND:l="invited_by_friend";break;case s.MemberStateFilter.INVITED_BY_NON_FRIEND:l="invited_by_non_friend";break;default:l="all"}var c=new oe({state:l});r.get(o,c,n)}})}},{key:"getUnreadItemCount",value:function(t,n){var r=this,a=t.keys;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_UNREAD_ITEM_COUNT.replace("%s",encodeURIComponent(i.userId)),o=new oe({item_keys:a});r.get(s,o,n)}})}},{key:"getTotalUnreadMessageCount",value:function(t,n){var r=this,a=t.customTypesFilter,i=t.superChannelFilter;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(s.userId)),l=new oe({super_mode:i});null!==a&&a.length>0&&l.add("custom_types",a),r.get(o,l,n)}})}},{key:"getTotalUnreadChannelCount",value:function(t,n){var r=this,a=t.customTypesFilter,i=t.superChannelFilter;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(s.userId)),l=new oe({super_mode:i});null!==a&&a.length>0&&l.add("custom_types",a),r.get(o,l,n)}})}},{key:"searchMessages",value:function(t,n){var r=this,a=t.keyword,i=t.limit,s=t.reverse,o=t.exactMatch,l=t.channelUrl,c=t.channelCustomType,u=t.messageTimestampFrom,d=t.messageTimestampTo,h=t.order,f=t.nextToken,p=t.advancedQuery,_=t.targetFields;this.sb.ConnectionManager.ready(function(t,m){if(t)n(t,null);else{var g=e.Path.SEARCH_MESSAGE,v=new oe({limit:i,reverse:s,query:a,custom_type:c});u&&v.add("message_ts_from",u),d&&v.add("message_ts_to",d),l&&v.add("channel_url",l),h&&v.add("sort_field",h),"boolean"==typeof o&&v.add("exact_match",o),null!==f&&f.length>0&&v.add("after",f),"boolean"==typeof p&&v.add("advanced_query",p),_&&Array.isArray(_)&&v.add("target_fields",_),r.get(g,v,n)}})}},{key:"markAsReadAll",value:function(t,n){var r=this,a=t.channelUrls;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(i.userId)),o=new oe;a&&o.add("channel_urls",a),r.put(s,o,n)}})}},{key:"markAsDelivered",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED.replace("%s",encodeURIComponent(a)),l=new oe;i&&l.add("user_id",i),r.put(o,l,n)}})}},{key:"setChannelInvitationPreference",value:function(t,n){var r=this,a=t.isAutoAccept;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(i.userId)),o=new oe({auto_accept:a});r.put(s,o,n)}})}},{key:"blockUser",value:function(t,n){var r=this,a=t.blockedUserId;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(i.userId)),o=new oe({target_id:a});r.post(s,o,n)}})}},{key:"unblockUser",value:function(t,n){var r=this,a=t.unblockedUserId;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"getPushTriggerOption",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"setPushTriggerOption",value:function(t,n){var r=this,a=t.pushTriggerOption;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId)),o=new oe({push_trigger_option:a});r.put(s,o,n)}})}},{key:"getPushTokens",value:function(t,n){var r=this,a=t.ts,i=t.token,s=t.type;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSH_DEVICE_TOKENS.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(s)),c=new oe;i&&c.add("token",i),a&&c.add("created_ts",a),r.get(l,c,n)}})}},{key:"getPushTemplate",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"setPushTemplate",value:function(t,n){var r=this,a=t.templateName;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(i.userId)),o=new oe({name:a});r.put(s,o,n)}})}},{key:"getDoNotDisturb",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"setDoNotDisturb",value:function(t,n){var r=this,a=t.doNotDisturbOn,i=t.startHour,s=t.startMin,o=t.endHour,l=t.endMin,c=t.timezone;this.sb.ConnectionManager.ready(function(t,u){if(t)n(t,null);else{var d=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(u.userId)),h=new oe({do_not_disturb:a,start_hour:i,start_min:s,end_hour:o,end_min:l,timezone:c});r.put(d,h,n)}})}},{key:"getSnoozePeriod",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"setSnoozePeriod",value:function(t,n){var r=this,a=t.snoozeOn,i=t.startTs,s=t.endTs;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(o.userId)),c=new oe({snooze_enabled:a,snooze_start_ts:i,snooze_end_ts:s});r.put(l,c,n)}})}},{key:"registerGCMPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(i.userId)),o=new oe({gcm_reg_token:a,always_push:!0});r.post(s,o,n)}})}},{key:"unregisterGCMPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"unregisterAllGCMPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}})}},{key:"registerAPNSPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(i.userId)),o=new oe({apns_device_token:a,always_push:!0});r.post(s,o,n)}})}},{key:"unregisterAPNSPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"unregisterAllAPNSPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}})}},{key:"unregisterAllPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}})}},{key:"loadFriendList",value:function(t,n){var r=this,a=t.token,i=t.limit;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.FRIENDS.replace("%s",encodeURIComponent(s.userId)),l=new oe({limit:i,token:a});r.get(o,l,n)}})}},{key:"getFriendChangeLogsByToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS_CHANGE_LOGS.replace("%s",encodeURIComponent(i.userId)),o=new oe;a&&o.add("token",a),r.get(s,o,n)}})}},{key:"addFriends",value:function(t,n){var r=this,a=t.userIds;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),o=new oe({user_ids:a});r.post(s,o,n)}})}},{key:"deleteFriends",value:function(t,n){var r=this,a=t.userIds;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),o=new oe({user_ids:a});r.delete(s,o,n)}})}},{key:"uploadFriendDiscoveries",value:function(t,n){var r=this,a=t.discoveries;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),o=[];a.forEach(function(e){o.push({friend_discovery_key:e.friendDiscoveryKey,friend_name:"string"==typeof e.friendName||e.friendName?e.friendName:null})});var l=new oe({friend_discoveries:o});r.put(s,l,n)}})}},{key:"deleteFriendDiscoveries",value:function(t,n){var r=this,a=t.discoveryKeys;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),o=new oe({friend_discovery_keys:a});r.delete(s,o,n)}})}},{key:"loadUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.userIdsFilter,o=t.metaDataKeyFilter,l=t.metaDataValuesFilter,c=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready(function(t,u){if(t)n(t,null);else{var d=e.Path.USERS,h=new oe({token:a,limit:i});s&&s.length>0&&h.add("user_ids",s),o&&l&&l.length>0&&(h.add("metadatakey",o),h.add("metadatavalues_in",l)),c&&h.add("nickname_startswith",c),r.get(d,h,n)}})}},{key:"loadBlockedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.userIdsFilter;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(o.userId)),c=new oe({token:a,limit:i});s&&s.length>0&&c.add("user_ids",s),r.get(l,c,n)}})}},{key:"createUserMetaData",value:function(t,n){var r=this,a=t.metaData;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(i.userId)),o=new oe({metadata:a});r.post(s,o,n)}})}},{key:"updateUserMetaData",value:function(t,n){var r=this,a=t.metaData,i=t.upsert;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(s.userId)),l=new oe({metadata:a,upsert:i});r.put(o,l,n)}})}},{key:"deleteUserMetaData",value:function(t,n){var r=this,a=t.metaDataKey;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"deleteAllUserMetaData",value:function(t,n){var r=this;this.sb.ConnectionManager.ready(function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}})}},{key:"getMessageChangeLogs",value:function(t,n){var r=this;return le(this.sb._iid,function(n){var a=t.channelUrl,i=t.ts,s=t.timestamp,o=t.token,l=t.isOpenChannel,c=t.includeMetaArray,u=t.includeReaction,d=t.includeReactions,h=t.includeReplies,f=t.includeParentMessageText,p=t.includeThreadInfo,_=t.replyType,m=t.includeParentMessageInfo,g=t.includePollDetails;r.sb.ConnectionManager.ready(function(t,v){if(t)n(t,null);else{var y=l?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)),E=new oe;o&&E.add("token",o),i&&E.add("change_ts",i),s&&E.add("change_ts",s),"boolean"==typeof c&&E.add("with_sorted_meta_array",c),"boolean"==typeof d?E.add("include_reactions",d):E.add("include_reactions","boolean"==typeof u&&u),"boolean"==typeof p&&E.add("include_thread_info",p),"string"==typeof _?E.add("include_reply_type",_):E.add("include_reply_type","boolean"==typeof h&&h?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof m?E.add("include_parent_message_info",m):E.add("include_parent_message_info","boolean"==typeof f&&f),"boolean"==typeof g&&E.add("include_poll_details",g),r.get(y,E,n)}})},n)}},{key:"getMyMutedInfo",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.get(l,null,n)}})}},{key:"loadBannedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var c=o?e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)),u=new oe({token:a,limit:i});r.get(c,u,n)}})}},{key:"loadMutedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var c=o?e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)),u=new oe({token:a,limit:i});r.get(c,u,n)}})}},{key:"getMessageList",value:function(t,n){var r=this;return le(this.sb._iid,function(n){var a=t.channel,i=t.token,s=t.tokenType,o=t.isInclusive,l=t.prevResultSize,c=void 0===l?0:l,u=t.nextResultSize,d=void 0===u?0:u,h=t.shouldReverse,f=t.messageType,p=t.customType,_=t.customTypes,m=t.senderUserIds,g=t.includeMetaArray,v=t.includeReaction,y=t.includeReactions,E=t.includeReplies,b=t.includeParentMessageText,C=t.includeThreadInfo,O=t.replyType,N=t.includeParentMessageInfo,S=t.showSubchannelMessagesOnly,A=t.includePollDetails,I=t.rootMessageId,k=t.parentMessageId;r.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var u=a.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url),T=new oe({is_sdk:String(!0),prev_limit:String(c),next_limit:String(d),include:String(o),reverse:String(h)});"timestamp"===s?T.add("message_ts",i):"messageId"===s&&T.add("message_id",String(i)),f&&T.add("message_type",String(f)),Array.isArray(_)&&(0===_.length&&("string"==typeof p?_.push(p):_.push("*")),T.add("custom_types",_)),Array.isArray(m)&&m.length>0&&T.add("sender_ids",m),"boolean"==typeof g&&T.add("with_sorted_meta_array",g),"boolean"==typeof y?T.add("include_reactions",y):T.add("include_reactions","boolean"==typeof v&&v),"boolean"==typeof C&&T.add("include_thread_info",C),"string"==typeof O?T.add("include_reply_type",O):T.add("include_reply_type","boolean"==typeof E&&E?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof N?T.add("include_parent_message_info",N):T.add("include_parent_message_info","boolean"==typeof b&&b),"boolean"==typeof S&&a.isOpenChannel()&&T.add("show_subchannel_messages_only",S),"boolean"==typeof A&&T.add("include_poll_details",A),I&&T.add("root_message_id",I),k&&T.add("parent_message_id",k),r.get(u,T,n)}})},n)}},{key:"checkMessageHugeGap",value:function(t,n){var r=this;return le(this.sb._iid,function(n){var a=t.channelUrl;t.channelType;var i=t.messageType,s=void 0===i?"":i,o=t.customTypes,l=void 0===o?["*"]:o,c=t.senderUserIds,u=void 0===c?[]:c,d=t.includeReactions,h=void 0===d||d,f=t.includeMetaArray,p=void 0!==f&&f,_=t.showSubchannelMessagesOnly,m=void 0!==_&&_,g=t.threshold,v=t.previous,y=t.next,E="".concat(e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_GAP.replace("%s",encodeURIComponent(a))),b=new oe({huge_gap_threshold:g,prev_start_ts:v.from,prev_end_ts:v.to,prev_cache_count:v.cachedCount,next_start_ts:y.from,next_end_ts:y.to,next_cache_count:y.cachedCount,reverse:!0,custom_types:l,message_type:s,include_reactions:h,with_sorted_meta_array:p,show_subchannel_messages_only:m});Array.isArray(u)&&u.length>0&&b.add("sender_ids",u),r.get(E,b,n)},n)}},{key:"translateUserMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.messageId,o=t.translationTargetLanguages;this.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var c=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",s),u=new oe({target_langs:o});r.post(c,u,n)}})}},{key:"getMessage",value:function(t,n){var r=this,a=t.channel,i=t.messageId,s=t.includeMetaArray,o=t.includeReactions,l=t.includeParentMessageText,c=t.includeThreadInfo,u=t.includeParentMessageInfo,d=t.includePollDetails;this.sb.ConnectionManager.ready(function(t,h){if(t)n(t,null);else{var f=a.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)),p=new oe({is_sdk:String(!0)});"boolean"==typeof s&&p.add("with_sorted_meta_array",s),"boolean"==typeof o&&p.add("include_reactions",o),"boolean"==typeof c&&p.add("include_thread_info",c),"boolean"==typeof u?p.add("include_parent_message_info",u):p.add("include_parent_message_info","boolean"==typeof l&&l),"boolean"==typeof d&&p.add("include_poll_details",d),r.get(f,p,n)}})}},{key:"deleteMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.messageId;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s));r.delete(l,null,n)}})}},{key:"muteUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.description,o=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready(function(t,c){if(t)n(t,null);else{var u=l?e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)),d=new oe({user_id:i});o&&(o>0||-1!==o)&&d.add("seconds",o),s&&d.add("description",s),r.post(u,d,n)}})}},{key:"unmuteUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(l,null,n)}})}},{key:"banUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.description,o=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready(function(t,c){if(t)n(t,null);else{var u=l?e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)),d=new oe({user_id:i});s&&d.add("description",s),d.add("seconds",String(o)),r.post(u,d,n)}})}},{key:"unbanUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(l,null,n)}})}},{key:"getMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.keys;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),c=new oe({keys:s});r.get(l,c,n)}})}},{key:"createMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.metaCounter;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),c=new oe({metacounter:s});r.post(l,c,n)}})}},{key:"updateMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.metaCounter,o=t.upsert,l=t.mode;this.sb.ConnectionManager.ready(function(t,c){if(t)n(t,null);else{var u=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),d=new oe({metacounter:s,upsert:o,mode:l});r.put(u,d,n)}})}},{key:"deleteMetaCounter",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.key;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s);r.delete(l,null,n)}})}},{key:"deleteAllMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a));r.delete(o,null,n)}})}},{key:"getMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.keys;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),c=new oe({keys:s,include_ts:!0});r.get(l,c,n)}})}},{key:"createMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.metaData;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),c=new oe({metadata:s,include_ts:!0});r.post(l,c,n)}})}},{key:"updateMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.metaData,o=t.upsert;this.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var c=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),u=new oe({metadata:s,upsert:o,include_ts:!0});r.put(c,u,n)}})}},{key:"deleteMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.key;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s),c=new oe({include_ts:!0});r.delete(l,c,n)}})}},{key:"deleteAllMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),l=new oe({include_ts:!0});r.delete(o,l,n)}})}},{key:"loadOperatorList",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.token,o=t.limit;this.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var c=i?e.Path.OPENCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)),u=new oe({token:s,limit:o});r.get(c,u,n)}})}},{key:"getOpenChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.internalCall;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),l=new oe({});l.internal=i===k.INTERNAL_CALL,r.get(o,l,n)}})}},{key:"loadOpenChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.nameKeyword,o=t.urlKeyword,l=t.customTypes,c=t.includeFrozen,u=t.includeMetaData;this.sb.ConnectionManager.ready(function(t,d){if(t)n(t,null);else{var h=e.Path.OPENCHANNELS,f=new oe({token:a,limit:i});s&&f.add("name_contains",s),o&&f.add("url_contains",o),l&&l.length>0&&f.add("custom_types",l),"boolean"==typeof c&&f.add("show_frozen",c),"boolean"==typeof u&&f.add("show_metadata",u),r.get(h,f,n)}})}},{key:"loadParticipantList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.channelUrl;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",encodeURIComponent(s)),c=new oe({token:a,limit:i});r.get(l,c,n)}})}},{key:"createOpenChannel",value:function(t,n){var r=this,a=t.name,i=t.coverUrlOrImage,s=t.data,o=t.operatorUserIds,l=t.customType,c=t.channelUrl;this.sb.ConnectionManager.ready(function(t,u){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS,h=new oe;"string"==typeof i&&h.add("cover_url",i),ie.isFile(i)&&h.add("cover_file",i),null!==c&&"string"==typeof c&&h.add("channel_url",c),null!==a&&"string"==typeof a&&h.add("name",a),s&&h.add("data",s),o&&(Array.isArray(o)?h.add("operators",o):h.add("operators",[o])),l&&h.add("custom_type",l),r.post(d,h,n)}})}},{key:"updateOpenChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.name,s=t.coverUrlOrImage,o=t.data,l=t.operatorUserIds,c=t.customType;this.sb.ConnectionManager.ready(function(t,u){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),h=new oe;"string"==typeof s&&h.add("cover_url",s),ie.isFile(s)&&h.add("cover_file",s,s.name),null!==i&&"string"==typeof i&&h.add("name",i),null!==o&&"string"==typeof o&&h.add("data",o),null!==l&&(Array.isArray(l)?h.add("operator_ids",l):h.add("operator_ids",[l])),null!==c&&"string"==typeof c&&h.add("custom_type",c),r.put(d,h,n)}})}},{key:"deleteOpenChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"getGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.showMember,s=t.internalCall;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),c=new oe({show_member:i,show_read_receipt:!0,show_delivery_receipt:!0});c.internal=s===k.INTERNAL_CALL,r.get(l,c,n)}})}},{key:"loadGroupChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.includeEmpty,o=t.order,l=t.userIdsFilter,c=t.nicknameContainsFilter,u=t.channelNameContainsFilter,d=t.channelUrlsFilter,h=t.customTypesFilter,f=t.customTypeStartsWithFilter,p=t.memberStateFilter,_=t.superChannelFilter,m=t.publicChannelFilter,g=t.unreadChannelFilter,v=t.metadataOrderKeyFilter,y=t.metadataKey,E=t.metadataValues,b=t.metadataValueStartsWith,C=t.hiddenChannelFilter,O=t.searchFilter,N=t.includeFrozen,S=t.includeMetaData;return le(this.sb._iid,function(t){r.sb.ConnectionManager.ready(function(n,A){if(n)t(n,null);else{var I=e.Path.MYGROUPCHANNELS.replace("%s",encodeURIComponent(A.userId)),k=new oe({token:a,limit:i,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),member_state_filter:p});h&&h.length>0&&k.add("custom_types",h),c&&k.add("members_nickname_contains",c),u&&k.add("name_contains",u),O&&O.hasOwnProperty("search_query")&&O.hasOwnProperty("search_fields")&&(k.add("search_query",O.search_query),k.add("search_fields",O.search_fields)),l&&l.userIds&&l.userIds.length>0&&(l.includeMode?(k.add("members_include_in",l.userIds),k.add("query_type",l.queryType.toUpperCase())):k.add("members_exactly_in",l.userIds)),d&&d.length>0&&k.add("channel_urls",d),k.add("super_mode",_),k.add("public_mode",m),k.add("unread_filter",g),v&&k.add("metadata_order_key",v),y&&k.add("metadata_key",y),E&&E.length>0&&k.add("metadata_values",E),b&&k.add("metadata_value_startswith",b),f&&k.add("custom_type_startswith",f),C&&k.add("hidden_mode",C),"boolean"==typeof N&&k.add("show_frozen",N),"boolean"==typeof S&&k.add("show_metadata",S),r.get(I,k,t)}})},n)}},{key:"loadPublicGroupChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.includeEmpty,o=t.order,l=t.channelNameContainsFilter,c=t.channelUrlsFilter,u=t.customTypesFilter,d=t.customTypeStartsWithFilter,h=t.superChannelFilter,f=t.membershipFilter,p=t.metadataOrderKeyFilter,_=t.metadataKey,m=t.metadataValues,g=t.metadataValueStartsWith,v=t.includeFrozen,y=t.includeMetaData;this.sb.ConnectionManager.ready(function(t,E){if(t)n(t,null);else{var b=r.cls.GroupChannel,C=e.Path.GROUPCHANNELS,O=new oe({token:a,limit:i,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),public_mode:b.PublicChannelFilter.PUBLIC,public_membership_mode:f});u&&u.length>0&&O.add("custom_types",u),l&&O.add("name_contains",l),c&&c.length>0&&O.add("channel_urls",c),O.add("super_mode",h),p&&O.add("metadata_order_key",p),_&&O.add("metadata_key",_),m&&m.length>0&&O.add("metadata_values",m),g&&O.add("metadata_value_startswith",g),d&&O.add("custom_type_startswith",d),"boolean"==typeof v&&O.add("show_frozen",v),"boolean"==typeof y&&O.add("show_metadata",y),r.get(C,O,n)}})}},{key:"createGroupChannel",value:function(t,n){var r=this,a=t.isDistinct,i=t.isSuper,s=t.isBroadcast,o=t.isPublic,l=t.channelUrl,c=t.isDiscoverable,u=t.isStrict,d=t.name,h=t.data,f=t.customType,p=t.coverUrl,_=t.coverImage,m=t.accessCode,g=t.isEphemeral,v=t._invitedUserIds,y=void 0===v?[]:v,E=t.operatorUserIds,b=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready(function(t,v){if(t)n(t,null);else{var C=e.Path.GROUPCHANNELS,O=new oe({user_ids:[v.userId].concat(N(y)).filter(function(e,t,n){return t===n.indexOf(e)})});null!==p&&"string"==typeof p&&O.add("cover_url",p),ie.isFile(_)&&O.add("cover_file",_,_.name),null!==l&&O.add("channel_url",l),null!==a&&O.add("is_distinct",a),null!==i&&O.add("is_super",i),null!==s&&O.add("is_broadcast",s),null!==o&&O.add("is_public",o),null!==c&&O.add("is_discoverable",c),null!==u&&O.add("strict",u),null!==g&&O.add("is_ephemeral",g),m&&O.add("access_code",m),null!==d&&"string"==typeof d&&O.add("name",d),h&&O.add("data",h),f&&O.add("custom_type",f),Array.isArray(E)&&E.length>0&&O.add("operator_ids",E),null!==b&&b>-1&&O.add("message_survival_seconds",b),r.post(C,O,n)}})}},{key:"updateGroupChannel",value:function(t,n){var r=this,a=t.isDistinct,i=t.isPublic,s=t.channelUrl,o=t.isDiscoverable,l=t.name,c=t.data,u=t.customType,d=t.coverUrl,h=t.coverImage,f=t.accessCode,p=t.operatorUserIds,_=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready(function(t,m){if(t)n(t,null);else{var g=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(s)),v=new oe;null!==a&&v.add("is_distinct",a),null!==i&&v.add("is_public",i),null!==o&&v.add("is_discoverable",o),null!==f&&v.add("access_code",f),null!==d&&"string"==typeof d&&v.add("cover_url",d),ie.isFile(h)&&v.add("cover_file",h,h.name),null!==l&&"string"==typeof l&&v.add("name",l),null!==c&&"string"==typeof c&&v.add("data",c),null!==u&&"string"==typeof u&&v.add("custom_type",u),null!==p&&(Array.isArray(p)?v.add("operator_ids",p):p&&v.add("operator_ids",[p])),null!==_&&_>-1&&v.add("message_survival_seconds",_),r.put(g,v,n)}})}},{key:"addOperators",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=void 0!==i&&i,o=t.operatorUserIds;this.sb.ConnectionManager.ready(function(t,i){if(!t){var l=(s?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),c=new oe({operator_ids:o});r.post(l,c,n)}})}},{key:"removeOperators",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=void 0!==i&&i,o=t.operatorUserIds;this.sb.ConnectionManager.ready(function(t,i){if(!t){var l=(s?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),c=new oe({operator_ids:o});r.delete(l,c,n)}})}},{key:"inviteToGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.userIds;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(a)),l=new oe({user_ids:i});r.post(o,l,n)}})}},{key:"acceptInvitation",value:function(t,n){var r=this,a=t.channelUrl,i=t.accessCode;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(a)),l=new oe({user_id:s.userId});i&&l.add("access_code",i),r.put(o,l,n)}})}},{key:"declineInvitation",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(a)),o=new oe({user_id:i.userId});r.put(s,o,n)}})}},{key:"joinGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.accessCode;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_JOIN.replace("%s",encodeURIComponent(a)),l=new oe({user_id:s.userId});i&&l.add("access_code",i),r.put(o,l,n)}})}},{key:"leaveGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(a)),o=new oe({user_id:i.userId});r.put(s,o,n)}})}},{key:"hideGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.hidePreviousMessages,s=t.allowAutoUnhide;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a)),c=new oe({user_id:o.userId,hide_previous_messages:i,allow_auto_unhide:s});r.put(l,c,n)}})}},{key:"unhideGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"freeze",value:function(t,n){var r=this,a=t.channelUrl,i=t.isGroupChannel,s=t.freezing;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=i?e.Path.GROUPCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)),c=new oe({freeze:s});r.put(l,c,n)}})}},{key:"deleteGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"loadMemberList",value:function(t,n){var r=this,a=t.channelUrl,i=t.token,s=t.limit,o=t.mutedMemberFilter,l=t.order,c=t.memberStateFilter,u=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready(function(t,d){if(t)n(t,null);else{var h=e.Path.GROUPCHANNELS_MEMBERS.replace("%s",encodeURIComponent(a)),f=new oe({token:i,limit:s,order:l.toLowerCase(),muted_member_filter:o.toLowerCase(),member_state_filter:c,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0});u&&f.add("nickname_startswith",u),r.get(h,f,n)}})}},{key:"report",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.reportCategory,o=t.reportingUserId,l=t.reportDescription;this.sb.ConnectionManager.ready(function(t,c){if(t)n(t,null);else{var u=e.Path.REPORT_CHANNELS.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)),d=new oe({report_category:s});null!=o&&d.add("reporting_user_id",o),null!=l&&d.add("report_description",l),r.post(u,d,n)}})}},{key:"reportUser",value:function(t,n){var r=this,a=t.offendingUserId,i=t.channelUrl,s=t.isOpenChannel,o=t.reportCategory,l=t.reportingUserId,c=t.reportDescription;this.sb.ConnectionManager.ready(function(t,u){if(t)n(t,null);else{var d=e.Path.REPORT_USERS.replace("%s",encodeURIComponent(a)),h=new oe({channel_url:i,channel_type:s?"open_channels":"group_channels",report_category:o});null!=l&&h.add("reporting_user_id",l),null!=c&&h.add("report_description",c),r.post(d,h,n)}})}},{key:"reportMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.messageId,o=t.reportCategory,l=t.reportingUserId,c=t.reportDescription,u=t.offendingUserId;this.sb.ConnectionManager.ready(function(t,d){if(t)n(t,null);else{var h=e.Path.REPORT_MESSAGES.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)),f=new oe({report_category:o,offending_user_id:u});null!=l&&f.add("reporting_user_id",l),null!=c&&f.add("report_description",c),r.post(h,f,n)}})}},{key:"sendUserMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.message,o=t.data,l=t.customType,c=t.translationTargetLanguages,u=t.metaArrays,d=t.mentionType,h=t.mentionedUserIds,f=t.mentionedMessageTemplate,p=t.pushNotificationDeliveryOption,_=t.rootMessageId,m=t.parentMessageId,g=t.appleCriticalAlertOptions,v=t.pollId,y=t.isReplyToChannel;this.sb.ConnectionManager.ready(function(t,E){if(t)n(t,null);else{var b=r.cls.FileMessageParams,C=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)),O=new oe({message_type:"MESG",user_id:E.userId,message:s,mention_type:d,mentioned_user_ids:[]});null!=o&&O.add("data",o),null!=l&&O.add("custom_type",l),c&&O.add("translation_target_langs",c),u&&u.length>0&&O.add("sorted_metaarray",u.map(function(e){return e.encode()})),d===r.cls.BaseMessageParams.MentionType.CHANNEL?O.add("mentioned_user_ids",[]):Array.isArray(h)&&h.length>0&&O.add("mentioned_user_ids",h),f&&O.add("mentioned_message_template",f),p&&p!==b.PushNotificationDeliveryOption.DEFAULT&&O.add("push_option",p),_&&O.add("root_message_id",_),m&&O.add("parent_message_id",m),g&&O.add("apple_critical_alert_options",g.serialize()),"number"==typeof v?O.add("poll_id",v):null===v&&O.add("poll_id",-1),y&&O.add("reply_to_channel",y),r.post(C,O,n)}})}},{key:"sendFileMessage",value:function(t,n){var r=this,a=t.reqId,i=t.channelUrl,s=t.isOpenChannel,o=t.fileUrl,l=t.fileName,c=t.fileSize,u=t.fileType,d=t.data,h=t.customType,f=t.thumbnailSizes,p=t.requireAuth,_=t.metaArrays,m=t.mentionType,g=t.mentionedUserIds,v=t.pushNotificationDeliveryOption,y=t.rootMessageId,E=t.parentMessageId,b=t.appleCriticalAlertOptions,C=t.isReplyToChannel;this.sb.ConnectionManager.ready(function(t,O){if(t)n(t,null);else{var N=r.cls.FileMessageParams,S=s?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),A=new oe({message_type:"FILE",user_id:O.userId,url:o,mention_type:m,mentioned_user_ids:[],req_id:a});null!=l&&A.add("file_name",l),null!=c&&A.add("file_size",c),null!=u&&A.add("file_type",u),null!=d&&A.add("custom_field",d),null!=h&&A.add("custom_type",h),f&&A.add("thumbnails",f),p&&A.add("require_auth",p),_&&_.length>0&&A.add("sorted_metaarray",_.map(function(e){return e.encode()})),m===r.cls.BaseMessageParams.MentionType.CHANNEL?A.add("mentioned_user_ids",[]):Array.isArray(g)&&g.length>0&&A.add("mentioned_user_ids",g),v&&v!==N.PushNotificationDeliveryOption.DEFAULT&&A.add("push_option",v),y&&A.add("root_message_id",y),E&&A.add("parent_message_id",E),b&&A.add("apple_critical_alert_options",b.serialize()),C&&A.add("reply_to_channel",C),r.post(S,A,n)}})}},{key:"uploadFile",value:function(t,n){var r=this,a=t.file,i=t.thumbnailSizes,s=t.channelUrl,o=t.progressHandler,l=t.reqId;this.sb.ConnectionManager.ready(function(t,c){if(t)n(t,null);else{var u=w.get(r.sb._iid).container.appInfo;if(u)if("number"==typeof a.size||a.size||(a.size=0),"number"==typeof a.size)if(a.size<=u.uploadSizeLimit){var d=e.Path.STORAGE_FILE,h=new oe;if(h.add("file",a,a.name),s&&"string"==typeof s&&h.add("channel_url",s),i)for(var f=0;f<i.length;f++)h.add("thumbnail"+(f+1),i[f].maxWidth+","+i[f].maxHeight);h.upload.reqId=l,h.upload.deleteRequest=function(){var e=r.cls.FileMessageQueue;e.uploadRequest[l]&&delete e.uploadRequest[l]},h.upload.progressHandler=function(e){o&&"function"==typeof o&&o(e,l)},r.post(d,h,n)}else n(new j("The file size exceeded the upload limit: ".concat(u.uploadSizeLimit),j.FILE_SIZE_LIMIT_EXCEEDED),null);else n(new j("Invalid file size: ".concat(a.size),j.INVALID_PARAMETER),null);else n(new j("Connection should be made first.",j.CONNECTION_REQUIRED),null)}})}},{key:"registerScheduledUserMessage",value:function(t,n){var r=this,a=t.groupChannelParams,i=t.channelUrl,s=t.isOpenChannel;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)),c=new oe({scheduled_dt:a._getScheduleString(),user_id:o.userId,message:a.message,data:a.data});a.customType&&c.add("custom_type",a.customType),a.metaArrayKeys&&Object.keys(a.metaArrayKeys).length>0&&c.add("metaarray",a.metaArrayKeys),a.mentionType&&c.add("mention_type",a._mentionType),a._mentionType===r.cls.BaseMessageParams.MentionType.CHANNEL?c.add("mentioned_user_ids",[]):Array.isArray(a._mentionedUserIds)&&a._mentionedUserIds.length>0&&c.add("mentioned_user_ids",a._mentionedUserIds),a.translationTargetLanguages&&a.translationTargetLanguages.length>0&&c.add("translation_target_langs",a.translationTargetLanguages),a.pushNotificationDeliveryOption&&a.pushNotificationDeliveryOption!==r.cls.BaseMessageParams.PushNotificationDeliveryOption.DEFAULT&&c.add("push_option",a.pushNotificationDeliveryOption),a.appleCriticalAlertOptions&&c.add("apple_critical_alert_options",a.appleCriticalAlertOptions.serialize()),r.post(l,c,n)}})}},{key:"getMyPushTriggerOption",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.get(s,null,n)}})}},{key:"setMyPushTriggerOption",value:function(t,n){var r=this,a=t.channelUrl,i=t.pushTriggerOption,s=t.enable;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(a)),c=new oe;i&&c.add("push_trigger_option",i),"boolean"==typeof s&&c.add("enable",s),r.put(l,c,n)}})}},{key:"setMyCountPreference",value:function(t,n){var r=this,a=t.channelUrl,i=t.countPreference;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_COUNT_PREFERENCE.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(a)),l=new oe({count_preference:i});r.put(o,l,n)}})}},{key:"resetMyHistory",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(a));r.put(s,null,n)}})}},{key:"addReaction",value:function(t,n){var r=this,a=t.isGroupChannel,i=t.channelUrl,s=t.messageId,o=t.key;this.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var c=a?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),u=new oe({reaction:o});r.post(c,u,n)}})}},{key:"deleteReaction",value:function(t,n){var r=this,a=t.isGroupChannel,i=t.channelUrl,s=t.messageId,o=t.key;this.sb.ConnectionManager.ready(function(t,l){if(t)n(t,null);else{var c=a?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),u=new oe({reaction:o});r.delete(c,u,n)}})}},{key:"getAllEmoji",value:function(t){var n=this;this.sb.ConnectionManager.ready(function(r,a){r?t(r,null):n.get(e.Path.EMOJI_CATEGORIES,null,t)})}},{key:"getEmojiCategory",value:function(t,n){var r=this,a=t.categoryId;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.EMOJI_CATEGORIES_CATEGORYID.replace("%s",a);r.get(s,null,n)}})}},{key:"getEmoji",value:function(t,n){var r=this,a=t.emojiKey;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.EMOJIS_EMOJIKEY.replace("%s",a);r.get(s,null,n)}})}},{key:"getAllowFriendDiscovery",value:function(t){var n=this;this.sb.ConnectionManager.ready(function(r,a){if(r)t(r,null);else{var i=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(a.userId));n.get(i,null,t)}})}},{key:"setAllowFriendDiscovery",value:function(t,n){var r=this,a=t.allowFriendDiscovery;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(i.userId)),o=new oe;"boolean"==typeof a&&o.add("allow_friend_discovery",a),r.put(s,o,n)}})}},{key:"getPollList",value:function(t,n){var r=this,a=t.channelUrl,i=t.token,s=t.limit;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS,c=new oe({channel_url:a});i&&c.add("token",i),s&&c.add("limit",s),r.get(l,c,n)}})}},{key:"getPoll",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,s=t.showPartialVoters;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID.replace("%s",i),c=new oe({channel_url:a});"boolean"==typeof s&&c.add("show_partial_voter_list",s),r.get(l,c,n)}})}},{key:"createPoll",value:function(t,n){var r=this,a=t.title,i=t.options,s=t.data,o=t.isAnonymous,l=t.allowUserSuggestion,c=t.allowMultipleVotes,u=t.closeAt;this.sb.ConnectionManager.ready(function(t,d){if(t)n(t,null);else{var f=e.Path.POLLS,p=new oe({title:a,options:i});"object"===h(s)&&p.add("data",s),"boolean"==typeof o&&p.add("is_anonymous",o),"boolean"==typeof l&&p.add("allow_user_suggestion",l),"boolean"==typeof c&&p.add("allow_multiple_votes",c),"number"==typeof u&&p.add("close_at",u),r.post(f,p,n)}})}},{key:"updatePoll",value:function(t,n){var r=this,a=t.pollId,i=t.title,s=t.options,o=t.data,l=t.isAnonymous,c=t.allowUserSuggestion,u=t.allowMultipleVotes,d=t.closeAt;this.sb.ConnectionManager.ready(function(t,f){if(t)n(t,null);else{var p=e.Path.POLLS_POLLID.replace("%s",a),_=new oe;"string"==typeof i&&_.add("title",i),Array.isArray(s)&&_.add("options",s),"object"===h(o)&&_.add("data",o),"boolean"==typeof l&&_.add("is_anonymous",l),"boolean"==typeof c&&_.add("allow_user_suggestion",c),"boolean"==typeof u&&_.add("allow_multiple_votes",u),"number"==typeof d&&_.add("close_at",d),r.put(p,_,n)}})}},{key:"deletePoll",value:function(t,n){var r=this,a=t.pollId;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.POLLS_POLLID.replace("%s",a);r.delete(s,null,n)}})}},{key:"votePoll",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,s=t.optionIds;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_VOTE.replace("%s",i),c=new oe({channel_url:a});Array.isArray(s)&&c.add("option_ids",s),r.put(l,c,n)}})}},{key:"closePoll",value:function(t,n){var r=this,a=t.pollId;this.sb.ConnectionManager.ready(function(t,i){if(t)n(t,null);else{var s=e.Path.POLLS_POLLID_CLOSE.replace("%s",a);r.put(s,null,n)}})}},{key:"getPollOption",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,s=t.optionId;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",i).replace("%s",s),c=new oe({channel_url:a});r.get(l,c,n)}})}},{key:"addPollOption",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,s=t.text;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS.replace("%s",i),c=new oe({channel_url:a,text:s});r.post(l,c,n)}})}},{key:"updatePollOption",value:function(t,n){var r=this,a=t.pollId,i=t.optionId,s=t.text;this.sb.ConnectionManager.ready(function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",a).replace("%s",i),c=new oe({text:s});r.put(l,c,n)}})}},{key:"deletePollOption",value:function(t,n){var r=this,a=t.pollId,i=t.optionId;this.sb.ConnectionManager.ready(function(t,s){if(t)n(t,null);else{var o=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",a).replace("%s",i);r.delete(o,null,n)}})}},{key:"getPollOptionVoterList",value:function(t,n){var r=this,a=t.channelUrl,i=t.pollId,s=t.optionId,o=t.token,l=t.limit;this.sb.ConnectionManager.ready(function(t,c){if(t)n(t,null);else{var u=e.Path.POLLS_POLLID_OPTIONS_OPTIONID_VOTERS.replace("%s",i).replace("%s",s),d=new oe({channel_url:a});o&&d.add("token",o),l&&d.add("limit",l),r.get(u,d,n)}})}}],[{key:"Path",get:function(){return{USERS:"/users",USERS_USERID:"/users/%s",USERS_USERID_LOGIN:"/users/%s/login",USERS_USERID_SESSION_KEY:"/users/%s/session_key",USERS_USERID_METADATA:"/users/%s/metadata",USERS_USERID_METADATA_KEY:"/users/%s/metadata/%s",USERS_USERID_MARKASREADALL:"/users/%s/mark_as_read_all",USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS:"/users/%s/my_group_channels/changelogs",USERS_USERID_UNREAD_ITEM_COUNT:"/users/%s/unread_item_count",USERS_USERID_UNREAD_MESSAGE_COUNT:"/users/%s/unread_message_count",USERS_USERID_UNREAD_CHANNEL_COUNT:"/users/%s/unread_channel_count",USERS_USERID_PUSH_GCM_TOKEN:"/users/%s/push/gcm/%s",USERS_USERID_PUSH_GCM:"/users/%s/push/gcm",USERS_USERID_PUSH_DEVICE_TOKENS:"/users/%s/push/%s/device_tokens",USERS_USERID_PUSHPREFERENCE_CHANNELURL:"/users/%s/push_preference/%s",USERS_USERID_PUSHPREFERENCE:"/users/%s/push_preference/",USERS_USERID_PUSH_TEMPLATE:"/users/%s/push/template",USERS_USERID_BLOCK:"/users/%s/block",USERS_USERID_BLOCK_TARGETID:"/users/%s/block/%s",USERS_USERID_PUSH_APNS_TOKEN:"/users/%s/push/apns/%s",USERS_USERID_PUSH_APNS:"/users/%s/push/apns",USERS_USERID_PUSH:"/users/%s/push",USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE:"/users/%s/channel_invitation_preference",USERS_USERID_GROUP_CHANNEL_COUNT:"/users/%s/group_channel_count",USERS_COUNT_PREFERENCE:"/users/%s/count_preference/%s",USERS_USERID_ALLOW_FRIEND_DISCOVERY:"/users/%s/allow_friend_discovery",OPENCHANNELS:"/open_channels",OPENCHANNELS_CHANNELURL:"/open_channels/%s",OPENCHANNELS_CHANNELURL_MESSAGES:"/open_channels/%s/messages",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/open_channels/%s/messages/%s",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/open_channels/%s/messages/%s/translation",OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/open_channels/%s/messages/changelogs",OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/open_channels/%s/scheduled_messages",OPENCHANNELS_CHANNELURL_PARTICIPANTS:"/open_channels/%s/participants",OPENCHANNELS_CHANNELURL_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_METADATA:"/open_channels/%s/metadata",OPENCHANNELS_CHANNELURL_METADATA_KEY:"/open_channels/%s/metadata/%s",OPENCHANNELS_CHANNELURL_METACOUNTER:"/open_channels/%s/metacounter",OPENCHANNELS_CHANNELURL_METACOUNTER_KEY:"/open_channels/%s/metacounter/%s",OPENCHANNELS_CHANNELURL_BAN:"/open_channels/%s/ban",OPENCHANNELS_CHANNELURL_BAN_USERID:"/open_channels/%s/ban/%s",OPENCHANNELS_CHANNELURL_MUTE:"/open_channels/%s/mute",OPENCHANNELS_CHANNELURL_MUTE_USERID:"/open_channels/%s/mute/%s",OPENCHANNELS_CHANNELURL_FREEZE:"/open_channels/%s/freeze",OPENCHANNELS_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/open_channels/%s/messages/%s/reactions",GROUPCHANNELS:"/group_channels",MYGROUPCHANNELS:"/users/%s/my_group_channels",GROUPCHANNELS_CHANNELURL:"/group_channels/%s",GROUPCHANNELS_CHANNELURL_INVITE:"/group_channels/%s/invite",GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION:"/group_channels/%s/accept",GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION:"/group_channels/%s/decline",GROUPCHANNELS_CHANNELURL_HIDE:"/group_channels/%s/hide",GROUPCHANNELS_CHANNELURL_LEAVE:"/group_channels/%s/leave",GROUPCHANNELS_CHANNELURL_JOIN:"/group_channels/%s/join",GROUPCHANNELS_CHANNELURL_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_CHANNELURL_MESSAGES:"/group_channels/%s/messages",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD:"/group_channels/%s/messages/mark_as_read",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED:"/group_channels/%s/messages/mark_as_delivered",GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT:"/group_channels/%s/messages/total_count",GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT:"/group_channels/%s/messages/unread_count",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/group_channels/%s/messages/%s",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/group_channels/%s/messages/%s/translation",GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/group_channels/%s/messages/changelogs",GROUPCHANNELS_CHANNELURL_MESSAGES_GAP:"/group_channels/%s/messages_gap",GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/group_channels/%s/scheduled_messages",GROUPCHANNELS_CHANNELURL_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_METADATA:"/group_channels/%s/metadata",GROUPCHANNELS_CHANNELURL_METADATA_KEY:"/group_channels/%s/metadata/%s",GROUPCHANNELS_CHANNELURL_METACOUNTER:"/group_channels/%s/metacounter",GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY:"/group_channels/%s/metacounter/%s",GROUPCHANNELS_RESET_USER_HISTORY:"/group_channels/%s/reset_user_history",GROUPCHANNELS_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_BAN:"/group_channels/%s/ban",GROUPCHANNELS_CHANNELURL_BAN_USERID:"/group_channels/%s/ban/%s",GROUPCHANNELS_CHANNELURL_MUTE:"/group_channels/%s/mute",GROUPCHANNELS_CHANNELURL_MUTE_USERID:"/group_channels/%s/mute/%s",GROUPCHANNELS_CHANNELURL_FREEZE:"/group_channels/%s/freeze",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/group_channels/%s/messages/%s/reactions",STORAGE_FILE:"/storage/file",STORAGE_PROFILE:"/storage/profile_image",FRIENDS:"/users/%s/friends",FRIENDS_CHANGE_LOGS:"/users/%s/friends/changelogs",FRIENDS_DISCOVERIES:"/users/%s/friend_discoveries",SEARCH_MESSAGE:"/search/messages",REPORT_USERS:"/report/users/%s",REPORT_CHANNELS:"/report/%s/%s",REPORT_MESSAGES:"/report/%s/%s/messages/%s",EMOJIS_EMOJIKEY:"/emojis/%s",EMOJI_CATEGORIES:"/emoji_categories",EMOJI_CATEGORIES_CATEGORYID:"/emoji_categories/%s",POLLS:"/polls",POLLS_POLLID:"/polls/%s",POLLS_POLLID_VOTE:"/polls/%s/vote",POLLS_POLLID_CLOSE:"/polls/%s/close",POLLS_POLLID_OPTIONS:"/polls/%s/options",POLLS_POLLID_OPTIONS_OPTIONID:"/polls/%s/options/%s",POLLS_POLLID_OPTIONS_OPTIONID_VOTERS:"/polls/%s/options/%s/voters"}}}]),e}(),ue=function(){function e(t,n){f(this,e),this.sb=t,this.ws=null,this.wsHost=null,this.WebSocket=null,this.handler=n||new e.ConnectionHandler,this.explicitDisconnect=!1,this.lastActiveMillis=0;try{this.WebSocket="undefined"==typeof WebSocket?c.default:WebSocket}catch(e){this.WebSocket=WebSocket}}return _(e,[{key:"connect",value:function(e,t,n){var r=this;X.debug("`WebSocketClient.connect` called.");var a=w.get(this.sb._iid).container,i=a.pinger,s=a.auth,o=a.extensions,l=a.getUserAgentWithExtensions,c=a.sessionManager,u=Ba.getAppVersion();this.wsHost=n;try{var d="/?p=JS"+"&pv=".concat(encodeURIComponent(k.OS_VERSION))+"&sv=".concat(encodeURIComponent(k.SDK_VERSION))+"&ai=".concat(encodeURIComponent(this.sb.getApplicationId()));if(u&&(d+="&av=".concat(encodeURIComponent(u))),s.sessionKey?d+="&key=".concat(encodeURIComponent(s.sessionKey)):d+="&user_id=".concat(encodeURIComponent(e),"&access_token=").concat(encodeURIComponent(t)),d+="&active=1",d+="&SB-User-Agent=".concat(encodeURIComponent(l(o))),d+="&Request-Sent-Timestamp=".concat((new Date).getTime().toString()),d+="&include_extra_data=".concat(encodeURIComponent(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"].join(","))),c.handler&&(d+="&expiring_session=1"),this.sb.Options.includePollDetails&&(d+="&include_poll_details=1"),d+="&use_local_cache=1",this.ws=new this.WebSocket(this.wsHost+d),!this.ws)return this.sb.isReconnectingOnError=!0,void this.handler.onError("ws does not exist.")}catch(e){return this.sb.isReconnectingOnError=!0,void this.handler.onError(e)}try{this.sb.getDebugMode()&&"undefined"!=typeof window&&(window.ws=this.ws)}catch(e){X.debug("`window` object does not exist.")}var h=!1;this.ws.onopen=function(e){X.debug("`WebSocket.onopen` called."),r.handler.onOpen(e)},this.ws.onmessage=function(e){r.active();for(var t=e.data.split("\n"),n=0;n<t.length;n++){var a=t[n];if(a&&"string"==typeof a){try{if("PONG"===a.substring(0,4)){i.pong();continue}}catch(e){X.debug("`WebSocket.onmessage` command check error:",e)}r.handler.onMessage(a)}}},this.ws.onerror=function(e){X.debug("`WebSocket.onerror` called:",e),i&&i.stop(),h=!0,r.sb.isReconnectingOnError=!0,r.handler.onError(e)},this.ws.onclose=function(e){X.group("`WebSocket.onclose` called.",[{level:X.supportedLogLevels.DEBUG,messages:["e",e]},{level:X.supportedLogLevels.DEBUG,messages:["explicitDisconnect",r.explicitDisconnect]}]),i&&i.stop(),r.explicitDisconnect?r.handler.onClose(e):h||r.handler.onError(e),r.explicitDisconnect=!1}}},{key:"disconnect",value:function(e,t){X.group("`WebSocketClient.onclose` called.",[{level:X.supportedLogLevels.DEBUG,messages:["explicit",e]}]);var n=w.get(this.sb._iid).container.pinger;n&&n.stop(),this.explicitDisconnect=!0===e,this.ws&&(this.ws.onopen=function(){},this.ws.onmessage=function(){},this.ws.onclose=function(){t&&t()},this.ws.onerror=function(){},this.ws.close(),this.ws=null),this.explicitDisconnect?this.handler.onClose():this.handler.onError(),this.explicitDisconnect=!1}},{key:"send",value:function(e,t){if(1!==this.ws.readyState)t&&t(new j("Connection is not valid. Please reconnect.",j.WEBSOCKET_CONNECTION_CLOSED),null);else{var n=w.get(this.sb._iid).container.pinger;this.ws.send(e.encode()),"PING"!==e.command&&n.refreshTimer(),t&&t(null,null)}}},{key:"active",value:function(){this.lastActiveMillis=(new Date).getTime()}},{key:"getConnectionState",value:function(){try{return 1===this.ws.readyState?this.sb.ConnectionState.OPEN:0===this.ws.readyState?this.sb.ConnectionState.CONNECTING:this.sb.ConnectionState.CLOSED}catch(e){return this.sb.ConnectionState.CLOSED}}}]),e}();ue.ConnectionHandler=_(function e(){f(this,e),this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}});var de,he={},fe=function(){function e(){this._observers=[]}return e.of=function(t){return he[t]||(he[t]=new e),he[t]},e.prototype.invokeConnect=function(){for(var e=0,t=this._observers;e<t.length;e++){var n=t[e];n.onConnect&&n.onConnect()}},e.prototype.invokeDisconnect=function(){for(var e=0,t=this._observers;e<t.length;e++){var n=t[e];n.onDisconnect&&n.onDisconnect()}},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>-1&&this._observers.splice(t,1)},e}(),pe=function(){function e(t){f(this,e),this.sb=t,this.cls=G.get(this.sb._iid),this.client=new ue(this.sb),this.connectParams={retryCount:1},this.reconnectParams={interval:3,retryCount:3,multiplier:2,maxInterval:24},this.connectCount=0,this.reconnectCount=0,this.reconnectDelay=0}return _(e,[{key:"isConnected",get:function(){return this.client&&this.client.getConnectionState()===this.sb.ConnectionState.OPEN}},{key:"connect",value:function(e,t){var n=this,r=w.get(this.sb._iid).container,a=r.auth,i=r.apiClient,s=r.commandHandler;a.sessionToken=t||null;var o=this.cls.GroupChannel,l=null,c=new ue.ConnectionHandler;this.client=new ue(this.sb,c),c.onMessage=function(e){s.onRawCommandReceived(e)},this.sb.loginHandler=function(e,t){if(n.sb.connecting=!1,n.sb.reconnecting=!1,e)n.disconnect({clearSession:!0,err:e},null);else{clearInterval(n.sb.globalTimer);var r=function(){o.cachedChannels&&Object.keys(o.cachedChannels).forEach(function(e){var t=o.cachedChannels[e];t.invalidateTypingStatus()&&Object.keys(n.sb.channelHandlers).forEach(function(e){n.sb.channelHandlers[e].onTypingStatusUpdated(t)})})};r(),n.sb.globalTimer=setInterval(function(){return r()},1e3),n.flushConnectionCallbacks(null,t),n.sb.ConnectionManager.processAllReadyHandler(null)}},c.onOpen=function(){n.connectCount=0,n.sb.loginTimer=setTimeout(function(){n.sb.loginTimer=null,n.sb.onLoginTimerCancel=null,n.flushConnectionCallbacks(new j("Connection timeout.",j.LOGIN_TIMEOUT),null),n.sb.disconnect(null)},n.sb.Options.websocketResponseTimeout),n.sb.onLoginTimerCancel=function(){n.connectCount=0,n.flushConnectionCallbacks(new j("Connection has been canceled.",j.REQUEST_FAILED),null)},n.sb.connecting=!1},c.onError=function(r){X.debug("Connect: `WebSocketClient.ConnectionHandler.onError` called.",r),a.sessionKey?(n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0),n.sb.connecting=!1):n.connectCount<n.connectParams.retryCount?(n.connectCount++,n.client.connect(e,t,l)):(n.connectCount=0,n.flushConnectionCallbacks(new j("Websocket connection failed.",j.WEBSOCKET_CONNECTION_FAILED),null),n.sb.connecting=!1)},c.onClose=function(){X.debug("Connect: `WebSocketClient.ConnectionHandler.onClose` called."),n.connectCount=0,n.sb.connecting=!1},i.checkRouting(function(r,a){if(r)return n.sb.connecting=!1,void n.flushConnectionCallbacks(new j("Connection routing failed.",j.REQUEST_FAILED),null);l=a.wsHost,i.dummyCall(function(e){e&&X.error("API dummy call failed:",e)}),n.client.connect(e,t,l)})}},{key:"reconnect",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=w.get(this.sb._iid),a=r.container,i=a.auth,s=a.apiClient,o=a.commandHandler,l=a.ackStateMap,c=a.sessionManager,u=this.cls.OpenChannel;if(this.sb.connecting=!1,this.sb.reconnecting=!0,this.sb.reconnectTimer)X.debug("Reconnect: still reconnecting.");else{if(this.reconnectCount+=1,this.reconnectCount<=1){if(n){Object.keys(l).forEach(function(e){var t=l[e];t&&(clearTimeout(t.timer),(0,t.handler)(new j("Command received no ack.",j.ACK_TIMEOUT),null)),delete l[e]});var d=fe.of(this.sb._iid);d.invokeDisconnect(),Object.keys(this.sb.connectionHandlers).forEach(function(e){t.sb.connectionHandlers[e].onReconnectStarted()})}this.reconnectDelay=0}else this.reconnectDelay=Math.min(1e3*this.reconnectParams.interval*Math.pow(this.reconnectParams.multiplier,this.reconnectCount-2),this.reconnectParams.maxInterval>0?1e3*this.reconnectParams.maxInterval:Number.MAX_SAFE_INTEGER);if(!e||!i.sessionKey||this.reconnectParams.retryCount>0&&this.reconnectCount>this.reconnectParams.retryCount)return this.disconnect({clearSession:!1,err:new j("Websocket connection failed.",j.WEBSOCKET_CONNECTION_FAILED)},null),this.reconnectCount=0,Object.keys(this.sb.connectionHandlers).forEach(function(e){t.sb.connectionHandlers[e].onReconnectFailed()}),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1,void this.sb.ConnectionManager.errorAllReadyHandler();this.sb.onReconnectTimerCancel=function(){t.reconnectCount=0},this.sb.reconnectTimer=setTimeout(function(){t.sb.reconnectTimer=null,t.sb.onReconnectTimerCancel=null,t.client&&t.client.disconnect(!0);var n=new ue.ConnectionHandler;t.client=new ue(t.sb,n),t.sb.loginHandler=function(n,r){n?c.isSessionError(n)?c.refreshSessionIfExpiredError(n).then(function(){clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnectCount=0,t.reconnect(e,!1)}).catch(function(){}):(clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnect(e,!1)):(t.reconnectCount=0,t.sb.connecting=!1,t.sb.reconnecting=!1,t.sb.isReconnectingOnError=!1,fe.of(t.sb._iid).invokeConnect(),Object.keys(t.sb.connectionHandlers).forEach(function(e){t.sb.connectionHandlers[e].onReconnectSucceeded()}),t.sb.ConnectionManager.processAllReadyHandler(null),t.sb.isReconnectingOnError&&Object.keys(t.sb.ConnectionManager.networkHandlers).forEach(function(e){t.sb.ConnectionManager.networkHandlers[e].onReconnected()}),Object.keys(u.enteredChannels).forEach(function(e){u.enteredChannels[e].enter(function(n,r){if(n){var a=t.cls.FileMessageQueue;delete u.enteredChannels[e],a.delete(e)}})}))},n.onOpen=function(){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onOpen` called."),t.sb.loginTimer=setTimeout(function(){X.debug("Reconnect: `loginTimer` timeout."),t.sb.loginTimer=null,t.reconnect(e,!0)},t.sb.Options.websocketResponseTimeout),t.sb.onLoginTimerCancel=null},n.onMessage=function(e){o.onRawCommandReceived(e)},n.onError=function(n){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onError` called.",n),t.sb.isReconnectingOnError=!0,t.sb.ConnectionManager.errorAllReadyHandler(),t.reconnect(e,!0)},n.onClose=function(){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onClose` called."),t.sb.reconnecting=!1},s.checkRouting(function(n,r){n?t.reconnect(e,!0):(t.sb.getCurrentApiHost()!==r.apiHost&&s.get("/",null,function(){}),t.client.connect(e,null,r.wsHost))})},this.reconnectDelay)}}},{key:"disconnect",value:function(e,t){var n=w.get(this.sb._iid),r=n.container.ackStateMap,a=this.cls,i=a.GroupChannel,s=a.OpenChannel,o=e.clearSession,l=e.err;this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.onLoginTimerCancel&&(this.sb.onLoginTimerCancel(),this.sb.onLoginTimerCancel=null),this.sb.loginTimer=null),this.sb.reconnectTimer&&(clearTimeout(this.sb.reconnectTimer),this.sb.onReconnectTimerCancel&&(this.sb.onReconnectTimerCancel(),this.sb.onReconnectTimerCancel=null),this.sb.reconnectTimer=null),this.client&&(this.reconnectCount=0,this.client.disconnect(!0),this.client=null),o&&(s.clearEnteredChannels(),s.clearCache(),i.clearCache(),this.sb.globalTimer&&(clearInterval(this.sb.globalTimer),this.sb.globalTimer=null),Object.keys(r).forEach(function(e){clearTimeout(r[e].timer)}),this.sb.currentUser=null,n.set("ackStateMap",{}),n.set("subscribedUnreadMessageCount",{all:0,custom_types:{},ts:0}),n.set("auth",new F)),l&&(this.flushConnectionCallbacks(l,null),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1),t&&t(null,null)}},{key:"flushConnectionCallbacks",value:function(e,t){var n=this,r=w.get(this.sb._iid).container,a=r.store,i=r.localCacheEnabled,s=this.sb.connectionCallbacks;if(this.sb.connectionCallbacks=[],e)if(i){var o=this.sb._getCurrentUserDataKey();ie.isNonAutoReconnectableError(e.code)?a.remove(o).catch(function(e){return X.debug("Sendbird connect store remove error: ",e)}).finally(function(){return s.forEach(function(t){return t(e,null)})}):a.get(o).then(function(e){n.sb._populateVaultFromCurrentUserData(e)}).catch(function(e){X.debug("Sendbird connect store fetch error: ",e)}).finally(function(){n.sb.currentUser?s.forEach(function(t){return t(e,n.sb.currentUser)}):s.forEach(function(t){return t(e,null)})})}else s.forEach(function(t){return t(e,null)});else fe.of(this.sb._iid).invokeConnect(),i?a.set({key:this.sb._getCurrentUserDataKey(),value:this._createCurrentUserData(t),generation:1}).catch(function(e){return X.debug("Sendbird connect store write error: ",e)}).finally(function(){return s.forEach(function(e){return e(null,n.sb.currentUser)})}):s.forEach(function(e){return e(null,t)})}},{key:"_createCurrentUserData",value:function(e){var t=w.get(this.sb._iid).container,n=t.auth,r=t.maxUnreadCountOfSuperGroupChannel,a=t.profileImageEncryption,i=t.appInfo,s=t.connectedAt,o=t.firstConnectedAt,l=t.concurrentCallLimit,c=t.backOffDelay,u={currentUser:(e||this.sb.currentUser).serialize(),maxUnreadCountOfSuperGroupChannel:k.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,profileImageEncryption:!1};return n.sessionKey&&(u.sessionKey=n.sessionKey),n.eKey&&(u.eKey=n.eKey),r&&(u.maxUnreadCountOfSuperGroupChannel=r),a&&(u.profileImageEncryption=a),i&&(u.appInfo=i._objectify()),s&&o&&(u.connectedAt=s,u.firstConnectedAt=o),l&&c&&(u.concurrentCallLimit=l,u.backOffDelay=c),u}}]),e}(),_e=function(){function e(t){var n=t.type,r=t.nullable,a=void 0!==r&&r,i=t.optional,s=void 0!==i&&i,o=t.optionalIf,l=void 0===o?null:o,c=t.ignoreIf,u=void 0===c?null:c,d=t.defaultValue,h=void 0===d?null:d,p=t.constraint,_=void 0===p?null:p;f(this,e),this.type=n,this.nullable=a,this.optional=s,this.optionalIf=l,this.ignoreIf=u,this.defaultValue=h,this.constraint=_}return _(e,[{key:"isMatchingType",value:function(e){var t=function(t,n){return"string"==typeof n?h(t)===n||"array"===n&&Array.isArray(t)||"file"===n&&ie.isFile(t)||"null"===n&&null===t||"date"===n&&t instanceof Date:"function"==typeof n?t instanceof n:"object"===h(n)&&Object.keys(n).map(function(e){return n[e]}).indexOf(e)>-1};return t(e,this.type)||Array.isArray(this.type)&&this.type.some(function(n){return t(e,n)})||this.nullable&&null===e}}],[{key:"parse",value:function(t,n){for(t=e.toArray(t);t.length>0&&void 0===t[t.length-1];)t.pop();var r=!1,a=null;"callback"===n[n.length-1].type&&("function"==typeof t[t.length-1]&&(a=t.pop()),n.pop(),r=!0);var i=[],s=null,o=0;return n.forEach(function(n){"function"==typeof n.ignoreIf&&n.ignoreIf(t)?i.push(n.hasOwnProperty("defaultValue")?n.defaultValue:null):n.isMatchingType(t[o])?(n.nullable&&null===t[o]||!n.constraint||n.constraint(t[o])||(s=e.error),i.push(t[o]),o++):n.optional||"function"==typeof n.optionalIf&&n.optionalIf(t)?i.push(n.hasOwnProperty("defaultValue")?n.defaultValue:null):(s=e.error,i.push(t[o]),o++)}),r&&a&&i.push(a),t.length!==o&&(s=e.error),[s].concat(i)}},{key:"error",get:function(){return new j("Invalid parameter.",j.INVALID_PARAMETER)}},{key:"toArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}}]),e}(),me=function(){function e(t){f(this,e),this.sb=t,this.authCount=0,this.readyHandlers=[],this.networkHandlers={},this.authenticateTimer=1e4,this.authInfoRequester=null}return _(e,[{key:"addReadyHandler",value:function(e){e&&"function"==typeof e&&this.readyHandlers.push(e)}},{key:"ready",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=w.get(this.sb._iid),r=n.container,a=r.auth,i=r.isInBackground;t&&a.hasSession()?e&&(this.sb.currentUser?e(null,this.sb.currentUser):(this.addReadyHandler(e),this.errorAllReadyHandler()),this.sb.getConnectionState()!==this.sb.ConnectionState.CLOSED||i||this.sb.reconnect()):(this.addReadyHandler(e),this.sb.isReconnectingOnError?this.errorAllReadyHandler():this.sb.getConnectionState()===this.sb.ConnectionState.OPEN?this.processAllReadyHandler(null):this.sb.getConnectionState()===this.sb.ConnectionState.CONNECTING||this.errorAllReadyHandler())}},{key:"processAllReadyHandler",value:function(e){if(this.readyHandlers.length>0){var t=this.sb.currentUser,n=this.readyHandlers;this.readyHandlers=[],n.forEach(function(n){n&&"function"==typeof n&&n(e,t)})}}},{key:"errorAllReadyHandler",value:function(){var e=w.get(this.sb._iid).container.auth;this.processAllReadyHandler(e&&e.hasSession()?new j("WebSocket connection must be made first.",j.WEBSOCKET_CONNECTION_CLOSED):new j("Connection should be made first.",j.CONNECTION_REQUIRED))}},{key:"NetworkHandler",value:function(){this.onReconnected=function(){}}},{key:"addNetworkHandler",value:function(e,t){X.warn("`ConnectionManager` will be deprecated."),this.networkHandlers[e]=t}},{key:"removeNetworkHandler",value:function(e){X.warn("`ConnectionManager` will be deprecated."),delete this.networkHandlers[e]}},{key:"removeAllNetworkHandler",value:function(){X.warn("`ConnectionManager` will be deprecated."),this.networkHandlers={}}},{key:"authenticate",value:function(e){var t=this;if(X.warn("`ConnectionManager` will be deprecated."),this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnecting)this.sb.connecting=!1,e(null,this.sb.currentUser);else if(this.authInfoRequester&&"function"==typeof this.authInfoRequester){this.sb.connecting=!0,this.authCount++;var n=setTimeout(function(){n=null,t.authCount--,0===t.authCount&&0===t.sb.connectionCallbacks.length&&(t.sb.connecting=!1),t.errorAllReadyHandler(),e(new j("Connection should be made first.",j.CONNECTION_REQUIRED),null)},this.authenticateTimer);this.authInfoRequester(function(r){if(n){clearTimeout(n),n=null,t.authCount--;var a=function(n,r){t.sb.connecting=!1,e(n,null)};r&&r.hasOwnProperty("userId")?r.accessToken?r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.accessToken,r.apiHost,r.wsHost,a):t.sb.connect(r.userId,r.accessToken,a):r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.apiHost,r.wsHost,a):t.sb.connect(r.userId,a):e(_e.error,null)}})}else e(_e.error,null)}}]),e}(),ge=function(){this.onSessionExpired=function(){},this.onSessionTokenRequired=function(e,t){return e(null)},this.onSessionError=function(e){},this.onSessionRefreshed=function(){},this.onSessionClosed=function(){}},ve=function(){function e(){f(this,e),this.handler=null,this.resolvers=[]}return _(e,[{key:"_refreshSessionToken",value:function(){var t=this;return new Promise(function(n,r){var a=null,i=function(){a&&(clearTimeout(a),a=null)},s=function(){a&&(i(),r(e.sessionTokenRequestFailedError))};a=setTimeout(function(){return s()},3e4),t.handler.onSessionTokenRequired(function(e){a&&(i(),n(e))},s)})}},{key:"_refreshSessionKey",value:function(){var t=this;return new Promise(function(n,r){var a=w.get(t._iid).container,i=a.auth,s=a.wsAdapter;i.sessionToken?s.isConnected?t._refreshSessionKeyByCommand().then(function(){return n()}).catch(function(e){e.isSessionTokenExpiredError?r(e):t._refreshSessionKeyByApi().then(function(){return n()}).catch(function(e){return r(e)})}):t._refreshSessionKeyByApi().then(function(){return n()}).catch(function(e){return r(e)}):r(e.sessionTokenNotFoundError)})}},{key:"_refreshSessionKeyByCommand",value:function(){var t=this;return new Promise(function(n,r){var a=Ba.getInstance(t._iid),i=w.get(t._iid).container.auth,s=G.get(t._iid).Command,o=s.bSessionRefresh({token:i.sessionToken,requestId:s.generateRequestId()});a.sendCommand(o,function(t,s){if(!a.getErrorFirstCallback()){var o=[t,s];s=o[0],t=o[1]}t?r(t):s?s.hasOwnProperty("error")?r(e.sessionKeyRefreshFailedError):(s.hasOwnProperty("new_key")&&(i.sessionKey=s.new_key),n()):r(e.sessionKeyRefreshFailedError)})})}},{key:"_refreshSessionKeyByApi",value:function(){var t=this;return new Promise(function(n,r){!function a(i){if(i<3){var s=w.get(t._iid).container,o=s.auth,l=s.apiClient,c={};o.sessionToken&&(c.accessToken=o.sessionToken),l.refreshSessionKey(c,function(e,t){if(e)e.isSessionTokenExpiredError||e.isSessionTokenRevokedError?r(e):a(i+1);else{var s=t.key;o.sessionKey=s,n()}})}else r(e.sessionKeyRefreshFailedError)}(0)})}},{key:"_handleSessionToken",value:function(t){var n=this;t?(w.get(this._iid).container.auth.sessionToken=t,this._refreshSessionKey().then(function(){return n._handleSessionRefreshSuccess()}).catch(function(){return n._handleSessionRefreshError(e.sessionTokenRequestFailedError)})):this._handleSessionClosed(e.sessionTokenRequestFailedError)}},{key:"_handleSessionRefreshSuccess",value:function(){this.handler.onSessionRefreshed(),this._flushResolvers(null)}},{key:"_handleSessionRefreshError",value:function(e){this._cancelConnection(),this.handler.onSessionError(e),this._flushResolvers(e)}},{key:"_handleSessionClosed",value:function(e){this._cancelConnection(),this.handler.onSessionClosed(),this._flushResolvers(e)}},{key:"_cancelConnection",value:function(){var e=Ba.getInstance(this._iid);e.reconnecting&&(Object.keys(e.connectionHandlers).forEach(function(t){e.connectionHandlers[t].onReconnectFailed()}),e.reconnecting=!1),e.disconnect()}},{key:"_flushResolvers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;n<this.resolvers.length;n++)e?this.resolvers[n].reject(e):this.resolvers[n].resolve(t);this.resolvers=[]}},{key:"setHandler",value:function(e){e instanceof ge&&(this.handler=e)}},{key:"isSessionError",value:function(e){return e.isSessionTokenExpiredError||e.isSessionTokenRevokedError||e.isSessionKeyExpiredError}},{key:"refreshSessionToken",value:function(){var t=this;return new Promise(function(n,r){t.handler?(t.resolvers.push({resolve:n,reject:r}),1===t.resolvers.length&&t._refreshSessionToken().then(function(e){return t._handleSessionToken(e)}).catch(function(){return t._handleSessionRefreshError(e.sessionTokenRequestFailedError)})):n()})}},{key:"refreshSessionKey",value:function(){var e=this;return new Promise(function(t,n){e.handler?(e.resolvers.push({resolve:t,reject:n}),1===e.resolvers.length&&e._refreshSessionKey().then(function(){return e._handleSessionRefreshSuccess()}).catch(function(t){t.isSessionTokenExpiredError?e._refreshSessionToken().then(function(t){return e._handleSessionToken(t)}).catch(function(t){return e._handleSessionRefreshError(t)}):t.isSessionTokenRevokedError?e._handleSessionClosed(t):e._handleSessionRefreshError(t)})):t()})}},{key:"refreshSessionIfExpiredError",value:function(e){var t=this;return e.isSessionTokenExpiredError?this.refreshSessionToken():e.isSessionKeyExpiredError?this.refreshSessionKey():e.isSessionTokenRevokedError?new Promise(function(e,n){return n(t.closeSession())}):Promise.reject(e)}},{key:"closeSession",value:function(){var t=e.sessionTokenRequestFailedError;return this._handleSessionClosed(t),t}}],[{key:"sessionTokenNotFoundError",get:function(){return new j("Session token is not found.",j.SESSION_TOKEN_EXPIRED)}},{key:"sessionTokenExpiredError",get:function(){return new j("Session token is expired.",j.SESSION_TOKEN_EXPIRED)}},{key:"sessionKeyRefreshFailedError",get:function(){return new j("Failed to refresh the session key.",j.SESSION_KEY_REFRESH_FAILED)}},{key:"sessionTokenRequestFailedError",get:function(){return new j("Failed to get the session token.",j.SESSION_TOKEN_REQUEST_FAILED)}}]),e}(),ye=function(){function e(t){f(this,e),this.sb=t}return _(e,[{key:"onlineWorker",value:function(){try{if("undefined"!=typeof navigator&&navigator.onLine){var e=w.get(this.sb._iid).container.auth;this.sb.reconnecting||this.sb.connecting||!e.sessionKey||this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnect()}}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"offlineWorker",value:function(){try{if(this.sb.setIsProcessingAutoResend(!1),"undefined"!=typeof navigator&&!navigator.onLine){var e=w.get(this.sb._iid).container,t=e.auth,n=e.pinger;this.sb.reconnecting||this.sb.connecting||!t.sessionKey||(n&&n.stop(),this.sb.reconnect())}}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"start",value:function(){try{"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine&&(window.addEventListener("online",this.onlineWorker),window.addEventListener("offline",this.offlineWorker))}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"stop",value:function(){try{window.removeEventListener("online",this.onlineWorker,!1),window.removeEventListener("offline",this.offlineWorker,!1)}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}}]),e}(),Ee=(new Date).getTime(),be=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(f(this,e),this.command=t,this.requestId=r,arguments.length){case 1:if(!t||t.length<=4)this.command="NOOP",this.payload="{}";else if(this.decode(t),this.isRequestIdCommand){var a=this.getJsonElement();a&&(this.requestId=a.req_id||"")}break;case 2:case 3:!this.requestId&&this.isRequestIdCommand&&(this.requestId=e.generateRequestId()),n.req_id=this.requestId||"",this.payload=JSON.stringify(n)}}return _(e,[{key:"isRequestIdCommand",get:function(){return this.isAckRequired||"EROR"===this.command}},{key:"isAckRequired",get:function(){return"LOGI"===this.command||"MESG"===this.command||"FILE"===this.command||"ENTR"===this.command||"EXIT"===this.command||"READ"===this.command||"MEDI"===this.command||"FEDI"===this.command}},{key:"encode",value:function(){return this.command+this.payload+"\n"}},{key:"decode",value:function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)}},{key:"getJsonElement",value:function(){return JSON.parse(this.payload)}}],[{key:"bSessionRefresh",value:function(e){return new this("LOGI",{token:e.token,expiring_session:1},e.requestId)}},{key:"bPing",value:function(){return new this("PING",{id:(new Date).getTime(),active:1})}},{key:"bMessage",value:function(e){var t=e.channelUrl,n=e.message,r=e.data,a=e.customType,i=e.metaArrays,s=e.mentionType,o=e.mentionedUserIds,l=e.mentionedMessageTemplate,c=e.translationTargetLanguages,u=e.pushNotificationDeliveryOption,d=e.appleCriticalAlertOptions,h=e.requestId,f=void 0===h?null:h,p=e.silent,_=void 0!==p&&p,m=e.rootMessageId,g=void 0===m?null:m,v=e.parentMessageId,y=void 0===v?null:v,E=e.pollId,b=e.isReplyToChannel,C=void 0!==b&&b,O=G.get(this._iid),N=O.UserMessageParams,S=O.BaseMessageParams,A={};return A.channel_url=t,A.message=n,A.data=r,i&&i.length>0&&(A.metaarray=i.map(function(e){return e.encode()})),s&&(A.mention_type=s),A.mentioned_user_ids=[],s===S.MentionType.CHANNEL?A.mentioned_user_ids=[]:Array.isArray(o)&&o.length>0&&(A.mentioned_user_ids=o),l&&(A.mentioned_message_template=l),a&&(A.custom_type=a),c&&c.length>0&&(A.target_langs=c),u&&u!==N.PushNotificationDeliveryOption.DEFAULT&&(A.push_option=u),d&&(A.apple_critical_alert_options=d.serialize()),_&&(A.silent=_),g&&(A.root_message_id=g),y&&(A.parent_message_id=y),"number"==typeof E?A.poll_id=E:null===E&&(A.poll_id=-1),C&&(A.reply_to_channel=C),new this("MESG",A,f)}},{key:"bFile",value:function(e){var t=e.channelUrl,n=e.url,r=e.name,a=e.type,i=e.size,s=e.data,o=e.customType,l=e.thumbnailSizes,c=e.requireAuth,u=e.metaArrays,d=e.mentionType,h=e.mentionedUserIds,f=e.pushNotificationDeliveryOption,p=e.appleCriticalAlertOptions,_=e.requestId,m=void 0===_?null:_,g=e.silent,v=void 0!==g&&g,y=e.rootMessageId,E=void 0===y?null:y,b=e.parentMessageId,C=void 0===b?null:b,O=e.isReplyToChannel,N=void 0!==O&&O,S=G.get(this._iid),A=S.BaseMessageParams,I=S.FileMessageParams,k={};return k.channel_url=t,k.url=n,k.name=r||"",k.type=a||"",k.size=i||0,k.custom=s,o&&(k.custom_type=o),l&&(k.thumbnails=l),c&&(k.require_auth=c),u&&u.length>0&&(k.metaarray=u.map(function(e){return e.encode()})),d&&(k.mention_type=d),k.mentioned_user_ids=[],d===A.MentionType.CHANNEL?k.mentioned_user_ids=[]:Array.isArray(h)&&h.length>0&&(k.mentioned_user_ids=h),f&&f!==I.PushNotificationDeliveryOption.DEFAULT&&(k.push_option=f),p&&(k.apple_critical_alert_options=p.serialize()),v&&(k.silent=v),E&&(k.root_message_id=E),C&&(k.parent_message_id=C),N&&(k.reply_to_channel=N),new this("FILE",k,m)}},{key:"bUpdateUserMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.appleCriticalAlertOptions,a=e.message,i=void 0===a?null:a,s=e.data,o=void 0===s?null:s,l=e.customType,c=void 0===l?null:l,u=e.mentionType,d=void 0===u?null:u,h=e.mentionedUserIds,f=void 0===h?null:h,p=e.mentionedMessageTemplate,_=void 0===p?null:p,m=e.metaArrayParams,g=void 0===m?null:m,v=e.pollId,y=G.get(this._iid).BaseMessageParams,E={};return E.channel_url=t,E.msg_id=n,null!=i&&void 0!==i&&(E.message=i),null!=o&&void 0!==o&&(E.data=o),null!=c&&void 0!==c&&(E.custom_type=c),d&&(E.mention_type=d),d===y.MentionType.CHANNEL?E.mentioned_user_ids=[]:Array.isArray(f)&&f.length>0&&(E.mentioned_user_ids=f),_&&(E.mentioned_message_template=_),g&&(E.metaarray=g),r&&(E.apple_critical_alert_options=r.serialize()),"number"==typeof v?E.poll_id=v:null===v&&(E.poll_id=-1),new this("MEDI",E)}},{key:"bUpdateFileMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.appleCriticalAlertOptions,a=e.data,i=void 0===a?null:a,s=e.customType,o=void 0===s?null:s,l=e.mentionType,c=void 0===l?null:l,u=e.mentionedUserIds,d=void 0===u?null:u,h=e.metaArrayParams,f=void 0===h?null:h,p=G.get(this._iid).BaseMessageParams,_={};return _.channel_url=t,_.msg_id=n,null!=i&&void 0!==i&&(_.data=i),null!=o&&void 0!==o&&(_.custom_type=o),c&&(_.mention_type=c),c===p.MentionType.CHANNEL?_.mentioned_user_ids=[]:Array.isArray(d)&&d.length>0&&(_.mentioned_user_ids=d),f&&(_.metaarray=f),r&&(_.apple_critical_alert_options=r.serialize()),new this("FEDI",_)}},{key:"bRead",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("READ",n)}},{key:"bMessageAck",value:function(e){var t=e.channelUrl,n=e.messageId,r={};return r.channel_url=t,r.msg_id=n,new this("MACK",r)}},{key:"bTypeStart",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPST",r)}},{key:"bTypeEnd",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPEN",r)}},{key:"bEnter",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("ENTR",n)}},{key:"bExit",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("EXIT",n)}},{key:"generateRequestId",value:function(){return String(++Ee)}}]),e}(),Ce=1048576,Oe=function(){function e(e){void 0===e&&(e={}),this._emojiHash=e.emoji_hash||"",this._uploadSizeLimit=e.file_upload_size_limit?e.file_upload_size_limit*Ce:Number.MAX_VALUE,this._useReaction=!!e.use_reaction,this._applicationAttributes=e.application_attributes||[],this._premiumFeatureList=e.premium_feature_list||[],this._disableSupergroupMack=e.disable_supergroup_mack||!1}return Object.defineProperty(e.prototype,"emojiHash",{get:function(){return this._emojiHash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uploadSizeLimit",{get:function(){return this._uploadSizeLimit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsingReaction",{get:function(){return this._useReaction},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applicationAttributes",{get:function(){return this._applicationAttributes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"premiumFeatureList",{get:function(){return this._premiumFeatureList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSupergroupMackDisabled",{get:function(){return this._disableSupergroupMack},enumerable:!1,configurable:!0}),e.prototype._objectify=function(){var e={};return e.emoji_hash=this._emojiHash,this._uploadSizeLimit!==Number.MAX_VALUE&&(e.file_upload_size_limit=this._uploadSizeLimit/Ce),e.use_reaction=this._useReaction,e.application_attributes=this._applicationAttributes,e.premium_feature_list=this._premiumFeatureList,e.disable_supergroup_mack=this._disableSupergroupMack,e},e}();!function(e){e[e.EVENT_CHANNEL_CHANGED=0]="EVENT_CHANNEL_CHANGED",e[e.EVENT_USER_RECEIVED_INVITATION=1]="EVENT_USER_RECEIVED_INVITATION",e[e.EVENT_USER_DECLINED_INVITATION=2]="EVENT_USER_DECLINED_INVITATION",e[e.EVENT_USER_JOINED=3]="EVENT_USER_JOINED",e[e.EVENT_USER_LEFT=4]="EVENT_USER_LEFT",e[e.EVENT_CHANNEL_ENTER=5]="EVENT_CHANNEL_ENTER",e[e.EVENT_CHANNEL_EXIT=6]="EVENT_CHANNEL_EXIT",e[e.EVENT_CHANNEL_FROZEN=7]="EVENT_CHANNEL_FROZEN",e[e.EVENT_CHANNEL_UNFROZEN=8]="EVENT_CHANNEL_UNFROZEN",e[e.EVENT_CHANNEL_HIDDEN=9]="EVENT_CHANNEL_HIDDEN",e[e.EVENT_CHANNEL_UNHIDDEN=10]="EVENT_CHANNEL_UNHIDDEN",e[e.EVENT_TYPING_STATUS_UPDATED=11]="EVENT_TYPING_STATUS_UPDATED",e[e.EVENT_OPERATOR_UPDATED=12]="EVENT_OPERATOR_UPDATED",e[e.EVENT_CHANNEL_METADATA_UPDATED=13]="EVENT_CHANNEL_METADATA_UPDATED",e[e.EVENT_CHANNEL_METADATA_DELETED=14]="EVENT_CHANNEL_METADATA_DELETED",e[e.EVENT_CHANNEL_METACOUNTER_UPDATED=15]="EVENT_CHANNEL_METACOUNTER_UPDATED",e[e.EVENT_CHANNEL_METACOUNTER_DELETED=16]="EVENT_CHANNEL_METACOUNTER_DELETED",e[e.EVENT_CHANNEL_DELETED=17]="EVENT_CHANNEL_DELETED",e[e.EVENT_USER_MUTED=18]="EVENT_USER_MUTED",e[e.EVENT_USER_UNMUTED=19]="EVENT_USER_UNMUTED",e[e.EVENT_USER_BANNED=20]="EVENT_USER_BANNED",e[e.EVENT_USER_UNBANNED=21]="EVENT_USER_UNBANNED",e[e.EVENT_MESSAGE_RECEIVED=22]="EVENT_MESSAGE_RECEIVED",e[e.EVENT_MESSAGE_SENT=23]="EVENT_MESSAGE_SENT",e[e.EVENT_MESSAGE_UPDATED=24]="EVENT_MESSAGE_UPDATED",e[e.EVENT_MESSAGE_DELETED=25]="EVENT_MESSAGE_DELETED",e[e.EVENT_READ_RECEIPT_UPDATED=26]="EVENT_READ_RECEIPT_UPDATED",e[e.EVENT_DELIVERY_RECEIPT_UPDATED=27]="EVENT_DELIVERY_RECEIPT_UPDATED",e[e.EVENT_MENTION=28]="EVENT_MENTION",e[e.EVENT_REACTION_UPDATED=29]="EVENT_REACTION_UPDATED",e[e.EVENT_THREAD_INFO_UPDATED=30]="EVENT_THREAD_INFO_UPDATED",e[e.CHANNEL_BACKGROUND=1e3]="CHANNEL_BACKGROUND",e[e.CHANNEL_CHANGELOG=1001]="CHANNEL_CHANGELOG",e[e.MESSAGE_BACKGROUND=1002]="MESSAGE_BACKGROUND",e[e.MESSAGE_FILL=1003]="MESSAGE_FILL",e[e.MESSAGE_CHANGELOG=1004]="MESSAGE_CHANGELOG",e[e.LOCAL_MESSAGE_PENDING_CREATED=2e3]="LOCAL_MESSAGE_PENDING_CREATED",e[e.LOCAL_MESSAGE_FAILED=2001]="LOCAL_MESSAGE_FAILED",e[e.LOCAL_MESSAGE_CANCELED=2002]="LOCAL_MESSAGE_CANCELED",e[e.LOCAL_MESSAGE_RESEND_STARTED=2003]="LOCAL_MESSAGE_RESEND_STARTED",e[e.MESSAGE_COLLECTION_FILTER_MISMATCH=2004]="MESSAGE_COLLECTION_FILTER_MISMATCH"}(de||(de={}));var Ne,Se={},Ae=function(){function e(){this._observers=[]}return e.of=function(t){return Se[t]||(Se[t]=new e),Se[t]},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)},e.prototype.send=function(e){for(var t=0,n=this._observers;t<n.length;t++)n[t].onevent(e)},e}(),Ie=function(){function e(e){this._source=e}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),e}(),ke=function(){},Te={NAME_ALPHABETICAL:["name","-pk"],CHRONOLOGICAL:["-createdAt","-pk"],LATEST_LAST_MESSAGE:["-lastMessageCreatedAt","-createdAt","-pk"]},we={LATEST:["channelUrl","-createdAt","-messageId"],LATEST_UNSENT:["channelUrl","sendingStatus","createdAt"],CHILD_MESSAGE_FIRST:["channelUrl","-parentMessageId","-createdAt"]},Re=function(){function e(e,t){this._source=e,this._sendingStatus=t}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendingStatus",{get:function(){return this._sendingStatus},enumerable:!1,configurable:!0}),e}(),Me=function(){function e(){this.messageType="",this.customTypes=[],this.senderUserIds=[],this.sendingStatus=null}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach(function(e){t[e]=n[e]}),t},e.prototype.match=function(e){if(this.messageType&&this.messageType!==e.messageType)return!1;if(this.customTypes.length>0&&!this.customTypes.includes(e.customType))return!1;if(this.senderUserIds.length>0){if(!e.isUserMessage()&&!e.isFileMessage())return!1;if(!this.senderUserIds.includes(e.sender.userId))return!1}return!this.sendingStatus||this.sendingStatus===e.sendingStatus},e}(),Le=function(e,t){if(e.length>0){for(var n=0,r=e.length-1,a=Math.floor((n+r)/2);n<r;){var i=e[a].createdAt-t.createdAt;if(i>0)r=a,a=Math.floor((n+r)/2);else{if(!(i<0))return a;n=a+1,a=Math.floor((n+r)/2)}}return e[a].createdAt>t.createdAt?a:a+1}return e.length},Pe=function(e){var t=e.channel,n=e.ts,r=e.prevLimit,a=void 0===r?0:r,i=e.nextLimit,s=void 0===i?0:i,o=e.filter,l={channel:t,token:n,tokenType:"timestamp",isInclusive:!0,prevResultSize:a,nextResultSize:s,shouldReverse:!1,includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeReplies:!0,includeParentMessageText:!0,showSubchannelMessagesOnly:!0};if(o){var c=o.messageType,u=o.customTypes,d=o.senderUserIds;c&&(l.messageType=c),u.length>0&&(l.customTypes=u),d.length>0&&(l.senderUserIds=d)}return l},De=function(e,t,n){if(n.length>0){var r=n.map(function(e){return e.createdAt});t.includes("prev")&&(e.top=Math.min.apply(Math,U([e.top],r,!1))),t.includes("next")&&(e.bottom=Math.max.apply(Math,U([e.bottom],r,!1)))}},Ue=function(e){return new Promise(function(t,n){setTimeout(function(){return t()},e)})},xe={};!function(e){e.SUCCEEDED="succeeded",e.UNSENT="unsent"}(Ne||(Ne={}));var je,Fe=function(){function e(e){var t=e.iid,n=e.collections;this._iid=t,this._collections=n,xe[t]=this}return e.of=function(e){return xe[e]},e.prototype._serialize=function(e){return e.serialize()},e.prototype._deserialize=function(e){if(e){var t=L(L({},e),{messageId:parseInt(e.messageId)}),n=G.get(this._iid),r=n.UserMessage,a=n.FileMessage,i=n.AdminMessage;if("user"===t.messageType)return r.buildFromSerializedData(t);if("file"===t.messageType)return a.buildFromSerializedData(t);if("admin"===t.messageType)return i.buildFromSerializedData(t)}return null},e.deserialize=function(e,t){if(t){var n=L(L({},t),{messageId:parseInt(t.messageId)}),r=G.get(e),a=r.UserMessage,i=r.FileMessage,s=r.AdminMessage;if("user"===n.messageType)return a.buildFromSerializedData(n);if("file"===n.messageType)return i.buildFromSerializedData(n);if("admin"===n.messageType)return s.buildFromSerializedData(n)}return null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return w.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._getMessageCollectionByType=function(e){return e?this._collections[e]:this._collections.succeeded},e.prototype._getIndexByCollection=function(e){return"UnsentMessage"===e.name?we.LATEST_UNSENT:we.LATEST},e.prototype._fetch=function(e,t,n){return P(this,void 0,void 0,function(){var r,a,i=this;return D(this,function(s){switch(s.label){case 0:return this._localCacheEnabled?(r={where:function(r){if(!r)return!1;if(e&&r.channelUrl!==e)return!1;if(n.parentMessageId&&r.parentMessageId!==n.parentMessageId)return!1;if(n.backward){if(r.createdAt<=n.token)return!1}else if(r.createdAt>=n.token)return!1;return!!t.match(i._deserialize(r))},index:n.index,backward:n.backward},[4,n.collection.query(r)]):[3,3];case 1:return[4,s.sent().fetch({limit:n.limit})];case 2:return a=s.sent(),[2,Promise.all(a.map(function(e){return P(i,void 0,void 0,function(){var t,r,a;return D(this,function(i){switch(i.label){case 0:return t=this._deserialize(e),(r=e.messageParams)&&r.file?(a=t._messageParams,[4,n.collection.getBlob(r.file)]):[3,2];case 1:a._file=i.sent(),i.label=2;case 2:return[2,t]}})})}))];case 3:return[2,[]]}})})},e.fetch=function(t,n,r){return P(this,void 0,void 0,function(){var a,i,s=this;return D(this,function(o){switch(o.label){case 0:return a={where:function(a){if(!a)return!1;if(r.backward){if(a.createdAt<=r.token)return!1}else if(a.createdAt>=r.token)return!1;return!!n.match(e.deserialize(t,a))},index:r.index,backward:r.backward},[4,r.collection.query(a)];case 1:return[4,o.sent().fetch({limit:r.limit})];case 2:return i=o.sent(),[2,Promise.all(i.map(function(n){return P(s,void 0,void 0,function(){var a,i,s;return D(this,function(o){switch(o.label){case 0:return a=e.deserialize(t,n),(i=n.messageParams)&&i.file&&se.isFileTypeBlob(i.fileType)&&"string"==typeof a._messageParams.file?(s=a._messageParams,[4,r.collection.getBlob(i.file)]):[3,2];case 1:s.file=o.sent(),o.label=2;case 2:return[2,a]}})})}))]}})})},e.prototype.get=function(e,t){return P(this,void 0,void 0,function(){var n,r;return D(this,function(a){switch(a.label){case 0:return this._localCacheEnabled?(n=this._getMessageCollectionByType(t),r=this._deserialize,[4,n.getByKey(e)]):[3,2];case 1:return[2,r.apply(this,[a.sent()])];case 2:return[2,null]}})})},e.prototype.getPreviousAndNextMessages=function(e,t,n,r,a){return void 0===r&&(r=30),P(this,void 0,void 0,function(){var i,s;return D(this,function(o){switch(o.label){case 0:return[4,this.getPreviousMessages(e,t,n,r/2,a)];case 1:return i=o.sent(),[4,this.getNextMessages(e,t,n,r/2,a)];case 2:return s=o.sent(),[2,function(e){for(var t=[],n={},r=0,a=e;r<a.length;r++){var i=a[r];i.messageId?n[i.messageId]||(n[i.messageId]=!0,t.push(i)):t.push(i)}return t}(U(U([],i,!0),s,!0))]}})})},e.prototype.getPreviousMessages=function(e,t,n,r,a){return void 0===r&&(r=30),P(this,void 0,void 0,function(){var i;return D(this,function(s){switch(s.label){case 0:return i=this._getMessageCollectionByType(a),[4,this._fetch(e,t,{token:n,limit:r,backward:!1,collection:i,index:this._getIndexByCollection(i)})];case 1:return[2,s.sent().reverse()]}})})},e.prototype.getNextMessages=function(e,t,n,r,a){return void 0===r&&(r=30),P(this,void 0,void 0,function(){var i;return D(this,function(s){switch(s.label){case 0:return i=this._getMessageCollectionByType(a),[4,this._fetch(e,t,{token:n,limit:r,backward:!0,collection:i,index:this._getIndexByCollection(i)})];case 1:return[2,s.sent()]}})})},e.prototype.getAllChildMessages=function(e,t,n){return P(this,void 0,void 0,function(){return D(this,function(r){switch(r.label){case 0:return[4,this._fetch(e.channelUrl,t,{token:Date.now(),limit:null,collection:n,backward:!1,index:we.CHILD_MESSAGE_FIRST,parentMessageId:e.messageId})];case 1:return[2,r.sent()]}})})},e.prototype.getUnsentMessages=function(e,t){return P(this,void 0,void 0,function(){var n;return D(this,function(r){switch(r.label){case 0:return n=this._getMessageCollectionByType(Ne.UNSENT),[4,this._fetch(e,t,{token:0,limit:null,collection:n,backward:!0,index:we.LATEST_UNSENT})];case 1:return[2,r.sent()]}})})},e.prototype.getAllUnsentMessages=function(t){return P(this,void 0,void 0,function(){var n;return D(this,function(r){switch(r.label){case 0:return n=this._getMessageCollectionByType(Ne.UNSENT),[4,e.fetch(this._iid,t,{token:Date.now(),limit:null,collection:n,backward:!1,index:we.LATEST_UNSENT})];case 1:return[2,r.sent()]}})})},e.prototype.countBetween=function(e,t,n,r,a){return P(this,void 0,void 0,function(){var i,s=this;return D(this,function(o){switch(o.label){case 0:return this._localCacheEnabled?(i={where:function(a){return a.channelUrl===e&&!(n>a.createdAt||a.createdAt>r)&&t.match(s._deserialize(a))},index:we.LATEST},[4,this._getMessageCollectionByType(a).query(i)]):[3,3];case 1:return[4,o.sent().count()];case 2:return[2,o.sent()];case 3:return[2,0]}})})},e.prototype._serializeMessages=function(e,t){return P(this,void 0,void 0,function(){var n,r,a=this;return D(this,function(i){switch(i.label){case 0:return n=this._getMessageCollectionByType(t),r=[],[4,Promise.all(e.map(function(e){return P(a,void 0,void 0,function(){var t,a;return D(this,function(i){switch(i.label){case 0:return(t=e.serialize())?((t=L({},t)).messageParams&&(t.messageParams=L({},t.messageParams)),e.sendingStatus&&"succeeded"!==e.sendingStatus?t.messageId="unsent-".concat(e.reqId):t.messageId="".concat(e.messageId),e.isFileMessage()&&e._messageParams&&e._messageParams.file&&se.isBlob(e._messageParams.file)&&se.isFileTypeBlob(e._messageParams.fileType)?[4,n.saveBlob(e._messageParams.file,e.reqId)]:[3,2]):[3,3];case 1:a=i.sent(),t.messageParams.file=a,i.label=2;case 2:r.push(t),i.label=3;case 3:return[2]}})})}))];case 1:return i.sent(),[2,r]}})})},e.prototype.upsert=function(e,t){return P(this,void 0,void 0,function(){var n,r,a,i,s,o,l,c,u,d,h,f,p,_,m;return D(this,function(g){switch(g.label){case 0:return this._localCacheEnabled?(n=Ba.getInstance(this._iid),r=this._getMessageCollectionByType(t),[4,this._serializeMessages(e,t)]):[3,13];case 1:return a=g.sent(),[4,r.upsertMany(a)];case 2:if(g.sent(),t&&t!==Ne.SUCCEEDED)return[3,13];i=[],s=[],o=0,g.label=3;case 3:return o<e.length?(l=e[o]).sendingStatus&&l.sendingStatus===n.MessageSendingStatus.SUCCEEDED&&l.updatedAt>0?(u=(c=i).concat,[4,this._locallyUpdateChildMessages(l,Ne.SUCCEEDED)]):[3,6]:[3,7];case 4:return i=u.apply(c,[g.sent()]),h=(d=s).concat,[4,this._locallyUpdateChildMessages(l,Ne.UNSENT)];case 5:s=h.apply(d,[g.sent()]),g.label=6;case 6:return o++,[3,3];case 7:return i.length>0?(f=this._getMessageCollectionByType(Ne.SUCCEEDED),[4,this._serializeMessages(i,Ne.SUCCEEDED)]):[3,10];case 8:return p=g.sent(),[4,f.upsertMany(p)];case 9:g.sent(),g.label=10;case 10:return s.length>0?(_=this._getMessageCollectionByType(Ne.UNSENT),[4,this._serializeMessages(s,Ne.UNSENT)]):[3,13];case 11:return m=g.sent(),[4,_.upsertMany(m)];case 12:g.sent(),g.label=13;case 13:return[2]}})})},e.prototype._locallyUpdateChildMessages=function(e,t){return P(this,void 0,void 0,function(){var n,r,a;return D(this,function(i){switch(i.label){case 0:return n=new Me,r=[],a=this._getMessageCollectionByType(t),[4,this.getAllChildMessages(e,n,a)];case 1:return i.sent().forEach(function(t){t.applyParentMessage(e)&&r.push(t)}),[2,r]}})})},e.prototype.remove=function(e,t){return P(this,void 0,void 0,function(){return D(this,function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,Ue(500)]:[3,3];case 1:return n.sent(),[4,this._getMessageCollectionByType(t).removeIf({messageId:{"/in":e.map(function(e){return"".concat(e)})}})];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.removeUnsentMessages=function(e){return P(this,void 0,void 0,function(){var t,n,r,a,i,s;return D(this,function(o){switch(o.label){case 0:return t=e.channelUrl,n=e.sendingStatus,r=e.reqIds,a=[],this._localCacheEnabled?[4,Ue(500)]:[3,3];case 1:return o.sent(),i=this._getMessageCollectionByType(Ne.UNSENT),s={channelUrl:{"=":t}},n&&(s.sendingStatus={"=":n}),r&&r.length>0&&(s.reqId={"/in":r}),[4,i.removeIf(s)];case 2:a=o.sent(),o.label=3;case 3:return[2,a]}})})},e.prototype.removeFailedMessages=function(e,t){return P(this,void 0,void 0,function(){var n,r,a,i;return D(this,function(s){switch(s.label){case 0:return n=[],this._localCacheEnabled?[4,Ue(500)]:[3,3];case 1:return s.sent(),r=this._getMessageCollectionByType(Ne.UNSENT),a=Ba.getInstance(this._iid),i={channelUrl:{"=":e},sendingStatus:{"=":a.MessageSendingStatus.FAILED}},t&&t.length>0&&(i.reqId={"/in":t}),[4,r.removeIf(i)];case 2:n=s.sent(),s.label=3;case 3:return[2,n]}})})},e.prototype.clearByChannelUrl=function(e){return P(this,void 0,void 0,function(){var t=this;return D(this,function(n){switch(n.label){case 0:return[4,Promise.all(Object.keys(Ne).map(function(n){var r=t._getMessageCollectionByType(Ne[n]),a={channelUrl:{"=":e}};return r.removeIf(a)}))];case 1:return n.sent(),[2]}})})},e.prototype.clear=function(e){return P(this,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,this._getMessageCollectionByType(e).clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.clearAll=function(){return P(this,void 0,void 0,function(){var e=this;return D(this,function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,Promise.all(Object.keys(Ne).map(function(t){return e.clear(Ne[t])}))]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.clearAbove=function(e,t){return P(this,void 0,void 0,function(){return D(this,function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,this._getMessageCollectionByType(t).removeIf({createdAt:{"<":e}})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e}(),He=function(){function e(e){var t=e.top,n=e.bottom;this.top=t,this.bottom=n}return e.prototype.include=function(e){return this.top<=e&&e<=this.bottom},e.prototype.overlap=function(e){return this.include(e.top)||this.include(e.bottom)},e}(),Ge={},Be=function(e,t){return"sendbird:".concat(e,"@channel/").concat(t,"/message/sync")},Ve=function(){function e(e){var t=e.iid,n=e.channel,r=e.limit,a=void 0===r?$e:r,i=this;this._prevSync=null,this._nextSync=null,this._syncRange=new He({top:Number.MAX_SAFE_INTEGER,bottom:-1}),this._isPrevSyncComplete=!1,this._isNextSyncComplete=!1,this._iid=t,this._channel=n,this._limit=a;var s=G.get(this._iid).BaseChannel,o=w.get(this._iid),l=o.get("currentUserId"),c=o.get("store"),u=o.get("apiClient"),d=Fe.of(this._iid),h=Ae.of(this._iid),f=Be(l,this._channel.url),p=o.container.concurrentCallLimit,_=o.container.backOffDelay;this._prevSync=new ct(f,function(e){return P(i,void 0,void 0,function(){var e,t,r,a,i,o,l,p,_,m=this;return D(this,function(g){switch(g.label){case 0:return e={hasNext:!0,nextParams:null},[4,c.get(f)];case 1:return(t=g.sent())&&t.isPrevSyncComplete?[3,7]:(t&&(this._syncRange=t.range,this._isPrevSyncComplete=t.isPrevSyncComplete),r=Pe({channel:this._channel,ts:this._syncRange.top,prevLimit:this._limit}),[4,u.getMessageList(r)]);case 2:return a=g.sent(),i=[],o=a.messages.map(function(e){var t=s.buildMessage(e,m._channel);return(t.isUserMessage()||t.isFileMessage())&&t._isSentByMe()&&i.push(t.reqId),t}),l=this.getMinCreatedAt(o),this._syncRange.top=Math.min(this._syncRange.top,l),this._syncRange.bottom<0&&(this._syncRange.bottom=this.getMaxCreatedAt(o)),this._isPrevSyncComplete=o.length<this._limit,X.debug("Message collection background sync fetched messages count: ",o.length),[4,d.upsert(o)];case 3:return g.sent(),i.length>0?[4,d.removeUnsentMessages({channelUrl:this._channel.url,reqIds:i})]:[3,5];case 4:g.sent(),g.label=5;case 5:return p={range:this._syncRange,isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:t?t.isNextSyncComplete:this._isNextSyncComplete},[4,c.set({key:f,value:p,generation:1})];case 6:return g.sent(),_={source:de.MESSAGE_BACKGROUND,payload:{channel:n,messages:o}},h.send(_),e.hasNext=!this._isPrevSyncComplete,[3,8];case 7:X.debug("Message collection background sync has finished."),e.hasNext=!1,g.label=8;case 8:return[2,e]}})})},p,_),this._nextSync=new ct(f,function(e){return P(i,void 0,void 0,function(){var e,t,r,a,i,o,l,p,_,m=this;return D(this,function(g){switch(g.label){case 0:return e={hasNext:!0,nextParams:null},[4,c.get(f)];case 1:return(t=g.sent())?(this._syncRange=t.range,r=Pe({channel:this._channel,ts:this._syncRange.bottom,nextLimit:this._limit}),[4,u.getMessageList(r)]):[3,7];case 2:return a=g.sent(),i=[],o=a.messages.map(function(e){var t=s.buildMessage(e,m._channel);return(t.isUserMessage()||t.isFileMessage())&&t._isSentByMe()&&i.push(t.reqId),t}),l=this.getMaxCreatedAt(o),this._syncRange.bottom=Math.max(this._syncRange.bottom,l),this._isNextSyncComplete=o.length<this._limit,[4,d.upsert(o)];case 3:return g.sent(),i.length>0?[4,d.removeUnsentMessages({channelUrl:this._channel.url,reqIds:i})]:[3,5];case 4:g.sent(),g.label=5;case 5:return p={range:this._syncRange,isPrevSyncComplete:t?t.isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:this._isNextSyncComplete},[4,c.set({key:f,value:p,generation:1})];case 6:g.sent(),_={source:de.MESSAGE_BACKGROUND,payload:{channel:n,messages:o}},h.send(_),e.hasNext=!this._isNextSyncComplete,g.label=7;case 7:return[2,e]}})})},p,_)}return e.of=function(t,n,r){return void 0===r&&(r=$e),Ge[t]||(Ge[t]={}),Ge[t][n.url]||(Ge[t][n.url]=new e({iid:t,channel:n,limit:r})),Ge[t][n.url]},Object.defineProperty(e.prototype,"priority",{set:function(e){this._prevSync.priority=e,this._nextSync.priority=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),e.prototype.resume=function(){X.debug("Message collection background sync has resumed."),this._isPrevSyncComplete||this._prevSync.resume(null),this._isNextSyncComplete||this._nextSync.resume(null)},e.prototype.pause=function(){X.debug("Message collection background sync has paused."),this._prevSync.stop(),this._nextSync.stop()},e.prototype.getMinCreatedAt=function(e){var t=Number.MAX_SAFE_INTEGER;return e.forEach(function(e){var n=e.createdAt;n<t&&(t=n)}),t},e.prototype.getMaxCreatedAt=function(e){var t=0;return e.forEach(function(e){var n=e.createdAt;n>t&&(t=n)}),t},e}(),ze={},qe=function(e,t){return"sendbird:".concat(e,"@channel/").concat(t,"/message/changelogs")},Ke=function(){function e(e){var t=e.iid,n=e.channel,r=this;this._token=0,this._sync=null,this._iid=t,this._channel=n;var a=G.get(this._iid).BaseChannel,i=w.get(this._iid),s=i.get("currentUserId"),o=i.get("store"),l=i.get("apiClient"),c=i.container.localCacheEnabled,u=Fe.of(this._iid),d=Ae.of(this._iid),h=qe(s,this._channel.url);this._sync=new ct(h,function(e){return P(r,void 0,void 0,function(){var e,t,r,s,f,p,_,m,g,v=this;return D(this,function(y){switch(y.label){case 0:return e={hasNext:!0,nextParams:""},c?[4,o.get(h)]:[3,2];case 1:return r=y.sent(),[3,3];case 2:r=null,y.label=3;case 3:return t=r,this._token=t?t.token:i.get("firstConnectedAt")/1e3,s={channelUrl:this._channel.url,isOpenChannel:this._channel.isOpenChannel(),includeMetaArray:!1,includeReactions:!0,includeReplies:!0,includeParentMessageText:!0,includeThreadInfo:!0},"number"==typeof this._token?s.timestamp=this._token:s.token=this._token,[4,l.getMessageChangeLogs(s)];case 4:return f=y.sent(),p=f.updated.map(function(e){return a.buildMessage(e,v._channel)}),_={updatedMessages:p,deletedMessageIds:f.deleted.map(function(e){return parseInt(e.message_id)})},e.hasNext=f.has_more,e.nextParams=this._token=f.next,c?(m=[],p.forEach(function(e){(e.isUserMessage()||e.isFileMessage())&&e._isSentByMe()&&m.push(e.reqId)}),m.length>0?[4,u.removeUnsentMessages({channelUrl:this._channel.url,reqIds:m})]:[3,6]):[3,10];case 5:y.sent(),y.label=6;case 6:return[4,u.upsert(p)];case 7:return y.sent(),[4,u.remove(_.deletedMessageIds)];case 8:return y.sent(),[4,o.set({key:h,value:{token:this._token},generation:1})];case 9:y.sent(),y.label=10;case 10:return X.debug("Message collection changelog sync update messages count: ",_.updatedMessages.length),X.debug("Message collection changelog sync deleted message ids count: ",_.deletedMessageIds.length),g={source:de.MESSAGE_CHANGELOG,payload:L({channel:n},_)},d.send(g),[2,e]}})})})}return e.of=function(t,n){return ze[t]||(ze[t]={}),ze[t][n.url]||(ze[t][n.url]=new e({iid:t,channel:n})),ze[t][n.url]},e.prototype.resume=function(){X.debug("Message collection changelog sync has resumed."),this._sync.resume(null,!0)},e.prototype.pause=function(){X.debug("Message collection changelog sync has paused."),this._sync.stop()},e}();!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api",e.CACHE_ONLY="cache_only"}(je||(je={}));var Ye,We=function(){function e(){this._onCacheResult=null,this._onApiResult=null}return e.prototype.invokeCacheResult=function(e,t){this._onCacheResult(e,t)},e.prototype.invokeApiResult=function(e,t){this._onApiResult(e,t)},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}(),Qe=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},Je=function(){function e(){}return e.prototype.isNetworkConnected=function(){return!("undefined"==typeof navigator||!navigator.onLine)},e.ready=function(){return P(this,void 0,void 0,function(){return D(this,function(e){return"undefined"!=typeof navigator&&navigator&&"boolean"==typeof navigator.onLine?[2,navigator.onLine]:[2,new Promise(function(e,t){o.default.get("https://www.google.com").then(function(){return e(!0)}).catch(function(){return e(!1)})})]})})},e}();!function(e){e[e.BACKGROUND_SYNC_CLOSE=0]="BACKGROUND_SYNC_CLOSE",e[e.BACKGROUND_SYNC_OPEN=1]="BACKGROUND_SYNC_OPEN",e[e.FILL=2]="FILL",e[e.USER_CALL=3]="USER_CALL"}(Ye||(Ye={}));var Xe,$e=100,Ze=new He({top:Number.MAX_SAFE_INTEGER,bottom:0}),et=new Map,tt=function(e){return"sendbird@message/fill/".concat(e,"/").concat(Qe())},nt=function(){function e(e){var t=e.iid,n=e.channel,r=e.startingPoint,a=e.filter,i=e.limit,s=void 0===i?100:i,o=this;this._hugeGapCheckTimer=null,this._messages=[],this._syncRange=new He(L({},Ze)),this._hasPrevious=!0,this._hasNext=!0,this._unsentMessages=[],this._iid=t,this._channel=n,this._startingPoint=r,this._filter=a,this._limit=s,this._syncLimit=Math.max(s,$e),this._eventObserver={onevent:function(e){return P(o,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return[4,this._handleEvent(e)];case 1:return t.sent(),[2]}})})}},this._eventHandler={onMessagesAdded:ke,onMessagesUpdated:ke,onMessagesDeleted:ke,onChannelUpdated:ke,onChannelDeleted:ke,onHugeGapDetected:ke};var l=w.get(this._iid);this._localCacheEnabled=l.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=Ve.of(this._iid,this._channel,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=Ke.of(this._iid,this._channel),this._connectionObserver={onConnect:function(){o._checkHugeGap(),o._localCacheEnabled&&o._backgroundSync.resume(),o._changelogSync.resume()},onDisconnect:function(){return P(o,void 0,void 0,function(){return D(this,function(e){switch(e.label){case 0:return[4,Je.ready()];case 1:return e.sent()||(this._previousFillSync.stop(),this._nextFillSync.stop(),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}})})}},this._previousFillSync=new ct(tt("prev"),function(e){return P(o,void 0,void 0,function(){var t,n,r;return D(this,function(a){switch(a.label){case 0:return[4,this._getRemoteMessages({ts:e,prevLimit:this._syncLimit})];case 1:return(t=a.sent()).length>0?(n=Math.min.apply(Math,t.map(function(e){return e.createdAt})),this._syncRange.top=Math.min(this._syncRange.top,n),r=new Re(de.MESSAGE_FILL,t[0].sendingStatus),this._addMessagesToView(t,{context:r}),[2,{hasNext:t.length<this._syncLimit||this._syncRange.top>=n,nextParams:this._syncRange.top}]):[2,{hasNext:!1,nextParams:0}]}})})}),this._nextFillSync=new ct(tt("next"),function(e){return P(o,void 0,void 0,function(){var t,n,r;return D(this,function(a){switch(a.label){case 0:return[4,this._getRemoteMessages({ts:e,nextLimit:this._syncLimit})];case 1:return(t=a.sent()).length>0?(n=Math.max.apply(Math,t.map(function(e){return e.createdAt})),this._syncRange.bottom=Math.max(this._syncRange.bottom,n),r=new Re(de.MESSAGE_FILL,t[0].sendingStatus),this._addMessagesToView(t,{context:r}),[2,{hasNext:t.length<this._syncLimit||this._syncRange.bottom<=n,nextParams:this._syncRange.bottom}]):[2,{hasNext:!1,nextParams:0}]}})})}),fe.of(this._iid).addObserver(this._connectionObserver)}return e.prototype._handleEvent=function(e){var t=e.source,n=e.payload,r=void 0===n?{}:n,a=Ba.getInstance(this._iid);switch(e.source){case de.MESSAGE_BACKGROUND:break;case de.MESSAGE_CHANGELOG:var i=r,s=i.channel,o=i.updatedMessages,l=i.deletedMessageIds;if(s&&s.url===this._channel.url){if(o&&o.length>0){this._removeMatchingUnsentMessagesFromView(o);var c=new Re(t,o[0].sendingStatus);this._addMessagesToView(o,{context:c})}l&&l.length>0&&(f=this._removeMessagesFromView(l,{})).length>0&&(c=new Re(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(c,this._channel,f))}break;case de.LOCAL_MESSAGE_PENDING_CREATED:case de.LOCAL_MESSAGE_RESEND_STARTED:case de.LOCAL_MESSAGE_CANCELED:var u=r,d=(s=u.channel,u.message);c=new Re(t,d.sendingStatus),s.url===this._channel.url&&this._upsertUnsentMessagesToView([d],{context:c});break;case de.EVENT_MESSAGE_SENT:var h=r;if(s=h.channel,d=h.message,s.url===this._channel.url){var f=this._removeMatchingUnsentMessagesFromView([d]);if(this._hasNext)f.length>0&&(c=new Re(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(c,s,f));else{this._addMessagesToView([d],{});var c=new Re(t,d.sendingStatus);f.length>0?this._eventHandler.onMessagesUpdated(c,s,[d]):this._eventHandler.onMessagesAdded(c,s,[d])}}break;case de.EVENT_MESSAGE_RECEIVED:var p=r;s=p.channel,d=p.message,s.url!==this._channel.url||this._hasNext||(c=new Re(t,d.sendingStatus),this._addMessagesToView([d],{context:c}));break;case de.LOCAL_MESSAGE_FAILED:var _=r;s=_.channel,d=_.message,s.url===this._channel.url&&d.sendingStatus===a.MessageSendingStatus.FAILED&&(c=new Re(t,d.sendingStatus),this._upsertUnsentMessagesToView([d],{context:c}));break;case de.EVENT_MESSAGE_UPDATED:var m=r;s=m.channel,d=m.message,s.url===this._channel.url&&(c=new Re(t,d.sendingStatus),this._addMessagesToView([d],{context:c,isUpdateOnly:!0}));break;case de.EVENT_MESSAGE_DELETED:var g=r,v=(s=g.channel,g.messageId);s.url===this._channel.url&&(et.delete(v),(f=this._removeMessagesFromView([v],{})).length>0&&(c=new Re(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(c,this._channel,f)));break;case de.EVENT_DELIVERY_RECEIPT_UPDATED:case de.EVENT_READ_RECEIPT_UPDATED:if((s=r.channel).isGroupChannel()){o=[];for(var y=0,E=this._messages;y<E.length;y++)d=E[y],(et.get(d.messageId)||0)!==(I=this.channel.getUnreadMemberCount(d))&&(o.push(d),I>0?et.set(d.messageId,I):et.delete(d.messageId));o.length>0&&(c=new Re(t,o[0].sendingStatus),this._eventHandler.onMessagesUpdated(c,s,o))}break;case de.EVENT_USER_LEFT:var b=w.get(this._iid),C=r,O=(s=C.channel,C.user),N=b.get("currentUserId");if(O.userId!==N){o=[];for(var S=0,A=this._messages;S<A.length;S++){var I;d=A[S],(et.get(d.messageId)||0)!==(I=this.channel.getUnreadMemberCount(d))&&(o.push(d),I>0?et.set(d.messageId,I):et.delete(d.messageId))}o.length>0&&(c=new Re(t,o[0].sendingStatus),this._eventHandler.onMessagesUpdated(c,s,o))}else c=new Ie(t),this._eventHandler.onChannelDeleted(c,s.url);break;case de.EVENT_CHANNEL_CHANGED:case de.EVENT_USER_RECEIVED_INVITATION:case de.EVENT_USER_JOINED:case de.EVENT_CHANNEL_FROZEN:case de.EVENT_CHANNEL_UNFROZEN:case de.EVENT_CHANNEL_HIDDEN:case de.EVENT_CHANNEL_UNHIDDEN:case de.EVENT_USER_MUTED:case de.EVENT_USER_UNMUTED:case de.EVENT_TYPING_STATUS_UPDATED:case de.EVENT_OPERATOR_UPDATED:case de.EVENT_CHANNEL_METADATA_UPDATED:case de.EVENT_CHANNEL_METADATA_DELETED:case de.EVENT_CHANNEL_METACOUNTER_UPDATED:case de.EVENT_CHANNEL_METACOUNTER_DELETED:s=r.channel,c=new Ie(t),this._eventHandler.onChannelUpdated(c,s);break;case de.EVENT_CHANNEL_DELETED:s=r.channel,c=new Ie(t),this._eventHandler.onChannelDeleted(c,s.url)}},e.prototype._createRemoteMessageParams=function(e){var t=e.prevLimit,n=void 0===t?0:t,r=e.nextLimit,a=void 0===r?0:r,i=new(0,G.get(this._iid).MessageListParams);return i.isInclusive=!0,i.prevResultSize=n,i.nextResultSize=a,i.includeMetaArray=!0,i.includeReactions=!0,i.includeThreadInfo=!0,i.includeReplies=!0,i.includeParentMessageText=!0,i},e.prototype._getRemoteMessages=function(e){var t=e.ts,n=e.prevLimit,r=void 0===n?0:n,a=e.nextLimit,i=void 0===a?0:a;return P(this,void 0,void 0,function(){var e,n,a,s;return D(this,function(o){switch(o.label){case 0:return e=[],r>0?(a=this._createRemoteMessageParams({prevLimit:r,nextLimit:0}),[4,this._channel.getMessagesByTimestamp(t,a)]):[3,2];case 1:n=o.sent(),e=e.concat(n),this._hasPrevious=n.length>=r,o.label=2;case 2:return i>0?(a=this._createRemoteMessageParams({prevLimit:0,nextLimit:i}),[4,this._channel.getMessagesByTimestamp(t,a)]):[3,4];case 3:s=o.sent(),e=e.concat(s),this._hasNext=s.length>=i,o.label=4;case 4:return e.length>0?[4,this._upsertRemotelyFetchedMessages(e)]:[3,6];case 5:o.sent(),o.label=6;case 6:return[2,e]}})})},e.prototype._upsertRemotelyFetchedMessages=function(e,t){return void 0===t&&(t={}),P(this,void 0,void 0,function(){var n,r,a,i;return D(this,function(s){switch(s.label){case 0:return n=t.context,r=void 0===n?null:n,a=Fe.of(this._iid),i=e.map(function(e){return e.reqId}),[4,a.removeUnsentMessages({channelUrl:this.channel.url,reqIds:i})];case 1:return s.sent(),this._removeMatchingUnsentMessagesFromView(e,{context:r}),[4,a.upsert(e,Ne.SUCCEEDED)];case 2:return s.sent(),this._addMessagesToView(e,{context:r}),[2]}})})},e.prototype._checkHugeGap=function(){return P(this,void 0,void 0,function(){var e,t,n,r,a,i,s,o,l,c,u,d,h,f,p,_=this;return D(this,function(m){switch(m.label){case 0:return m.trys.push([0,12,,13]),e=G.get(this._iid).BaseChannel,t=w.get(this._iid),n=t.get("apiClient"),this._messages.length>0?(r=Fe.of(this._iid),a={from:this._messages[0].createdAt,to:Math.min(this._syncRange.top,this._messages[this._messages.length-1].createdAt),cachedCount:0},i=a,[4,r.countBetween(this._channel.url,this._filter,a.from,a.to)]):[3,8];case 1:return i.cachedCount=m.sent(),s={from:Math.max(this._syncRange.bottom,this._messages[0].createdAt),to:this.hasNext?this._messages[this._messages.length-1].createdAt:Number.MAX_SAFE_INTEGER,cachedCount:0},o=s,[4,r.countBetween(this._channel.url,this._filter,s.from,s.to)];case 2:return o.cachedCount=m.sent(),l={iid:this._iid,channelUrl:this._channel.url,channelType:this._channel.channelType,filter:this._filter,previous:a,next:s},[4,n.checkMessageHugeGap(L(L({},l),l.filter))];case 3:return c=m.sent(),(u={isHugeGap:!!c.is_huge_gap,previousMessages:c.prev_messages.map(function(t){return e.buildMessage(t,_._channel)})||[],previousHasMore:!!c.prev_hasmore,nextMessages:c.next_messages.map(function(t){return e.buildMessage(t,_._channel)})||[],nextHasMore:!!c.next_hasmore}).isHugeGap?[3,6]:(h=U(U([],u.previousMessages,!0),u.nextMessages,!0),X.debug("Message collection non-huge gap message fill count: ",h.length),h.length>0?(f=new Re(de.MESSAGE_FILL,h[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(h,{context:f})]):[3,5]);case 4:m.sent(),this._extendSyncRange(["prev"],u.previousMessages),this._extendSyncRange(["next"],u.nextMessages),u.previousHasMore&&this._previousFillSync.run(this._syncRange.top),u.nextHasMore&&this._nextFillSync.run(this._syncRange.bottom),m.label=5;case 5:return[3,7];case 6:setTimeout(function(){return _._eventHandler.onHugeGapDetected()},10),m.label=7;case 7:return[3,11];case 8:return d=Math.floor(this._syncLimit/2),[4,this._getRemoteMessages({ts:this._startingPoint,prevLimit:d,nextLimit:d})];case 9:return(h=m.sent()).length>0?(f=new Re(de.MESSAGE_FILL,h[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(h,{context:f})]):[3,11];case 10:m.sent(),this._extendSyncRange(["prev","next"],this._messages),m.label=11;case 11:return[3,13];case 12:return p=m.sent(),X.warn("Message collection huge gap checker error: ",p),this._hugeGapCheckTimer=setTimeout(function(){_._hugeGapCheckTimer=null,_._checkHugeGap()},3e3),[3,13];case 13:return[2]}})})},e.prototype._extendSyncRange=function(e,t){if(t.length>0){var n=t.map(function(e){return e.createdAt});e.includes("prev")&&(this._syncRange.top=Math.min.apply(Math,U([this._syncRange.top],n,!1))),e.includes("next")&&(this._syncRange.bottom=Math.max.apply(Math,U([this._syncRange.bottom],n,!1)))}},e.prototype._updateChildMessagesInView=function(e){var t=[];return this._messages.forEach(function(n){n.applyParentMessage(e)&&t.push(n)}),t},e.prototype._addMessagesToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=t.isUpdateOnly,i=void 0!==a&&a,s=Ba.getInstance(this._iid),o=[],l=[],c=[],u=0,d=e;u<d.length;u++){var h=d[u];if(h.sendingStatus===s.MessageSendingStatus.SUCCEEDED){var f=this._messages.map(function(e){return e.messageId}).indexOf(h.messageId);if(this._filter.match(h)){var p=this._channel.getUnreadMemberCount(h);if(et.set(h.messageId,p),f>=0){if(l.push(h),this._messages[f]=h,h.updatedAt>0){var _=this._updateChildMessagesInView(h);l=l.concat(_)}}else if(!i){var m=Le(this._messages,h);o.push(h),this._messages.splice(m,0,h)}}else f>=0&&(c.push(h),this._messages.splice(f,1))}}r&&(o.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,o),l.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,l),c.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,c))},e.prototype._removeMessagesFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,s=e;i<s.length;i++){var o=s[i],l=this._messages.map(function(e){return e.messageId}).indexOf(o);if(l>=0){var c=this._messages[l];a.push(c),this._messages.splice(l,1)}}return r&&a.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,a),a},e.prototype._upsertUnsentMessagesToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=[],s=[],o=0,l=e;o<l.length;o++){var c=l[o],u=this._unsentMessages.map(function(e){return e.reqId}).indexOf(c.reqId);if(this._filter.match(c))if(u>=0)i.push(c),this._unsentMessages[u]=c;else{var d=Le(this._unsentMessages,c);a.push(c),this._unsentMessages.splice(d,0,c)}else u>=0&&(this._unsentMessages.splice(u,1),s.push(c))}r&&(a.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,a),i.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,i),s.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,s))},e.prototype._removeMatchingUnsentMessagesFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,s=e;i<s.length;i++){var o=s[i];if((o.isUserMessage()||o.isFileMessage())&&o._isSentByMe()){var l=this._unsentMessages.map(function(e){return e.reqId}).indexOf(o.reqId);if(l>=0){var c=this._unsentMessages[l];a.push(c),this._unsentMessages.splice(l,1)}}}return r&&a.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,a),a},e.prototype._removeFailedMessagesFromView=function(e){var t=Ba.getInstance(this._iid),n=[],r=[],a=this._unsentMessages.map(function(e){return e.reqId});if(e)for(var i=0,s=e;i<s.length;i++){var o=s[i],l=a.indexOf(o.reqId);l>=0&&this._unsentMessages[l].sendingStatus===t.MessageSendingStatus.FAILED?n.push(this._unsentMessages[l]):r.push(this._unsentMessages[l])}else for(var c=0,u=this._unsentMessages;c<u.length;c++)(o=u[c]).sendingStatus===t.MessageSendingStatus.FAILED?n.push(o):r.push(o);return this._unsentMessages=r,n},e._processNextAutoResend=function(e){if(e.isCacheEnabled&&!e.isInBackground&&e.getConnectionState()===e.ConnectionState.OPEN)try{var t=e.getAutoResendQueue();if(t.length>0){e.getIsProcessingAutoResend()||(X.debug("Auto-resend queue started."),e.setIsProcessingAutoResend(!0));var n=t[0];X.debug("Processing auto-resend for message request id: ",n.reqId),G.get(e._iid).GroupChannel.getChannel(n.channelUrl,k.INTERNAL_CALL,function(t,r){var a;if(e.getErrorFirstCallback()&&(r=(a=[t,r])[0],t=a[1]),r)throw r;n.isUserMessage()?t._autoResendUserMessage(n):n.isFileMessage()&&t._autoResendFileMessage(n)})}else X.debug("Auto-resend queue finished."),e.setIsProcessingAutoResend(!1)}catch(t){X.warn("Process auto-resend error: ",t),e.setIsProcessingAutoResend(!1)}},e._completeCurrentAndProcessNextAutoResend=function(e,t){if(e.isCacheEnabled&&t._isAutoResendRegistered){var n=e.getAutoResendQueue();if(t.sendingStatus===e.MessageSendingStatus.SUCCEEDED||t.sendingStatus===e.MessageSendingStatus.FAILED&&!ie.isAutoResendableError(t.errorCode))n.length>0&&t.reqId===n[0].reqId&&(n.shift(),this._processNextAutoResend(e));else if(t.sendingStatus===e.MessageSendingStatus.PENDING){if(n.length>0&&n.map(function(e){return e.reqId}).indexOf(t.reqId)>-1)return;n.push(t),!e.getIsProcessingAutoResend()&&n.length>0&&this._processNextAutoResend(e)}}},e._processPendingMessages=function(e){return P(this,void 0,void 0,function(){var t,n,r,a,i,s,o,l,c,u,d,h;return D(this,function(f){switch(f.label){case 0:return t=Fe.of(e._iid),n=Ae.of(e._iid),(r=new Me).sendingStatus=e.MessageSendingStatus.PENDING,[4,t.getAllUnsentMessages(r)];case 1:a=f.sent(),i=0,s=a,f.label=2;case 2:return i<s.length?(o=s[i],[4,e.GroupChannel.getChannel(o.channelUrl)]):[3,10];case 3:return l=f.sent(),o._isAutoResendRegistered?(c=(new Date).getTime(),u=o.createdAt+2592e5,c<=u?(-1===(d=e.getAutoResendQueue()).map(function(e){return e.reqId}).indexOf(o.reqId)&&d.push(o),[3,6]):[3,4]):[3,7];case 4:return X.debug("Auto-resend registered pending messaged expired. Expiration date: ",new Date(u).toLocaleString()),(h=o._clone()).sendingStatus=e.MessageSendingStatus.FAILED,h.requestState=e.MessageRequestState.FAILED,h._isAutoResendRegistered=!1,[4,t.upsert([h],Ne.UNSENT)];case 5:f.sent(),n.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:l,message:h}}),f.label=6;case 6:return[3,9];case 7:return X.debug("Cached pending message is not auto-resend registered. Changing its sending status to failed: ",o.reqId),(h=o._clone()).sendingStatus=e.MessageSendingStatus.FAILED,h.requestState=e.MessageRequestState.FAILED,h.errorCode=j.ACK_TIMEOUT,[4,t.upsert([h],Ne.UNSENT)];case 8:f.sent(),n.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:l,message:h}}),f.label=9;case 9:return i++,[3,2];case 10:return[2]}})})},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return this._messages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){var e=Ba.getInstance(this._iid);return this._unsentMessages.filter(function(t){return t.sendingStatus===e.MessageSendingStatus.PENDING})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){var e=Ba.getInstance(this._iid);return this._unsentMessages.filter(function(t){return t.sendingStatus===e.MessageSendingStatus.FAILED})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startingPoint",{get:function(){return this._startingPoint},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){var t=this,n=new We;this._messages=[],this._syncRange=new He(L({},Ze)),this._hasNext=!0,this._hasPrevious=!0;var r=Math.floor(this._limit/2),a=Fe.of(this._iid),i=Ae.of(this._iid);switch(e){case je.CACHE_ONLY:a.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint).then(function(e){return P(t,void 0,void 0,function(){var t;return D(this,function(r){switch(r.label){case 0:return[4,a.getUnsentMessages(this._channel.url,this._filter)];case 1:return t=r.sent(),this._upsertUnsentMessagesToView(t),this._addMessagesToView(e),n.invokeCacheResult(null,e),[2]}})})}).catch(function(e){n.invokeCacheResult(e,null)}).finally(function(){i.addObserver(t._eventObserver)});break;case je.CACHE_AND_REPLACE_BY_API:a.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint).then(function(e){return P(t,void 0,void 0,function(){var t;return D(this,function(r){switch(r.label){case 0:return[4,a.getUnsentMessages(this._channel.url,this._filter)];case 1:return t=r.sent(),this._upsertUnsentMessagesToView(t),this._addMessagesToView(e),n.invokeCacheResult(null,e),[2]}})})}).catch(function(e){n.invokeCacheResult(e,null)}).finally(function(){t._getRemoteMessages({ts:t._startingPoint,prevLimit:r,nextLimit:r}).then(function(e){t._messages=[],t._addMessagesToView(e),t._extendSyncRange(["prev","next"],t._messages),n.invokeApiResult(null,e)}).catch(function(e){n.invokeApiResult(e,null)}).finally(function(){i.addObserver(t._eventObserver)})})}return n},e.prototype.loadPrevious=function(){return P(this,void 0,void 0,function(){var e,t;return D(this,function(n){switch(n.label){case 0:return this._hasPrevious?(e=this._messages.length>0?Math.min.apply(Math,this._messages.map(function(e){return e.createdAt})):Number.MAX_SAFE_INTEGER,[4,Je.ready()]):[3,5];case 1:return n.sent()?[3,3]:(X.debug("Message collection loadPrevious() from the cache."),[4,Fe.of(this._iid).getPreviousMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return t=n.sent(),this._addMessagesToView(t),[2,t];case 3:return X.debug("Message collection loadPrevious() from the server."),[4,this._getRemoteMessages({ts:e,prevLimit:this._limit})];case 4:return t=n.sent(),this._addMessagesToView(t),De(this._syncRange,["prev"],this._messages),[2,t];case 5:return[2,[]]}})})},e.prototype.loadNext=function(){return P(this,void 0,void 0,function(){var e,t;return D(this,function(n){switch(n.label){case 0:return this._hasNext?(e=this._messages.length>0?Math.max.apply(Math,this._messages.map(function(e){return e.createdAt})):0,[4,Je.ready()]):[3,5];case 1:return n.sent()?[3,3]:(X.debug("Message collection loadNext() from the cache."),[4,Fe.of(this._iid).getNextMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return t=n.sent(),this._addMessagesToView(t),[2,t];case 3:return X.debug("Message collection loadNext() from the server."),[4,this._getRemoteMessages({ts:e,nextLimit:this._limit})];case 4:return t=n.sent(),this._addMessagesToView(t),De(this._syncRange,["next"],this._messages),[2,t];case 5:return[2,[]]}})})},e.prototype.removeFailedMessages=function(e){return P(this,void 0,void 0,function(){var t,n,r,a;return D(this,function(i){switch(i.label){case 0:return t=Ba.getInstance(this._iid),n=Fe.of(this._iid),r=e.map(function(e){return e.reqId}),[4,n.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:t.MessageSendingStatus.FAILED,reqIds:r})];case 1:return a=i.sent(),this._removeFailedMessagesFromView(e),[2,a]}})})},e.prototype.removeAllFailedMessages=function(){return P(this,void 0,void 0,function(){var e;return D(this,function(t){switch(t.label){case 0:return e=Ba.getInstance(this._iid),[4,Fe.of(this._iid).removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:e.MessageSendingStatus.FAILED})];case 1:return t.sent(),this._removeFailedMessagesFromView(),[2]}})})},e.prototype.dispose=function(){this._localCacheEnabled&&(this._previousFillSync.stop(),this._nextFillSync.stop(),this._backgroundSync.pause()),this._changelogSync.pause(),fe.of(this._iid).removeObserver(this._connectionObserver),this._hugeGapCheckTimer&&(clearTimeout(this._hugeGapCheckTimer),this._hugeGapCheckTimer=null),Ae.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setMessageCollectionHandler=function(e){this._eventHandler=e},e}(),rt=new Map,at=new Map,it=new Map,st=function(){function e(t){var n=t.key,r=t.concurrentCallLimit,a=void 0===r?2:r,i=t.backOffDelay,s=void 0===i?0:i,o=this;this._holdersKey=e.createSemaphoreHoldersKey(n),this._resolversKey=e.createSemaphoreResolversKey(n),this._chainProcessStateKey=e.createChainProcessStateKey(n),this._numLocks=a,this._backOffDelay=s,this._localAcquiredKeys=[],this._localResolversData=[],ee()?(rt[this._holdersKey]||(rt[this._holdersKey]=[]),at[this._resolversKey]||(at[this._resolversKey]=[])):(window.addEventListener("storage",function(e){return P(o,void 0,void 0,function(){var t,n;return D(this,function(r){if(this._localResolversData.length>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()&&this._hasHighestPriorityResolver())switch(e.key){case this._holdersKey:if(t=JSON.parse(e.oldValue),n=JSON.parse(e.newValue),!t||!n||n.length>=t.length)return[2];this._processChainResolve();break;case this._chainProcessStateKey:if(JSON.parse(e.newValue))return[2];this._processChainResolve();break;default:return[2]}return[2]})})}),window.addEventListener("beforeunload",function(){var e=o._getLocalResolversData(),t=o._localResolversData.map(function(e){return e.key}),n=e.filter(function(e){return t.indexOf(e.key)<0});n.length>0?window.localStorage.setItem(o._resolversKey,JSON.stringify(n)):window.localStorage.removeItem(o._resolversKey),o._localAcquiredKeys.forEach(function(e){return o.release(e)})}))}return e.createSemaphoreHoldersKey=function(e){return"collection@semaphore_holders_for:"+e},e.createSemaphoreResolversKey=function(e){return"collection@semaphore_resolvers_for:"+e},e.createChainProcessStateKey=function(e){return"collection@semaphore_chain_process_state_for:"+e},Object.defineProperty(e.prototype,"numLocks",{get:function(){return this._numLocks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backOffDelay",{get:function(){return this._backOffDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numLocksAvailable",{get:function(){if(ee())return this.numLocks-rt[this._holdersKey].length;var e=this._getLocalHoldersData();return this.numLocks-e.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waitCount",{get:function(){return ee()?at[this._resolversKey].length:this._getLocalResolversData().length},enumerable:!1,configurable:!0}),e.prototype._hasHighestPriorityResolver=function(){var e=this._getLocalResolversData();return e.length>0&&this._localResolversData.map(function(e){return e.key}).indexOf(e[0].key)>=0},e.prototype._isProcessChainAcquireRunning=function(){if(ee())return it[this._chainProcessStateKey];var e=window.localStorage[this._chainProcessStateKey];return void 0!==e&&JSON.parse(e)},e.prototype._setProcessChainAcquireRunning=function(e){ee()?it[this._chainProcessStateKey]=e:e?window.localStorage.setItem(this._chainProcessStateKey,JSON.stringify(e)):window.localStorage.removeItem(this._chainProcessStateKey)},e.prototype._processChainResolve=function(){return P(this,void 0,void 0,function(){var e;return D(this,function(t){switch(t.label){case 0:return this.waitCount>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()?(this._setProcessChainAcquireRunning(!0),this._tryResolve()?[4,(n=this._backOffDelay,P(void 0,void 0,void 0,function(){return D(this,function(e){return[2,new Promise(function(e){return setTimeout(e,n)})]})}))]:[3,2]):[3,3];case 1:t.sent(),t.label=2;case 2:this._setProcessChainAcquireRunning(!1),ee()?this._processChainResolve():(e=new StorageEvent("storage",{key:this._chainProcessStateKey,oldValue:JSON.stringify(!0),newValue:JSON.stringify(!1)}),dispatchEvent(e)),t.label=3;case 3:return[2]}var n})})},e.prototype.acquire=function(e){return void 0===e&&(e=Ye.BACKGROUND_SYNC_CLOSE),P(this,void 0,void 0,function(){var t,n=this;return D(this,function(r){return ee()?[2,new Promise(function(t){var r={key:Qe(),resolver:function(e){return t(e)},priority:e};switch(e){case Ye.USER_CALL:case Ye.FILL:case Ye.BACKGROUND_SYNC_OPEN:for(var a=at[n._resolversKey],i=-1,s=0;s<a.length&&i<0;s++)e>a[s].priority&&(i=s);if(i>=0){at[n._resolversKey].splice(i,0,r);break}case Ye.BACKGROUND_SYNC_CLOSE:at[n._resolversKey].push(r)}n._processChainResolve()})]:(t=this._getLocalResolversData(),[2,new Promise(function(r){var a=Qe(),i={key:a,priority:e},s={key:a,resolver:function(e){return r(e)},priority:e};switch(e){case Ye.USER_CALL:case Ye.FILL:case Ye.BACKGROUND_SYNC_OPEN:for(var o=-1,l=0;l<t.length&&o<0;l++)e>t[l].priority&&(o=l);if(o>=0){t.splice(o,0,i),window.localStorage.setItem(n._resolversKey,JSON.stringify(t)),n._localResolversData.splice(o,0,s);break}case Ye.BACKGROUND_SYNC_CLOSE:t.push(i),window.localStorage.setItem(n._resolversKey,JSON.stringify(t)),n._localResolversData.push(s)}n._processChainResolve()})])})})},e.prototype.release=function(e){if(ee()){if((t=rt[this._holdersKey].indexOf(e))>=0)return rt[this._holdersKey].splice(t,1),this._processChainResolve(),!0}else{var t,n=JSON.parse(window.localStorage[this._holdersKey]),r=U([],n,!0);if((t=n.indexOf(e))>=0){n.splice(t,1),n.length>0?window.localStorage.setItem(this._holdersKey,JSON.stringify(n)):window.localStorage.removeItem(this._holdersKey),this._localAcquiredKeys.splice(this._localAcquiredKeys.indexOf(e),1);var a=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(r),newValue:JSON.stringify(n)});return dispatchEvent(a),!0}}return!1},e.prototype._tryResolve=function(){if(ee()){if(rt[this._holdersKey].length<this.numLocks){var e=Qe();return rt[this._holdersKey]=U(U([],rt[this._holdersKey],!0),[e],!1),(n=at[this._resolversKey].shift()).resolver(e),!0}}else{var t=this._getLocalHoldersData();if(t.length<this.numLocks){e=Qe();var n=this._localResolversData.shift(),r=this._getLocalResolversData(),a=r.map(function(e){return e.key}).indexOf(n.key);r.splice(a,1),r.length>0?window.localStorage.setItem(this._resolversKey,JSON.stringify(r)):window.localStorage.removeItem(this._resolversKey),window.localStorage.setItem(this._holdersKey,JSON.stringify(U(U([],t,!0),[e],!1))),this._localAcquiredKeys.push(e);var i=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(U([],t,!0)),newValue:JSON.stringify(U(U([],t,!0),[e],!1))});return dispatchEvent(i),(0,n.resolver)(e),!0}}return!1},e.prototype._getLocalHoldersData=function(){var e=window.localStorage[this._holdersKey];return void 0!==e?JSON.parse(e):[]},e.prototype._getLocalResolversData=function(){var e=window.localStorage[this._resolversKey];return void 0!==e?JSON.parse(e):[]},e}();!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(Xe||(Xe={}));var ot,lt=function(){},ct=function(){function e(e,t,n,r){void 0===n&&(n=2),void 0===r&&(r=10),this._worker=null,this._state=Xe.IDLE,this._retryCount=0,this._retryLimit=3,this._isPaused=!1,this.priority=Ye.BACKGROUND_SYNC_CLOSE,this.onProgress=lt,this.onStop=lt,this.onError=lt,this.onEnd=lt,this._key=e,this._worker=t,this._semaphore=new st({key:e,concurrentCallLimit:n,backOffDelay:r})}return Object.defineProperty(e.prototype,"isIdle",{get:function(){return this._state===Xe.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._state===Xe.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDone",{get:function(){return this._state===Xe.END},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),e.prototype.resume=function(e,t){return void 0===t&&(t=!1),this._isPaused=!1,this.isDone&&t&&(this._state=Xe.IDLE),this.run(e)},e.prototype.run=function(e){return P(this,void 0,void 0,function(){var t,n,r;return D(this,function(a){switch(a.label){case 0:return this._isPaused||!this.isIdle?[3,5]:(t=this,[4,this._semaphore.acquire(this.priority)]);case 1:t._key=a.sent(),this._state=Xe.RUNNING,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this._worker(e)];case 3:return n=a.sent(),this._retryCount=0,this.onProgress(n),n.hasNext?(this._state=Xe.IDLE,this._isPaused?(this._semaphore.release(this._key),this.onStop()):(this.run(n.nextParams),this._semaphore.release(this._key))):(this._state=Xe.END,this._semaphore.release(this._key),this.onEnd(),this._isPaused&&this.onStop()),[3,5];case 4:return r=a.sent(),X.warn("Collection sync run error: ",r),this._state=Xe.IDLE,this._semaphore.release(this._key),this.onError(r),this._retryCount<this._retryLimit?(this._retryCount++,X.debug("Failed collection sync retry count: ",this._retryCount),this.run(e)):(X.debug("Failed collection sync all retries failed."),this.stop(),this.onStop()),[3,5];case 5:return[2]}})})},e.prototype.stop=function(){this._isPaused=!0},e}(),ut={},dt=function(){function e(e){var t=e.iid,n=e.limit,r=void 0===n?vt:n,a=this;this._token="",this._sync=null,this._syncRange=new He({top:Number.MAX_SAFE_INTEGER,bottom:0}),this._completed=!1,this._pkIndex=Date.now(),this._iid=t,this._limit=r;var i=G.get(this._iid).GroupChannel,s=w.get(this._iid),o=s.get("currentUserId"),l=s.get("apiClient"),c=s.get("store"),u=bt.of(this._iid),d=Ae.of(this._iid),h="sendbird:".concat(o,"@groupchannel/sync");this._sync=new ct(h,function(e){return P(a,void 0,void 0,function(){var e,t,n,r,a,s,o=this;return D(this,function(f){switch(f.label){case 0:return e={hasNext:!0,nextParams:""},[4,c.get(h)];case 1:return(t=f.sent())&&t.completed?[3,5]:(t&&(this._token=t.token,this._syncRange=t.range,this._pkIndex=t.primaryKeyIndex),n={token:this._token,limit:this._limit,includeEmpty:!0,order:"chronological"},[4,l.loadGroupChannelList(n)]);case 2:return r=f.sent(),a=r.channels.map(function(e){return r.ts&&(e.ts=r.ts),e.cached_primary_key=o._pkIndex--,i.upsert(e)}),this._syncRange.top=Math.min(this._syncRange.top,Math.min.apply(Math,a.map(function(e){return e.createdAt}))),this._syncRange.bottom=Math.max(this._syncRange.bottom,Math.max.apply(Math,a.map(function(e){return e.createdAt}))),e.hasNext=a.length>=this._limit,e.nextParams=this._token=r.next,this._token||(e.hasNext=!1),this._completed=!e.hasNext,X.debug("Group channel collection background sync fetched channels count: ",a.length),[4,u.upsert(a)];case 3:return f.sent(),[4,c.set({key:h,value:{token:this._token,range:this._syncRange,completed:this._completed,primaryKeyIndex:this._pkIndex},generation:1})];case 4:return f.sent(),s={source:de.CHANNEL_BACKGROUND,payload:{channels:a}},d.send(s),[3,6];case 5:X.debug("Group channel collection background sync has finished."),e.hasNext=!1,f.label=6;case 6:return[2,e]}})})})}return e.of=function(t,n){return void 0===n&&(n=vt),ut[t]||(ut[t]=new e({iid:t,limit:n})),ut[t]},Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!1,configurable:!0}),e.prototype.resume=function(){X.debug("Group channel collection background sync has resumed."),this._sync.resume("")},e.prototype.pause=function(){X.debug("Group channel collection background sync has paused."),this._sync.stop()},e}(),ht={},ft=function(){function e(e){var t=e.iid,n=this;this._token=0,this._sync=null,this._pkIndex=Date.now(),this._iid=t;var r=G.get(this._iid).GroupChannel,a=w.get(this._iid);this._token=a.get("firstConnectedAt")/1e3;var i=a.get("currentUserId"),s=a.get("store"),o=a.get("apiClient"),l=a.container.localCacheEnabled,c=bt.of(this._iid),u=Ae.of(this._iid),d="sendbird:".concat(i,"@groupchannel/changelogs");this._sync=new ct(d,function(e){return P(n,void 0,void 0,function(){var e,t,n,a,i,h,f,p=this;return D(this,function(_){switch(_.label){case 0:return e={hasNext:!0,nextParams:""},l?[4,s.get(d)]:[3,2];case 1:return n=_.sent(),[3,3];case 2:n=null,_.label=3;case 3:return(t=n)&&(this._token=t.token,this._pkIndex=t.primaryKeyIndex),a={},"number"==typeof this._token?a.ts=this._token:a.token=this._token,[4,o.getMyGroupChannelChangeLogs(a)];case 4:return i=_.sent(),h={updatedChannels:i.updated.map(function(e){return e.cached_primary_key=p._pkIndex--,new r(e)}),deletedChannelUrls:i.deleted},e.hasNext=i.has_more,e.nextParams=this._token=i.next,X.debug("Group channel collection changelog sync update channels count: ",h.updatedChannels.length),X.debug("Group channel collection changelog sync deleted channel urls count: ",h.deletedChannelUrls.length),l?[4,c.upsert(h.updatedChannels)]:[3,8];case 5:return _.sent(),[4,c.remove(h.deletedChannelUrls)];case 6:return _.sent(),[4,s.set({key:d,value:{token:this._token,primaryKeyIndex:this._pkIndex},generation:1})];case 7:_.sent(),_.label=8;case 8:return f={source:de.CHANNEL_CHANGELOG,payload:h},u.send(f),[2,e]}})})})}return e.of=function(t){return ht[t]||(ht[t]=new e({iid:t})),ht[t]},e.prototype.resume=function(){X.debug("Group channel collection changelog sync has resumed."),this._sync.resume(0,!0)},e.prototype.pause=function(){X.debug("Group channel collection changelog sync has paused."),this._sync.stop()},e}(),pt=function(e,t){for(var n=0;n<e.length;n++)if(e[n].url===t.url)return n;return-1},_t=function(e,t,n){if(e.length>0){for(var r=0,a=e.length-1,i=Math.floor((r+a)/2);r<a;){var s=gt(e[i],t,n);if(s>0)a=i,i=Math.floor((r+a)/2);else{if(!(s<0))return i;r=i+1,i=Math.floor((r+a)/2)}}return gt(e[i],t,n)>0?i:i+1}return e.length},mt=function(e,t){return t-e},gt=function(e,t,n){switch(n){case ot.LATEST_LAST_MESSAGE:if(e.lastMessage&&!t.lastMessage)return-1;if(!e.lastMessage&&t.lastMessage)return 1;if(e.lastMessage&&t.lastMessage){var r=e.lastMessage.createdAt;if(0===(i=t.lastMessage.createdAt-r)){var a=e.createdAt;0===(i=t.createdAt-a)&&(i=mt(e.cachedPrimaryKey,t.cachedPrimaryKey))}return i}return r=e.createdAt,0===(i=t.createdAt-r)&&(i=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),i;case ot.CHRONOLOGICAL:return 0===(i=t.createdAt-e.createdAt)&&(i=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),i;case ot.CHANNEL_NAME_ALPHABETICAL:var i;return 0===(i=e.name.localeCompare(t.name))&&(i=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),i}},vt=40;!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical"}(ot||(ot={}));var yt=function(){function e(e){var t=e.iid,n=e.filter,r=e.order,a=e.limit,i=void 0===a?20:a,s=this;this._channels=[],this._token=null,this._hasMore=!0,this._iid=t,this._filter=n,this._order=r,this._limit=i,this._syncLimit=Math.max(i,vt),this._eventObserver={onevent:function(e){return P(s,void 0,void 0,function(){return D(this,function(t){return[2,this._handleEvent(e)]})})}},this._eventHandler={onChannelsAdded:ke,onChannelsUpdated:ke,onChannelsDeleted:ke};var o=w.get(this._iid);this._localCacheEnabled=o.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=dt.of(this._iid,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=ft.of(this._iid),Ae.of(this._iid).addObserver(this._eventObserver),this._connectionStateObserver={onConnect:function(){s._localCacheEnabled&&s._backgroundSync.resume(),s._changelogSync.resume()},onDisconnect:function(){return P(s,void 0,void 0,function(){return D(this,function(e){switch(e.label){case 0:return[4,Je.ready()];case 1:return e.sent()||(this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}})})}},fe.of(this._iid).addObserver(this._connectionStateObserver)}return e.prototype._handleEvent=function(e){var t=this,n=e.source,r=e.payload,a=w.get(this._iid),i=new Ie(n);switch(n){case de.CHANNEL_BACKGROUND:break;case de.CHANNEL_CHANGELOG:var s=r,o=s.updatedChannels,l=s.deletedChannelUrls,c=o.filter(function(e){return t._filter.match(e)});this._addChannelsToView(c,{context:i}),this._removeChannelsFromView(l,{context:i});break;case de.EVENT_USER_DECLINED_INVITATION:var u=a.get("currentUserId"),d=r,h=d.channel;d.invitee.userId===u?this._removeChannelsFromView([h.url],{context:i}):this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case de.EVENT_USER_LEFT:u=a.get("currentUserId");var f=r;h=f.channel,f.user.userId===u?this._removeChannelsFromView([h.url],{context:i}):this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case de.EVENT_USER_BANNED:case de.EVENT_USER_UNBANNED:break;case de.EVENT_USER_MUTED:case de.EVENT_USER_UNMUTED:case de.EVENT_TYPING_STATUS_UPDATED:case de.EVENT_OPERATOR_UPDATED:case de.EVENT_CHANNEL_METADATA_UPDATED:case de.EVENT_CHANNEL_METADATA_DELETED:case de.EVENT_CHANNEL_METACOUNTER_UPDATED:case de.EVENT_CHANNEL_METACOUNTER_DELETED:h=r.channel,this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case de.EVENT_READ_RECEIPT_UPDATED:case de.EVENT_USER_RECEIVED_INVITATION:case de.EVENT_USER_JOINED:case de.EVENT_CHANNEL_FROZEN:case de.EVENT_CHANNEL_UNFROZEN:case de.EVENT_CHANNEL_HIDDEN:case de.EVENT_CHANNEL_UNHIDDEN:case de.EVENT_CHANNEL_CHANGED:h=r.channel,this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case de.EVENT_CHANNEL_DELETED:var p=r.channelUrl;this._removeChannelsFromView([p],{context:i})}},e.prototype._getRemoteChannels=function(){return P(this,void 0,void 0,function(){var e,t,n;return D(this,function(r){switch(r.label){case 0:return e=G.get(this._iid).GroupChannel,[4,w.get(this._iid).get("apiClient").loadGroupChannelList(L(L({},this._filter),{order:this._order,token:this._token,limit:this._limit,userIdsFilter:this._filter.userIdsFilter,searchFilter:(a=this._filter.searchFilter,a.searchQuery&&a.searchFields?{search_query:a.searchQuery,search_fields:a.searchFields.join(",").toLocaleLowerCase()}:{})}))];case 1:return t=r.sent(),n=t.channels.map(function(n){return"number"==typeof t.ts&&(n.ts=t.ts),e.upsert(n)}),[4,bt.of(this._iid).upsert(n)];case 2:return r.sent(),[2,[n,t.next]]}var a})})},e.prototype._addChannelsToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=[],s=0,o=e;s<o.length;s++){var l=o[s],c=pt(this._channels,l);if(c<0)a.push(l),(u=_t(this._channels,l,this._order))===this._channels.length?this._channels.push(l):this._channels.splice(u,0,l);else{i.push(l),this._channels.splice(c,1);var u=_t(this._channels,l,this._order);this._channels.splice(u,0,l)}}r&&(a.length>0&&this._eventHandler.onChannelsAdded(r,a),i.length>0&&this._eventHandler.onChannelsUpdated(r,i))},e.prototype._removeChannelsFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,s=e;i<s.length;i++){var o=s[i],l=this._channels.map(function(e){return e.url}).indexOf(o);l>=0&&(a.push(this._channels[l].url),this._channels.splice(l,1))}return r&&a.length>0&&this._eventHandler.onChannelsDeleted(r,a),a},Object.defineProperty(e.prototype,"channelList",{get:function(){return this._channels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasMore",{get:function(){return this._hasMore},enumerable:!1,configurable:!0}),e.prototype.loadMore=function(){return P(this,void 0,void 0,function(){var e,t,n,r,a;return D(this,function(i){switch(i.label){case 0:return this._hasMore?[4,Je.ready()]:[3,5];case 1:return i.sent()?[3,3]:(X.debug("Group channel collection loadMore() from the cache."),e=bt.of(this._iid),t=e.getNextContainerToken(this._order,this._channels),[4,e.getNextChannels(this._filter,this._order,t,this._limit)]);case 2:return r=i.sent(),this._addChannelsToView(r),[2,r];case 3:return X.debug("Group channel collection loadMore() from the server."),[4,this._getRemoteChannels()];case 4:return n=i.sent(),r=n[0],a=n[1],this._token=a,this._token||(this._hasMore=!1),this._addChannelsToView(r),[2,r];case 5:return[2,[]]}})})},e.prototype.dispose=function(){fe.of(this._iid).removeObserver(this._connectionStateObserver),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause(),Ae.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setGroupChannelCollectionHandler=function(e){this._eventHandler=e},e.GroupChannelOrder=ot,e}(),Et={},bt=function(){function e(e){var t=e.iid,n=e.collection,r=void 0===n?null:n;this._collection=null,this._pkIndex=Date.now(),this._lastFetchedPrimaryKey=Date.now(),this._iid=t,this._collection=r,Et[t]=this}return e.of=function(e){return Et[e]},e.prototype._serialize=function(e){var t=this._createPk();return e.cachedPrimaryKey=t,L(L({},e.serialize()),{lastMessageCreatedAt:e.lastMessage?e.lastMessage.createdAt:-1,pk:t})},e.prototype._deserialize=function(e){return e?G.get(this._iid).GroupChannel.buildFromSerializedData(e):null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return w.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._createPk=function(){return this._pkIndex++},e.prototype._fetch=function(e,t,n){return P(this,void 0,void 0,function(){var r,a,i,s,o,l,c,u=this;return D(this,function(d){switch(d.label){case 0:if(!this._localCacheEnabled)return[3,2];switch(r=Te.LATEST_LAST_MESSAGE,t){case ot.CHANNEL_NAME_ALPHABETICAL:r=Te.NAME_ALPHABETICAL;break;case ot.CHRONOLOGICAL:r=Te.CHRONOLOGICAL;break;case ot.LATEST_LAST_MESSAGE:r=Te.LATEST_LAST_MESSAGE}return a=n.containerToken,i=a.lastMessageCreatedAt,s=a.createdAt,o=a.name,l=a.lastFetchedPrimaryKey,c={where:function(n){switch(t){case ot.LATEST_LAST_MESSAGE:if(n.lastMessageCreatedAt>i)return!1;if(n.lastMessageCreatedAt===i&&mt(l,n.pk)>=0)return!1;if(n.lastMessageCreatedAt<0){if(n.createdAt>s)return!1;if(n.createdAt===s&&mt(l,n.pk)>=0)return!1}break;case ot.CHANNEL_NAME_ALPHABETICAL:var r=n.name.localeCompare(o);if(r<0)return!1;if(0===r&&mt(l,n.pk)>=0)return!1;break;case ot.CHRONOLOGICAL:if(n.createdAt>s)return!1;if(n.createdAt===s&&mt(l,n.pk)>=0)return!1}return e.match(u._deserialize(n))},index:r},[4,this._collection.query(c).fetch({limit:n.limit})];case 1:return[2,d.sent().map(function(e){return u._deserialize(e)})];case 2:return[2,[]]}})})},e.prototype.getNextContainerToken=function(e,t){switch(e){case ot.LATEST_LAST_MESSAGE:return t.length>0?{lastMessageCreatedAt:(n=t[t.length-1]).lastMessage?n.lastMessage.createdAt:-1,createdAt:n.createdAt,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{lastMessageCreatedAt:Number.MAX_SAFE_INTEGER,createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case ot.CHRONOLOGICAL:return t.length>0?{createdAt:(n=t[t.length-1]).createdAt,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case ot.CHANNEL_NAME_ALPHABETICAL:var n;return t.length>0?{name:(n=t[t.length-1]).name,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{name:"",lastFetchedPrimaryKey:this._lastFetchedPrimaryKey}}},e.prototype.get=function(e){return P(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return this._localCacheEnabled?(t=this._deserialize,[4,this._collection.getByKey(e)]):[3,2];case 1:return[2,t.apply(this,[n.sent()])];case 2:return[2,null]}})})},e.prototype.getNextChannels=function(e,t,n,r){return void 0===r&&(r=100),P(this,void 0,void 0,function(){return D(this,function(a){switch(a.label){case 0:return[4,this._fetch(e,t,{containerToken:n,limit:r})];case 1:return[2,a.sent()]}})})},e.prototype.upsert=function(e){return P(this,void 0,void 0,function(){var t,n=this;return D(this,function(r){switch(r.label){case 0:return this._localCacheEnabled?(t=e.map(function(e){return n._serialize(e)}),[4,this._collection.upsertMany(t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.remove=function(e){return P(this,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,this._collection.removeIf({url:{"/in":e}})]:[3,3];case 1:return t.sent(),[4,Ba.getInstance(this._iid).clearCachedMessages(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.clear=function(){return P(this,void 0,void 0,function(){return D(this,function(e){switch(e.label){case 0:return this._localCacheEnabled?[4,this._collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e}(),Ct=function(){function e(){this.messageId=null,this.userId=null,this.key=null,this.operation="",this.updatedAt=null}return e.createFromJson=function(e){var t=parseInt(e.msg_id),n=e.user_id,r=e.operation,a=e.reaction,i=e.updated_at;if(t&&"string"==typeof n&&"string"==typeof r&&["add","delete"].indexOf(r.toLowerCase())>=0&&"string"==typeof a&&a&&"number"==typeof i){var s=new this;return s.messageId=t,s.userId=n,s.key=a,s.operation=r.toLowerCase(),s.updatedAt=i,s}return null},e}(),Ot=function(){function e(){}return e.serialize=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),function e(t){return Object.keys(t).forEach(function(n){t[n]&&"object"==typeof t[n]&&e(t[n])}),Object.freeze(t)}(n)},e.serializeWithoutFreeze=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},e.deserialize=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},e}(),Nt={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},St=new WeakMap,At=function(){function e(t){f(this,e),this.messageId=0,this.messageType=e.MESSAGE_TYPE_BASE,this.channelUrl="",this.data=null,this.customType=null,this.silent=!1,this.createdAt=0,this.updatedAt=0,this.channelType=null,this.metaArrays=[],this.reactions=[],this.mentionType=null,this.mentionedUsers=[],this.mentionedUserIds=[],this.mentionedMessageTemplate=null,this.sendingStatus=null,St.set(this,0),this.parentMessageId=0,this.parentMessageText=null,this.threadInfo=null,this.isReplyToChannel=!1,this.parentMessage=null,this.ogMetaData=null,this.isOperatorMessage=!1,this.appleCriticalAlertOptions=null,this.reqId="",this._isAutoResendRegistered=!1,t&&this.__update(t)}return _(e,[{key:"serialize",value:function(e){var t=this;return Ot.serialize(this,function(n){n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender),n.hasOwnProperty("_isAutoResendRegistered")&&(n.isAutoResendRegistered=n._isAutoResendRegistered,delete n._isAutoResendRegistered),t.appleCriticalAlertOptions&&(n.appleCriticalAlertOptions=t.appleCriticalAlertOptions.serialize()),e&&e(n)})}},{key:"isIdentical",value:function(e){return!("object"!==h(e)||!e.hasOwnProperty("messageId"))&&(0!==this.messageId&&0!==e.messageId?this.messageId===e.messageId:this.reqId===e.reqId)}},{key:"isEqual",value:function(e){return ie.deepEqual(this,e)}},{key:"isOpenChannel",value:function(){var e=G.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=G.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isUserMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_USER}},{key:"isAdminMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_ADMIN}},{key:"isFileMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_FILE}},{key:"__update",value:function(e){var t=this,n=Ba.getInstance(this._iid),r=G.get(this._iid),a=r.User,i=r.BaseChannel,s=r.BaseMessageParams,o=r.BaseMessage,l=r.Reaction,c=r.MessageMetaArray,u=r.ThreadInfo,h=r.OGMetaData,f=r.AppleCriticalAlertOptions;if(e.hasOwnProperty("msg_id")&&e.msg_id&&(this.messageId=parseInt(e.msg_id)),e.hasOwnProperty("type"))switch(e.type){case"MESG":this.messageType=o.MESSAGE_TYPE_USER;break;case"FILE":this.messageType=o.MESSAGE_TYPE_FILE;break;case"BRDM":case"ADMM":this.messageType=o.MESSAGE_TYPE_ADMIN}e.hasOwnProperty("message_id")&&e.message_id&&(this.messageId=parseInt(e.message_id)),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",e.hasOwnProperty("silent")&&(this.silent=e.silent),this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,e.hasOwnProperty("created_at")&&(this.createdAt=parseInt(e.created_at)),this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):i.CHANNEL_TYPE_GROUP;var p=e.hasOwnProperty("metaarray")?e.metaarray:{},_=e.hasOwnProperty("metaarray_key_order")?e.metaarray_key_order:Object.keys(p).sort(function(e,t){return e.localeCompare(t)});this.metaArrays=[];for(var m=0;m<_.length;m++){var g=_[m];this.metaArrays.push(new c(g,p[g]||[]))}if(e.hasOwnProperty("sorted_metaarray")){var v=e.sorted_metaarray;Array.isArray(v)&&(this.metaArrays=v.map(function(e){return new c(e.key,e.value)}))}if(this.reactions=[],e.hasOwnProperty("reactions")&&Array.isArray(e.reactions))for(var y=0;y<e.reactions.length;y++){var E=l.createFromJson(e.reactions[y]);E&&this.reactions.push(E)}if(this.mentionType=e.hasOwnProperty("mention_type")?e.mention_type:s.MentionType.USERS,this.mentionedUsers=[],e.hasOwnProperty("mentioned_users")&&e.mentioned_users.forEach(function(e){var n=new a(e);t.mentionedUsers.push(n)}),this.mentionedUserIds=[],e.hasOwnProperty("mentioned_user_ids")&&(this.mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("mentioned_message_template")&&e.mentioned_message_template&&(this.mentionedMessageTemplate=e.mentioned_message_template),this.sendingStatus=this.messageId>0?n.MessageSendingStatus.SUCCEEDED:n.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),e.hasOwnProperty("root_message_id")&&e.root_message_id&&St.set(this,parseInt(e.root_message_id)),e.hasOwnProperty("parent_message_id")&&e.parent_message_id&&(this.parentMessageId=parseInt(e.parent_message_id)),this.threadInfo=new u(e.thread_info),this.isReplyToChannel=!!e.hasOwnProperty("is_reply_to_channel")&&e.is_reply_to_channel,e.hasOwnProperty("parent_message_info")){var b=d({},e.parent_message_info);e.parent_message_info.hasOwnProperty("file")&&(b.require_auth=!!e.parent_message_info.file.require_auth);var C={channelType:this.channelType,channelUrl:this.channelUrl};switch(this.parentMessage=i.buildMessage(b,C),this.parentMessage.messageType){case o.MESSAGE_TYPE_USER:this.parentMessageText=this.parentMessage.message;break;case o.MESSAGE_TYPE_FILE:this.parentMessageText=this.parentMessage.name}}e.hasOwnProperty("og_tag")&&(this.ogMetaData=new h(e.og_tag)),e.hasOwnProperty("is_op_msg")&&(this.isOperatorMessage=e.is_op_msg),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new f(e.apple_critical_alert_options)),e.hasOwnProperty("is_auto_resend_registered")&&(this._isAutoResendRegistered=e.is_auto_resend_registered),this.reqId=e.hasOwnProperty("req_id")?e.req_id:""}},{key:"getMetaArraysByKeys",value:function(e){return Array.isArray(e)?this.metaArrays.filter(function(t){return e.indexOf(t.key)>-1}):[]}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach(function(t){e[t.key]=t.value}),e},set:function(e){if("object"===h(e)&&e){var t=G.get(this._iid).MessageMetaArray,n=[];Object.keys(e).forEach(function(r){n.push(new t(r,e[r]))}),this.metaArrays=n}}},{key:"getMetaArrayByKeys",value:function(e){var t={};return this.getMetaArraysByKeys(e).forEach(function(e){t[e.key]=e.value}),t}},{key:"applyReactionEvent",value:function(e){var t=this,n=G.get(this._iid),r=n.Reaction,a=null,i=_e.parse(arguments,[new _e({type:Ct,constraint:function(e){return parseInt(e.messageId)===parseInt(t.messageId)}})]),s=O(i,2);if(a=s[0],e=s[1],!a){for(var o=!1,l=0;l<this.reactions.length;l++)if(this.reactions[l].key===e.key){this.reactions[l]._applyEvent(e),this.reactions[l].isEmpty&&this.reactions.splice(l,1),o=!0;break}o||"add"!==e.operation||this.reactions.push(new r(e.key,[e.userId],e.updatedAt))}}},{key:"_getThreadedMessageList",value:function(t,n,r,a){var i=this,s=G.get(this._iid),o=s.ThreadedMessageListParams,l=null,c=_e.parse(arguments,[new _e({type:"number"}),new _e({type:"string",constraint:function(e){return Object.values(Nt).includes(e)}}),new _e({type:o,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),u=O(c,5);return l=u[0],t=u[1],n=u[2],r=u[3],a=u[4],le(this._iid,function(a){if(l)a(l,null);else{var s=G.get(i._iid),o=s.GroupChannel,c=s.OpenChannel;i.isGroupChannel()?o.getChannel(i.channelUrl,k.INTERNAL_CALL,function(s,o){if(Ba.getInstance(i._iid).getErrorFirstCallback()){var l=[s,o];o=l[0],s=l[1]}o?a(o,null):w.get(i._iid).container.apiClient.getMessageList(d(d({channel:s,token:t,tokenType:n},r),{},{shouldReverse:r.reverse,parentMessageId:i.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then(function(e){var t=G.get(i._iid).BaseChannel,n=e.messages.map(function(e){return t.buildMessage(e,s)}).filter(function(e){return null!==e}),r=n.filter(function(e){return e.messageId===i.messageId})[0],o=n.filter(function(e){return e.parentMessageId===i.messageId});a(null,{parentMessage:r,threadedReplies:o})}).catch(function(e){a(e,null)})}):i.isOpenChannel()&&c.getChannel(i.channelUrl,k.INTERNAL_CALL,function(s,o){if(Ba.getInstance(i._iid).getErrorFirstCallback()){var l=[s,o];o=l[0],s=l[1]}o?a(o,null):w.get(i._iid).container.apiClient.getMessageList(d(d({channel:s,token:t,tokenType:n},r),{},{shouldReverse:r.reverse,parentMessageId:i.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then(function(e){var t=G.get(i._iid).BaseChannel,n=e.messages.map(function(e){return t.buildMessage(e,s)}).filter(function(e){return null!==e}),r=n.filter(function(e){return e.messageId===i.messageId})[0],o=n.filter(function(e){return e.parentMessageId===i.messageId});a(null,{parentMessage:r,threadedReplies:o})}).catch(function(e){a(e,null)})})}},a)}},{key:"getThreadedMessagesByTimestamp",value:function(e,t,n){return this._getThreadedMessageList(e,Nt.TIMESTAMP,t,n)}},{key:"applyThreadInfoUpdateEvent",value:function(e){var t=this,n=G.get(this._iid),r=n.ThreadInfoUpdateEvent,a=null,i=_e.parse(arguments,[new _e({type:r,constraint:function(e){return parseInt(e.targetMessageId)===parseInt(t.messageId)}})]),s=O(i,2);return a=s[0],e=s[1],!a&&(this.threadInfo=e.threadInfo,!0)}},{key:"applyParentMessage",value:function(e){if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1}},{key:"_setRootMessageId",value:function(e){St.set(this,e)}}],[{key:"MESSAGE_TYPE_BASE",get:function(){return"base"}},{key:"MESSAGE_TYPE_ADMIN",get:function(){return"admin"}},{key:"MESSAGE_TYPE_USER",get:function(){return"user"}},{key:"MESSAGE_TYPE_FILE",get:function(){return"file"}},{key:"SendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"ReplyType",get:function(){return{ALL:"all",NONE:"none",ONLY_REPLY_TO_CHANNEL:"only_reply_to_channel"}}},{key:"getMessage",value:function(e,t){var n=this,r=G.get(this._iid),a=r.BaseChannel,i=r.MessageRetrievalParams,s=null,o=_e.parse(arguments,[new _e({type:i,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),l=O(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,function(t){if(s)t(s,null);else{var r=G.get(n._iid),i=r.GroupChannel,o=r.OpenChannel;switch(e.channelType){case a.CHANNEL_TYPE_GROUP:i.getChannel(e.channelUrl,k.INTERNAL_CALL,function(r,i){if(Ba.getInstance(n._iid).getErrorFirstCallback()){var s=[r,i];i=s[0],r=s[1]}i?t(i,null):w.get(n._iid).container.apiClient.getMessage(d({channel:r},e),function(e,n){if(e)t(e,null);else{var i=a.buildMessage(n,r);t(null,i)}})});break;case a.CHANNEL_TYPE_OPEN:o.getChannel(e.channelUrl,k.INTERNAL_CALL,function(r,i){if(Ba.getInstance(n._iid).getErrorFirstCallback()){var s=[r,i];i=s[0],r=s[1]}i?t(i,null):w.get(n._iid).container.apiClient.getMessage(d({channel:r},e),function(e,n){if(e)t(e,null);else{var i=a.buildMessage(n,r);t(null,i)}})})}}},t)}}]),e}(),It=function(){function e(e){this.nickname="",this.plainProfileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this.friendDiscoveryKey=null,this.friendName=null,this._preferredLanguages=null,this.requireAuth=null,e&&this.__update(e)}return e.objectify=function(e){var t=e.userId,n=void 0===t?null:t,r=e.nickname,a=void 0===r?"":r,i=e.plainProfileUrl,s=void 0===i?"":i,o=e.connectionStatus,l=void 0===o?"":o,c=e.lastSeenAt,u=void 0===c?0:c,d=e.metaData,h=void 0===d?{}:d,f=e.isActive,p=void 0===f||f,_=e.friendDiscoveryKey,m=void 0===_?null:_,g=e.friendName,v=void 0===g?null:g,y=e.preferredLanguages,E=void 0===y?null:y,b=e.requireAuth;return{user_id:n,nickname:a,profile_url:s,is_online:l,last_seen_at:u,metadata:h,is_active:p,friend_discovery_key:m,friend_name:v,preferred_languages:E,require_auth_for_profile_image:void 0!==b&&b}},e.buildFromSerializedData=function(e){var t=G.get(this._iid).User,n=Ot.deserialize(e);return new t(t.objectify(n))},Object.defineProperty(e.prototype,"preferredLanguages",{get:function(){return this._preferredLanguages},enumerable:!1,configurable:!0}),e.prototype.__update=function(t){var n=w.get(this._iid).container.auth;t.hasOwnProperty("guest_id")&&(this.userId=t.guest_id),t.hasOwnProperty("user_id")&&(this.userId=t.user_id),t.hasOwnProperty("name")&&(this.nickname=t.name),t.hasOwnProperty("nickname")&&(this.nickname=t.nickname),t.hasOwnProperty("require_auth_for_profile_image")?this.requireAuth=t.require_auth_for_profile_image:this.requireAuth=null,(t.hasOwnProperty("image")||t.hasOwnProperty("profile_url"))&&(this.plainProfileUrl=t.image||t.profile_url||"",Object.defineProperty(this,"profileUrl",{value:this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(n.eKey):this.plainProfileUrl,configurable:!0,writable:!1})),t.hasOwnProperty("is_online")?t.is_online===e.NON_AVAILABLE?this.connectionStatus=e.NON_AVAILABLE:this.connectionStatus=t.is_online?e.ONLINE:e.OFFLINE:this.connectionStatus=e.NON_AVAILABLE,t.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(t.last_seen_at):this.lastSeenAt=0,t.hasOwnProperty("metadata")?this.metaData=t.metadata:this.metaData={},t.hasOwnProperty("is_active")?this.isActive=void 0===t.is_active||t.is_active:this.isActive=!0,t.hasOwnProperty("friend_discovery_key")?this.friendDiscoveryKey=t.friend_discovery_key:this.friendDiscoveryKey=null,t.hasOwnProperty("friend_name")?this.friendName=t.friend_name:this.friendName=null,t.hasOwnProperty("preferred_languages")?this._preferredLanguages=t.preferred_languages||null:this._preferredLanguages=null},e.prototype._updateMetaData=function(e,t){var n=this;void 0===t&&(t=!1);var r=G.get(this._iid).GroupChannel;Object.keys(e).forEach(function(r){t?delete n.metaData[r]:n.metaData[r]=e[r]}),Object.keys(r.cachedChannels).forEach(function(e){if(r.cachedChannels.hasOwnProperty(e)){var t=r.cachedChannels[e];t.memberMap.hasOwnProperty(n.userId)&&(t.memberMap[n.userId].metaData=n.metaData)}})},e.prototype.serialize=function(){return Ot.serialize(this,function(e){e.hasOwnProperty("_preferredLanguages")&&(e.preferredLanguages=e._preferredLanguages,delete e._preferredLanguages)})},e.prototype.getOriginalProfileUrl=function(){var e="";if(((e=(e=this.plainProfileUrl.indexOf("://")>-1?this.plainProfileUrl.split("/")[2]:this.plainProfileUrl.split("/")[0]).split("?")[0]).indexOf("sendbird.com")>-1||e.indexOf("sendbirdtest.com")>-1||e.indexOf("intoz.com")>-1||e.indexOf("file-local")>-1)&&this.plainProfileUrl.indexOf(e+"/profile_images/")>-1){var t=this.plainProfileUrl.replace("profile_images/","");return t===this.plainProfileUrl?"":t}return""},e.prototype.createMetaData=function(e,t){var n,r=this,a=null;return n=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return Object.keys(e).length>0&&!Array.isArray(e)}}),new _e({type:"callback"})]),a=n[0],e=n[1],t=n[2],le(this._iid,function(t){a?t(a,null):w.get(r._iid).container.apiClient.createUserMetaData({metaData:e},function(e,n){e||r._updateMetaData(n),t(e,n)})},t)},e.prototype.updateMetaData=function(e,t,n){var r,a=this,i=null;return r=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"callback"})]),i=r[0],e=r[1],t=r[2],n=r[3],le(this._iid,function(n){i?n(i,null):w.get(a._iid).container.apiClient.updateUserMetaData({metaData:e,upsert:t},function(e,t){e||a._updateMetaData(t),n(e,t)})},n)},e.prototype.deleteMetaData=function(e,t){var n,r=this,a=null;return n=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"callback"})]),a=n[0],e=n[1],t=n[2],le(this._iid,function(t){if(a)t(a,null);else{var n={};n[e]="",w.get(r._iid).container.apiClient.deleteUserMetaData({metaDataKey:e},function(e,a){e||r._updateMetaData(n,!0),t(e,a)})}},t)},e.prototype.deleteAllMetaData=function(e){var t=this;return le(this._iid,function(e){var n=t.metaData;w.get(t._iid).container.apiClient.deleteAllUserMetaData({},function(r,a){r||t._updateMetaData(n,!0),e(r,a)})},e)},Object.defineProperty(e,"NON_AVAILABLE",{get:function(){return"nonavailable"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ONLINE",{get:function(){return"online"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OFFLINE",{get:function(){return"offline"},enumerable:!1,configurable:!0}),e}(),kt={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},Tt=new WeakMap,wt=new WeakMap,Rt=function(){function e(t){f(this,e),this.url="",this.channelType=e.CHANNEL_TYPE_BASE,this.name="",this.coverUrl="",this.creator=null,this.createdAt=0,this.data=null,this.customType=null,this.isFrozen=!1,this.isEphemeral=!1,Tt.set(this,{}),wt.set(this,""),t&&this.__update(t)}return _(e,[{key:"__update",value:function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.isFrozen=!!e.hasOwnProperty("freeze")&&e.freeze,this.isEphemeral=!!e.hasOwnProperty("is_ephemeral")&&e.is_ephemeral,e.hasOwnProperty("created_by")&&null!==e.created_by&&"object"===h(e.created_by)&&Object.keys(e.created_by).length>0?this.creator=new It(e.created_by):this.creator=null,e.hasOwnProperty("metadata")&&null!==e.metadata&&e.hasOwnProperty("ts")&&"number"==typeof e.ts&&this._refreshMetaData(e.metadata,e.ts),e.hasOwnProperty("cached_primary_key")&&(this.cachedPrimaryKey=e.cached_primary_key)}},{key:"_addOrUpdateCachedMetaData",value:function(e,t){var n=Tt.get(this);Object.keys(e).forEach(function(r){var a=n[r],i=e[r];a?t>a.updatedAt&&(a.value=i,a.updatedAt=t,a.isRemoved=!1):n[r]={value:i,updatedAt:t,isRemoved:!1}})}},{key:"_markAsDeletedCachedMetaData",value:function(e,t){var n=Tt.get(this);e.forEach(function(e){var r=n[e];r?t>r.updatedAt&&(r.isRemoved=!0,r.updatedAt=t):n[e]={value:null,updatedAt:t,isRemoved:!0}})}},{key:"_refreshMetaData",value:function(e,t){var n={};Object.keys(e).forEach(function(r){n[r]={value:e[r],updatedAt:t,isRemoved:!1}}),Tt.set(this,n)}},{key:"_clearCachedMetaData",value:function(){Tt.set(this,{})}},{key:"cachedPrimaryKey",get:function(){return wt.get(this)},set:function(e){wt.set(this,e)}},{key:"isGroupChannel",value:function(){var e=G.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){var e=G.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"createOperatorListQuery",value:function(){return new(0,G.get(this._iid).OperatorListQuery)(this)}},{key:"createMessageListQuery",value:function(){return new(0,G.get(this._iid).MessageListQuery)(this)}},{key:"createPreviousMessageListQuery",value:function(){return new(0,G.get(this._iid).PreviousMessageListQuery)(this)}},{key:"createPollListQuery",value:function(){return new(0,G.get(this._iid).PollListQuery)({channelUrl:this.url})}},{key:"createPollVoterListQuery",value:function(e,t){return new(0,G.get(this._iid).PollVoterListQuery)({channelUrl:this.url,pollId:e,optionId:t})}},{key:"serialize",value:function(){var e=this;return Ot.serialize(this,function(t){if(null!==t.lastMessage&&"object"===h(t.lastMessage)){var n=t.lastMessage;n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender,t.lastMessage=n)}t.hasOwnProperty("_messageOffsetTimestamp")&&(t.messageOffsetTimestamp=t._messageOffsetTimestamp,delete t._messageOffsetTimestamp),e.cachedPrimaryKey&&(t.cachedPrimaryKey=e.cachedPrimaryKey)})}},{key:"getMessageChangeLogsByTimestamp",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"number",constraint:function(e){return e>=0}}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"callback"})]),o=O(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):w.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:e,token:null,isOpenChannel:a.isOpenChannel(),includeMetaArray:t,includeReactions:n}).then(function(e){var t=G.get(a._iid).BaseChannel,n={updatedMessages:e.updated.map(function(e){return t.buildMessage(e,a)}),deletedMessageIds:e.deleted.map(function(e){return parseInt(e.message_id)}),hasMore:e.has_more,token:e.next};r(null,n)}).catch(function(e){r(e,null)})},r)}},{key:"getMessageChangeLogsByToken",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"string",nullable:!0}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"callback"})]),o=O(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):w.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:null,token:e,isOpenChannel:a.isOpenChannel(),includeMetaArray:t,includeReactions:n}).then(function(e){var t=G.get(a._iid).BaseChannel,n={updatedMessages:e.updated.map(function(e){return t.buildMessage(e,a)}),deletedMessageIds:e.deleted.map(function(e){return parseInt(e.message_id)}),hasMore:e.has_more,token:e.next};r(null,n)}).catch(function(e){r(e,null)})},r)}},{key:"getMessageChangeLogsSinceToken",value:function(e,t,n){var r=this,a=G.get(this._iid),i=a.BaseChannel,s=a.MessageChangeLogsParams,o=null,l=_e.parse(arguments,[new _e({type:"string",nullable:!0}),new _e({type:s,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),c=O(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],le(this._iid,function(n){o?n(o,null):w.get(r._iid).container.apiClient.getMessageChangeLogs(d({channelUrl:r.url,ts:null,token:e,isOpenChannel:r.isOpenChannel()},t)).then(function(e){var t={updatedMessages:e.updated.map(function(e){return i.buildMessage(e,r)}),deletedMessageIds:e.deleted.map(function(e){return parseInt(e.message_id)}),hasMore:e.has_more,token:e.next};n(null,t)}).catch(function(e){n(e,null)})},n)}},{key:"getMessageChangeLogsSinceTimestamp",value:function(e,t,n){var r=this,a=G.get(this._iid),i=a.BaseChannel,s=a.MessageChangeLogsParams,o=null,l=_e.parse(arguments,[new _e({type:"number",constraint:function(e){return e>=0}}),new _e({type:s,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),c=O(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],le(this._iid,function(n){o?n(o,null):w.get(r._iid).container.apiClient.getMessageChangeLogs(d({channelUrl:r.url,timestamp:e,token:null,isOpenChannel:r.isOpenChannel()},t)).then(function(e){var t={updatedMessages:e.updated.map(function(e){return i.buildMessage(e,r)}),deletedMessageIds:e.deleted.map(function(e){return parseInt(e.message_id)}),hasMore:e.has_more,token:e.next};n(null,t)}).catch(function(e){n(e,null)})},n)}},{key:"getMyMutedInfo",value:function(e){var t=this;return le(this._iid,function(e){var n=Ba.getInstance(t._iid);w.get(t._iid).container.apiClient.getMyMutedInfo({channelUrl:t.url,userId:n.currentUser?n.currentUser.userId:null,isGroupChannel:t.isGroupChannel()},function(t,n){var r=null;t||(r={isMuted:n.is_muted,startAt:n.start_at,endAt:n.end_at,remainingDuration:n.remaining_duration,description:n.description}),e(t,r)})},e)}},{key:"_parseMessageListParams",value:function(e){for(var t=G.get(this._iid),n=t.MessageListParams,r=new n,a=null,i=!1,s=0,o=0,l=!1,c="",u="",d=null,h=!1,f=!1,p=null,_=arguments.length,m=new Array(_>1?_-1:0),g=1;g<_;g++)m[g-1]=arguments[g];switch(e){case"prev":var v=_e.parse(m,[new _e({type:"number"}),new _e({type:"boolean"}),new _e({type:"number"}),new _e({type:"boolean"}),new _e({type:"string"}),new _e({type:"string"}),new _e({type:"array",optional:!0}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"callback"})]),y=O(v,11);a=y[0],i=y[2],s=y[3],l=y[4],c=y[5],u=y[6],d=y[7],h=y[8],f=y[9],p=y[10];break;case"next":var E=_e.parse(m,[new _e({type:"number"}),new _e({type:"boolean"}),new _e({type:"number"}),new _e({type:"boolean"}),new _e({type:"string"}),new _e({type:"string"}),new _e({type:"array",optional:!0}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"callback"})]),b=O(E,11);a=b[0],i=b[2],o=b[3],l=b[4],c=b[5],u=b[6],d=b[7],h=b[8],f=b[9],p=b[10];break;case"prevnext":var C=_e.parse(m,[new _e({type:"number"}),new _e({type:"number"}),new _e({type:"number"}),new _e({type:"boolean"}),new _e({type:"string"}),new _e({type:"string"}),new _e({type:"array",optional:!0}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"callback"})]),N=O(C,11);a=N[0],s=N[2],o=N[3],l=N[4],c=N[5],u=N[6],d=N[7],h=N[8],f=N[9],p=N[10],i=!0}return a?[null,p]:(r.isInclusive=i,r.prevResultSize=s,r.nextResultSize=o,r.reverse=l,r.messageType=c,r.customType=u,""===r.customType&&(r.customType="*"),r.senderUserIds=d,r.includeMetaArray=h,r.includeReactions=f,[r,p])}},{key:"_getMessageList",value:function(e,t,n,r){var a=this,i=G.get(this._iid),s=i.MessageListParams,o=null,l=_e.parse(arguments,[new _e({type:"number"}),new _e({type:"string",constraint:function(e){return Object.values(kt).includes(e)}}),new _e({type:s,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),c=O(l,5);return o=c[0],e=c[1],t=c[2],n=c[3],r=c[4],le(this._iid,function(r){o?r(o,null):w.get(a._iid).container.apiClient.getMessageList(d(d({channel:a,token:e,tokenType:t},n),{},{shouldReverse:n.reverse})).then(function(e){var t=G.get(a._iid).BaseChannel,n=e.messages.map(function(e){return t.buildMessage(e,a)}).filter(function(e){return null!==e});r(null,n)}).catch(function(e){r(e,null)})},r)}},{key:"getPreviousMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["prev"].concat(N(_e.toArray(arguments)))),n=O(t,2),r=n[0],a=n[1];return this._getMessageList(e,kt.TIMESTAMP,r,a)}},{key:"getNextMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["next"].concat(N(_e.toArray(arguments)))),n=O(t,2),r=n[0],a=n[1];return this._getMessageList(e,kt.TIMESTAMP,r,a)}},{key:"getPreviousAndNextMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["prevnext"].concat(N(_e.toArray(arguments)))),n=O(t,2),r=n[0],a=n[1];return this._getMessageList(e,kt.TIMESTAMP,r,a)}},{key:"getPreviousMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["prev"].concat(N(_e.toArray(arguments)))),n=O(t,2),r=n[0],a=n[1];return this._getMessageList(e,kt.MESSAGE_ID,r,a)}},{key:"getNextMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["next"].concat(N(_e.toArray(arguments)))),n=O(t,2),r=n[0],a=n[1];return this._getMessageList(e,kt.MESSAGE_ID,r,a)}},{key:"getPreviousAndNextMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["prevnext"].concat(N(_e.toArray(arguments)))),n=O(t,2),r=n[0],a=n[1];return this._getMessageList(e,kt.MESSAGE_ID,r,a)}},{key:"getMessagesByTimestamp",value:function(e,t,n){return this._getMessageList(e,kt.TIMESTAMP,t,n)}},{key:"getMessagesByMessageId",value:function(e,t,n){return this._getMessageList(e,kt.MESSAGE_ID,t,n)}},{key:"_sendUserMessage",value:function(e){var t=this,n=e.reqId,r=e.message,a=e.data,i=e.customType,s=e.metaArrays,o=e.mentionType,l=e.mentionedUserIds,c=e.mentionedMessageTemplate,u=e.pushNotificationDeliveryOption,h=e.rootMessageId,f=e.parentMessageId,p=e.translationTargetLanguages,_=e.appleCriticalAlertOptions,m=e.pollId,g=e.silent,v=void 0!==g&&g,y=e.isReplyToChannel,E=e.messageParams,b=e.oldMessage,C=void 0===b?null:b,O=e.isManualResend,N=void 0!==O&&O,S=e.callback,A=G.get(this._iid),I=A.Command,k=A.UserMessage,T=Ba.getInstance(this._iid),R=Fe.of(this._iid),M=bt.of(this._iid),L=Ae.of(this._iid),P=w.get(this._iid).container.localCacheEnabled;n||(n=I.generateRequestId());var D={};Array.isArray(p)&&p.forEach(function(e){return D[e]=""});var U=k.objectify({messageId:0,reqId:n,user:T.currentUser||{},channel:this,message:r,data:a,customType:i,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:c,rootMessageId:h,parentMessageId:f,translations:D,silent:v,appleCriticalAlertOptions:_,isReplyToChannel:y,messageParams:E,createdAt:(new Date).getTime()}),x=new k(U);if(x.requestState=T.MessageRequestState.PENDING,x.sendingStatus=T.MessageSendingStatus.PENDING,x.requestedMentionUserIds=l,x._messageParams=E,!T.currentUser){var F=new j("Connection should be made first.",j.CONNECTION_REQUIRED),H=new k(U);return H.requestState=T.MessageRequestState.FAILED,H.sendingStatus=T.MessageSendingStatus.FAILED,H.requestedMentionUserIds=l,H.errorCode=F.code,S(F,H),x}return(!t.isGroupChannel()||C&&C._isAutoResendRegistered?Promise.resolve():R.upsert([x],Ne.UNSENT).then(function(){L.send({source:N?de.LOCAL_MESSAGE_RESEND_STARTED:de.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:t,message:x}})})).then(function(){var e=I.bMessage({channelUrl:t.url,message:r,data:a,customType:i,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:c,requestId:n,rootMessageId:h,parentMessageId:f,silent:v,translationTargetLanguages:p,pushNotificationDeliveryOption:u,appleCriticalAlertOptions:_,pollId:m,isReplyToChannel:y});x.reqId=e.requestId,t.isGroupChannel()&&T.getConnectionState()!==T.ConnectionState.OPEN&&T.currentUser&&!T.connecting&&!T.reconnecting&&"string"==typeof i&&0===i.indexOf("SB_VIDEOCHAT")?w.get(T._iid).container.apiClient.sendUserMessage({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),message:r,data:a,customType:i,translationTargetLanguages:p,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:c,pushNotificationDeliveryOption:u,rootMessageId:h,parentMessageId:f,appleCriticalAlertOptions:_,pollId:m,isReplyToChannel:y},function(e,r){var a=null;if(e){if(x._isAutoResendRegistered&&ie.isAutoResendableError(e.code))return;(a=new k(U)).requestState=T.MessageRequestState.FAILED,a.requestedMentionUserIds=l,C&&(a._isAutoResendRegistered=C._isAutoResendRegistered),e.code===j.REQUEST_CANCELED?(a.sendingStatus=T.MessageSendingStatus.CANCELED,R.removeUnsentMessages({channelUrl:t.url,sendingStatus:T.MessageSendingStatus.PENDING,reqIds:[n]}).then(function(){L.send({source:de.LOCAL_MESSAGE_CANCELED,payload:{channel:t,message:a}})}).catch(function(e){return X.error(e)}).finally(function(){S&&S(new j(e.message,e.code),a)})):(a.errorCode=e.code,a.sendingStatus=T.MessageSendingStatus.FAILED,P&&ie.isAutoResendableError(e.code)&&(a.sendingStatus=T.MessageSendingStatus.PENDING,a.errorCode=0,a._isAutoResendRegistered=!0),R.upsert([a],Ne.UNSENT).then(function(){nt._completeCurrentAndProcessNextAutoResend(T,a),L.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:t,message:a}})}).catch(function(e){return X.error(e)}).finally(function(){var t=a._clone();t.sendingStatus=T.MessageSendingStatus.FAILED,t.errorCode=e.code,t._isAutoResendRegistered=!1,S&&S(new j(e.message,e.code),t)}))}else{for(var i in(a=new k(r)).reqId=n,a.requestState=T.MessageRequestState.SUCCEEDED,a.sendingStatus=T.MessageSendingStatus.SUCCEEDED,C&&(a._isAutoResendRegistered=C._isAutoResendRegistered),t.lastMessage=a,T.channelHandlers)T.channelHandlers[i].onChannelChanged(t);M.upsert([t]).then(function(){L.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:t}})}).then(function(){return R.removeUnsentMessages({channelUrl:t.url,sendingStatus:T.MessageSendingStatus.PENDING,reqIds:[n]})}).then(function(){return R.upsert([a],Ne.SUCCEEDED)}).then(function(){nt._completeCurrentAndProcessNextAutoResend(T,a),L.send({source:de.EVENT_MESSAGE_SENT,payload:{channel:t,message:a}})}).catch(function(e){return X.error(e)}).finally(function(){S&&S(null,a)})}}):T.sendCommand(e,function(r,a){if(T.getErrorFirstCallback()){var i=[r,a];a=i[0],r=i[1]}if(a){if(x._isAutoResendRegistered&&ie.isAutoResendableError(a.code))return;var s=new k(U);s.reqId=e.requestId,s.requestState=T.MessageRequestState.FAILED,a.code===j.REQUEST_CANCELED?(s.sendingStatus=T.MessageSendingStatus.CANCELED,t.isGroupChannel()&&R.removeUnsentMessages({channelUrl:t.url,sendingStatus:T.MessageSendingStatus.PENDING,reqIds:[n]}).then(function(){L.send({source:de.LOCAL_MESSAGE_CANCELED,payload:{channel:t,message:s}})}).catch(function(e){return X.error(e)}).finally(function(){S&&S(new j(a.message,a.code),s)})):(s.sendingStatus=T.MessageSendingStatus.FAILED,s.errorCode=a.code,s.requestedMentionUserIds=l,t.isGroupChannel()?(P&&ie.isAutoResendableError(a.code)&&(s.sendingStatus=T.MessageSendingStatus.PENDING,s.errorCode=0,s._isAutoResendRegistered=!0),R.upsert([s],Ne.UNSENT).then(function(){return nt._completeCurrentAndProcessNextAutoResend(T,s),L.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:t,message:s}})}).catch(function(e){X.error(e)}).finally(function(){var e=s._clone();e.sendingStatus=T.MessageSendingStatus.FAILED,e.errorCode=a.code,e._isAutoResendRegistered=!1,S&&S(new j(a.message,a.code),e)})):S&&S(new j(a.message,a.code),s))}else{var o=new k(d(d({},r.getJsonElement()),{},{messageParams:E}));o.reqId=n,o.requestState=T.MessageRequestState.SUCCEEDED,o.sendingStatus=T.MessageSendingStatus.SUCCEEDED,C&&(o._isAutoResendRegistered=C._isAutoResendRegistered);var c=T.currentUser;if(c&&o._sender&&c.userId===o._sender.userId&&(c.nickname!==o._sender.nickname&&(c.nickname=o._sender.nickname),c.plainProfileUrl!==o._sender.plainProfileUrl&&(c.plainProfileUrl=o._sender.plainProfileUrl),ie.deepEqual(c.metaData,o._sender.metaData)||(c.metaData=o._sender.metaData)),t.isGroupChannel()){t.lastMessage=o,Object.keys(T.channelHandlers).forEach(function(e){T.channelHandlers[e].onChannelChanged(t)});var u=Ae.of(t._iid);bt.of(t._iid).upsert([t]).then(function(){u.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:t}})}).then(function(){return R.removeUnsentMessages({channelUrl:t.url,sendingStatus:T.MessageSendingStatus.PENDING,reqIds:[n]})}).then(function(){return R.upsert([o],Ne.SUCCEEDED)}).then(function(){nt._completeCurrentAndProcessNextAutoResend(T,o),u.send({source:de.EVENT_MESSAGE_SENT,payload:{channel:t,message:o}})}).catch(function(e){X.error(e)}).finally(function(){S&&S(null,o)})}else S&&S(null,o)}})}),x}},{key:"sendUserMessage",value:function(){var e=_e.toArray(arguments),t=e.pop(),n=null,r=null,a=G.get(this._iid),i=a.UserMessageParams;if("function"==typeof t)if(e[0]instanceof i)null===(r=e[0]).data&&(r.data=""),null===r.customType&&(r.customType="");else if("string"==typeof e[0])switch((r=new i).message=e[0],e.length){case 1:break;case 2:r.data=e[1]||"";break;case 3:r.data=e[1]||"",r.customType=e[2]||"";break;case 4:r.data=e[1]||"",r.customType=e[2]||"",r.translationTargetLanguages=Array.isArray(e[3])?e[3]:[e[3]];break;default:n=_e.error}else n=_e.error;else n=_e.error;var s=w.get(this._iid),o=s.container.isErrorFirstInCallback;return!n&&r._validate()&&r.message?this._sendUserMessage(d(d({},r),{},{metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,mentionedMessageTemplate:r.mentionedMessageTemplate,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,messageParams:r,callback:function(e,n){o?t(e,n):t(n,e)}})):(o?t(_e.error,null):t(null,_e.error),null)}},{key:"_autoResendUserMessage",value:function(e){var t=this,n=Ba.getInstance(this._iid);if(n&&n.currentUser){var r=e._messageParams;return new Promise(function(n,a){return t._sendUserMessage(d(d({},r),{},{reqId:e.reqId,metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,pushNotificationDeliveryOption:r.pushNotificationDeliveryOption,messageParams:r,oldMessage:e,callback:function(e,t){e?a(e):n(t)}}))})}}},{key:"_autoResendFileMessage",value:function(e){var t=Ba.getInstance(this._iid);if(t&&t.currentUser){var n=this._parsePendingFileMessage(e),r=G.get(this._iid).FileMessageQueue;r.create(this).addJob(new r.Job({fileInfo:n,pendingMessage:e._clone(),requestId:e.reqId,error:n.error,response:null}))}}},{key:"resendUserMessage",value:function(e,t){var n=this,r=G.get(this._iid),a=r.UserMessage,i=r.UserMessageParams,s=null,o=_e.parse(arguments,[new _e({type:a,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===n.url&&"string"==typeof e.message&&"string"==typeof e.data&&"string"==typeof e.customType&&"object"===h(e.translations)&&!Array.isArray(e.translations)}}),new _e({type:"callback"})]),l=O(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,function(t){if(s)s.message+=" Please check if the failed message is resend-able with `message.isResendable().`",t(s,null);else{var r=Object.keys(e.translations),a=i.PushNotificationDeliveryOption.DEFAULT;n._sendUserMessage(d(d({},e),{},{mentionedUserIds:e.requestedMentionUserIds,translationTargetLanguages:r,pushNotificationDeliveryOption:a,reqId:e.reqId,messageParams:e._messageParams,isManualResend:!0,callback:t}))}},t)}},{key:"updateUserMessage",value:function(e,t,n,r,a){var i=this,s=G.get(this._iid),o=s.Command,l=s.UserMessage,c=s.UserMessageParams,u=arguments,h=null,f=null;if("number"==typeof e)switch(u.length){case 3:var p=_e.parse(u,[new _e({type:"number"}),new _e({type:c}),new _e({type:"callback"})]),_=O(p,4);h=_[0],e=_[1],f=_[2],a=_[3];break;case 5:f=new c;var m=_e.parse(u,[new _e({type:"number"}),new _e({type:"string",nullable:!0}),new _e({type:"string",nullable:!0}),new _e({type:"string",nullable:!0}),new _e({type:"callback"})]),g=O(m,6);h=g[0],e=g[1],t=g[2],n=g[3],r=g[4],a=g[5],f.message=t,f.data=n,f.customType=r}return le(this._iid,function(t){if(!h&&f&&f._validate()){var n=o.bUpdateUserMessage(d(d({channelUrl:i.url,messageId:e},f),{},{mentionType:f._mentionType,mentionedUserIds:f._mentionedUserIds,mentionedMessageTemplate:f.mentionedMessageTemplate})),r=Ba.getInstance(i._iid),a=Fe.of(i._iid),s=Ae.of(i._iid);r.sendCommand(n,function(e,n){if(r.getErrorFirstCallback()){var o=[e,n];n=o[0],e=o[1]}var c=null;n||(c=new l(d(d({},e.getJsonElement()),{},{messageParams:f})),i.isGroupChannel()&&a.upsert([c],Ne.SUCCEEDED).then(function(){s.send({source:de.EVENT_MESSAGE_UPDATED,payload:{channel:i,message:c}})}).catch(function(e){X.error(e)})),t(n,c)})}else t(_e.error,null)},a)}},{key:"translateUserMessage",value:function(e,t,n){var r=this,a=Ba.getInstance(this._iid),i=G.get(this._iid),s=i.UserMessage,o=null,l=_e.parse(arguments,[new _e({type:s,constraint:function(e){return e.channelUrl===r.url&&e.sendingStatus===a.MessageSendingStatus.SUCCEEDED}}),new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),c=O(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],le(this._iid,function(n){o?n(o,null):w.get(r._iid).container.apiClient.translateUserMessage({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),messageId:e.messageId,translationTargetLanguages:t},function(e,t){var r=null;e||(r=new s(t)),n(e,r)})},n)}},{key:"_parsePendingFileMessage",value:function(e){var t=e._messageParams.serialize(),n=t.data,r=t.customType,a=t.fileUrl,i=t.thumbnailSizes,s=t.mentionType,o=t.mentionedUserIds,l=t.metaArrays,c=t.parentMessageId,u=t.pushNotificationDeliveryOption,d=e._messageParams;return{file:d.file?d.file:a,name:e.name,type:e.type,size:e.size,data:n,customType:r,thumbnailSizes:i,metaArrays:l,mentionType:s,mentionedUserIds:o,pushNotificationDeliveryOption:u,rootMessageId:c,parentMessageId:c,appleCriticalAlertOptions:d.appleCriticalAlertOptions,messageParams:e._messageParams,silent:e.silent,error:null,progressHandler:null,callback:null}}},{key:"_parseFileMessageArguments",value:function(e){var t=G.get(this._iid),n=t.BaseMessageParams,r=t.FileMessageParams,a={error:null,file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],metaArrays:[],mentionType:n.MentionType.USERS,mentionedUserIds:[],pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,rootMessageId:null,parentMessageId:null,progressHandler:null,silent:!1,appleCriticalAlertOptions:null,isReplyToChannel:!1,messageParams:null,callback:null};if("function"==typeof e[e.length-1]&&(a.callback=e.pop()),"function"==typeof e[e.length-1]&&(a.progressHandler=e.pop()),e[0]instanceof r)a.file=e[0].file||e[0].fileUrl,a.name=e[0].fileName,a.type=e[0].mimeType,a.size=e[0].fileSize,a.data=e[0].data,a.customType=e[0].customType,a.thumbnailSizes=e[0].thumbnailSizes,a.metaArrays=e[0].metaArrays,a.mentionType=e[0]._mentionType,a.mentionedUserIds=e[0]._mentionedUserIds,a.pushNotificationDeliveryOption=e[0].pushNotificationDeliveryOption?e[0].pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,a.rootMessageId=e[0].rootMessageId,a.parentMessageId=e[0].parentMessageId,a.silent=e[0].silent,e[0]._validate()||(a.error=_e.error),a.appleCriticalAlertOptions=e[0].appleCriticalAlertOptions,a.isReplyToChannel=e[0].isReplyToChannel,a.messageParams=e[0];else if(ie.isFile(e[0])||"string"==typeof e[0]){switch(a.file=e[0],e.length){case 1:break;case 2:a.data=e[1];break;case 3:a.data=e[1],a.customType=e[2];break;case 4:a.data=e[1],a.customType=e[2],a.thumbnailSizes=e[3];break;case 5:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4];break;case 6:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5];break;case 7:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5],a.thumbnailSizes=e[6]}var i=O(_e.parse([a.file,a.name,a.type,a.size,a.data,a.customType,a.thumbnailSizes],[new _e({type:["file","string"]}),new _e({type:"string",nullable:!0}),new _e({type:"string",nullable:!0}),new _e({type:"number",nullable:!0,constraint:function(e){return e>=0}}),new _e({type:"string",nullable:!0}),new _e({type:"string",nullable:!0}),new _e({type:"array"})]),8);a.error=i[0],a.file=i[1],a.name=i[2],a.type=i[3],a.size=i[4],a.data=i[5],a.customType=i[6],a.thumbnailSizes=i[7];var s=ie.isFile(a.file);s&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a.messageParams={mentionType:n.MentionType.USERS,mentionedUserIds:a.mentionedUserIds,cachedMentionedUsers:[],cachedMentionedUserIds:[],metaArrays:a.metaArrays,parentMessageId:a.parentMessageId,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption,appleCriticalAlertOptions:a.appleCriticalAlertOptions,fileName:a.name,mimeType:a.type,fileSize:a.size,data:a.data,customType:a.customType,isUpdate:!1,file:s?a.file:null,fileUrl:s?null:a.file,thumbnailSizes:a.thumbnailSizes}}else a.error=_e.error;return ie.isFile(a.file)&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a}},{key:"_createTempFileMessage",value:function(e){try{var t=Ba.getInstance(this._iid),n=G.get(this._iid),r=n.Command,a=n.FileMessage,i=d(d({},e),{},{messageId:0,reqId:r.generateRequestId(),user:t.currentUser||{},channel:this,plainUrl:"string"==typeof e.file?e.file:"",thumbnails:e.thumbnailSizes.map(function(e){return{url:"",plainUrl:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}}),sendingStatus:t.MessageSendingStatus.PENDING,createdAt:(new Date).getTime()}),s=a.objectify(i);return new a(s)}catch(e){return null}}},{key:"sendFileMessage",value:function(){var e=this,t=_e.toArray(arguments),n=this._parseFileMessageArguments(t),r=G.get(this._iid),a=r.Command,i=null,s=a.generateRequestId();n.error||((i=this._createTempFileMessage(n)).requestedMentionUserIds=n.mentionedUserIds,s=i.reqId);var o=Ba.getInstance(this._iid);if(o&&o.currentUser||(n.error=new j("Connection should be made first.",j.CONNECTION_REQUIRED)),this.isGroupChannel()){var l=Fe.of(this._iid),c=Ae.of(this._iid);l.upsert([i],Ne.UNSENT).then(function(){c.send({source:de.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:e,message:i}})})}var u=G.get(this._iid),d=u.FileMessageQueue,h=d.create(this);return h.addJob(new d.Job({fileInfo:n,pendingMessage:i,requestId:s,error:n.error,response:null})),i}},{key:"sendFileMessages",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.progress?n.progress:function(){},a=n.sent?n.sent:function(){},i=n.complete?n.complete:function(){};if(Array.isArray(e)&&e.length>0&&e.length<=20){var s=[];return e.forEach(function(n,o){s.push(t.sendFileMessage(n,r,function(t,n){a(t,n),o===e.length-1&&i(null)}))}),s}return i(_e.error),null}},{key:"resendFileMessage",value:function(e,t,n){var r=this,a=G.get(this._iid),i=a.FileMessage,s=a.FileMessageParams,o=null,l=_e.parse(arguments,[new _e({type:i,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===r.url&&"string"==typeof e.data&&"string"==typeof e.customType&&Array.isArray(e.thumbnails)}}),new _e({type:"file",optionalIf:function(e){return!!e[0].plainUrl},defaultValue:null}),new _e({type:"callback"})]),c=O(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],le(this._iid,function(n){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",n(o,null);else{var a=new s;e.plainUrl?a.fileUrl=e.plainUrl:a.file=t,a.fileName=e.name,a.fileSize=e.size,a.mimeType=e.type,a.data=e.data,a.customType=e.customType,a.mentionType=e.mentionType,a.mentionedUserIds=e.requestedMentionUserIds,a.metaArrays=e.metaArrays,a.thumbnailSizes=e.thumbnails.map(function(e){return{maxWidth:e.width,maxHeight:e.height}}),a.appleCriticalAlertOptions=e.appleCriticalAlertOptions,r.sendFileMessage(a,n)}},n)}},{key:"updateFileMessage",value:function(e,t,n,r){var a=this,i=G.get(this._iid),s=i.Command,o=i.FileMessage,l=i.FileMessageParams,c=arguments,u=null,h=null;if("number"==typeof e)switch(c.length){case 3:var f=_e.parse(c,[new _e({type:"number"}),new _e({type:l}),new _e({type:"callback"})]),p=O(f,4);u=p[0],e=p[1],h=p[2],r=p[3],h&&(h._isUpdate=!0);break;case 4:h=new l;var _=_e.parse(c,[new _e({type:"number"}),new _e({type:"string",nullable:!0}),new _e({type:"string",nullable:!0}),new _e({type:"callback"})]),m=O(_,5);u=m[0],e=m[1],t=m[2],n=m[3],r=m[4],h.data=t,h.customType=n,h._isUpdate=!0}return le(this._iid,function(t){if(!u&&h&&h._validate()){var n=s.bUpdateFileMessage(d(d({channelUrl:a.url,messageId:e},h),{},{mentionType:h._mentionType,mentionedUserIds:h._mentionedUserIds})),r=Ba.getInstance(a._iid);r.sendCommand(n,function(e,n){if(r.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var s=null;if(!n&&(s=new o(d(d({},e.getJsonElement()),{},{messageParams:h})),a.isGroupChannel())){var l=Fe.of(a._iid),c=Ae.of(a._iid);l.upsert([s],Ne.SUCCEEDED).then(function(){c.send({source:de.EVENT_MESSAGE_UPDATED,payload:{channel:a,message:s}})}).catch(function(e){X.error(e)})}t(n,s)})}else t(_e.error,null)},r)}},{key:"cancelUploadingFileMessage",value:function(e,t){var n=null,r=_e.parse(arguments,[new _e({type:["number","string"]}),new _e({type:"callback"})]),a=O(r,3);n=a[0],e=a[1],t=a[2];var i=w.get(this._iid),s=i.container.isErrorFirstInCallback;if(n)return s?t(n,null):t(null,n),!1;var o=G.get(this._iid),l=o.FileMessageQueue,c=l.create(this);return c.cancelUploadItemByRequestId(e,function(e,n){return s?t(e,n):t(n,e)})}},{key:"addReaction",value:function(e,t,n){var r=this,a=Ba.getInstance(this._iid),i=G.get(this._iid),s=i.ReactionEvent,o=null,l=_e.parse(arguments,[new _e({type:At}),new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"callback"})]),c=O(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],le(this._iid,function(n){o?n(o,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?w.get(r._iid).container.apiClient.addReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},function(t,r){var a=null;t||(a=s.createFromJson(d(d({},r),{},{msg_id:e.messageId}))),n(t,a)}):n(new j("Cannot add reaction to a non-succeeded message.",j.REQUEST_FAILED),null)},n)}},{key:"deleteReaction",value:function(e,t,n){var r=this,a=Ba.getInstance(this._iid),i=G.get(this._iid),s=i.ReactionEvent,o=null,l=_e.parse(arguments,[new _e({type:At}),new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"callback"})]),c=O(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],le(this._iid,function(n){o?n(o,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?w.get(r._iid).container.apiClient.deleteReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},function(t,r){var a=null;t||(a=s.createFromJson(d(d({},r),{},{msg_id:e.messageId}))),n(t,a)}):n(new j("Cannot remove reaction to a non-succeeded message.",j.REQUEST_FAILED),null)},n)}},{key:"deleteMessage",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return!Array.isArray(e)&&null!==e&&e.hasOwnProperty("messageId")}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.deleteMessage({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),messageId:e.messageId},function(r,a){if(!r&&n.isGroupChannel()){var i=Fe.of(n._iid),s=Ae.of(n._iid);i.remove([e.messageId],Ne.SUCCEEDED).then(function(){s.send({source:de.EVENT_MESSAGE_DELETED,payload:{channel:n,message:e}})}).catch(function(e){return X.error(e)})}t(r,null)})},t)}},{key:"copyUserMessage",value:function(t,n,r){var a=G.get(this._iid);a.Command;var i=a.UserMessage,s=a.BaseMessageParams,o=null,l=_e.parse(arguments,[new _e({type:e}),new _e({type:i}),new _e({type:"callback"})]),c=O(l,4);o=c[0],t=c[1],n=c[2],r=c[3];var u=w.get(this._iid),h=u.container.isErrorFirstInCallback;if(o)return h?r(_e.error,null):r(null,_e.error),null;if(this.url!==n.channelUrl){var f=new j("The message does not belong to this channel",j.INVALID_PARAMETER);return h?r(f,null):r(null,f),null}var p={},_=Object.keys(n.translations);_.forEach(function(e){return p[e]=""});var m=s.PushNotificationDeliveryOption.DEFAULT;return t._sendUserMessage(d(d({},n),{},{reqId:null,pushNotificationDeliveryOption:m,translationTargetLanguages:_,rootMessageId:null,parentMessageId:null,parentMessageText:null,messageParams:n._messageParams,callback:r}))}},{key:"copyFileMessage",value:function(t,n,r){var a=this,i=G.get(this._iid),s=i.Command;i.GroupChannel;var o=i.FileMessage,l=i.BaseMessageParams;i.FileMessageParams;var c=i.User,u=null,d=_e.parse(arguments,[new _e({type:e}),new _e({type:o}),new _e({type:"callback"})]),h=O(d,4);u=h[0],t=h[1],n=h[2],r=h[3];var f=w.get(this._iid),p=f.container.isErrorFirstInCallback;if(u)return p?r(_e.error,null):r(null,_e.error),null;if(this.url!==n.channelUrl){var _=new j("The message does not belong to this channel");return p?r(_,null):r(null,_),null}var m=Ba.getInstance(this._iid),g=n,v=g.url,y=g.name,E=g.type,b=g.size,C=g.data,N=g.customType,S=g.mentionType,A=g.mentionedUserIds,I=g.mentionedUsers,k=g.metaArrays,T=g.thumbnails,R=g.requireAuth,M=g.messageSurvivalSeconds,L=g.silent,P=g.appleCriticalAlertOptions,D=s.generateRequestId(),U=m.currentUser||{},x=t.url,F=t.isOpenChannel(),H=I.filter(function(e){return new c(c.objectify(e))}),B=l.PushNotificationDeliveryOption.DEFAULT,V=o.objectify({messageId:0,reqId:D,user:U,channel:t,plainUrl:v,name:y,type:E,size:b,data:C,customType:N,mentionType:S,mentionedUserIds:A,mentionedUsers:H,requestedMentionUserIds:A,metaArrays:k,thumbnails:T,requireAuth:R,messageSurvivalSeconds:M,silent:L,createdAt:(new Date).getTime(),appleCriticalAlertOptions:P}),z=new o(V);if(z.requestState=m.MessageRequestState.PENDING,z.sendingStatus=m.MessageSendingStatus.PENDING,!m.currentUser){var q=new j("Connection should be made first.",j.CONNECTION_REQUIRED),K=new o(V);return K.requestState=m.MessageRequestState.FAILED,K.sendingStatus=m.MessageSendingStatus.FAILED,K.errorCode=q.code,p?r(q,K):r(K,q),z}var Y=s.bFile({requestId:D,channelUrl:x,url:v,name:y,type:E,size:b,data:C,customType:N,metaArrays:k,mentionType:S,mentionedUserIds:A,thumbnailSizes:T,requireAuth:R,pushNotificationDeliveryOption:B,silent:L,appleCriticalAlertOptions:P});return m.getConnectionState()===m.ConnectionState.OPEN||m.connecting||m.reconnecting?m.sendCommand(Y,function(e,n){if(m.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}if(n)if(n.code!==j.INVALID_PARAMETER){var s=new o(V);s.requestState=m.MessageRequestState.FAILED,s.sendingStatus=m.MessageSendingStatus.FAILED,n.code!==j.FILE_UPLOAD_CANCEL_FAILED&&n.code!==j.REQUEST_CANCELED||(s.sendingStatus=m.MessageSendingStatus.CANCELED),s.errorCode=n.code,p?r(n,s):r(s,n)}else p?r(n,null):r(null,n);else{var l=new o(e.getJsonElement()),c=l._sender;if(U&&c&&U.userId===c.userId&&(U.nickname!==c.nickname&&(U.nickname=c.nickname),U.plainProfileUrl!==c.plainProfileUrl&&(U.plainProfileUrl=c.plainProfileUrl)),t.isGroupChannel()){t.lastMessage=l,Object.keys(m.channelHandlers).forEach(function(e){m.channelHandlers[e].onChannelChanged(t)});var u=Ae.of(a._iid);bt.of(a._iid).upsert([t]).then(function(){u.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:t}})}).catch(function(e){X.error(e)}),Fe.of(a._iid).upsert([l]).then(function(){u.send({source:de.EVENT_MESSAGE_SENT,payload:{channel:a,message:l}})}).catch(function(e){X.error(e)})}p?r(null,l):r(l,null)}}):f.container.apiClient.sendFileMessage({channelUrl:x,isOpenChannel:F,fileUrl:v,fileName:y,fileType:E,fileSize:b,data:C,customType:N,metaArrays:k,mentionType:S,mentionedUserIds:A,thumbnailSizes:T,requireAuth:R,pushNotificationDeliveryOption:B,appleCriticalAlertOptions:P},function(e,n){if(e)if(e.code!==j.INVALID_PARAMETER){var a=new o(commnad.getJsonElement());a.requestState=m.MessageRequestState.FAILED,a.sendingStatus=m.MessageSendingStatus.FAILED,e.code!==j.FILE_UPLOAD_CANCEL_FAILED&&e.code!==j.REQUEST_CANCELED||(a.sendingStatus=m.MessageSendingStatus.CANCELED),a.errorCode=e.code,p?r(e,a):r(a,e)}else p?r(e,null):r(null,e);else{var i=new o(n),s=i._sender;U&&s&&U.userId===s.userId&&(U.nickname!==s.nickname&&(U.nickname=s.nickname),U.plainProfileUrl!==s.plainProfileUrl&&(U.plainProfileUrl=s.plainProfileUrl)),t.isGroupChannel()&&(t.lastMessage=i,Object.keys(m.channelHandlers).forEach(function(e){m.channelHandlers[e].onChannelChanged(t)})),p?r(null,i):r(i,null)}}),z}},{key:"addOperators",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.addOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},function(e,n){return t(e,n)})},t)}},{key:"removeOperators",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.removeOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},function(e,n){return t(e,n)})},t)}},{key:"getMetaCounters",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.getMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},function(e,n){return t(e,n)})},t)}},{key:"getAllMetaCounters",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},function(t,n){return e(t,n)})},e)}},{key:"createMetaCounters",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"number"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.createMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e},function(e,n){return t(e,n)})},t)}},{key:"updateMetaCounters",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"number"==typeof e})}}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){a?n(a,null):w.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:t,mode:"set"},function(e,t){return n(e,t)})},n)}},{key:"increaseMetaCounters",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"number"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"increase"},function(e,n){return t(e,n)})},t)}},{key:"decreaseMetaCounters",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"number"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"decrease"},function(e,n){var r=null;e||(r={},Object.keys(n).forEach(function(e){r[e]=n[e]})),t(e,r)})},t)}},{key:"deleteMetaCounter",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.deleteMetaCounter({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},function(e,n){return t(e,n)})},t)}},{key:"deleteAllMetaCounters",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.deleteAllMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},function(t,n){return e(t,n)})},e)}},{key:"getCachedMetaData",value:function(){var e=Tt.get(this),t={};return Object.keys(e).forEach(function(n){var r=e[n];r.isRemoved||(t[n]=r.value)}),t}},{key:"getMetaData",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.getMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},function(e,r){if(r&&r.ts){var a=r.metadata;n._addOrUpdateCachedMetaData(a,r.ts),t(e,a)}else t(e,r)})},t)}},{key:"getAllMetaData",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},function(n,r){if(r&&r.ts){var a=r.metadata;t._refreshMetaData(a,r.ts),e(n,a)}else e(n,r)})},e)}},{key:"createMetaData",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.createMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaData:e},function(e,n){t(e,n&&n.ts?n.metadata:n)})},t)}},{key:"updateMetaData",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){a?n(a,null):w.get(r._iid).container.apiClient.updateMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaData:e,upsert:t},function(e,t){n(e,t&&t.ts?t.metadata:t)})},n)}},{key:"deleteMetaData",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.deleteMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},function(e,n){t(e,n&&n.ts?{}:n)})},t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.deleteAllMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},function(t,n){return e(t,n&&n.ts?{}:n)})},e)}},{key:"_updateMessageMetaArray",value:function(e,t,n,r){var a=this;return le(this._iid,function(r){var i=G.get(a._iid),s=i.Command,o=i.UserMessage,l=i.FileMessage,c=i.AdminMessage,u=null;if(t.isUserMessage()?u=s.bUpdateUserMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n}):t.isFileMessage()&&(u=s.bUpdateFileMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n})),u){var d=Ba.getInstance(a._iid);d.sendCommand(u,function(e,n){if(d.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}var i=null;n||(t.isUserMessage()?i=new o(e.getJsonElement()):t.isFileMessage()?i=new l(e.getJsonElement()):t.isAdminMessage()&&(i=new c(e.getJsonElement()))),r(n,i)})}else r(_e.error,null)},r)}},{key:"createMessageMetaArrayKeys",value:function(e,t,n){var r=G.get(this._iid),a=r.MessageMetaArray,i=null,s=_e.parse(arguments,[new _e({type:At}),new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e&&""!==e})}}),new _e({type:"callback"})]),o=O(s,4);if(i=o[0],e=o[1],t=o[2],n=o[3],i)return le(this._iid,function(e){e(i,null)},n);var l=[];if(Array.isArray(t))for(var c=0;c<t.length;c++){var u=t[c];l.push(new a(u,[]))}return this._updateMessageMetaArray(this.url,e,{array:l.map(function(e){return e.encode()}),mode:"add",upsert:!0},n)}},{key:"deleteMessageMetaArrayKeys",value:function(e,t,n){var r=G.get(this._iid),a=r.MessageMetaArray,i=null,s=_e.parse(arguments,[new _e({type:At}),new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e&&""!==e})}}),new _e({type:"callback"})]),o=O(s,4);if(i=o[0],e=o[1],t=o[2],n=o[3],i)return le(this._iid,function(e){e(i,null)},n);var l=[];if(Array.isArray(t))for(var c=0;c<t.length;c++){var u=t[c];l.push(new a(u,[]))}return this._updateMessageMetaArray(this.url,e,{array:l.map(function(e){return e.encode()}),mode:"remove",upsert:!0},n)}},{key:"addMessageMetaArrayValues",value:function(e,t,n){var r=G.get(this._iid),a=r.MessageMetaArray,i=null,s=_e.parse(arguments,[new _e({type:At}),new _e({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every(function(e){return e instanceof a})||Object.keys(e).length>0&&Object.keys(e).every(function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every(function(e){return"string"==typeof e&&e.length>0})}))}}),new _e({type:"callback"})]),o=O(s,4);if(i=o[0],e=o[1],t=o[2],n=o[3],i)return le(this._iid,function(e){e(i,null)},n);var l=Array.isArray(t)?t.map(function(e){return e.encode()}):Object.keys(t).map(function(e){return{key:e,value:t[e]}});return this._updateMessageMetaArray(this.url,e,{array:l,mode:"add",upsert:!0},n)}},{key:"removeMessageMetaArrayValues",value:function(e,t,n){var r=G.get(this._iid),a=r.MessageMetaArray,i=null,s=_e.parse(arguments,[new _e({type:At}),new _e({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every(function(e){return e instanceof a})||Object.keys(e).length>0&&Object.keys(e).every(function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every(function(e){return"string"==typeof e&&e.length>0})}))}}),new _e({type:"callback"})]),o=O(s,4);if(i=o[0],e=o[1],t=o[2],n=o[3],i)return le(this._iid,function(e){e(i,null)},n);var l=Array.isArray(t)?t.map(function(e){return e.encode()}):Object.keys(t).map(function(e){return{key:e,value:t[e]}});return this._updateMessageMetaArray(this.url,e,{array:l,mode:"remove",upsert:!0},n)}},{key:"report",value:function(e,t,n){var r=this,a=G.get(this._iid),i=a.BaseChannel,s=null,o=_e.parse(arguments,[new _e({type:i.ReportCategory}),new _e({type:"string"}),new _e({type:"callback"})]),l=O(o,4);return s=l[0],e=l[1],t=l[2],n=l[3],le(this._iid,function(n){if(s)n(s,null);else{var a=Ba.getInstance(r._iid);w.get(r._iid).container.apiClient.report({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),reportCategory:e,reportingUserId:a.currentUser?a.currentUser.userId:null,reportDescription:t},function(e,t){n(e,null)})}},n)}},{key:"reportUser",value:function(e,t,n,r){var a=this,i=G.get(this._iid),s=i.BaseChannel,o=null,l=_e.parse(arguments,[new _e({type:It}),new _e({type:s.ReportCategory}),new _e({type:"string"}),new _e({type:"callback"})]),c=O(l,5);return o=c[0],e=c[1],t=c[2],n=c[3],r=c[4],le(this._iid,function(r){if(o)r(o,null);else{var i=Ba.getInstance(a._iid);w.get(a._iid).container.apiClient.reportUser({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:t,offendingUserId:e.userId,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:n},function(e,t){r(e,null)})}},r)}},{key:"reportMessage",value:function(e,t,n,r){var a=this,i=G.get(this._iid),s=i.BaseChannel,o=null,l=_e.parse(arguments,[new _e({type:At}),new _e({type:s.ReportCategory}),new _e({type:"string"}),new _e({type:"callback"})]),c=O(l,5);return o=c[0],e=c[1],t=c[2],n=c[3],r=c[4],le(this._iid,function(r){if(o)r(o,null);else{var i=Ba.getInstance(a._iid);w.get(a._iid).container.apiClient.reportMessage({messageId:e.messageId,channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:t,offendingUserId:e.sender.userId,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:n},function(e,t){r(e,null)})}},r)}}],[{key:"CHANNEL_TYPE_OPEN",get:function(){return"open"}},{key:"CHANNEL_TYPE_GROUP",get:function(){return"group"}},{key:"CHANNEL_TYPE_BASE",get:function(){return"base"}},{key:"MessageTypeFilter",get:function(){return{ALL:"",USER:"MESG",FILE:"FILE",ADMIN:"ADMM"}}},{key:"ReportCategory",get:function(){return{SPAM:"spam",HARASSING:"harassing",SUSPICIOUS:"suspicious",INAPPROPRIATE:"inappropriate"}}},{key:"buildMessage",value:function(e,t){var n=G.get(this._iid),r=n.UserMessage,a=n.FileMessage,i=n.AdminMessage;if(e)switch(e.hasOwnProperty("channel_type")||(e.channel_type=t.channelType),e.type){case"MESG":return new r(e);case"FILE":var s=e.file;return new a(d(d({},e),{},{url:String(s.url),name:String(s.name),type:String(s.type),size:parseInt(s.size),data:String(s.data)}));case"BRDM":case"ADMM":return new i(e)}return null}}]),e}(),Mt=function(){function e(t){f(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0,this.data=t.hasOwnProperty("data")?t.data:null,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):Rt.CHANNEL_TYPE_GROUP)}return _(e,[{key:"isGroupChannel",value:function(){return this.channelType===Rt.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){return this.channelType===Rt.CHANNEL_TYPE_OPEN}}]),e}();Mt.CATEGORY_NONE=0,Mt.CATEGORY_CHANNEL_ENTER=10102,Mt.CATEGORY_CHANNEL_EXIT=10103,Mt.CATEGORY_USER_CHANNEL_MUTE=10201,Mt.CATEGORY_USER_CHANNEL_UNMUTE=10200,Mt.CATEGORY_USER_CHANNEL_BAN=10601,Mt.CATEGORY_USER_CHANNEL_UNBAN=10600,Mt.CATEGORY_CHANNEL_FREEZE=10701,Mt.CATEGORY_CHANNEL_UNFREEZE=10700,Mt.CATEGORY_TYPING_START=10900,Mt.CATEGORY_TYPING_END=10901,Mt.CATEGORY_CHANNEL_JOIN=1e4,Mt.CATEGORY_CHANNEL_LEAVE=10001,Mt.CATEGORY_CHANNEL_OPERATOR_UPDATE=10002,Mt.CATEGORY_CHANNEL_INVITE=10020,Mt.CATEGORY_CHANNEL_DECLINE_INVITE=10022,Mt.CATEGORY_CHANNEL_PROP_CHANGED=11e3,Mt.CATEGORY_CHANNEL_DELETED=12e3,Mt.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,Mt.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,Mt.CATEGORY_CHANNEL_HIDE=13e3,Mt.CATEGORY_CHANNEL_UNHIDE=13001;var Lt=_(function e(t){f(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0)});Lt.CATEGORY_USER_BLOCK=20001,Lt.CATEGORY_USER_UNBLOCK=2e4,Lt.CATEGORY_FRIEND_DISCOVERED=20900;var Pt=function(){function e(t){f(this,e),this.sb=t,this.cls=G.get(this.sb._iid)}return _(e,[{key:"onRawCommandReceived",value:function(e){var t=this,n=this.cls,r=n.Command,a=n.User,i=n.Member,s=n.RestrictedUser,o=n.BaseChannel,l=n.GroupChannel,c=n.OpenChannel,u=n.UserMessage,f=n.FileMessage,p=n.AdminMessage,_=n.BaseMessageParams,m=n.ReactionEvent,g=n.ReadStatus,v=n.ThreadInfoUpdateEvent,y=n.PollUpdateEvent,E=n.PollVoteEvent,b=n.RestrictionInfo,C=w.get(this.sb._iid),O=C.container,N=O.pinger,S=O.auth,A=O.subscribedUnreadMessageCount,T=O.sessionManager,R=O.ackStateMap,M=new r(e),L=M.getJsonElement();if(L.hasOwnProperty("unread_cnt")&&"object"===h(L.unread_cnt)){var P=!1,D=L.unread_cnt.ts;"number"==typeof D&&D>A.ts&&(A.all!==L.unread_cnt.all&&(P=!0),A.all=L.unread_cnt.all>=0?L.unread_cnt.all:0,L.unread_cnt.custom_types&&Object.keys(L.unread_cnt.custom_types).forEach(function(e){A.custom_types[e]!==L.unread_cnt.custom_types[e]&&(P=!0),A.custom_types[e]=L.unread_cnt.custom_types[e]}),P=P&&A.ts>0,A.ts=D),P&&Object.keys(this.sb.userEventHandlers).forEach(function(e){t.sb.userEventHandlers[e].onTotalUnreadMessageCountUpdated(A.all,A.custom_types)})}var U=M.requestId;if(U){var x=R[U];if(x){clearTimeout(x.timer);var F=x.handler;F&&("EROR"===M.command?F(new j(L.message,L.code),null):F(null,M)),R.hasOwnProperty(U)&&delete R[U]}}else{N&&"LOGI"!==M.command&&N.refreshTimer();var H,G=bt.of(this.sb._iid),B=Fe.of(this.sb._iid),V=Ae.of(this.sb._iid);switch(M.command){case"LOGI":if(this.sb.loginTimer)if(clearTimeout(this.sb.loginTimer),this.sb.loginTimer=null,this.sb.onLoginTimerCancel=null,L.hasOwnProperty("error"))this.sb.isSessionOpened=!1,this.sb.loginHandler(new j(L.message,L.code),null);else{if(this.sb.isSessionOpened=!0,L.hasOwnProperty("key")&&(S.sessionKey=L.key),L.hasOwnProperty("ekey")&&(S.eKey=L.ekey),L.hasOwnProperty("user_id")&&(this.sb.currentUser=new a(L)),"number"==typeof L.ping_interval&&L.ping_interval>0&&C.set("pingInterval",1e3*L.ping_interval),"number"==typeof L.pong_timeout&&L.pong_timeout>0&&C.set("pongTimeout",1e3*L.pong_timeout),"number"==typeof L.login_ts){var z=1e3*L.login_ts;C.set("connectedAt",z);var q=C.container,K=q.firstConnectedAt,Y=q.localCacheEnabled,W=q.store;if(!K){var Q=z;if(Y){var J=(H=this.sb.currentUser.userId,"sendbird:".concat(H,"@firstConnectedAt"));W.get(J).then(function(e){e&&(Q=e.ts)}).catch(function(e){t.handleCacheError(e)}).finally(function(){C.set("firstConnectedAt",Q)})}else C.set("firstConnectedAt",Q)}}if(L.hasOwnProperty("reconnect")&&"object"===h(L.reconnect)){var $=L.reconnect,Z=C.container.wsAdapter;$.hasOwnProperty("interval")&&"number"==typeof $.interval&&(Z.reconnectParams.interval=$.interval),$.hasOwnProperty("max_interval")&&"number"==typeof $.max_interval&&(Z.reconnectParams.maxInterval=$.max_interval),$.hasOwnProperty("mul")&&"number"==typeof $.mul&&(Z.reconnectParams.multiplier=$.mul),$.hasOwnProperty("retry_cnt")&&"number"==typeof $.retry_cnt&&(Z.reconnectParams.retryCount=$.retry_cnt)}"number"==typeof L.max_unread_cnt_on_super_group?C.set("maxUnreadCountOfSuperGroupChannel",L.max_unread_cnt_on_super_group):C.set("maxUnreadCountOfSuperGroupChannel",k.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL),L.profile_image_encryption&&C.set("profileImageEncryption",!0),N&&N.start(),L.hasOwnProperty("file_upload_size_limit")&&L.hasOwnProperty("premium_feature_list")&&L.hasOwnProperty("emoji_hash")&&C.set("appInfo",new Oe(L)),L.hasOwnProperty("concurrent_call_limit")&&L.hasOwnProperty("back_off_delay")&&(C.set("concurrentCallLimit",L.concurrent_call_limit),C.set("backOffDelay",L.back_off_delay)),this.sb.loginHandler(null,this.sb.currentUser)}break;case"EXPR":var ee=new j("The session would be expired.",L.reason||j.SESSION_KEY_EXPIRED);T.refreshSessionIfExpiredError(ee).then(function(){}).catch(function(){});break;case"MESG":case"FILE":case"BRDM":case"ADMM":var te=null;if("MESG"===M.command?te=new u(L):"FILE"===M.command?te=new f(L):"BRDM"!==M.command&&"ADMM"!==M.command||(te=new p(L)),te){var ne=this.sb.currentUser?this.sb.currentUser.userId:null,re=te.silent,ae=!!L.force_update_last_message,se=te._sender&&te._sender.userId===ne;if(te.isGroupChannel()){var oe=l.cachedChannels.hasOwnProperty(te.channelUrl);l.getChannel(te.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n){if(!C.container.appInfo.isSupergroupMackDisabled||!e.isSuper||e.isBroadcast){var i=r.bMessageAck({channelUrl:te.channelUrl,messageId:te.messageId});t.sb.sendCommand(i)}if(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,te._sender&&e.memberMap.hasOwnProperty(te._sender.userId)){var s=e.memberMap[te._sender.userId];s.nickname!==te._sender.nickname&&(s.nickname=te._sender.nickname),s.plainProfileUrl!==te._sender.plainProfileUrl&&(s.plainProfileUrl=te._sender.plainProfileUrl),ie.deepEqual(s.metaData,te._sender.metaData)||(s.metaData=te._sender.metaData),s.isBlockedByMe!==te._sender.isBlockedByMe&&(s.isBlockedByMe=te._sender.isBlockedByMe)}var o=t.sb.currentUser;o&&se&&(o.nickname!==te._sender.nickname&&(o.nickname=te._sender.nickname),o.plainProfileUrl!==te._sender.plainProfileUrl&&(o.plainProfileUrl=te._sender.plainProfileUrl),ie.deepEqual(o.metaData,te._sender.metaData)||(o.metaData=te._sender.metaData));var c=!1;if(te.mentionType===_.MentionType.CHANNEL)se||(c=!0);else if(te.mentionType===_.MentionType.USERS)for(var u=0;u<te.mentionedUsers.length;u++)if(!se&&te.mentionedUsers[u].userId===ne){c=!0;break}re&&!se||(e.isEphemeral||oe)&&((!e.lastMessage||e.lastMessage.createdAt<te.createdAt)&&(e.lastMessage=te),se||e._setGroupChannelUnreadCount(e.unreadMessageCount+1,e.unreadMentionCount+(c?1:0))),ae&&(!e.lastMessage||e.lastMessage.createdAt<te.createdAt)&&(e.lastMessage=te),re&&!se||(G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)}),Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),Object.keys(t.sb.channelHandlers).forEach(function(n){var r=t.sb.channelHandlers[n];r.onMessageReceived(e,te),c&&r.onMentionReceived(e,te)}),B.upsert([te]).then(function(){V.send({source:de.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:te}})}).catch(function(e){t.handleCacheError(e)})}})}else te.isOpenChannel()&&c.getChannel(te.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=!1;if(te.mentionType===_.MentionType.CHANNEL)a=!0;else if(te.mentionType===_.MentionType.USERS)for(var i=0;i<te.mentionedUsers.length;i++)if(te.mentionedUsers[i].userId===ne){a=!0;break}Object.keys(t.sb.channelHandlers).forEach(function(n){var r=t.sb.channelHandlers[n];c.enteredChannels[e.url]&&r.onMessageReceived(e,te),a&&r.onMentionReceived(e,te)}),c.enteredChannels[e.url]&&V.send({source:de.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:te}})}})}break;case"MEDI":case"FEDI":case"AEDI":var le=null;if("MEDI"===M.command?le=new u(L):"FEDI"===M.command?le=new f(L):"AEDI"===M.command&&(le=new p(L)),le){var ce=this.sb.currentUser?this.sb.currentUser.userId:null,ue=le.silent,he=le.sender&&le.sender.userId===ce;if(le.isGroupChannel()){var fe=l.cachedChannels.hasOwnProperty(le.channelUrl);l.getChannel(le.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=e.cachedReadReceiptStatus[ce],i=a&&a>=le.createAt,s=t.sb.currentUser;s&&he&&(s.nickname!==le._sender.nickname&&(s.nickname=le._sender.nickname),s.plainProfileUrl!==le._sender.plainProfileUrl&&(s.plainProfileUrl=le._sender.plainProfileUrl),ie.deepEqual(s.metaData,le._sender.metaData)||(s.metaData=le._sender.metaData));var o=!1,l=!1;if(!he&&!i&&L&&L.hasOwnProperty("old_values")){var c=L.old_values.mention_type||le.mentionType,u=L.old_values.mentioned_user_ids||le.mentionedUsers.map(function(e){return e.userId});if(c===_.MentionType.USERS&&le.mentionType===_.MentionType.USERS){for(var d=!1,h=!1,f=0;f<u.length;f++)if(u[f]===ce){d=!0;break}for(var p=0;p<le.mentionedUsers.length;p++)if(le.mentionedUsers[p].userId===ce){h=!0;break}!d&&h&&(l=!0,!ue&&fe&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}else if(c===_.MentionType.USERS&&le.mentionType===_.MentionType.CHANNEL){for(var m=!1,g=0;g<u.length;g++)if(u[g]===ce){m=!0;break}m||(l=!0,!ue&&fe&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}}e.lastMessage?e.lastMessage.createdAt<le.createdAt?(e.lastMessage=le,o=!0):e.lastMessage.createdAt===le.createdAt&&e.lastMessage.messageId===le.messageId&&(fe?e.lastMessage.updatedAt<le.updatedAt&&(e.lastMessage=le,o=!0):o=!0):(e.lastMessage=le,o=!0),ue&&!he||!o||(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelChanged(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)})),Object.keys(t.sb.channelHandlers).forEach(function(n){var r=t.sb.channelHandlers[n];r.onMessageUpdated(e,le),l&&r.onMentionReceived(e,le)}),B.upsert([le]).then(function(){V.send({source:de.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:le}})}).catch(function(e){t.handleCacheError(e)})}})}else le.isOpenChannel()&&c.getChannel(le.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onMessageUpdated(e,le)}),V.send({source:de.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:le}}))})}break;case"DELM":var pe=String(L.channel_type),_e=String(L.channel_url),me=parseInt(L.msg_id);switch(pe){case o.CHANNEL_TYPE_GROUP:l.getChannel(_e,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`")):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onMessageDeleted(e,me)}),B.remove(["".concat(me)]).then(function(){V.send({source:de.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:me}})}).catch(function(e){t.handleCacheError(e)}))});break;case o.CHANNEL_TYPE_OPEN:c.getChannel(_e,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`")):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onMessageDeleted(e,me)}),V.send({source:de.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:me}}))})}break;case"READ":var ge=new g(L),ve=l.cachedChannels.hasOwnProperty(ge.channelUrl);l.getChannel(ge.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(ve&&e.updateReadReceipt(ge.reader.userId,ge.timestamp),t.sb.currentUser&&(ge.reader.userId===t.sb.currentUser.userId?ve?(e.unreadMessageCount>0||e.unreadMentionCount>0)&&(e._setGroupChannelUnreadCount(0,0),Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelChanged(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)})):0!==e.unreadMessageCount&&0!==e.unreadMentionCount||(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelChanged(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)})):Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onReadReceiptUpdated(e)}),V.send({source:de.EVENT_READ_RECEIPT_UPDATED,payload:{channel:e,user:ge.reader}})))});break;case"MRCT":var ye=String(L.channel_type),Ee=String(L.channel_url),be=m.createFromJson(L);switch(ye){case o.CHANNEL_TYPE_GROUP:l.getChannel(Ee,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`")):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onReactionUpdated(e,be)}),B.get("".concat(be.messageId)).then(function(n){n&&(n.applyReactionEvent(be),B.upsert([n]).then(function(){V.send({source:de.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:be}})}).catch(function(e){t.handleCacheError(e)}))}).catch(function(e){t.handleCacheError(e)}))});break;case o.CHANNEL_TYPE_OPEN:c.getChannel(Ee,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`")):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onReactionUpdated(e,be)}),V.send({source:de.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:be}}))})}break;case"DLVR":var Ce=String(L.channel_url),Ne=L.hasOwnProperty("updated")?L.updated:null,Se=l.cachedChannels.hasOwnProperty(Ce);l.getChannel(Ce,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=!1;Object.keys(Ne).forEach(function(n){t.sb.currentUser&&n===t.sb.currentUser.userId&&(a=!0),Se&&e.updateDeliveryReceipt(n,parseInt(Ne[n]))}),l.cachedChannels[e.url]=e,a&&1===Object.keys(Ne).length||(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onDeliveryReceiptUpdated(e)}),V.send({source:de.EVENT_DELIVERY_RECEIPT_UPDATED,payload:{channel:e}}))}});break;case"MTHD":var Ie=String(L.channel_url),ke=String(L.channel_type),Te=v.createFromJson(L);switch(ke){case o.CHANNEL_TYPE_GROUP:l.getChannel(Ie,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onThreadInfoUpdated(e,Te)}),B.get("".concat(Te.targetMessageId)).then(function(n){n&&(n.applyThreadInfoUpdateEvent(Te),B.upsert([n]).then(function(){V.send({source:de.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:Te}})}).catch(function(e){t.handleCacheError(e)}))}).catch(function(e){t.handleCacheError(e)}))});break;case o.CHANNEL_TYPE_OPEN:c.getChannel(Ie,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onThreadInfoUpdated(e,Te)}),V.send({source:de.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:Te}}))})}break;case"MCNT":if(L.hasOwnProperty("group_channels")&&Array.isArray(L.group_channels)){var we,Re=[],Me=I(L.group_channels);try{for(Me.s();!(we=Me.n()).done;){var Le=we.value;if(Le){var Pe=l.cachedChannels[Le.channel_url];Pe&&Pe.isBroadcast&&Pe.setLatestMemberCount(Le.member_count,Le.joined_member_count,Le.ts)&&Re.push(Pe)}}}catch(e){Me.e(e)}finally{Me.f()}Re.length>0&&(Object.keys(this.sb.channelHandlers).forEach(function(e){t.sb.channelHandlers[e].onChannelMemberCountChanged(Re)}),G.upsert(Re).then(function(){var e,t=I(Re);try{for(t.s();!(e=t.n()).done;){var n=e.value;V.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:n}})}}catch(e){t.e(e)}finally{t.f()}}).catch(function(e){t.handleCacheError(e)}))}if(L.hasOwnProperty("open_channels")&&Array.isArray(L.open_channels)){var De,Ue=[],xe=I(L.open_channels);try{for(xe.s();!(De=xe.n()).done;){var je=De.value;if(je){var He=c.cachedChannels[je.channel_url];He&&He.setLatestParticipantCount(je.participant_count,je.ts)&&Ue.push(He)}}}catch(e){xe.e(e)}finally{xe.f()}if(Ue.length>0){Object.keys(this.sb.channelHandlers).forEach(function(e){t.sb.channelHandlers[e].onChannelParticipantCountChanged(Ue)});var Ge,Be=I(Ue);try{for(Be.s();!(Ge=Be.n()).done;){var Ve=Ge.value;V.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:Ve}})}}catch(e){Be.e(e)}finally{Be.f()}}}break;case"PEDI":var ze=y.createFromJson(L);Object.keys(this.sb.channelHandlers).forEach(function(e){t.sb.channelHandlers[e].onPollUpdated(ze)});break;case"VOTE":var qe=E.createFromJson(L);Object.keys(this.sb.channelHandlers).forEach(function(e){t.sb.channelHandlers[e].onPollVoted(qe)});break;case"SYEV":var Ke=new Mt(L),Ye=L.ts;switch(Ke.category){case Mt.CATEGORY_CHANNEL_JOIN:case Mt.CATEGORY_CHANNEL_LEAVE:l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(M.command,"`"),Ke.category);else{var s=Ke.data.hasOwnProperty("member_count")?Ke.data.member_count:null,o=Ke.data.hasOwnProperty("joined_member_count")?Ke.data.joined_member_count:null,c=!1;if(Ke.category===Mt.CATEGORY_CHANNEL_JOIN)(Ke.data.hasOwnProperty("users")?Ke.data.users:[Ke.data]).forEach(function(n){e.isSuper||e.isBroadcast?c=e.setLatestMemberCount(s,o,L.ts):(n.state=i.JOINED,e.addMember(new i(n),Ye),e.updateJoinedMemberCount());var r=new a(n);t.sb.currentUser&&r.userId===t.sb.currentUser.userId&&(e.myMemberState="joined",l.cachedChannels[e.url]=e),Object.keys(t.sb.channelHandlers).forEach(function(n){var a=t.sb.channelHandlers[n];a.onUserJoined(e,r),e.isBroadcast&&c&&a.onChannelMemberCountChanged([e])}),G.upsert([e]).then(function(){V.send({source:de.EVENT_USER_JOINED,payload:{channel:e,user:r}})}).catch(function(e){t.handleCacheError(e)})});else{var u=new a(Ke.data);t.sb.currentUser&&u.userId===t.sb.currentUser.userId?(e.isPublic||l.removeCachedChannel(Ke.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)):l.cachedChannels[e.url]=e,e.isSuper||e.isBroadcast?c=e.setLatestMemberCount(s,o,L.ts):(e.removeMember(u),e.updateJoinedMemberCount()),Object.keys(t.sb.channelHandlers).forEach(function(n){var r=t.sb.channelHandlers[n];r.onUserLeft(e,u),e.isBroadcast&&c&&r.onChannelMemberCountChanged([e])}),G.upsert([e]).then(function(){V.send({source:de.EVENT_USER_LEFT,payload:{channel:e,user:u}})}).catch(function(e){t.handleCacheError(e)})}}});break;case Mt.CATEGORY_CHANNEL_OPERATOR_UPDATE:Ke.isGroupChannel()?l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(M.command,"`"),Ke.category);else{for(var i=Ke.data.operators.map(function(e){return new a(e)}),s=i.map(function(e){return e.userId}),o=0;o<e.members.length;o++)e.members[o].role=s.indexOf(e.members[o].userId)>=0?l.Role.OPERATOR:l.Role.NONE;e.myRole=t.sb.currentUser&&s.indexOf(t.sb.currentUser.userId)>=0?l.Role.OPERATOR:l.Role.NONE,Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onOperatorUpdated(e,i)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_OPERATOR_UPDATED,payload:{channel:e,operators:i}})}).catch(function(e){t.handleCacheError(e)})}}):Ke.isOpenChannel()&&c.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`"),Ke.category):(e.operators=Ke.data.operators.map(function(e){return new a(e)}),Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onOperatorUpdated(e,e.operators)}),V.send({source:de.EVENT_OPERATOR_UPDATED,payload:{channel:e,operators:operators}}))});break;case Mt.CATEGORY_CHANNEL_INVITE:l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(M.command,"`"),Ke.category);else{var s=null;Ke.data&&Ke.data.inviter&&Object.keys(Ke.data.inviter).length>0&&(s=new a(Ke.data.inviter));for(var o=[],c=0;c<Ke.data.invitees.length;c++){var u=new a(Ke.data.invitees[c]);o.push(u),Ke.data.invitees[c].state=i.INVITED;var d=new i(Ke.data.invitees[c]);if(e.isSuper||e.isBroadcast){var h=Ke.data.hasOwnProperty("member_count")?Ke.data.member_count:null,f=Ke.data.hasOwnProperty("joined_member_count")?Ke.data.joined_member_count:null;e.setLatestMemberCount(h,f,L.ts)}else e.addMember(d,Ye);t.sb.currentUser&&d.userId===t.sb.currentUser.userId&&(e.isHidden=!1,"joined"!==e.myMemberState&&(e.myMemberState="invited"),e.invitedAt=L.ts,l.cachedChannels[e.url]=e)}Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserReceivedInvitation(e,s,o)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_USER_RECEIVED_INVITATION,payload:{channel:e,inviter:s,invitees:o}})}).catch(function(e){t.handleCacheError(e)})}});break;case Mt.CATEGORY_CHANNEL_DECLINE_INVITE:l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(M.command,"`"),Ke.category);else{var i=null;Ke.data&&Ke.data.inviter&&Object.keys(Ke.data.inviter).length>0&&(i=new a(Ke.data.inviter));var s=new a(Ke.data.invitee);if(t.sb.currentUser&&s.userId===t.sb.currentUser.userId&&(e.invitedAt=0,e.myMemberState="none",e.isPublic||l.removeCachedChannel(Ke.channelUrl)),e.isSuper||e.isBroadcast){var o=Ke.data.hasOwnProperty("member_count")?Ke.data.member_count:null,c=Ke.data.hasOwnProperty("joined_member_count")?Ke.data.joined_member_count:null;e.setLatestMemberCount(o,c,L.ts)}else e.removeMember(s);t.sb.currentUser&&s.userId!==t.sb.currentUser.userId&&(l.cachedChannels[e.url]=e),Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserDeclinedInvitation(e,i,s)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_USER_DECLINED_INVITATION,payload:{channel:e,inviter:i,invitee:s}})}).catch(function(e){t.handleCacheError(e)})}});break;case Mt.CATEGORY_TYPING_START:case Mt.CATEGORY_TYPING_END:l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(M.command,"`"),Ke.category);else{var i=new a(Ke.data);Ke.category===Mt.CATEGORY_TYPING_START?e.updateTypingStatus(i,!0):e.updateTypingStatus(i,!1),Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onTypingStatusUpdated(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_TYPING_STATUS_UPDATED,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)})}});break;case Mt.CATEGORY_CHANNEL_ENTER:case Mt.CATEGORY_CHANNEL_EXIT:c.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(M.command,"`"),Ke.category);else{var i=Ke.data.hasOwnProperty("participant_count")?Ke.data.participant_count:null,s=e.setLatestParticipantCount(i,L.ts),o=new a(Ke.data);Ke.category===Mt.CATEGORY_CHANNEL_ENTER?(Object.keys(t.sb.channelHandlers).forEach(function(n){var r=t.sb.channelHandlers[n];r.onUserEntered(e,o),s&&r.onChannelParticipantCountChanged([e])}),V.send({source:de.EVENT_CHANNEL_ENTER,payload:{channel:e,user:o}})):(Object.keys(t.sb.channelHandlers).forEach(function(n){var r=t.sb.channelHandlers[n];r.onUserExited(e,o),s&&r.onChannelParticipantCountChanged([e])}),V.send({source:de.EVENT_CHANNEL_EXIT,payload:{channel:e,user:o}}))}});break;case Mt.CATEGORY_USER_CHANNEL_MUTE:case Mt.CATEGORY_USER_CHANNEL_UNMUTE:var We=Ke.category===Mt.CATEGORY_USER_CHANNEL_MUTE,Qe=d({},Ke.data);We&&(Qe.restriction_type=s.RestrictionType.MUTED);var Je=We?new s(Qe):new a(Ke.data),Xe=We?"muted":"unmuted";Ke.isOpenChannel()?c.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`"),Ke.category):We?(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserMuted(e,Je)}),V.send({source:de.EVENT_USER_MUTED,payload:{channel:e,user:Je}})):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserUnmuted(e,Je)}),V.send({source:de.EVENT_USER_UNMUTED,payload:{channel:e,user:Je}}))}):l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`"),Ke.category):(t.sb.currentUser&&Je.userId===t.sb.currentUser.userId&&(e.myMutedState=Xe),Array.isArray(e.members)&&e.members.filter(function(e){return e&&e.userId===Je.userId}).forEach(function(e){e.isMuted=We,e.restrictionInfo=new b(Qe)}),We?(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserMuted(e,Je)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_USER_MUTED,payload:{channel:e,user:Je}})}).catch(function(e){t.handleCacheError(e)})):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserUnmuted(e,Je)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_USER_UNMUTED,payload:{channel:e,user:Je}})}).catch(function(e){t.handleCacheError(e)})))});break;case Mt.CATEGORY_USER_CHANNEL_BAN:case Mt.CATEGORY_USER_CHANNEL_UNBAN:var $e=Ke.category===Mt.CATEGORY_USER_CHANNEL_BAN,Ze=d({},Ke.data);$e&&(Ze.restriction_type=s.RestrictionType.BANNED);var et=$e?new s(Ze):new a(Ke.data);Ke.isOpenChannel()?c.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`"),Ke.category):$e?(t.sb.currentUser&&et.userId===t.sb.currentUser.userId&&(delete c.enteredChannels[Ke.channelUrl],t.cls.FileMessageQueue.delete(Ke.channelUrl)),Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserBanned(e,et)}),V.send({source:de.EVENT_USER_BANNED,payload:{channel:e,user:et}})):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserUnbanned(e,et)}),V.send({source:de.EVENT_USER_UNBANNED,payload:{channel:e,user:et}}))}):l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(M.command,"`"),Ke.category);else if($e){if(t.sb.currentUser&&et.userId===t.sb.currentUser.userId&&(e.isPublic||l.removeCachedChannel(Ke.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)),e.isSuper||e.isBroadcast){var a=Ke.data.hasOwnProperty("member_count")?Ke.data.member_count:null,i=Ke.data.hasOwnProperty("joined_member_count")?Ke.data.joined_member_count:null;e.setLatestMemberCount(a,i,L.ts)}else e.removeMember(et),e.updateJoinedMemberCount();Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserBanned(e,et)}),V.send({source:de.EVENT_USER_BANNED,payload:{channel:e,user:et}})}else Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onUserUnbanned(e,et)}),V.send({source:de.EVENT_USER_UNBANNED,payload:{channel:e,user:et}})});break;case Mt.CATEGORY_CHANNEL_FREEZE:case Mt.CATEGORY_CHANNEL_UNFREEZE:Ke.isOpenChannel()?c.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`"),Ke.category):(e.isFrozen=Ke.data.freeze,c.cachedChannels[e.url]=e,Ke.category===Mt.CATEGORY_CHANNEL_FREEZE?(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelFrozen(e)}),V.send({source:de.EVENT_CHANNEL_FROZEN,payload:{channel:e}})):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelUnfrozen(e)}),V.send({source:de.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})))}):l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`"),Ke.category):(e.isFrozen=Ke.data.freeze,l.cachedChannels[e.url]=e,Ke.category===Mt.CATEGORY_CHANNEL_FREEZE?(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelFrozen(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_FROZEN,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)})):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelUnfrozen(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)})))});break;case Mt.CATEGORY_CHANNEL_DELETED:Ke.isGroupChannel()?l.removeCachedChannel(Ke.channelUrl):c.removeCachedChannel(Ke.channelUrl);var tt=Ke.channelUrl,nt=Ke.isGroupChannel()?"group":"open";Object.keys(this.sb.channelHandlers).forEach(function(e){t.sb.channelHandlers[e].onChannelDeleted(tt,nt)}),G.remove([tt]).then(function(){V.send({source:de.EVENT_CHANNEL_DELETED,payload:{channelUrl:tt,channelType:nt}})}).catch(function(e){t.handleCacheError(e)});break;case Mt.CATEGORY_CHANNEL_PROP_CHANGED:Ke.isOpenChannel()?c.getChannelWithoutCache(Ke.channelUrl,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`"),Ke.category):(Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelChanged(e)}),V.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}}))}):l.getChannelWithoutCache(Ke.channelUrl,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(M.command,"`"),Ke.category);else{var a=e.unreadMessageCount,i=e.unreadMentionCount;e.myCountPreference!==l.CountPreference.ALL&&(e.myCountPreference===l.CountPreference.UNREAD_MESSAGE_COUNT_ONLY?i=0:e.myCountPreference===l.CountPreference.UNREAD_MENTION_COUNT_ONLY?a=0:(a=0,i=0)),e._setGroupChannelUnreadCount(a,i),Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelChanged(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)})}});break;case Mt.CATEGORY_CHANNEL_META_DATA_CHANGED:case Mt.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var rt=Ke.data.hasOwnProperty("created"),at=Ke.data.hasOwnProperty("updated"),it=Ke.data.hasOwnProperty("deleted");(Ke.isOpenChannel()?c.getChannel(Ke.channelUrl,k.INTERNAL_CALL):l.getChannel(Ke.channelUrl,k.INTERNAL_CALL)).then(function(e){var n=Ke.data.created,r=Ke.data.updated,a=Ke.data.deleted,i=L.ts;rt&&e._addOrUpdateCachedMetaData(n,i),at&&e._addOrUpdateCachedMetaData(r,i),it&&e._markAsDeletedCachedMetaData(a,i),Object.keys(t.sb.channelHandlers).forEach(function(i){var s=t.sb.channelHandlers[i];Ke.category===Mt.CATEGORY_CHANNEL_META_DATA_CHANGED?(rt&&s.onMetaDataCreated(e,n),at&&s.onMetaDataUpdated(e,r),it&&s.onMetaDataDeleted(e,a),(rt||at)&&V.send({source:de.EVENT_CHANNEL_METADATA_UPDATED,payload:{channel:e,metaData:d(d({},n),r)}}),it&&V.send({source:de.EVENT_CHANNEL_METADATA_DELETED,payload:{channel:e,metaData:d({},a)}})):(rt&&s.onMetaCountersCreated(e,n),at&&s.onMetaCountersUpdated(e,r),it&&s.onMetaCountersDeleted(e,a),(rt||at)&&V.send({source:de.EVENT_CHANNEL_METACOUNTER_UPDATED,payload:{channel:e,metaData:d(d({},n),r)}}),it&&V.send({source:de.EVENT_CHANNEL_METACOUNTER_DELETED,payload:{channel:e,metaData:d({},a)}}))})}).catch(function(e){return X.debug("Discard command:","`".concat(M.command,"`"),Ke.category)});break;case Mt.CATEGORY_CHANNEL_HIDE:case Mt.CATEGORY_CHANNEL_UNHIDE:l.getChannel(Ke.channelUrl,k.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(M.command,"`"),Ke.category):Ke.category===Mt.CATEGORY_CHANNEL_HIDE?(e.isHidden=!0,Ke.data&&(Ke.data.hasOwnProperty("allow_auto_unhide")&&(e.hiddenState=Ke.data.allow_auto_unhide?l.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:l.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE),Ke.data.hasOwnProperty("hide_previous_messages")&&Ke.data.hide_previous_messages&&e._setGroupChannelUnreadCount(0,0)),L.hasOwnProperty("ts_message_offset")&&(e._messageOffsetTimestamp=L.ts_message_offset),l.cachedChannels[e.url]=e,Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelHidden(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_HIDDEN,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)})):(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,Object.keys(t.sb.channelHandlers).forEach(function(n){t.sb.channelHandlers[n].onChannelChanged(e)}),G.upsert([e]).then(function(){V.send({source:de.EVENT_CHANNEL_UNHIDDEN,payload:{channel:e}})}).catch(function(e){t.handleCacheError(e)}))})}break;case"USEV":var st=new Mt(L);switch(st.category){case Lt.CATEGORY_USER_BLOCK:case Lt.CATEGORY_USER_UNBLOCK:var ot=st.data.blocker.user_id,lt=st.data.blockee.user_id;Object.keys(l.cachedChannels).forEach(function(e){var n=l.cachedChannels[e];try{t.sb.currentUser&&(t.sb.currentUser.userId===ot?n.memberMap[lt].isBlockedByMe=st.category===Lt.CATEGORY_USER_BLOCK:t.sb.currentUser.userId===lt&&(n.memberMap[ot].isBlockingMe=st.category===Lt.CATEGORY_USER_BLOCK))}catch(e){}});break;case Lt.CATEGORY_FRIEND_DISCOVERED:var ct=st.data.friend_discoveries.map(function(e){return new a(e)});Object.keys(this.sb.userEventHandlers).forEach(function(e){t.sb.userEventHandlers[e].onFriendsDiscovered(ct)})}break;case"LEAV":case"JOIN":case"PONG":case"MTIO":case"TPST":case"TPEN":break;default:X.debug("Discard command:","`".concat(M.command,"`"))}}}},{key:"handleCacheError",value:function(e){X.error(e)}}]),e}(),Dt={},Ut={},xt=function(){function e(t){f(this,e),this.channel=t,this.uploadQueue=[],this.messageQueue=[],this.latestTimestampToSendMessage=0,G.get(this._iid).FileMessageQueue.queueMap[t.url]=this}return _(e,[{key:"_handleMessageQueueUpdated",value:function(e){var t=this;switch(X.debug("`fileMessageQueue` message queue updated:",this.messageQueue),e){case"add":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue();break;case"update":case"remove":if(this.messageQueue.length>0){var n=G.get(this._iid).FileMessageQueue,r=this.messageQueue[0];if(r)if(r.state===n.State.UPLOADED)if(r.state=n.State.SENDING,navigator&&"boolean"==typeof navigator.onLine)if(navigator.onLine){for(0===this.latestTimestampToSendMessage&&(this.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-this.latestTimestampToSendMessage<200;);this.latestTimestampToSendMessage=(new Date).getTime(),this._sendUploadedMessage(r,function(e,a){r.state=n.State.SENT,r.error=e||null,r.response=a||null,t._handleMessageQueueUpdated("update")})}else r.state=n.State.SENT,r.error=new j("Connection is not valid. Please reconnect.",j.WEBSOCKET_CONNECTION_CLOSED),r.response=null,this._finalizeMessage();else Je.ready().then(function(e){if(e){for(0===t.latestTimestampToSendMessage&&(t.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-t.latestTimestampToSendMessage<200;);t.latestTimestampToSendMessage=(new Date).getTime(),t._sendUploadedMessage(r,function(e,a){r.state=n.State.SENT,r.error=e||null,r.response=a||null,t._handleMessageQueueUpdated("update")})}else r.state=n.State.SENT,r.error=new j("Connection is not valid. Please reconnect.",j.WEBSOCKET_CONNECTION_CLOSED),r.response=null,t._finalizeMessage()});else r.state===n.State.SENT&&this._finalizeMessage()}}}},{key:"_handleUploadQueueUpdated",value:function(e,t){var n=this;switch(X.debug("`fileMessageQueue` upload queue updated:",this.uploadQueue),e){case"add":var r=G.get(this._iid).FileMessageQueue;if(t.state=r.State.UPLOADING,t.error){var a=this.messageQueue.map(function(e){return e.requestId}).indexOf(t.requestId);a>-1&&(t.state=r.State.SENT,this._handleMessageQueueUpdated("update")),this._finalizeUpload(t.requestId)}else navigator&&"boolean"==typeof navigator.onLine?navigator.onLine?this._uploadFile(t,function(e){t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)}):(t.state=r.State.SENT,t.error=new j("Connection is not valid. Please reconnect.",j.WEBSOCKET_CONNECTION_CLOSED),t.response=null,this._handleMessageQueueUpdated("update"),this._finalizeUpload(t.requestId)):Je.ready().then(function(e){e?n._uploadFile(t,function(e){t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)}):(t.state=r.State.SENT,t.error=new j("Connection is not valid. Please reconnect.",j.WEBSOCKET_CONNECTION_CLOSED),t.response=null,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId))});break;case"update":break;case"remove":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue()}}},{key:"_moveFirstPendingMessageToUploadQueue",value:function(){var e=G.get(this._iid).FileMessageQueue,t=this.messageQueue.filter(function(t){return t.state===e.State.PENDING});if(t.length>0){var n=t[0];this.uploadQueue.push(n),this._handleUploadQueueUpdated("add",n)}}},{key:"_sendUploadedMessage",value:function(e,t){var n=G.get(this._iid),r=n.Command,a=n.FileMessage,i=e.fileInfo,s=r.bFile(d(d({},i),{},{requestId:e.requestId,channelUrl:this.channel.url,url:i.file,metaArrays:i.metaArrays})),o=Ba.getInstance(this._iid),l=w.get(this._iid);o.getConnectionState()===o.ConnectionState.OPEN||!o.currentUser||o.connecting||o.reconnecting?o.sendCommand(s,function(e,n){if(o.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n){var l=new a(s.getJsonElement());l.requestedMentionUserIds=i.mentionedUserIds,t(n,l)}else{var c=new a(e.getJsonElement());t(null,c)}}):l.container.apiClient.sendFileMessage(d(d({reqId:e.requestId,channelUrl:this.channel.url,isOpenChannel:this.channel.isOpenChannel()},i),{},{fileUrl:i.file,fileName:i.name,fileSize:i.size,fileType:i.type,metaArrays:i.metaArrays}),function(e,n){var r=new a(e?s.getJsonElement():n);e&&(r.requestedMentionUserIds=i.mentionedUserIds),t(e,r)})}},{key:"_uploadFile",value:function(e,t){var n=e.fileInfo,r=e.pendingMessage;if("string"!=typeof n.file&&n.file){var a=G.get(this._iid).FileMessageQueue;w.get(this._iid).container.apiClient.uploadFile(d(d({},n),{},{fileType:n.type,channelUrl:this.channel.url,reqId:r?r.reqId:null}),function(r,i){if(r)e.state=a.State.SENT,e.error=r,e.response=null,t(n);else{var s="object"===h(i)?i:JSON.parse(i);n.file=s.url,n.thumbnailSizes=s.hasOwnProperty("thumbnails")?s.thumbnails:[],n.requireAuth=!!s.hasOwnProperty("require_auth")&&s.require_auth,n.size=s.hasOwnProperty("file_size")?s.file_size:n.size,t(n)}})}else n.thumbnailSizes=[],n.requireAuth=!1,t(n)}},{key:"_finalizeUpload",value:function(e){var t=this.uploadQueue.map(function(e){return e.requestId}).indexOf(e);if(t>-1){var n=this.uploadQueue.splice(t,1);n.length>0&&this._handleUploadQueueUpdated("remove",n[0])}}},{key:"_finalizeMessage",value:function(){var e=this,t=w.get(this._iid),n=t.container.localCacheEnabled,r=t.container.isErrorFirstInCallback,a=Ba.getInstance(this._iid),i=bt.of(this._iid),s=Fe.of(this._iid),o=Ae.of(this._iid),l=G.get(this._iid).FileMessageQueue,c=this.messageQueue[0],u=c.pendingMessage;if(c&&c.state===l.State.SENT){c.state=l.State.DONE;var d=c.response;d&&u&&(d._isAutoResendRegistered=u._isAutoResendRegistered);var h=c.error,f=h?new j(h.message,h.code):null,p=c.fileInfo.callback;if(d&&!h){d.reqId=u.reqId,d.requestState=a.MessageRequestState.SUCCEEDED,d.sendingStatus=a.MessageSendingStatus.SUCCEEDED;var _=a.currentUser;if(_&&d._sender&&_.userId===d._sender.userId&&(_.nickname!==d._sender.nickname&&(_.nickname=d._sender.nickname),_.plainProfileUrl!==d._sender.plainProfileUrl&&(_.plainProfileUrl=d._sender.plainProfileUrl)),this.channel.isGroupChannel())return this.channel.lastMessage=d,Object.keys(a.channelHandlers).forEach(function(t){a.channelHandlers[t].onChannelChanged(e.channel)}),void i.upsert([this.channel]).then(function(){o.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:e.channel}})}).then(function(){return s.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]})}).then(function(){return s.upsert([d],Ne.SUCCEEDED)}).then(function(){nt._completeCurrentAndProcessNextAutoResend(a,d),o.send({source:de.EVENT_MESSAGE_SENT,payload:{channel:e.channel,message:d}})}).catch(function(e){return X.error(e)}).finally(function(){p&&(r?p(null,d):p(d,null)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})}if(h){if(d&&d._isAutoResendRegistered&&ie.isAutoResendableError(h.code))return this.messageQueue.shift(),void this._handleMessageQueueUpdated("remove");if(c.pendingMessage&&(d=c.pendingMessage._clone()),d&&h.code!==j.INVALID_PARAMETER)if(d.requestState=a.MessageRequestState.FAILED,h.code===j.FILE_UPLOAD_CANCEL_FAILED||h.code===j.REQUEST_CANCELED){if(d.sendingStatus=a.MessageSendingStatus.CANCELED,this.channel.isGroupChannel())return void s.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]}).then(function(){o.send({source:de.LOCAL_MESSAGE_CANCELED,payload:{channel:e.channel,message:d}})}).catch(function(e){return X.error(e)}).finally(function(){p&&(r?p(f,d):p(d,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})}else if(d.sendingStatus=a.MessageSendingStatus.FAILED,d.errorCode=h.code,d.requestedMentionUserIds=c.fileInfo.mentionedUserIds,h.code===j.FILE_SIZE_LIMIT_EXCEEDED&&d._messageParams&&d._messageParams.file&&(d._messageParams.file=null),this.channel.isGroupChannel())return void(h.code===j.USER_NOT_MEMBER||h.code===j.CHANNEL_NOT_FOUND?i.remove([this.channel.url]).then(function(){return s.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]})}).then(function(){o.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})}).catch(function(e){return X.error(e)}).finally(function(){p&&(r?p(f,d):p(d,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}):(n&&ie.isAutoResendableError(h.code)&&(d.sendingStatus=a.MessageSendingStatus.PENDING,d.errorCode=0,d._isAutoResendRegistered=!0),s.upsert([d],Ne.UNSENT).then(function(){nt._completeCurrentAndProcessNextAutoResend(a,d),o.send({source:de.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})}).catch(function(e){return X.error(e)}).finally(function(){var t=d._clone();t.sendingStatus=a.MessageSendingStatus.FAILED,t.errorCode=h.code,t._isAutoResendRegistered=!1,p&&(r?p(f,t):p(t,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})))}p&&(r?p(f,d):p(d,f)),this.messageQueue.shift(),this._handleMessageQueueUpdated("remove")}}},{key:"addJob",value:function(e){this.messageQueue.push(e),this._handleMessageQueueUpdated("add")}},{key:"cancelUploadItemByRequestId",value:function(e,t){this._finalizeUpload(e);var n=this.messageQueue.map(function(e){return e.requestId}).indexOf(e);if(n>-1){var r=G.get(this._iid).FileMessageQueue,a=this.messageQueue[n];!a||a.state!==r.State.UPLOADING&&a.state!==r.State.PENDING||(a.state=r.State.SENT,a.response=null,a.error=new j("Uploading has been completed or canceled.",j.FILE_UPLOAD_CANCEL_FAILED),this._handleMessageQueueUpdated("update"));var i=r.uploadRequest[e];if(i)return"function"==typeof i.abort?i.abort():"function"==typeof i.cancel&&i.cancel("Upload has been canceled."),t(null,!0),!0;t(new j("Uploading has been completed or canceled.",j.FILE_UPLOAD_CANCEL_FAILED),!1)}else t(new j("Uploading has been completed or canceled.",j.FILE_UPLOAD_CANCEL_FAILED),!1);return!1}}],[{key:"State",get:function(){return{PENDING:"pending",UPLOADING:"uploading",UPLOADED:"uploaded",SENDING:"sending",SENT:"sent",DONE:"done"}}},{key:"getByChannelUrl",value:function(e){return G.get(this._iid).FileMessageQueue.queueMap[e]}},{key:"create",value:function(e){var t=G.get(this._iid).FileMessageQueue;return t.queueMap.hasOwnProperty(e.url)||(t.queueMap[e.url]=new t(e)),t.queueMap[e.url]}},{key:"delete",value:function(e){var t=G.get(this._iid).FileMessageQueue;t.queueMap.hasOwnProperty(e)&&delete t.queueMap[e]}},{key:"clear",value:function(){Ut[this._iid]={}}},{key:"queueMap",get:function(){return Ut[this._iid]||(Ut[this._iid]={}),Ut[this._iid]}},{key:"uploadRequest",get:function(){return Dt[this._iid]||(Dt[this._iid]={}),Dt[this._iid]}}]),e}();xt.Job=_(function e(t){var n=t.fileInfo,r=t.requestId,a=t.pendingMessage,i=t.state,s=t.error,o=void 0===s?null:s,l=t.response,c=void 0===l?null:l;f(this,e),this.fileInfo=n,this.requestId=r,this.pendingMessage=a,this.state=i||xt.State.PENDING,this.error=o,this.response=c});var jt=function(e,t){return(jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Ft=function(){return(Ft=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Ht(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})}function Gt(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function Bt(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||t)}var Vt,zt={},qt=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,a=e.cacheLimit,i=void 0===a?256:a,s=e.blockHashBase,o=void 0===s?2:s,l=e.blockHashMultiplier,c=void 0===l?10:l,u=e.blockHashConstant,d=void 0===u?11:u,h=e.transactionApplyDelay,f=void 0===h?200:h,p=e.disableLogger,_=void 0!==p&&p;return zt[t]||(this.itemSizeLimit=r,this.cacheLimit=i,this.blockHashBase=o,this.blockHashMultiplier=c,this.blockHashConstant=d,this.transactionApplyDelay=f,this.disableLogger=_,zt[t]=this),zt[t]}return e.get=function(e){return zt[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(Vt||(Vt={}));var Kt,Yt=function(e){function t(t){var n=t.code,r=void 0===n?Vt.UNKNOWN_ERROR:n,a=t.message,i=void 0===a?"Unknown error occurred.":a,s=e.call(this,i)||this;return s.code=r,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}jt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:Vt.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:Vt.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:Vt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:Vt.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:Vt.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:Vt.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:Vt.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:Vt.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:Vt.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:Vt.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:Vt.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:Vt.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:Vt.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:Vt.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:Vt.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:Vt.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:Vt.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:Vt.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:Vt.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:Vt.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:Vt.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:Vt.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:Vt.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(Kt||(Kt={}));var Wt,Qt=function e(t,n){if(void 0===n&&(n=new WeakMap),"object"==typeof t&&null!==t){if(n.has(t))throw Yt.circularReferenceFound;n.set(t,!0);var r=null;if(Array.isArray(t))r=t.map(function(t){return e(t,n)});else if(t instanceof RegExp)r=t;else if(t instanceof Date)r=t;else for(var a in r={},t)r[a]=e(t[a],n);return n.delete(t),r}return t},Jt=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw Yt.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},Xt=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},$t=function(e){return new Promise(function(t){setTimeout(function(){return t()},e)})},Zt=function e(t,n){if(!n)return!1;if("function"!=typeof t){for(var r in t)if(["/and","&&"].includes(r)){if(t[r].some(function(t){return!e(t,n)}))return!1}else if(["/or","||"].includes(r)){if(t[r].every(function(t){return!e(t,n)}))return!1}else if("/where"===r){if(!(0,t[r])(n))return!1}else{var a=r;if("object"==typeof t[a]){var i=t[a];for(var s in i)switch(s){case"/eq":case"=":if((o=n[a])!==(l=i[s]))return!1;break;case"/neq":case"!=":if((o=n[a])===(l=i[s]))return!1;break;case"/gt":case">":var o=n[a],l=i[s];if(!(Jt(o,l)>0))return!1;break;case"/gte":case">=":if(o=n[a],l=i[s],!(Jt(o,l)>=0))return!1;break;case"/lt":case"<":if(o=n[a],l=i[s],!(Jt(o,l)<0))return!1;break;case"/lte":case"<=":if(o=n[a],l=i[s],!(Jt(o,l)<=0))return!1;break;case"/in":if(o=n[a],!(l=i[s]).includes(o))return!1;break;case"/nin":if(o=n[a],(l=i[s]).includes(o))return!1;break;case"/contain":if(o=n[a],l=i[s],!o.includes(l))return!1;break;case"/regex":if(o=n[a],!(l=i[s]).test(o))return!1;break;case"/where":if(o=n[a],!(0,i[s])(o))return!1}}else if("function"==typeof t[a]){if(!t[a](n[a]))return!1}else if(t[a]!==n[a])return!1}return!0}return t(n)},en=function(){},tn=function(){return Promise.resolve()},nn=function(e){return e},rn=function(e,t){t(null)};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(Wt||(Wt={}));var an,sn,on,ln=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,a=void 0===r?null:r,i=e.iterator,s=e.map,o=void 0===s?nn:s,l=e.backward,c=void 0===l?tn:l,u=e.forward,d=void 0===u?tn:u,h=e.complete,f=void 0===h?en:h;this._prevValue=n,this._nextValue=a,this._error=null,this._map=o,this._backward=c,this._forward=d,this._iterator=i,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return Ht(this,void 0,void 0,function(){var e,t,n;return Gt(this,function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}})})},e.prototype.next=function(){return Ht(this,void 0,void 0,function(){var e,t,n;return Gt(this,function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}})})},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),cn=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,a=void 0!==r&&r,i=e.blockManager,s=e.indexer;this.condition=n,this.backward=a,this._blockManager=i,this._indexer=s}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var a in this._indexer.fields){var i=this._indexer.fields[a],s=1;if("-"===i[0]&&(i=i.slice(1),s=-1),this.condition[i])if("object"==typeof this.condition[i]){var o=s>0?n:t;for(var l in this.condition[i])if(o.includes(l))for(var c=r;c>=0;c--)if(s*Jt(this._indexer.origin[c].columnValues[a],this.condition[i][l])<=0){r=c;break}}else for(c=r;c>=0;c--)if(s*Jt(this._indexer.origin[c].columnValues[a],this.condition[i])<=0){r=c;break}}return Math.min(r+1,this._indexer.origin.length-1)}var u=0;if("function"!=typeof this.condition)for(var d=function(r){var a=h._indexer.fields[r],i=1;if("-"===a[0]&&(a=a.slice(1),i=-1),h.condition[a])if("object"==typeof h.condition[a])Object.keys(h.condition[a]).forEach(function(s){if((i>0?t:n).includes(s))for(var o=u;o<e._indexer.origin.length;o++)if(i*Jt(e._indexer.origin[o].columnValues[r],e.condition[a][s])>=0){u=o;break}});else for(var s=u;s<h._indexer.origin.length;s++)if(i*Jt(h._indexer.origin[s].columnValues[r],h.condition[a])>=0){u=s;break}},h=this,a=0;a<this._indexer.fields.length;a++)d(a);return Math.max(u-1,0)},e.prototype.each=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i,s,o,l=this;return Gt(this,function(c){switch(c.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[++n]){if(!l._indexer.origin[++t])return!1;n=0}return!0}return!1},a=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[--n]){if(!l._indexer.origin[--t])return!1;n=l._indexer.origin[t].keys.length-1}return!0}return!1},i=null,!this._indexer.origin[t])return[3,4];s=this.backward?a:r,c.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if(o=c.sent(),Zt(this.condition,o))return i=o,[3,4];c.label=3;case 3:if(s())return[3,1];c.label=4;case 4:return[4,new Promise(function(s){var o=new ln({initialNextValue:Qt(i),iterator:e,forward:function(){return Ht(l,void 0,void 0,function(){var e,i;return Gt(this,function(s){switch(s.label){case 0:e=this.backward?a:r,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return i=s.sent(),Zt(this.condition,i)?[2,Qt(i)]:[3,1];case 3:return[2,null]}})})},backward:function(){return Ht(l,void 0,void 0,function(){var e,i;return Gt(this,function(s){switch(s.label){case 0:e=this.backward?r:a,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return i=s.sent(),Zt(this.condition,i)?[2,Qt(i)]:[3,1];case 3:return[2,null]}})})},complete:s});e(o)})];case 5:return[2,c.sent()]}})})},e}(),un=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,a=void 0!==r&&r,i=e.mutex,s=e.blockManager,o=e.indexer;this._mutex=i,this._iterator=new cn({condition:n,backward:a,blockManager:s,indexer:o})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),Ht(this,void 0,void 0,function(){var t,n,r,a,i=this;return Gt(this,function(s){switch(s.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw Yt.collectionQueryNotValid;s.label=1;case 1:return s.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return s.sent(),[4,this._iterator.each(function(e){return Ht(i,void 0,void 0,function(){return Gt(this,function(a){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]})})})];case 3:return s.sent(),this._mutex.unlock(),[2,r];case 4:throw a=s.sent(),this._mutex.unlock(),a;case 5:return[2]}})})},e.prototype.count=function(){return Ht(this,void 0,void 0,function(){var e,t,n=this;return Gt(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each(function(t){return Ht(n,void 0,void 0,function(){return Gt(this,function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]})})})];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}})})},e}(),dn=function(e){return"".concat("nest","@").concat(e)},hn=function(e,t){return"".concat(dn(e),"/").concat(t)},fn=function(e,t){return"".concat(hn(e,t),".metadata")},pn=function(e,t){return"".concat(hn(e,t),"/block.")},_n=function(e,t){return"".concat(hn(e,t),"/blob.")},mn=function(e,t,n,r){return void 0===r&&(r=0),"".concat(_n(e,t)).concat(n,".").concat(r)},gn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this._store=r}return e.prototype._makeShards=function(e,t){var n=Math.max(this._store.itemSizeLimit-1024,0);if(n>0){for(var r=Math.ceil(e.data.length/n),a="".concat(r,".").concat(e.type,".").concat(t),i=[],s=0;s<e.data.length;s+=n){var o=e.data.slice(s,s+n);i.push(o)}return{blobId:a,shards:i}}return{blobId:null,shards:null}},e.prototype._encode=function(e){return Ht(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){var n=new FileReader;n.onload=function(){t({data:n.result,type:e.type})},n.readAsDataURL(e)})];case 1:return[2,t.sent()]}})})},e.prototype._decode=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i,s;return Gt(this,function(o){switch(o.label){case 0:return"undefined"==typeof fetch?[3,3]:[4,fetch(e.data)];case 1:return[4,o.sent().blob()];case 2:return[2,o.sent()];case 3:for(t=[],n=atob(e.data.split(",")[1]),r=0;r<n.length;r+=512){for(a=n.slice(r,r+512),i=new Array(a.length),s=0;s<a.length;s++)i[s]=a.charCodeAt(s);t.push(new Uint8Array(i))}return[2,new Blob(t,{type:e.type})]}})})},e.prototype.get=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i,s,o,l;return Gt(this,function(c){switch(c.label){case 0:if(t=[],n=e.split("."),r=n[0],a=n[1],!((i=parseInt(r))>0))return[3,6];s=0,c.label=1;case 1:return s<i?(o=mn(this.dbname,this.collectionName,e,s),[4,this._store.get(o)]):[3,4];case 2:if(!(l=c.sent())||!l.d)throw Yt.storeBrokenBlob;t.push(l.d),c.label=3;case 3:return s++,[3,1];case 4:return[4,this._decode({data:t.join(""),type:a})];case 5:return[2,c.sent()];case 6:return[2,null]}})})},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),Ht(this,void 0,void 0,function(){var n,r,a,i,s,o,l;return Gt(this,function(c){switch(c.label){case 0:return n=[],[4,this._encode(e)];case 1:if(r=c.sent(),a=this._makeShards(r,t),i=a.blobId,s=a.shards,!i)return[3,3];for(o=0;o<s.length;o++)l=mn(this.dbname,this.collectionName,i,o),n.push({key:l,value:{d:s[o]},generation:1});return[4,this._store.setMany(n)];case 2:if(c.sent().some(function(e){return e instanceof Error}))throw Yt.storeWriteFailed;return[2,i];case 3:return[2,null]}})})},e.prototype.remove=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a;return Gt(this,function(i){switch(i.label){case 0:if(t=[],n=e.split(".")[0],!((r=parseInt(n))>0))return[3,2];for(a=0;a<r;a++)t.push(mn(this.dbname,this.collectionName,e,a));return[4,this._store.removeMany(t)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.clear=function(){return Ht(this,void 0,void 0,function(){var e,t,n,r,a,i;return Gt(this,function(s){switch(s.label){case 0:return e=_n(this.dbname,this.collectionName),t=[],[4,this._store.getAllKeys()];case 1:for(n=s.sent(),r=0,a=n;r<a.length;r++)(i=a[r]).startsWith(e)&&t.push(i);return[4,this._store.removeMany(n)];case 2:return s.sent(),[2]}})})},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(an||(an={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(sn||(sn={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(on||(on={}));var vn=[sn.PENDING,sn.VOLATILE],yn={},En=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return yn[t]||(this.dbname=t,this._items=[],this._limit=r,yn[t]=this),yn[t]}return e.get=function(e){return yn[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=on.DEFAULT),Ht(this,void 0,void 0,function(){var r,a;return Gt(this,function(i){switch(i.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(a=i.sent())&&(r={key:t,value:a,generation:1,state:n===on.PERSISTENT?sn.PERSISTENT:sn.VOLATILE},this.put(r)),[3,3];case 2:n===on.PERSISTENT&&(r.state=sn.PERSISTENT),i.label=3;case 3:return[2,r]}})})},e.prototype.get=function(e,t){void 0===t&&(t=on.DEFAULT);var n=this._items.map(function(e){return e.key}).indexOf(e);if(n>-1){var r=this._items[n];return t===on.PERSISTENT&&(r.state=sn.PERSISTENT),t!==on.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){if(this._limit>0){var t=this._items.map(function(e){return e.key}).indexOf(e.key);if(t>-1)vn.includes(this._items[t].state)&&vn.includes(e.state)?(this._items.splice(t,1),this._items.push(e)):(this._items[t].state=e.state,this._items[t].generation=e.generation,this._items[t].value=e.value);else{this._items.push(e);var n=this._items.filter(function(e){return e.state===sn.VOLATILE}),r=n.length-this._limit;if(r>0){for(var a=[],i=0,s=this._items;i<s.length;i++){var o=s[i];o.state===sn.VOLATILE&&r>0?r--:a.push(o)}this._items=a}}}},e.prototype.remove=function(e){var t=this._items.map(function(e){return e.key}).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter(function(t){return!e(t)})},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter(function(e){return e.state!==sn.VOLATILE})},e}(),bn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._metadata=null,this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return"".concat(hn(e,t),"/trans.metadata")}(t,n),this.recordsetKey=function(e,t){return"".concat(hn(e,t),"/trans.recordset")}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),Ht(this,void 0,void 0,function(){var t;return Gt(this,function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,e),[2,this._reduceRecordSet(t)]}})})},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var a=e[r],i=[],s=a.requests.length-1;s>=0;s--){var o=a.requests[s],l=o.data;n[l.key]||(i.unshift(o),n[l.key]=!0)}i.length>0&&(a.requests=i,t.unshift(a))}return t},e.prototype._applyRecord=function(e,t){return Ht(this,void 0,void 0,function(){var n,r,a,i,s,o,l,c,u;return Gt(this,function(d){switch(d.label){case 0:n=En.get(this.dbname),r=t.generation,a=t.requests,i=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._store.setMany(a.map(function(e){return Ft(Ft({},e.data),{generation:r})}))];case 2:for(s=d.sent(),o=0;o<a.length;o++)s[o]instanceof Error&&(i||(i=s[o]),l=a[o].data,n.put(Ft(Ft({},l),{generation:r,state:sn.PERSISTENT})));return[3,4];case 3:return c=d.sent(),i=c,[3,4];case 4:return i?[3,6]:(u=e.filter(function(e){return e.generation!==r}),[4,this._store.set({key:this.recordsetKey,value:u,generation:r})]);case 5:return d.sent(),this._onWrite.forEach(function(e){e(a.map(function(e){return e.data}))}),[3,7];case 6:this._onError.forEach(function(e){return e(i)}),d.label=7;case 7:return[2]}})})},e.prototype.init=function(){return Ht(this,void 0,void 0,function(){var e,t,n,r,a;return Gt(this,function(i){switch(i.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=i.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=i.sent(),n=0,r=t,i.label=3;case 3:return n<r.length?(a=r[n],[4,this._applyRecord(t,a)]):[3,6];case 4:i.sent(),i.label=5;case 5:return n++,[3,3];case 6:return[2]}})})},e.prototype.on=function(e,t,n){switch(e){case an.COMMIT:this._onCommit.set(t,n);break;case an.WRITE:this._onWrite.set(t,n);break;case an.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){void 0===t&&(t=null),this._requests.push({data:e,options:t}),En.get(this.dbname).put(Ft({state:sn.PENDING,generation:this.generation},e))},e.prototype.requestMultipleWrite=function(e,t){void 0===t&&(t=null);for(var n=En.get(this.dbname),r=0,a=e;r<a.length;r++){var i=a[r];this._requests.push({data:i,options:t}),n.put(Ft({state:sn.PENDING,generation:this.generation},i))}},e.prototype.clear=function(){return Ht(this,void 0,void 0,function(){return Gt(this,function(e){return En.get(this.dbname).clearByCondition(function(e){return e.state===sn.PENDING}),this._requests=[],[2]})})},e.prototype.commit=function(){return Ht(this,void 0,void 0,function(){var e,t,n,r,a,i,s,o,l,c,u,d,h=this;return Gt(this,function(f){switch(f.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},o=e.length-1;o>=0;o--)r=e[o],c=r.data,n[c.key]||(n[c.key]=!0,t.unshift(r));return a={generation:this.generation,requests:t},[4,this._getReducedRecordset([a])];case 1:return i=f.sent(),[4,this._store.set({key:this.recordsetKey,value:i,generation:this.generation})];case 2:return f.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata,generation:1})];case 3:for(f.sent(),s=En.get(this.dbname),o=0;o<t.length;o++)l=t[o],c=l.data,u=l.options,s.put(Ft(Ft({},c),{generation:a.generation,state:u&&u.persistent?sn.PERSISTENT:sn.VOLATILE}));this._requests=[],this._onCommit.forEach(function(t){t(e.map(function(e){return e.data}))}),d=qt.get(this.dbname),setTimeout(function(){try{h._applyRecord(i,a)}catch(e){h._onError.forEach(function(n){return n(e)})}},d.transactionApplyDelay),f.label=4;case 4:return[2]}})})},e}(),Cn=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,a=void 0===r?[]:r,i=e.limit;this.blockId=t,this.keyName=n,this.limit=i,this._items=Bt([],a,!0)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this;return this._items.find(function(n){var r=n[t.keyName];return e===r})},e.prototype.has=function(e){var t=this;return this._items.map(function(e){return e[t.keyName]}).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map(function(e){return e[t.keyName]}).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),On=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,a=e.hashFunction,i=void 0===a?Xt:a,s=e.transaction,o=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=i,this.metadata=r,this._transaction=s,this._store=o}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,a=t,i="".concat(function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||Xt)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(pn(n,r)).concat(a,".").concat(i);var n,r,a,i},e.prototype._findBlock=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i;return Gt(this,function(s){switch(s.label){case 0:t=En.get(this.dbname),n=this.metadata.blockLevel,s.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((a=s.sent())&&(i=Cn.createFromCacheItem(a)).getItemByKey(e))return[2,i];s.label=3;case 3:return n--,[3,1];case 4:return[2,null]}})})},e.prototype.getFromBlock=function(e){return Ht(this,void 0,void 0,function(){var t;return Gt(this,function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}})})},e.prototype.putToBlock=function(e,t){return Ht(this,void 0,void 0,function(){var n,r,a,i,s;return Gt(this,function(o){switch(o.label){case 0:return n=qt.get(this.dbname),r=this.createBlockId(e),a=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,En.get(this.dbname).find(this._store,r)];case 1:return i=o.sent(),(s=i?Cn.createFromCacheItem(i):new Cn({blockId:r,keyName:this.keyName,items:[],limit:a})).add(t)?(this._transaction.requestWrite({key:s.blockId,value:s.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.removeFromBlock=function(e){return Ht(this,void 0,void 0,function(){var t;return Gt(this,function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.clearAllBlocks=function(){return Ht(this,void 0,void 0,function(){var e,t,n,r,a,i,s;return Gt(this,function(o){switch(o.label){case 0:return e=pn(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=o.sent(),n=t.filter(function(t){return t.startsWith(e)}),[4,this._store.removeMany(n)];case 2:for(o.sent(),r=En.get(this.dbname),a=0,i=n;a<i.length;a++)s=i[a],r.remove(s);return[2]}})})},e}(),Nn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,a=e.fields,i=e.transaction,s=e.store,o=this;this._origin=[],this._table=[],this.dbname=t,this.collectionName=n,this.keyName=r,this.fields=a,this.indexerKey=function(e,t,n){return"".concat(hn(e,t),"/index.").concat(n)}(this.dbname,this.collectionName,this.fields.join(">")),this._transaction=i,this._store=s,this._transaction.on(an.COMMIT,this.indexerKey,function(){return o.commit()}),this._transaction.on(an.ERROR,this.indexerKey,function(){return o.abort()})}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=this.indexOf(n),a=r[0];return r[1]?!this._table[a].keys.includes(t)&&(this._table[a].keys.push(t),!0):(this._table.splice(a,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=this.indexOf(n),a=r[0];if(r[1]){var i=this._table[a].keys.indexOf(t);if(i>-1)return this._table[a].keys.splice(i,1),0===this._table[a].keys.length&&this._table.splice(a,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){for(var t,n,r=[],a=0,i=this.fields;a<i.length;a++){var s=i[a];if("-"===s[0]&&(s=s.slice(1)),t=e[s],n=void 0,n=typeof t,null!==t&&"undefined"!==n&&"boolean"!==n&&"number"!==n&&"string"!==n)throw Yt.indexTypesNotMatch;r.push(e[s])}return r},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,a=Jt(e[n],t[n]);if(0!==a)return r*a}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),a=this.diff(e,this._table[r].columnValues);if(a>0)t=r+1;else{if(!(a<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return Ht(this,void 0,void 0,function(){var e,t,n,r,a,i,s,o,l,c,u,d;return Gt(this,function(h){switch(h.label){case 0:return[4,(e=En.get(this.dbname)).find(this._store,this.indexerKey,on.PERSISTENT)];case 1:return(t=h.sent())?[3,7]:(n=pn(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=h.sent(),a=0,i=r,h.label=3;case 3:return a<i.length?(s=i[a]).startsWith(n)?[4,e.find(this._store,s,on.NO_CACHE)]:[3,5]:[3,6];case 4:for(o=h.sent(),l=Cn.createFromCacheItem(o),c=0,u=l.items;c<u.length;c++)d=u[c],this._addItem(d);h.label=5;case 5:return a++,[3,3];case 6:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,8];case 7:this._origin=t.value,this._table=Qt(this._origin),h.label=8;case 8:return[2]}})})},e.prototype.drop=function(){return Ht(this,void 0,void 0,function(){return Gt(this,function(e){switch(e.label){case 0:return En.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),[2]}})})},e.prototype.addItem=function(e){return Ht(this,void 0,void 0,function(){return Gt(this,function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.removeItem=function(e){return Ht(this,void 0,void 0,function(){return Gt(this,function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.clear=function(){return Ht(this,void 0,void 0,function(){return Gt(this,function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.commit=function(){this._origin=this._table,this._table=Qt(this._origin)},e.prototype.abort=function(){this._table=Qt(this._origin)},e}(),Sn="undefined"!=typeof document&&"undefined"!=typeof navigator;Sn&&navigator.userAgent&&navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/");var An=Sn&&navigator.userAgent&&navigator.userAgent.includes("Firefox/")&&!navigator.userAgent.includes("Seamonkey/");Sn&&navigator.userAgent&&navigator.userAgent.includes("Safari/")&&!navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/"),Sn&&navigator.userAgent&&(navigator.userAgent.includes("OPR/")||navigator.userAgent.includes("Opera/")),Sn&&navigator.userAgent&&navigator.userAgent.includes("Trident/7.0");var In,kn,Tn=Sn&&navigator.userAgent&&navigator.userAgent.includes("Edge/"),wn=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(In||(In={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(kn||(kn={}));var Rn,Mn={},Ln=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=In.PROCESSING,this._hostId=null,this._queue=[],this._currentItem=null,this._activationTimeout=null,this._activationQueue=[],Mn[e]&&!t.forceCreate||(this.nodeId=wn(),this.key=e,Sn&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&n.claimHost()}),window.addEventListener("message",function(e){var t=e.data,r=t.nodeId,a=t.requestId,i=t.key,s=t.op,o=t.data;if(r!==n.nodeId&&i===n.key)switch(s){case kn.NEWNODE:n._sendSync();break;case kn.CLAIM_HOST:n._sendSync(),n._hostId=r;break;case kn.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);for(var l=o,c=l.currentItemRequestId,u=function(e){var t=n._queue.findIndex(function(t){return t.requestId===e.requestId});t<0&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:kn.REQUEST_LOCK,ts:e.ts})},d=0,h=l.queue;d<h.length;d++)u(h[d]);n._currentItem=n._queue.find(function(e){return e.requestId===c}),n._completeSync()}break;case kn.REMOVENODE:n._queue=n._queue.filter(function(e){return e.nodeId!==t.nodeId}),n._currentItem&&n._currentItem.nodeId===t.nodeId&&(n._currentItem=null,n._acquire(n._queue[0]));break;case kn.REQUEST_LOCK:n._requestLock(t);break;case kn.ACQUIRE_LOCK:var f=n._queue.find(function(e){return e.requestId===a});n._acquire(f);break;case kn.RELEASE_LOCK:n._release(a)}}),window.addEventListener("beforeunload",function(){n._send(kn.REMOVENODE)})),Mn[e]=this),Mn[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==In.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){var n,r;if(void 0===t&&(t={}),Sn){var a={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:wn(),key:this.key,op:e,data:null!==(r=t.data)&&void 0!==r?r:null,ts:Date.now()};return window.postMessage(a,"*"),a}return null},e.prototype._acquire=function(e){void 0===e&&(e=null),e?(this._currentItem=e,this._currentItem.onAcquired(e.requestId)):this._currentItem=null},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=null,t.nodeId===this.nodeId&&this._send(kn.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex(function(t){return t.requestId===e});n>-1&&this._queue.splice(n,1),t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise(function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(kn.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},a=!1;for(var i in t._queue)if(t._queue[i].ts>r.ts){t._queue.splice(parseInt(i),0,r),a=!0;break}a||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])})},e.prototype._sendSync=function(){var e;this.isHost&&this._send(kn.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map(function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}})}})},e.prototype._waitUntilSyncCompleted=function(){return Ht(this,void 0,void 0,function(){var e=this;return Gt(this,function(t){return this.isHost&&!this.isInSync?[2,new Promise(function(t){e._activationQueue.push(t)})]:[2]})})},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout(function(){e._completeSync()},8))},e.prototype._completeSync=function(){this.isInSync||(this._state=In.DONE,this._activationQueue.forEach(function(e){return e()}),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(kn.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(kn.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return Ht(this,void 0,void 0,function(){var e;return Gt(this,function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(kn.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}})})},e.prototype.unlock=function(){var e;this._release(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)},e}(),Pn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,a=e.keyHash,i=e.indexes,s=e.store,o=this;this._state=Kt.INIT,this._metadata=null,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=Bt([[r]],i.filter(function(e){return Nn.createKey(e)!==o.keyName}),!0),this._keyHash=a,this._store=s,this._mutex=new Ln(function(e,t){return"".concat(hn(e,t),".lock")}(t,n)),this._blobContainer=new gn({dbname:t,collectionName:n,store:s}),this._transaction=new bn({dbname:t,collectionName:n,store:s})}return e.metadataOf=function(e,t,n){return Ht(this,void 0,void 0,function(){var r;return Gt(this,function(a){switch(a.label){case 0:return r=fn(e,t),[4,n.get(r)];case 1:return[2,a.sent()]}})})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.init=function(){return Ht(this,void 0,void 0,function(){var t,n,r,a,i,s,o,l,c,u,d,h,f=this;return Gt(this,function(p){switch(p.label){case 0:return[4,this._mutex.lock()];case 1:p.sent(),p.label=2;case 2:return p.trys.push([2,9,,10]),t=qt.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=p.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:for(p.sent(),this._blockManager=new On({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=Bt([],this.indexes,!0),a=[],i=r.map(function(e){return Nn.createKey(e)}),s=n?n.indexes.map(function(e){return Nn.createKey(e)}):[],o=0,l=s;o<l.length;o++)c=l[o],i.includes(c)||a.push(Nn.parseKey(c));return(u=[]).push.apply(u,r.map(function(e){var t=new Nn({dbname:f.dbname,collectionName:f.name,keyName:f.keyName,fields:e,transaction:f._transaction,store:f._store});return f._indexers.push(t),t.ensure()})),u.push.apply(u,a.map(function(e){return new Nn({dbname:f.dbname,collectionName:f.name,keyName:f.keyName,fields:e,transaction:f._transaction,store:f._store}).drop()})),[4,Promise.all(u)];case 5:return p.sent(),[4,this._transaction.commit()];case 6:return p.sent(),i.sort().join(",")===s.sort().join(",")?[3,8]:(d=fn(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata,generation:1})]);case 7:p.sent(),p.label=8;case 8:return this._state=Kt.READY,this._mutex.unlock(),[3,10];case 9:throw h=p.sent(),this._mutex.unlock(),h;case 10:return[2]}})})},e.prototype.close=function(){this._state=Kt.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){void 0===e&&(e=null),e||(e=[this.keyName]);for(var t=Nn.createKey(e),n=0,r=this._indexers;n<r.length;n++){var a=r[n];if(t===Nn.createKey(a.fields))return a}return null},e.prototype._upgradeBlockLevel=function(){return Ht(this,void 0,void 0,function(){var e;return Gt(this,function(t){switch(t.label){case 0:return e=fn(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata,generation:1})];case 1:return t.sent(),[2]}})})},e.prototype._requestInsert=function(e){return Ht(this,void 0,void 0,function(){var t,n,r;return Gt(this,function(a){switch(a.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return a.sent()?[3,10]:[4,this._blockManager.putToBlock(t,e)];case 2:return a.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return a.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:a.sent(),a.label=5;case 5:n=0,r=this._indexers,a.label=6;case 6:return n<r.length?[4,r[n].addItem(e)]:[3,9];case 7:a.sent(),a.label=8;case 8:return n++,[3,6];case 9:return[3,11];case 10:throw Yt.collectionInsertDuplicate;case 11:return[2]}})})},e.prototype._requestUpsert=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i,s,o;return Gt(this,function(l){switch(l.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=l.sent())?[3,10]:[4,this._blockManager.putToBlock(t,e)];case 2:return l.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return l.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:l.sent(),l.label=5;case 5:r=0,a=this._indexers,l.label=6;case 6:return r<a.length?[4,(o=a[r]).addItem(e)]:[3,9];case 7:l.sent(),l.label=8;case 8:return r++,[3,6];case 9:return[3,16];case 10:return[4,this._blockManager.putToBlock(t,e)];case 11:l.sent(),i=0,s=this._indexers,l.label=12;case 12:return i<s.length?0===(o=s[i]).diff(o.getColumnValues(n),o.getColumnValues(e))?[3,15]:[4,o.removeItem(n)]:[3,16];case 13:return l.sent(),[4,o.addItem(e)];case 14:l.sent(),l.label=15;case 15:return i++,[3,12];case 16:return[2]}})})},e.prototype._requestUpdate=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i;return Gt(this,function(s){switch(s.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=s.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,7];case 2:s.sent(),r=0,a=this._indexers,s.label=3;case 3:return r<a.length?0===(i=a[r]).diff(i.getColumnValues(n),i.getColumnValues(e))?[3,6]:[4,i.removeItem(n)]:[3,7];case 4:return s.sent(),[4,i.addItem(e)];case 5:s.sent(),s.label=6;case 6:return r++,[3,3];case 7:return[2]}})})},e.prototype._requestRemove=function(e){return Ht(this,void 0,void 0,function(){var t,n,r;return Gt(this,function(a){switch(a.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=a.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,6];case 2:a.sent(),n=0,r=this._indexers,a.label=3;case 3:return n<r.length?[4,r[n].removeItem(t)]:[3,6];case 4:a.sent(),a.label=5;case 5:return n++,[3,3];case 6:return[2]}})})},e.prototype._requestClear=function(){return Ht(this,void 0,void 0,function(){var e,t;return Gt(this,function(n){switch(n.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:n.sent(),e=0,t=this._indexers,n.label=2;case 2:return e<t.length?[4,t[e].clear()]:[3,5];case 3:n.sent(),n.label=4;case 4:return e++,[3,2];case 5:return[2]}})})},e.prototype.getByKey=function(e){return Ht(this,void 0,void 0,function(){var t,n;return Gt(this,function(r){switch(r.label){case 0:return this._state!==Kt.READY?[3,6]:[4,this._mutex.lock()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,Qt(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw Yt.collectionNotReady;case 7:return[2]}})})},e.prototype.query=function(e){return void 0===e&&(e={}),this._state===Kt.READY?new un({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward}):null},e.prototype.insertOne=function(e){return Ht(this,void 0,void 0,function(){var t;return Gt(this,function(n){switch(n.label){case 0:return this._state!==Kt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Yt.collectionKeyNotGiven;return[4,this._requestInsert(Qt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}})})},e.prototype.insertMany=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i=this;return Gt(this,function(s){switch(s.label){case 0:return this._state!==Kt.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:if(s.trys.push([2,8,,10]),e.some(function(e){return!i._hasPropertyOfKeyName(e)}))throw Yt.collectionKeyNotGiven;t=0,n=e,s.label=3;case 3:return t<n.length?(r=n[t],[4,this._requestInsert(Qt(r))]):[3,6];case 4:s.sent(),s.label=5;case 5:return t++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return s.sent(),this._mutex.unlock(),[2,e];case 8:return a=s.sent(),[4,this._transaction.clear()];case 9:throw s.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw Yt.collectionNotReady;case 12:return[2]}})})},e.prototype.upsertOne=function(e){return Ht(this,void 0,void 0,function(){var t;return Gt(this,function(n){switch(n.label){case 0:return this._state!==Kt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Yt.collectionKeyNotGiven;return[4,this._requestUpsert(Qt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}})})},e.prototype.upsertMany=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i=this;return Gt(this,function(s){switch(s.label){case 0:return this._state!==Kt.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:if(s.trys.push([2,8,,10]),e.some(function(e){return!i._hasPropertyOfKeyName(e)}))throw Yt.collectionKeyNotGiven;t=0,n=e,s.label=3;case 3:return t<n.length?(r=n[t],[4,this._requestUpsert(Qt(r))]):[3,6];case 4:s.sent(),s.label=5;case 5:return t++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return s.sent(),this._mutex.unlock(),[2,e];case 8:return a=s.sent(),[4,this._transaction.clear()];case 9:throw s.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw Yt.collectionNotReady;case 12:return[2]}})})},e.prototype.update=function(e){return Ht(this,void 0,void 0,function(){var t;return Gt(this,function(n){switch(n.label){case 0:return this._state!==Kt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Yt.collectionKeyNotGiven;return[4,this._requestUpdate(Qt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}})})},e.prototype.updateIf=function(e,t){return Ht(this,void 0,void 0,function(){var n,r,a,i,s,o=this;return Gt(this,function(l){switch(l.label){case 0:return this._state!==Kt.READY?[3,12]:[4,this._mutex.lock()];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,9,,11]),n=[],[4,new cn({condition:e,blockManager:this._blockManager,indexer:this._getIndexerBy(null)}).each(function(r){return Ht(o,void 0,void 0,function(){var a,i;return Gt(this,function(s){if(r.error)throw r.stop(),r.error;if(r.hasNext){if(a=r.nextValue,Zt(e,a)&&t.set){if("function"!=typeof t.set)for(i in t.set)a[i]=t.set[i];else t.set(a);n.push(a)}r.next()}else r.stop();return[2]})})})];case 3:l.sent(),r=0,a=n,l.label=4;case 4:return r<a.length?(i=a[r],[4,this._requestUpdate(Qt(i))]):[3,7];case 5:l.sent(),l.label=6;case 6:return r++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return l.sent(),this._mutex.unlock(),[2,n];case 9:return s=l.sent(),[4,this._transaction.clear()];case 10:throw l.sent(),this._mutex.unlock(),s;case 11:return[3,13];case 12:throw this._transaction.clear(),Yt.collectionNotReady;case 13:return[2]}})})},e.prototype.remove=function(e){return Ht(this,void 0,void 0,function(){var t;return Gt(this,function(n){switch(n.label){case 0:return this._state!==Kt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}})})},e.prototype.removeIf=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i,s=this;return Gt(this,function(o){switch(o.label){case 0:return this._state!==Kt.READY?[3,11]:[4,this._mutex.lock()];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,9,,10]),t=[],[4,new cn({condition:e,blockManager:this._blockManager,indexer:this._getIndexerBy(null)}).each(function(n){return Ht(s,void 0,void 0,function(){var r,a;return Gt(this,function(i){if(n.error)throw n.stop(),n.error;return n.hasNext?(r=n.nextValue,Zt(e,r)&&(a=r[this.keyName],t.push(a)),n.next()):n.stop(),[2]})})})];case 3:o.sent(),n=0,r=t,o.label=4;case 4:return n<r.length?(a=r[n],[4,this._requestRemove(a)]):[3,7];case 5:o.sent(),o.label=6;case 6:return n++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return o.sent(),this._mutex.unlock(),[2,t];case 9:throw i=o.sent(),this._mutex.unlock(),i;case 10:return[3,12];case 11:throw this._transaction.clear(),Yt.collectionNotReady;case 12:return[2]}})})},e.prototype.clear=function(){return Ht(this,void 0,void 0,function(){var e;return Gt(this,function(t){switch(t.label){case 0:return this._state!==Kt.READY?[3,8]:[4,this._mutex.lock()];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}})})},e.prototype.getBlob=function(e){return Ht(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}})})},e.prototype.saveBlob=function(e,t){return void 0===t&&(t=null),Ht(this,void 0,void 0,function(){return Gt(this,function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.removeBlob=function(e){return Ht(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}})})},e.prototype.removeAllBlobs=function(){return Ht(this,void 0,void 0,function(){return Gt(this,function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}})})},e}(),Dn={encrypt:function(e){return e},decrypt:function(e){return e}},Un={},xn=function(){function e(e){void 0===e&&(e={});var t=e.itemSizeLimit,n=void 0===t?4194304:t,r=e.delay,a=void 0===r?1:r,i=e.encryption,s=void 0===i?Dn:i;this._encryption=s,this.itemSizeLimit=n,this.delay=a,this.observer={}}return Object.defineProperty(e.prototype,"rawData",{get:function(){return Un[this.dbname]},set:function(e){Un[this.dbname]=e},enumerable:!1,configurable:!0}),e.prototype.observe=function(e,t,n){var r=this;this.observer[e]={},t.forEach(function(t){return r.observer[e][t]=n})},e.prototype.init=function(e){return Ht(this,void 0,void 0,function(){return Gt(this,function(t){return this.dbname=e,Un[this.dbname]={},[2]})})},e.prototype.getAllKeys=function(){return Ht(this,void 0,void 0,function(){return Gt(this,function(e){return[2,Object.keys(Un[this.dbname])]})})},e.prototype.get=function(e){return Ht(this,void 0,void 0,function(){var t,n;return Gt(this,function(r){switch(r.label){case 0:return[4,$t(this.delay)];case 1:if(r.sent(),t=this.observer[e],n=t&&t.get?t.get(e):null)throw n;return[2,Un[this.dbname][e]?this._encryption.decrypt(Un[this.dbname][e]):null]}})})},e.prototype.set=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i;return Gt(this,function(s){switch(s.label){case 0:return[4,$t(this.delay)];case 1:if(s.sent(),t=e.key,n=e.value,r=this.observer[t],a=r&&r.set?r.set(t):null)throw a;if(i=this._encryption.encrypt(n),JSON.stringify(i).length<this.itemSizeLimit)return Un[this.dbname][t]=i,[2,Un[this.dbname][t]];throw Yt.storeItemSizeExceeded}})})},e.prototype.setMany=function(e){return Ht(this,void 0,void 0,function(){var t,n=this;return Gt(this,function(r){switch(r.label){case 0:return[4,$t(this.delay)];case 1:return r.sent(),t=[],e.forEach(function(e){var r=e.key,a=e.value,i=n.observer[r];if(i&&i.set&&i.set(r))t.push(Yt.collectionWriteFailed);else{var s=n._encryption.encrypt(a);JSON.stringify(s).length<n.itemSizeLimit?(Un[n.dbname][r]=s,t.push(a)):t.push(Yt.storeItemSizeExceeded)}}),[2,t]}})})},e.prototype.remove=function(e){return Ht(this,void 0,void 0,function(){var t,n;return Gt(this,function(r){switch(r.label){case 0:return[4,$t(this.delay)];case 1:if(r.sent(),t=this.observer[e],n=t&&t.remove?t.remove(e):null)throw n;return Un[this.dbname][e]&&delete Un[this.dbname][e],[2,e]}})})},e.prototype.removeMany=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i;return Gt(this,function(s){switch(s.label){case 0:return[4,$t(this.delay)];case 1:for(s.sent(),t=0,n=e;t<n.length;t++){if(r=n[t],a=this.observer[r],i=a&&a.remove?a.remove(r):null)throw i;Un[this.dbname][r]&&delete Un[this.dbname][r]}return[2,e]}})})},e.prototype.clear=function(){return Ht(this,void 0,void 0,function(){return Gt(this,function(e){switch(e.label){case 0:return[4,$t(this.delay)];case 1:return e.sent(),Un[this.dbname]={},[2]}})})},e}(),jn="NestDBStore",Fn=function(){function e(e){void 0===e&&(e={}),this.itemSizeLimit=104857600;var t=e.encryption,n=void 0===t?Dn:t;this._window="undefined"!=typeof window?window:null,this._indexedDB=this._window?this._window.indexedDB||this._window.mozIndexedDB||this._window.webkitIndexedDB||this._window.msIndexedDB:null,this._encryption=n}return e.prototype.init=function(e){return Ht(this,void 0,void 0,function(){var t,n=this;return Gt(this,function(r){switch(r.label){case 0:return this.dbname=e,[4,new Promise(function(e,t){if(n._window&&Sn)if(An){var r=n._indexedDB.open("_testMozilla");r.onerror=function(){return t(Yt.storeNotAvailableInPrivateBrowsing)},r.onsuccess=function(){return e()}}else Tn?n._window.indexedDB||!n._window.PointerEvent&&!n._window.MSPointerEvent||t(Yt.storeNotAvailableInPrivateBrowsing):e();else t(Yt.storeNotAvailable)})];case 1:return r.sent(),t=this,[4,new Promise(function(t,r){var a=n._indexedDB.open(e);a.addEventListener("upgradeneeded",function(e){e.target.result.createObjectStore(jn,{keyPath:"key"})}),a.addEventListener("success",function(e){return t(e.target.result)}),a.addEventListener("error",function(e){return r(e.target.error)})})];case 2:return t._database=r.sent(),[2]}})})},e.prototype.getAllKeys=function(){return Ht(this,void 0,void 0,function(){var e=this;return Gt(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,n){var r=e._database.transaction(jn,"readonly").objectStore(jn).getAllKeys();r.addEventListener("success",function(e){return t(e.target.result)}),r.addEventListener("error",function(e){return n(e.target.error)})})];case 1:return[2,t.sent()]}})})},e.prototype.get=function(e){return Ht(this,void 0,void 0,function(){var t=this;return Gt(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,r){var a=t._database.transaction(jn,"readonly").objectStore(jn).get(e);a.addEventListener("success",function(e){return n(e.target.result?t._encryption.decrypt(e.target.result.value):null)}),a.addEventListener("error",function(e){return r(e.target.error)})})];case 1:return[2,n.sent()]}})})},e.prototype.set=function(e){return Ht(this,void 0,void 0,function(){var t,n,r=this;return Gt(this,function(a){switch(a.label){case 0:return t=e.key,n=e.value,[4,new Promise(function(e,a){var i=r._database.transaction(jn,"readwrite").objectStore(jn).put({key:t,value:r._encryption.encrypt(n)});i.addEventListener("success",function(t){e(t.target.result)}),i.addEventListener("error",function(e){return a(e.target.error)})})];case 1:return a.sent(),[2,n]}})})},e.prototype.setMany=function(e){return Ht(this,void 0,void 0,function(){var t,n,r=this;return Gt(this,function(a){switch(a.label){case 0:return t=[],n=this._database.transaction(jn,"readwrite").objectStore(jn),e.forEach(function(e){var a=e.key,i=e.value;t.push(new Promise(function(e){var t=n.put({key:a,value:r._encryption.encrypt(i)});t.addEventListener("success",function(t){e(t.target.result)}),t.addEventListener("error",function(){e(Yt.collectionWriteFailed)})}))}),[4,Promise.all(t)];case 1:return a.sent(),[2,e.map(function(e){return e.value})]}})})},e.prototype.remove=function(e){return Ht(this,void 0,void 0,function(){var t=this;return Gt(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,r){var a=t._database.transaction(jn,"readwrite").objectStore(jn).delete(e);a.addEventListener("success",function(){return n(e)}),a.addEventListener("error",function(e){return r(e.target.error)})})];case 1:return[2,n.sent()]}})})},e.prototype.removeMany=function(e){return Ht(this,void 0,void 0,function(){var t;return Gt(this,function(n){switch(n.label){case 0:return t=this._database.transaction(jn,"readwrite").objectStore(jn),[4,Promise.all(e.map(function(e){return new Promise(function(n,r){var a=t.delete(e);a.addEventListener("success",function(){return n(e)}),a.addEventListener("error",function(e){return r(e.target.error)})})}))];case 1:return[2,n.sent()]}})})},e.prototype.clear=function(){return Ht(this,void 0,void 0,function(){var e=this;return Gt(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,n){var r=e._database.transaction(jn,"readwrite").objectStore(jn).clear();r.addEventListener("success",function(){return t()}),r.addEventListener("error",function(e){return n(e.target.error)})})];case 1:return[2,t.sent()]}})})},e}(),Hn=function(){function e(e){var t=e.AsyncStorage,n=e.encryption,r=void 0===n?Dn:n;this.itemSizeLimit=6291456,this._asyncStorage=t,this._encryption=r}return e.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},e.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},e.prototype.init=function(e){return Ht(this,void 0,void 0,function(){return Gt(this,function(t){return this.dbname=e,[2]})})},e.prototype.getAllKeys=function(){return Ht(this,void 0,void 0,function(){var e=this;return Gt(this,function(t){switch(t.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return[2,t.sent().filter(function(t){return e._isBelonging(t)}).map(function(t){return t.substr("".concat(e.dbname,"/").length)})]}})})},e.prototype.get=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a;return Gt(this,function(i){switch(i.label){case 0:return n=(t=this._encryption).decrypt,a=(r=JSON).parse,[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,n.apply(t,[a.apply(r,[i.sent()])])]}})})},e.prototype.set=function(e){return Ht(this,void 0,void 0,function(){var t,n,r;return Gt(this,function(a){switch(a.label){case 0:return t=e.key,n=e.value,(r=JSON.stringify(this._encryption.encrypt(n))).length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(t),r)]:[3,2];case 1:return a.sent(),[2,JSON.parse(r)];case 2:throw Yt.storeItemSizeExceeded}})})},e.prototype.setMany=function(e){return Ht(this,void 0,void 0,function(){var t,n,r,a,i,s,o;return Gt(this,function(l){switch(l.label){case 0:t=[],n=0,r=e,l.label=1;case 1:if(!(n<r.length))return[3,8];a=r[n],l.label=2;case 2:return l.trys.push([2,6,,7]),i=a.key,s=a.value,(o=JSON.stringify(this._encryption.encrypt(s))).length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(i),o)]:[3,4];case 3:return l.sent(),t.push(s),[3,5];case 4:t.push(Yt.storeItemSizeExceeded),l.label=5;case 5:return[3,7];case 6:return l.sent(),t.push(Yt.collectionWriteFailed),[3,7];case 7:return n++,[3,1];case 8:return[2,t]}})})},e.prototype.remove=function(e){return Ht(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,this._asyncStorage.removeItem(this._getActualKey(e))];case 1:return t.sent(),[2,e]}})})},e.prototype.removeMany=function(e){return Ht(this,void 0,void 0,function(){var t,n,r;return Gt(this,function(a){switch(a.label){case 0:t=0,n=e,a.label=1;case 1:return t<n.length?(r=n[t],[4,this._asyncStorage.removeItem(this._getActualKey(r))]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},e.prototype.clear=function(){return Ht(this,void 0,void 0,function(){var e;return Gt(this,function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}})})},e}(),Gn="[NESTDB]",Bn=!0,Vn=function(){function e(){}return e.off=function(){Bn=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Bn&&console.log.apply(console,Bt(["".concat(Gn,"[LOG]")],e,!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Bn&&console.warn.apply(console,Bt(["".concat(Gn,"[WARNING]")],e,!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Bn&&console.error.apply(console,Bt(["".concat(Gn,"[ERROR]")],e,!1))},e}();!function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(Rn||(Rn={}));var zn,qn,Kn,Yn,Wn,Qn,Jn,Xn=function(){function e(e){var t=e.name,n=e.version,r=e.store,a=e.config;this.name=t,this._version=n,this._state=Rn.INIT,this._config=a||new qt({dbname:t}),this._store=r,this._event={success:en,error:en,upgrade:rn},this._collections=new Map,this._globalMutex=new Ln("".concat(this.name,".lock")),this._config.disableLogger&&Vn.off(),new En({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.commitSchema=function(e){return Ht(this,void 0,void 0,function(){var t=this;return Gt(this,function(n){switch(n.label){case 0:return this._state!==Rn.OPENING?[3,2]:[4,Promise.all(e.map(function(e){return Ht(t,void 0,void 0,function(){var t,n,r,a;return Gt(this,function(i){switch(i.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,a=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new Pn({dbname:this.name,collectionName:t,keyName:n,keyHash:e.keyHash||null,indexes:a,store:this._store})),[4,this._collections.get(t).init()];case 1:return i.sent(),[2]}})})}))];case 1:return n.sent(),[3,3];case 2:throw Yt.databaseSchemaNotOnUpgrade;case 3:return[2]}})})},e.prototype.open=function(){var e;return Ht(this,void 0,void 0,function(){var t,n,r,a,i=this;return Gt(this,function(s){switch(s.label){case 0:return[4,this._globalMutex.lock()];case 1:if(s.sent(),this._state===Rn.OPENED)return[3,12];this._state=Rn.OPENING,s.label=2;case 2:return s.trys.push([2,5,,12]),[4,this._store.init(this.name)];case 3:return s.sent(),o=this.name,t="".concat(dn(o),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=s.sent())&&void 0!==e?e:n,[2,new Promise(function(e,n){var a=function(e){r.version<i._version?i._event.upgrade(r.version,function(n){return Ht(i,void 0,void 0,function(){var a;return Gt(this,function(i){switch(i.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r,generation:this._version})];case 2:return i.sent(),e({continued:!0}),[3,4];case 3:return a=i.sent(),e({continued:!1,err:a}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),i.label=6;case 6:return[2]}})})}):e({continued:!1})};a(function t(s){var o=s.continued,l=void 0!==o&&o,c=s.err,u=void 0===c?null:c;if(l)setTimeout(function(){return a(t)},10);else if(u)Vn.error(u.message),i._globalMutex.unlock(),i._event.error(u),n(u);else{var d=[];r.collectionNames.forEach(function(e){i._collections.has(e)||d.push(Ht(i,void 0,void 0,function(){var t,n;return Gt(this,function(r){switch(r.label){case 0:return[4,Pn.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new Pn({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})}))}),Promise.all(d).then(function(){i._state=Rn.OPENED,i._globalMutex.unlock(),i._event.success(),e()}).catch(function(e){Vn.error(e.message),i._globalMutex.unlock(),i._event.error(e),n(e)})}})})];case 5:switch((a=s.sent()).code){case Vt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case Vt.STORE_NOT_AVAILABLE:return[3,8]}return[3,10];case 6:return Vn.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."),this._store=new xn({}),this._globalMutex.unlock(),this._event.error(a),[4,this.open()];case 7:return s.sent(),[3,11];case 8:return Vn.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new xn({}),this._globalMutex.unlock(),this._event.error(a),[4,this.open()];case 9:return s.sent(),[3,11];case 10:throw Vn.error(a.message),this._globalMutex.unlock(),this._event.error(a),a;case 11:return[3,12];case 12:return[2]}var o})})},e.prototype.close=function(){this._state=Rn.CLOSED,this._collections.forEach(function(e){return e.close()})},e.prototype.reset=function(){return Ht(this,void 0,void 0,function(){var e,t=this;return Gt(this,function(n){switch(n.label){case 0:return(e=En.get(this.name))&&e.clearByCondition(function(e){return e.key.startsWith(dn(t.name))}),[4,this._store.clear()];case 1:return n.sent(),[2]}})})},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){"function"==typeof this._event[e]&&(this._event[e]="upgrade"===e?rn:en)},e.prototype.collection=function(e){return this._collections.get(e)||null},e}(),$n=function(){function e(){}return e.create=function(){return"".concat(Math.floor(1e5*Math.random()),"-").concat((new Date).getTime())},e}();!function(e){e.AND="AND",e.OR="OR"}(zn||(zn={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(qn||(qn={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Kn||(Kn={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper"}(Yn||(Yn={})),function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(Wn||(Wn={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(Qn||(Qn={})),function(e){e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(Jn||(Jn={}));var Zn=function(){function e(){this._iid=null,this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:zn.AND},this.includeEmpty=!1,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=Kn.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Yn.ALL,this.publicChannelFilter=Wn.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=Qn.ALL,this.hiddenChannelFilter=Jn.UNHIDDEN,this.includeFrozen=!0}return Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype._isFriend=function(e){return!!e.friendDiscoveryKey||!!e.friendName},Object.defineProperty(e.prototype,"iid",{set:function(e){this._iid=e},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={searchQuery:t,searchFields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,t,n){void 0===n&&(n=zn.AND),this._userIdsFilter={userIds:e,includeMode:t,queryType:n}},e.prototype.clone=function(){var t=new e;t.setSearchFilter(this.searchFilter.searchFields,this.searchFilter.searchQuery),t.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach(function(e){t[e]=n[e]}),t},e.prototype.match=function(e){var t=this._searchFilter,n=t.searchQuery,r=t.searchFields;if(n&&r&&r.length>0&&!r.some(function(t){switch(t){case qn.CHANNEL_NAME:return e.name.toLowerCase().includes(n.toLowerCase());case qn.MEMBER_NICKNAME:return e.members.some(function(e){return e.nickname.toLowerCase().includes(n.toLowerCase())});default:return!0}}))return!1;var a=this._userIdsFilter,i=a.includeMode,s=a.queryType,o=a.userIds,l=w.get(this._iid).get("currentUserId"),c=e.members.map(function(e){return e.userId});if(i){if(o.length>0)switch(s){case zn.AND:if(o.some(function(e){return!c.includes(e)}))return!1;break;case zn.OR:if(o.every(function(e){return!c.includes(e)}))return!1}}else{if(o.includes(l)||o.push(l),e.members.length>o.length)return!1;if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=U([],e,!0).sort(),r=U([],t,!0).sort(),a=0;a<n.length;++a)if(n[a]!==r[a])return!1;return!0}(o,c))return!1}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var u=this.nicknameContainsFilter.toLowerCase();if(e.members.every(function(e){return!e.nickname.toLowerCase().includes(u)}))return!1}if(this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.memberStateFilter)switch(this.memberStateFilter){case Kn.JOINED:if("joined"!==e.myMemberState)return!1;break;case Kn.INVITED:if("invited"!==e.myMemberState)return!1;break;case Kn.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case Kn.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case Jn.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case Jn.HIDDEN:if(!e.isHidden)return!1;break;case Jn.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case Jn.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===Qn.UNREAD_MESSAGE&&0===e.unreadMessageCount)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case Wn.PUBLIC:if(!e.isPublic)return!1;break;case Wn.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case Yn.SUPER:if(!e.isSuper)return!1;break;case Yn.NON_SUPER:if(e.isSuper)return!1}return!0},e.QueryType=zn,e.SearchField=qn,e.MemberStateFilter=Kn,e.SuperChannelFilter=Yn,e.PublicChannelFilter=Wn,e.UnreadChannelFilter=Qn,e.HiddenChannelFilter=Jn,e}(),er=function(){function e(e){var t=e.iid;this._iid=t,this._filter=new Zn,this._filter.iid=this._iid,this._order=ot.LATEST_LAST_MESSAGE,this._limit=20}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this._filter.iid=this._iid,this},e.prototype.setOrder=function(e){return this._order=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new yt({iid:this._iid,filter:this._filter,order:this._order,limit:this._limit})},e}(),tr=function(){function e(e){var t=e.iid,n=e.channel;this._iid=t,this._channel=n,this._startingPoint=Date.now(),this._filter=new Me,this._limit=100}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this},e.prototype.setStartingPoint=function(e){return this._startingPoint=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new nt({iid:this._iid,channel:this._channel,startingPoint:this._startingPoint,filter:this._filter,limit:this._limit})},e}(),nr={},rr={},ar=new WeakMap,ir=new WeakMap,sr=new WeakMap,or=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).channelType=Rt.CHANNEL_TYPE_GROUP,r.isDistinct=!1,r.isSuper=!1,r.isBroadcast=!1,r.isPublic=!1,r.unreadMessageCount=0,r.inviter=null,r.members=[],r.memberMap={},r.lastMessage=null,r.memberCount=0,r.joinedMemberCount=0,r.cachedReadReceiptStatus={},r.cachedDeliveryReceiptStatus=null,r.myPushTriggerOption=n.PushTriggerOption.DEFAULT,r.isPushEnabled,r.isHidden=!1,r.hiddenState=n.HiddenState.UNHIDDEN,r.isDiscoverable=!0,r.myLastRead=0,r.messageSurvivalSeconds=-1,r.invitedAt=0,r.joinedAt=0,r._messageOffsetTimestamp=0,r._cachedLastDeliveredReceipt={sentAt:0,timeout:null},ar.set(E(r),{}),ir.set(E(r),{start:0,end:0}),sr.set(E(r),0),e&&r._update(e),r}return _(n,[{key:"messageOffsetTimestamp",get:function(){return this._messageOffsetTimestamp}},{key:"createMessageCollection",value:function(){return new tr({iid:this._iid,channel:this})}},{key:"_setGroupChannelUnreadCount",value:function(e,t){try{if("number"==typeof e&&e>=0)if("all"===this.myCountPreference||"unread_message_count_only"===this.myCountPreference)if(this.isSuper||this.isBroadcast){var n=w.get(this._iid).container.maxUnreadCountOfSuperGroupChannel;this.unreadMessageCount=e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&("all"===this.myCountPreference||"unread_mention_count_only"===this.myCountPreference?this.unreadMentionCount=t:this.unreadMentionCount=0)}catch(e){}}},{key:"_update",value:function(e){var t=this,n=G.get(this._iid),r=n.BaseChannel,a=n.GroupChannel,i=n.User,s=n.Member;if(this.isAccessCodeRequired=!!e.is_access_code_required&&e.is_access_code_required,this.isDistinct=!!e.is_distinct&&e.is_distinct,this.isPushEnabled=!!e.is_push_enabled&&e.is_push_enabled,this.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,this.myPushTriggerOption=e.push_trigger_option?e.push_trigger_option:a.PushTriggerOption.DEFAULT,this.myCountPreference=e.hasOwnProperty("count_preference")?e.count_preference:a.CountPreference.ALL,this.unreadMessageCount=0,this.unreadMentionCount=0,this._setGroupChannelUnreadCount(parseInt(e.unread_message_count),parseInt(e.unread_mention_count)),e.hasOwnProperty("read_receipt")&&(this.cachedReadReceiptStatus={},Object.keys(e.read_receipt).forEach(function(n){var r=e.read_receipt[n];t.updateReadReceipt(n,parseInt(r))})),e.hasOwnProperty("delivery_receipt")&&"object"===h(e.delivery_receipt)&&null!==e.delivery_receipt&&(this.cachedDeliveryReceiptStatus||(this.cachedDeliveryReceiptStatus={}),Object.keys(e.delivery_receipt).forEach(function(n){var r=e.delivery_receipt[n];t.updateDeliveryReceipt(n,parseInt(r))})),e.hasOwnProperty("user_last_read")&&"number"==typeof e.user_last_read?this.myLastRead=e.user_last_read:this.myLastRead=0,e.hasOwnProperty("members")){this.members=[],this.memberMap={};for(var o=0;o<e.members.length;o++){var l=new s(e.members[o]);this.members.push(l),this.memberMap[l.userId]=l}}this.myMemberState=e.member_state||"none",this.myRole=e.my_role||a.Role.NONE,e.hasOwnProperty("is_muted")?"string"==typeof e.is_muted?this.myMutedState=e.is_muted:"boolean"==typeof e.is_muted?this.myMutedState=e.is_muted?"muted":"unmuted":this.myMutedState="unmuted":this.myMutedState="unmuted",e.hasOwnProperty("member_count")&&(this.memberCount=parseInt(e.member_count)),e.hasOwnProperty("joined_member_count")&&(this.joinedMemberCount=parseInt(e.joined_member_count)),e.hasOwnProperty("last_message")&&"object"===h(e.last_message)&&e.last_message?e.last_message instanceof At?this.lastMessage=e.last_message:this.lastMessage=r.buildMessage(e.last_message,this):this.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"===h(e.inviter)&&Object.keys(e.inviter).length>0?this.inviter=new i(e.inviter):this.inviter=null,this.invitedAt=e.invited_at||0,this.joinedAt=e.joined_ts||0,e.hasOwnProperty("is_super")&&"boolean"==typeof e.is_super?this.isSuper=e.is_super:this.isSuper=!1,e.hasOwnProperty("is_broadcast")&&"boolean"==typeof e.is_broadcast?this.isBroadcast=e.is_broadcast:this.isBroadcast=!1,e.hasOwnProperty("is_public")&&"boolean"==typeof e.is_public?this.isPublic=e.is_public:this.isPublic=!1,e.hasOwnProperty("hidden_state")?this.hiddenState=e.hidden_state:this.hiddenState=a.HiddenState.UNHIDDEN,e.hasOwnProperty("is_discoverable")&&"boolean"==typeof e.is_discoverable?this.isDiscoverable=e.is_discoverable:this.isDiscoverable=this.isPublic,e.hasOwnProperty("ts_message_offset")&&(this._messageOffsetTimestamp=e.ts_message_offset),e.hasOwnProperty("message_survival_seconds")&&"number"==typeof e.message_survival_seconds&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"addMember",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.isSuper&&!this.isBroadcast){var n=G.get(this._iid),r=n.Member,a=this.removeMember(e);a&&a.state===r.JOINED&&(e.state=r.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,t),this.updateDeliveryReceipt(e.userId,t)}}},{key:"removeMember",value:function(e){var t=null;if(!this.isSuper&&!this.isBroadcast&&this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var n=0;n<this.members.length;n++){var r=this.members[n];if(r.userId===e.userId){t=r,this.members.splice(n,1);break}}this.memberCount--}return t}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"isIdentical",value:function(e){return e&&this.url===e.url}},{key:"isEqual",value:function(e){return ie.deepEqual(this,e)}},{key:"createMemberListQuery",value:function(){return new(0,G.get(this._iid).MemberListQuery)(this.url)}},{key:"createBannedUserListQuery",value:function(){return new(0,G.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:this.isOpenChannel()})}},{key:"refresh",value:function(e){return G.get(this._iid).GroupChannel.getChannelWithoutCache(this.url,e)}},{key:"updateChannel",value:function(){var e=this,t=_e.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=G.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,function(n){var r=t[0];r.channelUrl=e.url,r._validate()?w.get(e._iid).container.apiClient.updateGroupChannel(d(d({},r),{},{operatorUserIds:r.operatorUserIds}),function(e,t){var r=null;e||(r=a.upsert(t)),n(e,r)}):n(_e.error,null)},n);if(3===t.length){var s=new i;return s.channelUrl=this.url,s.name=t[0],"string"==typeof t[1]?s.coverUrl=t[1]:s.coverImage=t[1],s.data=t[2],this.updateChannel(s,n)}if(4===t.length){var o=new i;return o.channelUrl=this.url,o.isDistinct=t[0],o.name=t[1],"string"==typeof t[1]?o.coverUrl=t[2]:o.coverImage=t[2],o.data=t[3],this.updateChannel(o,n)}if(5===t.length){var l=new i;return l.channelUrl=this.url,l.isDistinct=t[0],l.name=t[1],"string"==typeof t[2]?l.coverUrl=t[2]:l.coverImage=t[2],l.data=t[3],l.customType=t[4],this.updateChannel(l,n)}return le(this._iid,function(e){return e(_e.error,null)},n)}},{key:"invite",value:function(e,t){var n=null,r=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.length>0&&e.every(function(e){return!!e.userId&&"string"==typeof e.userId})}}),new _e({type:"callback"})]),a=O(r,3);return n=a[0],e=a[1],t=a[2],n?le(this._iid,function(e){return e(_e.error,null)},t):this.inviteWithUserIds(e.map(function(e){return e.userId}),t)}},{key:"inviteWithUserIds",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.inviteToGroupChannel({channelUrl:n.url,userIds:e},function(e,r){var a=null;e||(a=G.get(n._iid).GroupChannel.upsert(r)),t(e,a)})},t)}},{key:"acceptInvitation",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",optional:!0,defaultValue:null}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.acceptInvitation({channelUrl:n.url,accessCode:e},function(e,r){var a=null;e||((a=G.get(n._iid).GroupChannel.upsert(r)).myMemberState="joined"),t(e,a)})},t)}},{key:"declineInvitation",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.declineInvitation({channelUrl:t.url},function(n,r){var a=null;if(!n){var i=G.get(t._iid).GroupChannel;(a=i.upsert(r)).myMemberState="none",t.isPublic||i.removeCachedChannel(t.url)}e(n,a)})},e)}},{key:"join",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",optional:!0,defaultValue:null}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.joinGroupChannel({channelUrl:n.url,accessCode:e},function(e,r){var a=null;e||((a=G.get(n._iid).GroupChannel.upsert(r)).myMemberState="joined"),t(e,a)})},t)}},{key:"leave",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.leaveGroupChannel({channelUrl:t.url},function(t,n){return e(t,null)})},e)}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new _e({type:"string",optional:!0,defaultValue:""}),new _e({type:"callback"})]),o=O(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):w.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!0},function(e,t){r(e,null)})},r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!0},function(e,n){t(e,null)})},t)}},{key:"banUser",value:function(e,t,n,r){return this.banUserWithUserId(e?e.userId:null,t,n,r)}},{key:"banUserWithUserId",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new _e({type:"string"}),new _e({type:"callback"})]),o=O(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):w.get(a._iid).container.apiClient.banUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!0},function(e,t){r(e,null)})},r)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!0},function(e,n){t(e,null)})},t)}},{key:"updateJoinedMemberCount",value:function(){if(!this.isSuper&&!this.isBroadcast){var e=G.get(this._iid).Member;this.joinedMemberCount=this.members.filter(function(t){return t.state===e.JOINED}).length}}},{key:"setLatestMemberCount",value:function(e,t,n){var r=!1;return"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&n>=sr.get(this)&&(sr.set(this,n),r=t!==this.joinedMemberCount||e!==this.memberCount,this.memberCount=e,this.joinedMemberCount=t),r}},{key:"hide",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"boolean",optional:!0,defaultValue:!1}),new _e({type:"boolean",optional:!0,defaultValue:!0}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){a?n(a,null):w.get(r._iid).container.apiClient.hideGroupChannel({channelUrl:r.url,hidePreviousMessages:e,allowAutoUnhide:t},function(a,i){if(!a){var s=G.get(r._iid).GroupChannel;r.isHidden=!0,r.hiddenState=t?s.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:s.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE,e&&r._setGroupChannelUnreadCount(0,0),i.hasOwnProperty("ts_message_offset")&&(r._messageOffsetTimestamp=i.ts_message_offset),s.cachedChannels[r.url]=r}n(a,i)})},n)}},{key:"unhide",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.unhideGroupChannel({channelUrl:t.url},function(n,r){if(!n){var a=G.get(t._iid).GroupChannel;t.isHidden=!1,t.hiddenState=a.HiddenState.UNHIDDEN,a.cachedChannels[t.url]=t}e(n,r)})},e)}},{key:"freeze",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!0},function(n,r){if(!n){var a=G.get(t._iid).GroupChannel;t.isFrozen=!0,a.cachedChannels[t.url]=t}e(n,null)})},e)}},{key:"unfreeze",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!1},function(n,r){if(!n){var a=G.get(t._iid).GroupChannel;t.isFrozen=!1,a.cachedChannels[t.url]=t}e(n,null)})},e)}},{key:"delete",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.deleteGroupChannel({channelUrl:t.url},function(n,r){n||G.get(t._iid).GroupChannel.removeCachedChannel(t.url),e(n,r)})},e)}},{key:"markAsRead",value:function(e){var t=this;return le(this._iid,function(e){var n=G.get(t._iid).Command,r=Ba.getInstance(t._iid),a=n.bRead({channelUrl:t.url});r.sendCommand(a,function(n,a){if(r.getErrorFirstCallback()){var i=[n,a];a=i[0],n=i[1]}if(a)e(a,null);else if(r.currentUser){var s=bt.of(t._iid),o=Ae.of(t._iid);t.updateReadReceipt(r.currentUser.userId,n.getJsonElement().ts);var l=!1;(t.unreadMessageCount>0||t.unreadMentionCount>0)&&(t._setGroupChannelUnreadCount(0,0),Object.keys(r.channelHandlers).forEach(function(e){r.channelHandlers[e].onChannelChanged(t)}),l=!0),e(null,null),s.upsert([t]).then(function(){l&&o.send({source:de.EVENT_CHANNEL_CHANGED,payload:{channel:t}}),o.send({source:de.EVENT_READ_RECEIPT_UPDATED,payload:{channel:t}})}).catch(function(e){X.error(e)})}else{var c=new SendBirdException("Connection should be made first.",SendBirdException.CONNECTION_REQUIRED);e(c,null)}})},e)}},{key:"getUnreadMemberCount",value:function(e){var t=w.get(this._iid),n=G.get(this._iid).Member,r=t.container.currentUserId;if(e instanceof At&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){for(var a=0,i=e.createdAt,s=this.members,o=0;o<s.length;o++){var l=s[o];r===l.userId||l.state!==n.JOINED||e.sender&&e.sender.userId===l.userId||(this.cachedReadReceiptStatus[l.userId]||0)<i&&a++}return a}return 0}},{key:"getReadReceipt",value:function(e){return this.getUnreadMemberCount(e)}},{key:"markAsDelivered",value:function(){var e=this,t=Ba.getInstance(this._iid),n=t.currentUser?t.currentUser.userId:null;w.get(this._iid).container.apiClient.markAsDelivered({channelUrl:this.url,userId:n},function(t,r){if(t)X.debug(t);else{var a=r.hasOwnProperty("ts")?r.ts:0;e.updateDeliveryReceipt(n,a)}})}},{key:"getUndeliveredMemberCount",value:function(e){var t=w.get(this._iid),n=G.get(this._iid).Member,r=t.container.currentUserId;if(this.cachedDeliveryReceiptStatus&&e instanceof At&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){var a,i=e.createdAt,s=0,o=I(this.members);try{for(o.s();!(a=o.n()).done;){var l=a.value;r===l.userId||l.state!==n.JOINED||e.sender&&e.sender.userId===l.userId||this.cachedDeliveryReceiptStatus[l.userId]<i&&s++}}catch(e){o.e(e)}finally{o.f()}return s}return 0}},{key:"getDeliveryReceipt",value:function(e){return this.getUndeliveredMemberCount(e)}},{key:"getReadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ba.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof At&&!e.isAdminMessage()){for(var r=[],a=0;a<this.members.length;a++){var i=this.members[a];if(t||i.userId!==n.currentUser.userId&&i.userId!==e.sender.userId){var s=this.cachedReadReceiptStatus[i.userId]||0;s>=e.createdAt&&r.push(i)}}return r}return[]}},{key:"getUnreadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ba.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof At&&!e.isAdminMessage()){for(var r=[],a=0;a<this.members.length;a++){var i=this.members[a];if(t||i.userId!==n.currentUser.userId&&i.userId!==e.sender.userId){var s=this.cachedReadReceiptStatus[i.userId]||0;s<e.createdAt&&r.push(i)}}return r}return[]}},{key:"getReadStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Ba.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast){for(var r={},a=Object.keys(this.cachedReadReceiptStatus),i=function(i){var s=a[i];if(!t&&s===n.currentUser.userId)return"continue";var o=e.cachedReadReceiptStatus[s],l=e.members.filter(function(e){return e.userId===s});r[s]={user:l.length>0?l[0]:null,last_seen_at:parseInt(o)}},s=0;s<a.length;s++)i(s);return r}return{}}},{key:"updateReadReceipt",value:function(e,t){var n=this.cachedReadReceiptStatus[e];if(!n||n<t){this.cachedReadReceiptStatus[e]=t;var r=Ba.getInstance(this._iid);r.currentUser&&e===r.currentUser.userId&&(this.myLastRead=t)}}},{key:"updateDeliveryReceipt",value:function(e,t){if(this.cachedDeliveryReceiptStatus)if(this.cachedDeliveryReceiptStatus.hasOwnProperty(e)){var n=this.cachedDeliveryReceiptStatus[e];(!n||n<t)&&(this.cachedDeliveryReceiptStatus[e]=t)}else this.cachedDeliveryReceiptStatus[e]=t}},{key:"startTyping",value:function(){var e=Ba.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var r=ir.get(this);if(t-r.start>=n){r.end=0,r.start=t;var a=G.get(this._iid).Command.bTypeStart({channelUrl:this.url,time:r.start});e.sendCommand(a,null)}}},{key:"endTyping",value:function(){var e=Ba.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var r=ir.get(this);if(t-r.end>=n){r.start=0,r.end=t;var a=G.get(this._iid).Command.bTypeEnd({channelUrl:this.url,time:r.end});e.sendCommand(a,null)}}},{key:"invalidateTypingStatus",value:function(){var e=ar.get(this),t=(new Date).getTime(),n=!1;return Object.keys(e).forEach(function(r){var a=e[r].ts;t-a>=1e4&&(delete e[r],n=!0)}),n}},{key:"getTypingMembers",value:function(){var e=this,t=ar.get(this),n=[];return Object.keys(t).forEach(function(t){var r=e.memberMap[t];r&&n.push(r)}),n}},{key:"getTypingUsers",value:function(){var e=ar.get(this),t=[];return Object.keys(e).forEach(function(n){var r=e[n].user;t.push(r)}),t}},{key:"updateTypingStatus",value:function(e,t){var n=ar.get(this);t?n[e.userId]={user:e,ts:(new Date).getTime()}:delete n[e.userId]}},{key:"isTyping",value:function(){var e=ar.get(this);return 0!==Object.keys(e).length}},{key:"registerScheduledUserMessage",value:function(e,t){var n=this,r=G.get(this._iid),a=r.ScheduledUserMessage,i=r.ScheduledUserMessageParams,s=null,o=_e.parse(arguments,[new _e({type:i,constraint:function(e){return"string"==typeof e.message&&"string"==typeof e._getScheduleString()}}),new _e({type:"callback"})]),l=O(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,function(t){s?t(s,null):w.get(n._iid).container.apiClient.registerScheduledUserMessage({groupChannelParams:e,channelUrl:n.url,isOpenChannel:!1},function(e,r){var i=null;if(!e){i=new a(r);var s=Ba.getInstance(n._iid).currentUser;s&&i._sender&&s.userId===i._sender.userId&&(s.nickname=i._sender.nickname,s.plainProfileUrl=i._sender.plainProfileUrl,s.metaData=i._sender.metaData)}t(e,i)})},t)}},{key:"getPushPreference",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},function(n,r){var a=null;if(!n){try{a=r.enable}catch(e){a=!1}t.isPushEnabled=a}e&&e(n,a)})},e)}},{key:"setPushPreference",value:function(e,t){var n=this;return le(this._iid,function(t){var r=G.get(n._iid).GroupChannel;w.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,enable:e},function(e,a){e||(n.isPushEnabled=a.enable,n.isPushEnabled||(n.myPushTriggerOption=r.PushTriggerOption.OFF)),t(e,a)})},t)}},{key:"getMyPushTriggerOption",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},function(r,a){var i=null;if(!r){try{i=a.push_trigger_option||n.PushTriggerOption.DEFAULT}catch(e){X.debug(e)}t.myPushTriggerOption=i}e(r,i)})},e)}},{key:"setMyPushTriggerOption",value:function(e,t){var n=this,r=G.get(this._iid),a=r.GroupChannel,i=null,s=_e.parse(arguments,[new _e({type:a.PushTriggerOption}),new _e({type:"callback"})]),o=O(s,3);return i=o[0],e=o[1],t=o[2],le(this._iid,function(t){i?t(i,null):w.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,pushTriggerOption:e},function(e,r){var a=null;if(!e){try{a=r.push_trigger_option}catch(e){X.debug(e)}n.myPushTriggerOption=a}t(e,a)})},t)}},{key:"setMyCountPreference",value:function(e,t){var n=this,r=G.get(this._iid),a=r.GroupChannel,i=null,s=_e.parse(arguments,[new _e({type:a.CountPreference}),new _e({type:"callback"})]),o=O(s,3);return i=o[0],e=o[1],t=o[2],le(this._iid,function(t){i?t(i,null):w.get(n._iid).container.apiClient.setMyCountPreference({channelUrl:n.url,countPreference:e},function(e,r){var i=null;e||(i=n.myCountPreference=r.count_preference,n._setGroupChannelUnreadCount(n.unreadMessageCount,n.unreadMentionCount),a.cachedChannels[n.url]=n),t(e,i)})},t)}},{key:"resetMyHistory",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.resetMyHistory({channelUrl:t.url},function(n,r){if(!n&&r.hasOwnProperty("ts_message_offset")){var a=G.get(t._iid).GroupChannel;t._messageOffsetTimestamp=r.ts_message_offset,a.cachedChannels[t.url]=t}e(n,r)})},e)}}],[{key:"MemberStateFilter",get:function(){return{ALL:"all",JOINED:"joined_only",INVITED:"invited_only",INVITED_BY_FRIEND:"invited_by_friend",INVITED_BY_NON_FRIEND:"invited_by_non_friend"}}},{key:"PushTriggerOption",get:function(){return{DEFAULT:"default",ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"CountPreference",get:function(){return{ALL:"all",UNREAD_MESSAGE_COUNT_ONLY:"unread_message_count_only",UNREAD_MENTION_COUNT_ONLY:"unread_mention_count_only",OFF:"off"}}},{key:"HiddenState",get:function(){return{UNHIDDEN:"unhidden",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"PublicChannelFilter",get:function(){return{ALL:"all",PUBLIC:"public",PRIVATE:"private"}}},{key:"SuperChannelFilter",get:function(){return{ALL:"all",SUPER:"super",NON_SUPER:"nonsuper",BROADCAST_ONLY:"broadcast_only"}}},{key:"UnreadChannelFilter",get:function(){return{ALL:"all",UNREAD_MESSAGE:"unread_message"}}},{key:"HiddenChannelFilter",get:function(){return{UNHIDDEN:"unhidden_only",HIDDEN:"hidden_only",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"Role",get:function(){return{OPERATOR:"operator",NONE:"none"}}},{key:"UnreadItemKey",get:function(){return{GROUP_CHANNEL_UNREAD_MENTION_COUNT:"group_channel_unread_mention_count",NONSUPER_UNREAD_MENTION_COUNT:"non_super_group_channel_unread_mention_count",SUPER_UNREAD_MENTION_COUNT:"super_group_channel_unread_mention_count",GROUP_CHANNEL_UNREAD_MESSAGE_COUNT:"group_channel_unread_message_count",NONSUPER_UNREAD_MESSAGE_COUNT:"non_super_group_channel_unread_message_count",SUPER_UNREAD_MESSAGE_COUNT:"super_group_channel_unread_message_count",GROUP_CHANNEL_INVITATION_COUNT:"group_channel_invitation_count",NONSUPER_INVITATION_COUNT:"non_super_group_channel_invitation_count",SUPER_INVITATION_COUNT:"super_group_channel_invitation_count"}}},{key:"cachedChannels",get:function(){return nr[this._iid]||(nr[this._iid]={}),nr[this._iid]}},{key:"createGroupChannelCollection",value:function(){return new er({iid:this._iid})}},{key:"buildFromSerializedData",value:function(e){var t=G.get(this._iid),n=t.User,r=t.Member,a=t.GroupChannel,i=t.BaseMessage,s=t.UserMessage,o=t.FileMessage,l=t.AdminMessage,c=Ot.deserialize(e),u=function(e){return null!=e&&"object"===h(e)?e.messageType===i.MESSAGE_TYPE_USER?new s(s.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):e.messageType===i.MESSAGE_TYPE_FILE?new o(o.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):new l(l.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},mentionedUsers:e.mentionedUsers}))):null}(c.lastMessage);return new a({channel_url:c.url,name:c.name,cover_url:c.coverUrl,data:c.data,custom_type:c.customType,invited_at:c.invitedAt,created_at:c.createdAt/1e3,joined_ts:c.joinedAt,is_access_code_required:c.isAccessCodeRequired,is_distinct:c.isDistinct,is_super:c.isSuper,is_broadcast:c.isBroadcast,is_public:c.isPublic,is_discoverable:c.isDiscoverable,is_hidden:c.isHidden,is_ephemeral:c.isEphemeral,is_muted:c.myMutedState,is_push_enabled:c.isPushEnabled,freeze:c.isFrozen,unread_message_count:c.unreadMessageCount,unread_mention_count:c.unreadMentionCount,push_trigger_option:c.myPushTriggerOption,count_preference:c.myCountPreference,hidden_state:c.hiddenState,member_count:c.memberCount,joined_member_count:c.joinedMemberCount,member_state:c.myMemberState,my_role:c.myRole,user_last_read:c.myLastRead,ts_message_offset:c.messageOffsetTimestamp,message_survival_seconds:c.messageSurvivalSeconds,read_receipt:c.cachedReadReceiptStatus,delivery_receipt:c.cachedDeliveryReceiptStatus,members:c.members.map(function(e){return r.objectify(d({},e))}),last_message:u,created_by:null!==c.creator&&void 0!==c.creator&&"object"===h(c.creator)?n.objectify(c.creator):null,inviter:null!==c.inviter&&void 0!==c.inviter&&"object"===h(c.inviter)?n.objectify(c.inviter):null,cached_primary_key:c.cachedPrimaryKey})}},{key:"upsert",value:function(e){var t=G.get(this._iid).GroupChannel,n=new t(e);if(t.cachedChannels.hasOwnProperty(n.url)){if(n.isEphemeral){var r=t.cachedChannels[n.url];e.last_message=r.lastMessage,e.unread_message_count=r.unreadMessageCount}t.cachedChannels[n.url].update(e)}else t.cachedChannels[n.url]=n;return t.cachedChannels[n.url]}},{key:"removeCachedChannel",value:function(e){var t=G.get(this._iid),n=t.GroupChannel,r=t.FileMessageQueue;n.cachedChannels[e]&&delete n.cachedChannels[e],r.delete(e)}},{key:"clearCache",value:function(){nr[this._iid]={},G.get(this._iid).FileMessageQueue.clear()}},{key:"getChannel",value:function(e,t){var n=null,r=null,a=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"string",optional:!0,nullable:!0,defaultValue:null}),new _e({type:"callback"})]),i=O(a,4);if(n=i[0],e=i[1],r=i[2],t=i[3],n)return le(this._iid,function(e){e(n,null)},t);var s=G.get(this._iid),o=s.GroupChannel;return o.cachedChannels[e]?le(this._iid,function(t){t(null,o.cachedChannels[e])},t):o.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,r=null,a=null,i=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"string",optional:!0,nullable:!0,defaultValue:null}),new _e({type:"callback"})]),s=O(i,4);return r=s[0],e=s[1],a=s[2],t=s[3],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.getGroupChannel({channelUrl:e,internalCall:a,showMember:!0},function(e,r){var a=null;e||(a=n.upsert(r)),t(e,a)})},t)}},{key:"createDistinctChannelIfNotExist",value:function(e,t){var n=this,r=G.get(this._iid),a=r.GroupChannelParams,i=null,s=_e.parse(arguments,[new _e({type:a,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),o=O(s,3);return i=o[0],e=o[1],t=o[2],le(this._iid,function(t){i?t(i,null):(e.isPublic||(e.accessCode=null),w.get(n._iid).container.apiClient.createGroupChannel(d(d({},e),{},{isDistinct:!0}),function(e,r){var a=null;if(!e){var i=G.get(n._iid).GroupChannel;a={channel:new i(r),isCreated:r.is_created},i.cachedChannels[a.channel.url]=a.channel}t(e,a)}))},t)}},{key:"createChannel",value:function(){var e=this,t=_e.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=G.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,function(n){var r=t[0];r.isPublic||(r.accessCode=null),r._validate()?w.get(e._iid).container.apiClient.createGroupChannel(r,function(e,t){var r=null;e||(r=new a(t),a.cachedChannels[r.url]=r),n(e,r)}):n(_e.error,null)},n);if(Array.isArray(t[0])){var s=new i;switch(t.length){case 1:s.addUsers(t[0]);break;case 2:s.addUsers(t[0]),s.isDistinct=t[1];break;case 3:s.addUsers(t[0]),s.isDistinct=t[1],s.customType=t[2];break;case 5:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4];break;case 6:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4],s.customType=t[5];break;default:return le(this._iid,function(e){return e(_e.error,null)},n)}return n?a.createChannel(s,n):a.createChannel(s)}return le(this._iid,function(e){return e(_e.error,null)},n)}},{key:"createChannelWithUserIds",value:function(){var e=_e.toArray(arguments),t=void 0;"function"==typeof e[e.length-1]&&(t=e.pop());var n=G.get(this._iid),r=n.GroupChannel,a=n.GroupChannelParams,i=new a;switch(e.length){case 1:i.addUserIds(e[0]);break;case 2:i.addUserIds(e[0]),i.isDistinct=e[1];break;case 3:i.addUserIds(e[0]),i.isDistinct=e[1],i.customType=e[2];break;case 5:i.addUserIds(e[0]),i.isDistinct=e[1],i.name=e[2],"string"==typeof e[3]?i.coverUrl=e[3]:i.coverImage=e[3],i.data=e[4];break;case 6:i.addUserIds(e[0]),i.isDistinct=e[1],i.name=e[2],"string"==typeof e[3]?i.coverUrl=e[3]:i.coverImage=e[3],i.data=e[4],i.customType=e[5];break;default:return le(this._iid,function(e){return e(_e.error,null)},t)}return r.createChannel(i,t)}},{key:"createMyGroupChannelListQuery",value:function(){return new(0,G.get(this._iid).GroupChannelListQuery)}},{key:"createPublicGroupChannelListQuery",value:function(){return new(0,G.get(this._iid).PublicGroupChannelListQuery)}},{key:"markAsReadAllLastSentAt",get:function(){return rr[this._iid]||0},set:function(e){rr[this._iid]=e}},{key:"getChannelCount",value:function(e,t){return Ba.getInstance(this._iid).getGroupChannelCount(e,t)}},{key:"getUnreadItemCount",value:function(e,t){return Ba.getInstance(this._iid).getUnreadItemCount(e,t)}},{key:"getTotalUnreadMessageCount",value:function(){var e=_e.toArray(arguments),t="function"==typeof e[e.length-1]?e.pop():null,n=Ba.getInstance(this._iid);return n.getTotalUnreadMessageCount.apply(n,N(e).concat([t]))}},{key:"getTotalUnreadChannelCount",value:function(e){return Ba.getInstance(this._iid).getTotalUnreadChannelCount(e)}}]),n}(Rt),lr=function(e){function t(t){var n=e.call(this,t)||this;return n.state="",n.role="",n.isMuted=!1,n.isBlockedByMe=!1,n.isBlockingMe=!1,n.restrictionInfo=null,t&&n._update(t),n}return M(t,e),t.objectify=function(e){var t=G.get(this._iid),n=t.User,r=t.RestrictedUser,a=t.RestrictionInfo,i=e.state,s=e.role,o=void 0===s?"":s,l=e.isMuted,c=void 0!==l&&l,u=e.isBlockedByMe,d=void 0!==u&&u,h=e.isBlockingMe,f=void 0!==h&&h,p=e.restrictionInfo,_=void 0===p?null:p,m=c?r.objectify(e):n.objectify(e);if(m.state=i,m.role=o,m.is_muted=c,m.is_blocked_by_me=d,m.is_blocking_me=f,_){var g=a.objectify(_);m.restriction_type=g.restriction_type,m.muted_description=g.description,m.muted_end_at=g.end_at}return m},t.buildFromSerializedData=function(e){var t=G.get(this._iid).Member,n=Ot.deserialize(e);return new t(t.objectify(L({},n)))},t.prototype._update=function(e){var t=G.get(this._iid),n=t.RestrictedUser,r=t.RestrictionInfo;this.state=e.state,this.role=e.role||or.Role.NONE,e.hasOwnProperty("is_muted")&&(this.isMuted=e.is_muted),e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me),this.isMuted&&(this.restrictionInfo=new r(e),this.restrictionInfo.restrictionType=n.RestrictionType.MUTED)},t.prototype.parse=function(e){this._update(e)},Object.defineProperty(t,"JOINED",{get:function(){return"joined"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVITED",{get:function(){return"invited"},enumerable:!1,configurable:!0}),t}(It),cr=function(e){function t(t){var n=e.call(this,t)||this;return n.role="",n.isBlockedByMe=!1,t&&n._update(t),n}return M(t,e),t.objectify=function(e){var t=G.get(this._iid).User,n=e.role,r=void 0===n?"":n,a=e.isBlockedByMe,i=void 0!==a&&a,s=t.objectify(e);return s.role=r,s.is_blocked_by_me=i,s},t.buildFromSerializedData=function(e){var t=G.get(this._iid).Sender,n=Ot.deserialize(e);return new t(t.objectify(L({},n)))},t.prototype.parse=function(e){this._update(e)},t.prototype._update=function(e){this.role=e.role||or.Role.NONE,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me)},t}(It),ur=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).restrictionInfo=null,e&&r._update(e),r}return _(n,[{key:"_update",value:function(e){var t=G.get(this._iid).RestrictionInfo;this.restrictionInfo=new t(e)}}],[{key:"RestrictionType",get:function(){return{MUTED:"muted",BANNED:"banned"}}},{key:"objectify",value:function(e){var t=G.get(this._iid),n=t.User,r=t.RestrictionInfo,a=e.restrictionInfo,i=void 0===a?{}:a;return d(d({},n.objectify(e)),r.objectify(i))}}]),n}(It),dr=function(){function e(e){this.emojiHash=null,this.emojiCategories=null,e&&this._update(e)}return e.prototype._update=function(e){var t=G.get(this._iid).EmojiCategory;this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map(function(e){return new t(e)}):[]},e}(),hr=function(){function e(e){this.id=null,this.name=null,this.url=null,this.emojis=null,e&&this._update(e)}return e.prototype._update=function(e){var t=G.get(this._iid).Emoji;this.id=e.id||0,this.name=e.name||"",this.url=e.url||"",this.emojis=e.emojis?e.emojis.map(function(e){return new t(e)}):[]},e}(),fr=function(){function e(e){this.key=null,this.url=null,e&&this._update(e)}return e.prototype._update=function(e){this.key=e.key,this.url=e.url},e}(),pr={},_r={},mr=new WeakMap,gr=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).channelType=Rt.CHANNEL_TYPE_OPEN,r.participantCount=0,mr.set(E(r),0),r.operators=[],e&&r._update(e),r}return _(n,[{key:"_update",value:function(e){var t=G.get(this._iid).User;e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&Array.isArray(e.operators)&&(this.operators=e.operators.map(function(e){return new t(e)}))}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"createParticipantListQuery",value:function(){return new(0,G.get(this._iid).ParticipantListQuery)({channelUrl:this.url})}},{key:"createMutedUserListQuery",value:function(){return new(0,G.get(this._iid).MutedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"createBannedUserListQuery",value:function(){return new(0,G.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"isOperator",value:function(e){return!!e&&this.isOperatorWithUserId(e.userId)}},{key:"isOperatorWithUserId",value:function(e){return this.operators.map(function(e){return e.userId}).indexOf(e)>-1}},{key:"refresh",value:function(e){return G.get(this._iid).OpenChannel.getChannelWithoutCache(this.url,e)}},{key:"enter",value:function(e){var t=this;return le(this._iid,function(e){var n=G.get(t._iid).Command.bEnter({channelUrl:t.url}),r=Ba.getInstance(t._iid);r.sendCommand(n,function(n,a){if(r.getErrorFirstCallback()){var i=[n,a];a=i[0],n=i[1]}a?(a=a?new j(a.message,a.code):null,e(a,null)):(G.get(t._iid).OpenChannel.enteredChannels[t.url]=t,Ae.of(t._iid).send({source:de.EVENT_CHANNEL_ENTER,payload:{channel:t}}),t.refresh(function(){return e(null,null)}))})},e)}},{key:"exit",value:function(e){var t=this;return le(this._iid,function(e){var n=G.get(t._iid),r=n.Command,a=n.FileMessageQueue,i=r.bExit({channelUrl:t.url}),s=Ba.getInstance(t._iid);s.sendCommand(i,function(n,r){if(s.getErrorFirstCallback()){var i=[n,r];r=i[0],n=i[1]}r?(r=r?new j(r.message,r.code):null,e(r,null)):(delete G.get(t._iid).OpenChannel.enteredChannels[t.url],a.delete(t.url),Ae.of(t._iid).send({source:de.EVENT_CHANNEL_EXIT,payload:{channel:t}}),e(null,null))})},e)}},{key:"updateChannel",value:function(){var e=this,t=_e.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=G.get(this._iid),a=r.OpenChannel,i=r.OpenChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,function(n){var r=t[0];r.channelUrl=e.url,r._validate()?w.get(e._iid).container.apiClient.updateOpenChannel(r,function(e,t){var r=null;e||(r=a.upsert(t)),n(e,r)}):n(_e.error,null)},n);if(3===t.length){var s=new i;return s.channelUrl=this.url,s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=this.operators.map(function(e){return e.userId}),this.updateChannel(s,n)}if(4===t.length){var o=new i;return o.channelUrl=this.url,o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2],Array.isArray(t[3])&&(o.operatorUserIds=t[3]),this.updateChannel(o,n)}if(5===t.length){var l=new i;return l.channelUrl=this.url,l.name=t[0],l.coverUrlOrImage=t[1],l.data=t[2],Array.isArray(t[3])&&(l.operatorUserIds=t[3]),l.customType=t[4],this.updateChannel(l,n)}return le(this._iid,function(e){return e(_e.error,null)},n)}},{key:"updateChannelWithOperatorUserIds",value:function(){var e=_e.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.updateChannel.apply(this,N(e).concat([t]));default:return le(this._iid,function(e){return e(_e.error,null)},t)}}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new _e({type:"string",optional:!0,defaultValue:""}),new _e({type:"callback"})]),o=O(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):w.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!1},function(e,t){r(e,null)})},r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!1},function(e,n){t(e,null)})},t)}},{key:"banUser",value:function(e,t,n){return this.banUserWithUserId(e?e.userId:null,t,n)}},{key:"banUserWithUserId",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){a?n(a,null):w.get(r._iid).container.apiClient.banUser({channelUrl:r.url,userId:e,description:null,seconds:t,isGroupChannel:!1},function(e,t){n(e,null)})},n)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!1},function(e,n){t(e,null)})},t)}},{key:"setLatestParticipantCount",value:function(e,t){var n=!1;return"number"==typeof e&&"number"==typeof t&&t>=mr.get(this)&&(mr.set(this,t),n=e!==this.participantCount,this.participantCount=e),n}},{key:"delete",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.deleteOpenChannel({channelUrl:t.url},function(n,r){n||(delete G.get(t._iid).OpenChannel.cachedChannels[t.url],G.get(t._iid).FileMessageQueue.delete(t.url)),e(n,r)})},e)}}],[{key:"cachedChannels",get:function(){return pr[this._iid]||(pr[this._iid]={}),pr[this._iid]}},{key:"enteredChannels",get:function(){return _r[this._iid]||(_r[this._iid]={}),_r[this._iid]}},{key:"buildFromSerializedData",value:function(e){var t=G.get(this._iid),n=t.User,r=t.OpenChannel,a=Ot.deserialize(e);return new r({channel_url:a.url,name:a.name,cover_url:a.coverUrl,data:a.data,custom_type:a.customType,created_at:a.createdAt/1e3,freeze:a.isFrozen,is_ephemeral:a.isEphemeral,participant_count:a.participantCount,operators:a.operators.map(function(e){return n.objectify(e)})})}},{key:"getChannel",value:function(e,t){var n=null,r=null,a=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"string",optional:!0,nullable:!0,defaultValue:null}),new _e({type:"callback"})]),i=O(a,4);if(n=i[0],e=i[1],r=i[2],t=i[3],n)return le(this._iid,function(e){e(n,null)},t);var s=G.get(this._iid),o=s.OpenChannel;return o.cachedChannels[e]?le(this._iid,function(t){t(null,o.cachedChannels[e])},t):o.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,r=null,a=null,i=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"string",optional:!0,nullable:!0,defaultValue:null}),new _e({type:"callback"})]),s=O(i,4);return r=s[0],e=s[1],a=s[2],t=s[3],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.getOpenChannel({channelUrl:e,internalCall:a},function(e,r){var a=null;e||(a=G.get(n._iid).OpenChannel.upsert(r)),t(e,a)})},t)}},{key:"createChannel",value:function(){var e=this,t=_e.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=G.get(this._iid),a=r.OpenChannel,i=r.OpenChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,function(n){var r=t[0];r._validate()?w.get(e._iid).container.apiClient.createOpenChannel(r,function(t,r){var a=null;t||(a=G.get(e._iid).OpenChannel.upsert(r)),n(t,a)}):n(_e.error,null)},n);var s=new i;switch(t.length){case 0:break;case 1:s.name=t[0];break;case 2:s.name=t[0],s.coverUrlOrImage=t[1];break;case 3:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2];break;case 4:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=t[3];break;case 5:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=t[3],s.customType=t[4];break;default:return le(this._iid,function(e){return e(_e.error,null)},n)}return n?a.createChannel(s,n):a.createChannel(s)}},{key:"createChannelWithOperatorUserIds",value:function(){var e=_e.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.createChannel.apply(this,N(e).concat([t]));default:return le(this._iid,function(e){return e(_e.error,null)},t)}}},{key:"upsert",value:function(e){var t=new(0,G.get(this._iid).OpenChannel)(e);return this.cachedChannels.hasOwnProperty(t.url)?this.cachedChannels[t.url].update(e):this.cachedChannels[t.url]=t,this.cachedChannels[t.url]}},{key:"removeCachedChannel",value:function(e){this.cachedChannels[e]&&delete this.cachedChannels[e],G.get(this._iid).FileMessageQueue.delete(e)}},{key:"clearCache",value:function(){pr[this._iid]={},G.get(this._iid).FileMessageQueue.clear()}},{key:"clearEnteredChannels",value:function(){_r[this._iid]={}}},{key:"createOpenChannelListQuery",value:function(){return new(0,G.get(this._iid).OpenChannelListQuery)}}]),n}(Rt),vr="default",yr=function(){function e(e){this.name=vr,this.volume=1,e&&this._update(e)}return e.prototype._update=function(e){e.hasOwnProperty("name")&&(this.name=e.name),e.hasOwnProperty("volume")&&(this.volume=e.volume)},e.objectify=function(e){var t=e.name,n=void 0===t?vr:t,r=e.volume;return{name:n,volume:void 0===r?1:r}},e.prototype.serialize=function(){return Ot.serialize(this)},e}(),Er=function(){function e(e,t){void 0===t&&(t=[]),this.key=e,this.value=Array.isArray(t)&&t.every(function(e){return"string"==typeof e})?t:[]}return e.prototype.encode=function(){return{key:this.key,value:this.value||[]}},e}(),br=new WeakMap,Cr=function(){function e(t){f(this,e),this._mentionType=e.MentionType.USERS,this._mentionedUserIds=[],this._cachedMentionedUsers=[],this._cachedMentionedUserIds=[],this._metaArrays=[],br.set(this,null),this._parentMessageId=null,this.data=null,this.customType=null,this.pushNotificationDeliveryOption=null,this.appleCriticalAlertOptions=null,this.isReplyToChannel=!1,this.mentionedMessageTemplate=null,t&&this._update(t)}return _(e,[{key:"mentionType",get:function(){return this._mentionType},set:function(e){var t=G.get(this._iid).BaseMessageParams;Object.keys(t.MentionType).map(function(e){return t.MentionType[e]}).indexOf(e)>-1&&(this._mentionType=e)}},{key:"mentionedUserIds",get:function(){return this._cachedMentionedUserIds},set:function(e){if(Array.isArray(e))for(var t=Ba.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if("string"!=typeof r){this._cachedMentionedUserIds=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r)<0&&t.currentUser&&t.currentUser.userId!==r&&(this._cachedMentionedUserIds.push(r),this._mentionedUserIds.push(r))}}},{key:"mentionedUsers",get:function(){return this._cachedMentionedUsers},set:function(e){if(Array.isArray(e))for(var t=Ba.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if(!r.hasOwnProperty("userId")){this._cachedMentionedUsers=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r.userId)<0&&t.currentUser&&t.currentUser.userId!==r.userId&&(this._cachedMentionedUsers.push(r),this._mentionedUserIds.push(r.userId))}}},{key:"metaArrayKeys",get:function(){return this._metaArrays.map(function(e){return e.key})},set:function(e){var t=G.get(this._iid).MessageMetaArray,n={};if(Array.isArray(e)){this._metaArrays=[];for(var r=0;r<e.length;r++)"string"!=typeof e[r]||n[e[r]]||(n[e[r]]=!0,this._metaArrays.push(new t(e[r])))}}},{key:"metaArrays",get:function(){return this._metaArrays},set:function(e){var t=G.get(this._iid).MessageMetaArray;if(Array.isArray(e)){this._metaArrays=[];for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof t){var a,i=this._metaArrays.map(function(e){return e.key}).indexOf(r.key);i<0?this._metaArrays.push(r):(a=this._metaArrays[i].value).push.apply(a,N(r.value))}}}}},{key:"rootMessageId",get:function(){return br.get(this)}},{key:"parentMessageId",get:function(){return this._parentMessageId},set:function(e){br.set(this,e),this._parentMessageId=e}},{key:"_serialize",value:function(e){return Ot.serialize(this,function(t){t.hasOwnProperty("_mentionType")&&(t.mentionType=t._mentionType,delete t._mentionType),t.hasOwnProperty("_mentionedUserIds")&&(t.mentionedUserIds=t._mentionedUserIds,delete t._mentionedUserIds),t.hasOwnProperty("_cachedMentionedUsers")&&(t.cachedMentionedUsers=t._cachedMentionedUsers,delete t._cachedMentionedUsers),t.hasOwnProperty("_cachedMentionedUserIds")&&(t.cachedMentionedUserIds=t._cachedMentionedUserIds,delete t._cachedMentionedUserIds),t.hasOwnProperty("_metaArrays")&&(t.metaArrays=t._metaArrays,delete t._metaArrays),t.hasOwnProperty("_parentMessageId")&&(t.parentMessageId=t._parentMessageId,delete t._parentMessageId),e&&e(t)})}},{key:"_update",value:function(e){e.hasOwnProperty("mention_type")&&(this._mentionType=e.mention_type),e.hasOwnProperty("mentioned_user_ids")&&(this._mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("mentioned_message_template")&&(this.mentionedMessageTemplate=e.mentioned_message_template),e.hasOwnProperty("cached_mentioned_users")&&(this._cachedMentionedUsers=e.cached_mentioned_users),e.hasOwnProperty("cached_mentioned_user_ids")&&(this._cachedMentionedUserIds=e.cached_mentioned_user_ids),e.hasOwnProperty("meta_arrays")&&(this._metaArrays=e.meta_arrays.map(function(e){return new Er(e.key,e.value)})),e.hasOwnProperty("parent_message_id")&&(this.parentMessageId=e.parent_message_id),e.hasOwnProperty("data")&&(this.data=e.data),e.hasOwnProperty("custom_type")&&(this.customType=e.custom_type),e.hasOwnProperty("push_notification_delivery_option")&&(this.pushNotificationDeliveryOption=e.push_notification_delivery_option),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new yr(e.apple_critical_alert_options)),e.hasOwnProperty("is_reply_to_channel")&&(this.isReplyToChannel=e.is_reply_to_channel)}},{key:"_validate",value:function(){var e=G.get(this._iid),t=e.BaseMessageParams,n=e.MessageMetaArray,r=br.get(this);return Object.keys(t.MentionType).map(function(e){return t.MentionType[e]}).indexOf(this.mentionType)>-1&&this._mentionedUserIds.every(function(e){return"string"==typeof e})&&("string"==typeof this.mentionedMessageTemplate||null===this.mentionedMessageTemplate)&&Array.isArray(this._metaArrays)&&this._metaArrays.every(function(e){return e instanceof n})&&("number"==typeof r||null===r)&&("number"==typeof this._parentMessageId||null===this._parentMessageId)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&(null===this.pushNotificationDeliveryOption||Object.keys(t.PushNotificationDeliveryOption).map(function(e){return t.PushNotificationDeliveryOption[e]}).indexOf(this.pushNotificationDeliveryOption)>-1)&&(null===this.appleCriticalAlertOptions||this.appleCriticalAlertOptions instanceof yr)&&"boolean"==typeof this.isReplyToChannel}}],[{key:"_objectify",value:function(t){var n=t.mentionType,r=void 0===n?e.MentionType.USERS:n,a=t.mentionedUserIds,i=void 0===a?[]:a,s=t.mentionedMessageTemplate,o=void 0===s?null:s,l=t.cachedMentionedUsers,c=void 0===l?[]:l,u=t.cachedMentionedUserIds,d=void 0===u?[]:u,h=t.metaArrays,f=void 0===h?[]:h,p=t.parentMessageId,_=void 0===p?null:p,m=t.pushNotificationDeliveryOption,g=void 0===m?null:m,v=t.appleCriticalAlertOptions,y=void 0===v?null:v,E=t.isReplyToChannel;return{mention_type:r,mentioned_user_ids:i,mentioned_message_template:o,cached_mentioned_users:c,cached_mentioned_user_ids:d,meta_arrays:f,parent_message_id:_,push_notification_delivery_option:g,apple_critical_alert_options:y,is_reply_to_channel:void 0!==E&&E}}},{key:"MentionType",get:function(){return{USERS:"users",CHANNEL:"channel"}}},{key:"PushNotificationDeliveryOption",get:function(){return{DEFAULT:"default",SUPPRESS:"suppress"}}}]),e}(),Or=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).message=null,r.pollId=void 0,r._translationTargetLanguages=[],e&&r._update(e),r}return _(n,[{key:"serialize",value:function(){return C(v(n.prototype),"_serialize",this).call(this,function(e){e.hasOwnProperty("_translationTargetLanguages")&&(e.translationTargetLanguages=e._translationTargetLanguages,delete e._translationTargetLanguages)})}},{key:"targetLanguages",get:function(){return this.translationTargetLanguages},set:function(e){this.translationTargetLanguages=e}},{key:"translationTargetLanguages",get:function(){return this._translationTargetLanguages},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("string"!=typeof e[t])return void(this._translationTargetLanguages=[]);this._translationTargetLanguages=e}}},{key:"_update",value:function(e){C(v(n.prototype),"_update",this).call(this,e),e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("translation_target_languages")&&(this._translationTargetLanguages=e.translation_target_languages),e.hasOwnProperty("poll_id")&&(this.pollId=e.poll_id)}},{key:"_validate",value:function(){return C(v(n.prototype),"_validate",this).call(this)&&("string"==typeof this.message||null===this.message)&&Array.isArray(this.translationTargetLanguages)&&this.translationTargetLanguages.every(function(e){return"string"==typeof e})&&("number"==typeof this.pollId||null===this.pollId||void 0===this.pollId)}}],[{key:"objectify",value:function(e){var t=e.message,n=void 0===t?null:t,r=e.data,a=void 0===r?null:r,i=e.customType,s=void 0===i?null:i,o=e.translationTargetLanguages,l=void 0===o?[]:o,c=e.pollId,u=void 0===c?void 0:c;return d(d({},Cr._objectify(e)),{},{message:n,data:a,custom_type:s,translation_target_languages:l,poll_id:u})}}]),n}(Cr),Nr=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).messageType=At.MESSAGE_TYPE_USER,r.message=null,r._sender=null,r.translations={},r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r.plugins=[],r.poll=null,r._messageParams=null,e&&r._update(e),r}return _(n,[{key:"applyPollUpdateEvent",value:function(e){var t=G.get(this._iid),n=t.Poll,r=t.PollUpdateEvent,a=null,i=_e.parse(arguments,[new _e({type:r,constraint:function(e){return Object.values(n.Status).includes(e.status)}})]),s=O(i,2);if(a=s[0],e=s[1],!a&&this.poll&&this.poll.id===e.poll.id){if(e.status===n.Status.REMOVED)return this.poll=new n(n.objectify(this.poll)),this.poll.details.status=e.status,!0;if(this.poll.details.updatedAt<e.poll.details.updatedAt)return this.poll=e.poll,!0}return!1}},{key:"applyPollVoteEvent",value:function(e){var t=G.get(this._iid),n=t.PollVoteEvent,r=null,a=_e.parse(arguments,[new _e({type:n})]),i=O(a,2);if(r=i[0],e=i[1],!r&&this.poll&&this.poll.id===e.pollId){var s,o=I(this.poll.details.options);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l._applyEvent(e))return!0}}catch(r){o.e(r)}finally{o.f()}}return!1}},{key:"_update",value:function(e){var t=Ba.getInstance(this._iid),n=G.get(this._iid),r=n.Sender,a=n.Plugin,i=n.Poll;this.message=String(e.message),this._sender=new r(e.user),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.translations=e.hasOwnProperty("translations")?e.translations:{},this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),this.plugins=[],e.hasOwnProperty("plugins")&&Array.isArray(e.plugins)&&(this.plugins=e.plugins.map(function(e){return new a(e)})),this.poll=null,e.hasOwnProperty("poll")&&(this.poll=new i(e.poll)),e.hasOwnProperty("message_params")&&(this._messageParams=new Or(e.message_params))}},{key:"sender",get:function(){var e=Ba.getInstance(this._iid),t=G.get(this._iid).GroupChannel;if(this._sender&&e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),ie.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Ba.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&ie.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return C(v(n.prototype),"serialize",this).call(this,function(t){e._messageParams&&(t.messageParams=e._messageParams.serialize())})}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){return G.get(this._iid).UserMessage.buildFromSerializedData(this.serialize())}},{key:"_isSentByMe",value:function(){var e=Ba.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.SUCCEEDED&&0===this.updatedAt&&this._sender&&this._sender.userId===e.currentUser.userId}}],[{key:"objectify",value:function(e){var t=Ba.getInstance(this._iid),n=G.get(this._iid),r=n.BaseChannel,a=n.BaseMessageParams,i=n.Sender,s=n.User,o=n.UserMessage,l=n.FileMessage,c=n.AdminMessage,u=n.ThreadInfo,h=n.OGMetaData,f=n.Plugin,p=n.AppleCriticalAlertOptions,_=n.Poll,m=n.UserMessageParams,g=e.messageId,v=e.messageType,y=void 0===v?At.MESSAGE_TYPE_BASE:v,E=e.reqId,b=void 0===E?"":E,C=e.user,O=e.channel,N=void 0===O?null:O,S=e.channelUrl,A=void 0===S?"":S,I=e.channelType,k=void 0===I?r.CHANNEL_TYPE_OPEN:I,T=e.message,w=e.data,R=void 0===w?"":w,M=e.customType,L=void 0===M?"":M,P=e.mentionType,D=void 0===P?a.MentionType.USERS:P,U=e.mentionedUsers,x=void 0===U?[]:U,j=e.mentionedUserIds,F=void 0===j?[]:j,H=e.mentionedMessageTemplate,B=void 0===H?null:H,V=e.requestedMentionUserIds,z=void 0===V?[]:V,q=e.reactions,K=void 0===q?[]:q,Y=e.metaArrays,W=void 0===Y?[]:Y,Q=e.rootMessageId,J=void 0===Q?0:Q,X=e.parentMessageId,$=void 0===X?0:X,Z=e.parentMessageText,ee=void 0===Z?"":Z,te=e.threadInfo,ne=void 0===te?null:te,re=e.isReplyToChannel,ae=void 0!==re&&re,ie=e.parentMessage,se=void 0===ie?null:ie,oe=e.translations,le=void 0===oe?{}:oe,ce=e.sendingStatus,ue=e.errorCode,de=void 0===ue?0:ue,he=e.silent,fe=void 0!==he&&he,pe=e.isGlobalBlocked,_e=void 0!==pe&&pe,me=e.messageSurvivalSeconds,ge=void 0===me?-1:me,ve=e.ogMetaData,ye=void 0===ve?null:ve,Ee=e.isOperatorMessage,be=void 0!==Ee&&Ee,Ce=e.plugins,Oe=void 0===Ce?[]:Ce,Ne=e.appleCriticalAlertOptions,Se=e.poll,Ae=void 0===Se?null:Se,Ie=e.createdAt,ke=e.updatedAt,Te=void 0===ke?0:ke,we=e.messageParams,Re=void 0===we?null:we,Me=e.isAutoResendRegistered,Le=void 0!==Me&&Me,Pe={};switch(Pe.req_id=b,Pe.msg_id=g,y){case At.MESSAGE_TYPE_USER:Pe.type="MESG";break;case At.MESSAGE_TYPE_FILE:Pe.type="FILE";break;case At.MESSAGE_TYPE_ADMIN:Pe.type="ADMM"}if(Pe.user=i.objectify(d({},C)),Pe.channel_url=N?N.url:A,Pe.channel_type=N?N.channelType:k,Pe.message=T,Pe.data=R,Pe.custom_type=L,Pe.translations=le,Pe.is_global_block=!!_e,Pe.ts=Ie,Pe.updated_at=Te,Pe.mention_type=D,Pe.mentioned_users=x.map(function(e){return s.objectify(e)}),Pe.mentioned_user_ids=F,Pe.mentioned_message_template=B,Pe.requested_mention_user_ids=z,Pe.reactions=K.map(function(e){return e.serialize()}),Pe.metaarray={},W.forEach(function(e){var t=e.key;Pe.metaarray[t]=e.value}),Pe.metaarray_key_order=W.map(function(e){return e.key}),Pe.root_message_id=J,Pe.parent_message_id=$,Pe.parent_message_text=ee,ne&&(Pe.thread_info=u.objectify(ne)),Pe.is_reply_to_channel=ae,se)switch(se.messageType){case At.MESSAGE_TYPE_USER:Pe.parent_message_info=o._objectifySerializedData(se);break;case At.MESSAGE_TYPE_FILE:Pe.parent_message_info=l._objectifySerializedData(se);break;case At.MESSAGE_TYPE_ADMIN:Pe.parent_message_info=c._objectifySerializedData(se)}return Pe.sending_status=g>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,ce&&(Pe.sending_status=ce),Pe.silent=!!fe,Pe.error_code=de,Pe.message_survival_seconds=ge,ye&&(Pe.og_tag=h.objectify(ye)),Pe.is_op_msg=!!be,Pe.plugins=Oe.map(function(e){return f.objectify(e)}),Ae&&(Pe.poll=_.objectify(Ae)),Ne&&(Pe.apple_critical_alert_options=p.objectify(Ne)),Re&&(Pe.message_params=m.objectify(Re)),Pe.is_auto_resend_registered=Le,Pe}},{key:"build",value:function(e,t,n,r,a,i,s,o,l,c,u,d,h,f,p,_,m,g,v,y,E,b,C,O,N,S,A,I,k,T,w){return this.objectify({messageId:t,reqId:e,user:n,channel:r,message:a,data:i,customType:s,mentionType:f,mentionedUsers:p,mentionedUserIds:y,mentionedMessageTemplate:E,requestedMentionUserIds:C,reactions:h,metaArrays:d,rootMessageId:_,parentMessageId:m,parentMessageText:g,threadInfo:v,translations:o,sendingStatus:b,errorCode:O,isGlobalBlocked:l,messageSurvivalSeconds:N,ogMetaData:S,isOperatorMessage:A,plugins:I,appleCriticalAlertOptions:k,poll:T,createdAt:c,updatedAt:u,messageParams:w})}},{key:"buildFromSerializedData",value:function(e){var t=G.get(this._iid).UserMessage,n=Ot.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return G.get(this._iid).UserMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,messageParams:e.messageParams?new Or(Or.objectify(e.messageParams)):null}))}}]),n}(At),Sr=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).fileName=null,r.mimeType=null,r.fileSize=null,r._isUpdate=!1,r._file=null,r._fileType=null,r._fileUrl=null,r._thumbnailSizes=[],e&&r._update(e),r}return _(n,[{key:"serialize",value:function(){return C(v(n.prototype),"_serialize",this).call(this,function(e){e.hasOwnProperty("_isUpdate")&&(e.isUpdate=e._isUpdate,delete e._isUpdate),e.hasOwnProperty("_file")&&(e.file=e._file,delete e._file),e.hasOwnProperty("_fileType")&&(e.fileType=e._fileType,delete e._fileType),e.hasOwnProperty("_fileUrl")&&(e.fileUrl=e._fileUrl,delete e._fileUrl),e.hasOwnProperty("_thumbnailSizes")&&(e.thumbnailSizes=e._thumbnailSizes,delete e._thumbnailSizes)})}},{key:"file",get:function(){return this._file},set:function(e){ie.isFile(e)&&(this._fileUrl=null,this._file=e,se.isFile(e)?this._fileType=x.FILE:se.isBlob(e)?this._fileType=x.BLOB:se.isFileLikeObject(e)?this._fileType=x.BLOB_LIKE_OBJECT:"string"==typeof e&&(this._fileType=x.URL))}},{key:"fileType",get:function(){return this._fileType}},{key:"fileUrl",get:function(){return this._fileUrl},set:function(e){"string"==typeof e&&(this._fileUrl=e,this._file=null)}},{key:"thumbnailSizes",get:function(){return this._thumbnailSizes},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"!==h(e[t])||"number"!=typeof e[t].maxWidth||"number"!=typeof e[t].maxHeight)return void(this._thumbnailSizes=[]);this._thumbnailSizes=e}}},{key:"_update",value:function(e){C(v(n.prototype),"_update",this).call(this,e),e.hasOwnProperty("file_name")&&(this.fileName=e.file_name),e.hasOwnProperty("mime_type")&&(this.mimeType=e.mime_type),e.hasOwnProperty("file_size")&&(this.fileSize=e.file_size),e.hasOwnProperty("is_update")&&(this._isUpdate=e.is_update),e.hasOwnProperty("file")&&(this._file=e.file),e.hasOwnProperty("file_type")&&(this._fileType=e.file_type),e.hasOwnProperty("file_url")&&(this._fileUrl=e.file_url),e.hasOwnProperty("thumbnail_sizes")&&(this._thumbnailSizes=e.thumbnail_sizes)}},{key:"_validate",value:function(){return C(v(n.prototype),"_validate",this).call(this)&&(this._isUpdate||ie.isFile(this.file)||"string"==typeof this.fileUrl)&&("string"==typeof this.fileName||null===this.fileName)&&("string"==typeof this.mimeType||null===this.mimeType)&&("number"==typeof this.fileSize||null===this.fileSize)&&(null===this._thumbnailSizes||this._thumbnailSizes.every(function(e){return"object"===h(e)&&e.maxWidth>0&&e.maxHeight>0}))}}],[{key:"objectify",value:function(e){var t=e.fileName,n=void 0===t?null:t,r=e.mimeType,a=void 0===r?null:r,i=e.fileSize,s=void 0===i?null:i,o=e.data,l=void 0===o?null:o,c=e.customType,u=void 0===c?null:c,h=e.isUpdate,f=void 0!==h&&h,p=e.file,_=void 0===p?null:p,m=e.fileType,g=void 0===m?null:m,v=e.fileUrl,y=void 0===v?null:v,E=e.thumbnailSizes,b=void 0===E?[]:E;return d(d({},Cr._objectify(e)),{},{file_name:n,mime_type:a,file_size:s,data:l,custom_type:u,is_update:f,file:_,file_type:g,file_url:y,thumbnail_sizes:b})}}]),n}(Cr),Ar=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).messageType=At.MESSAGE_TYPE_FILE,r.plainUrl=null,r.name="File",r.size=0,r.type=null,r.thumbnails=[],r._sender=null,r.requireAuth=null,r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r._messageParams=null,e&&r._update(e),r}return _(n,[{key:"_update",value:function(e){var t=Ba.getInstance(this._iid),n=w.get(this._iid).container.auth,r=G.get(this._iid).Sender;if(this._sender=new r(e.user),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,e.hasOwnProperty("url")&&(this.plainUrl=e.url.split("?auth=")[0]),this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=e.type,e.hasOwnProperty("custom")&&(this.data=e.custom),e.hasOwnProperty("file")){var a=e.file;a.hasOwnProperty("url")&&(this.plainUrl=a.url),a.hasOwnProperty("name")&&(this.name=a.name),a.hasOwnProperty("size")&&(this.size=a.size),a.hasOwnProperty("type")&&(this.type=a.type),a.hasOwnProperty("custom")&&(this.data=a.custom)}if(Object.defineProperty(this,"url",{value:this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(n.eKey):this.plainUrl,configurable:!0,writable:!1}),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth)for(var i=0;i<this.thumbnails.length;i++)this.thumbnails[i].plainUrl=String(this.thumbnails[i].url).split("?auth=")[0],this.thumbnails[i].url=this.requireAuth?"".concat(this.thumbnails[i].plainUrl,"?auth=").concat(n.eKey):this.thumbnails[i].plainUrl;this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),e.hasOwnProperty("message_params")&&(this._messageParams=new Sr(e.message_params))}},{key:"sender",get:function(){var e=Ba.getInstance(this._iid),t=G.get(this._iid).GroupChannel;if(this._sender&&e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),ie.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Ba.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&ie.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return C(v(n.prototype),"serialize",this).call(this,function(t){e._messageParams&&(t.messageParams=e._messageParams.serialize())})}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){var e=G.get(this._iid).FileMessage.buildFromSerializedData(this.serialize());if(this._messageParams&&e._messageParams){var t=this._messageParams.file;t&&se.isBlob(t)&&(e._messageParams.file=t.slice())}return e}},{key:"_isSentByMe",value:function(){var e=Ba.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.SUCCEEDED&&0===this.updatedAt&&this._sender&&this._sender.userId===e.currentUser.userId}}],[{key:"objectify",value:function(e){var t=Ba.getInstance(this._iid),n=G.get(this._iid),r=n.BaseChannel,a=n.BaseMessageParams,i=n.Sender,s=n.User,o=n.UserMessage,l=n.FileMessage,c=n.AdminMessage,u=n.ThreadInfo,h=n.OGMetaData,f=n.FileMessageParams,p=n.AppleCriticalAlertOptions,_=e.messageId,m=e.messageType,g=void 0===m?At.MESSAGE_TYPE_BASE:m,v=e.reqId,y=void 0===v?"":v,E=e.user,b=void 0===E?{}:E,C=e.channel,O=e.plainUrl,N=e.name,S=void 0===N?null:N,A=e.type,I=e.size,k=void 0===I?0:I,T=e.data,w=void 0===T?"":T,R=e.customType,M=void 0===R?"":R,L=e.mentionType,P=void 0===L?a.MentionType.USERS:L,D=e.mentionedUsers,U=void 0===D?[]:D,x=e.mentionedUserIds,j=void 0===x?[]:x,F=e.requestedMentionUserIds,H=void 0===F?[]:F,B=e.reactions,V=void 0===B?[]:B,z=e.metaArrays,q=void 0===z?[]:z,K=e.rootMessageId,Y=void 0===K?0:K,W=e.parentMessageId,Q=void 0===W?0:W,J=e.parentMessageText,X=void 0===J?"":J,$=e.threadInfo,Z=void 0===$?null:$,ee=e.isReplyToChannel,te=void 0!==ee&&ee,ne=e.parentMessage,re=void 0===ne?null:ne,ae=e.thumbnails,ie=void 0===ae?[]:ae,se=e.requireAuth,oe=void 0!==se&&se,le=e.sendingStatus,ce=e.errorCode,ue=void 0===ce?0:ce,de=e.silent,he=void 0!==de&&de,fe=e.isGlobalBlocked,pe=void 0!==fe&&fe,_e=e.messageSurvivalSeconds,me=void 0===_e?-1:_e,ge=e.ogMetaData,ve=void 0===ge?null:ge,ye=e.isOperatorMessage,Ee=void 0!==ye&&ye,be=e.appleCriticalAlertOptions,Ce=e.createdAt,Oe=e.updatedAt,Ne=void 0===Oe?0:Oe,Se=e.messageParams,Ae=void 0===Se?null:Se,Ie=e.isAutoResendRegistered,ke=void 0!==Ie&&Ie,Te={};switch(Te.req_id=y,Te.msg_id=_,g){case At.MESSAGE_TYPE_USER:Te.type="MESG";break;case At.MESSAGE_TYPE_FILE:Te.type="FILE";break;case At.MESSAGE_TYPE_ADMIN:Te.type="ADMM"}Te.user=i.objectify(d({},b)),Te.channel_url=C.url,Te.channel_type=C.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,Te.url=O,Te.name=S,Te.type=A,Te.size=k,Te.custom=w,Te.custom_type=M,Te.thumbnails=ie,Te.require_auth=oe,Te.is_global_block=!!pe,Te.ts=Ce,Te.updated_at=Ne,Te.mention_type=P,Te.mentioned_users=U.map(function(e){return s.objectify(e)}),Te.mentioned_user_ids=j,Te.requested_mention_user_ids=H,Te.reactions=V.map(function(e){return e.serialize()}),Te.metaarray={};for(var we=0;we<q.length;we++){var Re=q[we].key;Te.metaarray[Re]=q[we].value}if(Te.metaarray_key_order=q.map(function(e){return e.key}),Te.root_message_id=Y,Te.parent_message_id=Q,Te.parent_message_text=X,Z&&(Te.thread_info=u.objectify(Z)),Te.is_reply_to_channel=te,re)switch(re.messageType){case r.MESSAGE_TYPE_USER:Te.parent_message_info=o._objectifySerializedData(re);break;case r.MESSAGE_TYPE_FILE:Te.parent_message_info=l._objectifySerializedData(re);break;case r.MESSAGE_TYPE_ADMIN:Te.parent_message_info=c._objectifySerializedData(re)}return Te.sending_status=_>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,le&&(Te.sending_status=le),Te.silent=!!he,Te.error_code=ue,Te.message_survival_seconds=me,ve&&(Te.og_tag=h.objectify(ve)),Te.is_op_msg=!!Ee,be&&(Te.apple_critical_alert_options=p.objectify(be)),Ae&&(Te.message_params=f.objectify(Ae)),Te.is_auto_resend_registered=ke,Te}},{key:"build",value:function(e,t,n,r,a,i,s,o,l,c,u,d,h,f,p,_,m,g,v,y,E,b,C,O,N,S,A,I,k,T,w,R){return this.objectify({messageId:t,reqId:e,user:n,channel:r,plainUrl:a,name:i,type:s,size:o,data:l,customType:c,mentionType:g,mentionedUsers:v,mentionedUserIds:O,requestedMentionUserIds:S,reactions:m,metaArrays:_,rootMessageId:y,parentMessageId:E,parentMessageText:b,threadInfo:C,thumbnails:h,requireAuth:f,sendingStatus:N,errorCode:A,isGlobalBlocked:u,messageSurvivalSeconds:I,ogMetaData:k,isOperatorMessage:T,appleCriticalAlertOptions:w,createdAt:d,updatedAt:p,messageParams:R})}},{key:"buildFromSerializedData",value:function(e){var t=G.get(this._iid).FileMessage,n=Ot.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return G.get(this._iid).FileMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,messageParams:e.messageParams?new Sr(Sr.objectify(e.messageParams)):null}))}}]),n}(At),Ir=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).messageType=At.MESSAGE_TYPE_ADMIN,r.message="",r.translations={},e&&r._update(e),r}return _(n,[{key:"_update",value:function(e){this.message=String(e.message),this.translations=e.hasOwnProperty("translations")?e.translations:{}}}],[{key:"objectify",value:function(e){var t=G.get(this._iid),n=t.BaseChannel,r=t.BaseMessageParams,a=t.UserMessage,i=t.FileMessage,s=t.AdminMessage,o=t.User,l=t.ThreadInfo,c=t.OGMetaData,u=e.messageId,d=e.messageType,h=void 0===d?At.MESSAGE_TYPE_BASE:d,f=e.channel,p=e.message,_=e.data,m=void 0===_?"":_,g=e.customType,v=void 0===g?"":g,y=e.mentionType,E=void 0===y?r.MentionType.USERS:y,b=e.mentionedUsers,C=void 0===b?[]:b,O=e.mentionedMessageTemplate,N=void 0===O?null:O,S=e.reactions,A=void 0===S?[]:S,I=e.metaArrays,k=void 0===I?[]:I,T=e.rootMessageId,w=void 0===T?0:T,R=e.parentMessageId,M=void 0===R?0:R,L=e.parentMessageText,P=void 0===L?"":L,D=e.threadInfo,U=void 0===D?null:D,x=e.isReplyToChannel,j=void 0!==x&&x,F=e.parentMessage,H=void 0===F?null:F,B=e.translations,V=void 0===B?{}:B,z=e.silent,q=void 0!==z&&z,K=e.ogMetaData,Y=void 0===K?null:K,W=e.createdAt,Q=e.updatedAt,J=void 0===Q?0:Q,X={msg_id:u,channel_url:f.url,channel_type:f.channelType===n.CHANNEL_TYPE_OPEN?n.CHANNEL_TYPE_OPEN:n.CHANNEL_TYPE_GROUP,message:p,data:m,custom_type:v,silent:q,ts:W,updated_at:J};switch(h){case At.MESSAGE_TYPE_USER:X.type="MESG";break;case At.MESSAGE_TYPE_FILE:X.type="FILE";break;case At.MESSAGE_TYPE_ADMIN:X.type="ADMM"}X.translations=V,X.mention_type=E,X.mentioned_users=C.map(function(e){return o.objectify(e)}),X.mentioned_message_template=N,X.reactions=A.map(function(e){return e.serialize()}),X.metaarray={};for(var $=0;$<k.length;$++){var Z=k[$].key;X.metaarray[Z]=k[$].value}if(X.metaarray_key_order=k.map(function(e){return e.key}),X.root_message_id=w,X.parent_message_id=M,X.parent_message_text=P,U&&(X.thread_info=l.objectify(U)),X.is_reply_to_channel=j,H)switch(H.messageType){case n.MESSAGE_TYPE_USER:X.parent_message_info=a._objectifySerializedData(H);break;case n.MESSAGE_TYPE_FILE:X.parent_message_info=i._objectifySerializedData(H);break;case n.MESSAGE_TYPE_ADMIN:X.parent_message_info=s._objectifySerializedData(H)}return Y&&(X.og_tag=c.objectify(Y)),X}},{key:"build",value:function(e,t,n,r,a,i,s,o,l,c,u,d,h,f,p,_,m,g){return this.objectify({messageId:e,channel:t,message:n,data:r,customType:a,mentionType:u,mentionedUsers:d,mentionedMessageTemplate:h,reactions:c,metaArrays:l,rootMessageId:f,parentMessageId:p,parentMessageText:_,threadInfo:m,translations:i,ogMetaData:g,createdAt:s,updatedAt:o})}},{key:"buildFromSerializedData",value:function(e){var t=G.get(this._iid).AdminMessage,n=Ot.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return G.get(this._iid).AdminMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType}}))}}]),n}(At),kr=function(){function e(t){f(this,e);var n=G.get(this._iid),r=n.BaseMessage,a=n.BaseMessageParams;this.scheduledId=0,this.scheduledDateTimeString="",this.scheduledTimezone="",this.status=e.Status.SCHEDULED,this.createdAt=0,this.updatedAt=0,this._messageType=r.MESSAGE_TYPE_BASE,this._sender=null,this._channelType="",this.channelUrl="",this.message="",this.customType="",this.data="",this.metaArrays=[],this.mentionType=a.MentionType.USERS,this.mentionedUsers=[],this.pushNotificationDeliveryOption=a.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=[],this.errorMessage="",this.errorCode=0,this.appleCriticalAlertOptions=null,t&&this._update(t)}return _(e,[{key:"sender",get:function(){var e=Ba.getInstance(this._iid),t=G.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),ie.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"_update",value:function(t){var n=this,r=G.get(this._iid),a=r.User,i=r.Sender,s=r.BaseMessageParams,o=r.MessageMetaArray,l=r.AppleCriticalAlertOptions;this.scheduledId=t.hasOwnProperty("scheduled_id")?parseInt(t.scheduled_id):0,this.scheduledDateTimeString=t.hasOwnProperty("scheduled_dt")?String(t.scheduled_dt):"",this.scheduledTimezone=t.hasOwnProperty("scheduled_timezone")?String(t.scheduled_timezone):"",this.status=t.hasOwnProperty("status")?String(t.status):"",this.createdAt=t.hasOwnProperty("created_at")?parseInt(t.created_at):0,this.updatedAt=t.hasOwnProperty("updated_at")?parseInt(t.updated_at):0,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this._channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):"",this._messageType=t.hasOwnProperty("type")?String(t.type):"",this._sender=t.hasOwnProperty("user")?new i(t.user):null,this.message=t.hasOwnProperty("message")?String(t.message):"",this.customType=t.hasOwnProperty("custom_type")?String(t.custom_type):"",this.data=t.hasOwnProperty("data")?String(t.data):"";var c=t.hasOwnProperty("metaarray")?t.metaarray:{},u=t.hasOwnProperty("metaarray_key_order")?t.metaarray_key_order:Object.keys(c).sort(function(e,t){return e.localeCompare(t)});this.metaArrays=[];for(var d=0;d<u.length;d++){var h=u[d];this.metaArrays.push(new o(h,c[h]||[]))}this.mentionType=t.hasOwnProperty("mention_type")?t.mention_type:s.MentionType.USERS,this.mentionedUsers=[],t.hasOwnProperty("mentioned_users")&&t.mentioned_users.forEach(function(e){var t=new a(e);n.mentionedUsers.push(t)}),this.pushNotificationDeliveryOption=t.hasOwnProperty("push_option")?t.push_option:s.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=t.hasOwnProperty("translation_target_langs")?t.translation_target_langs:[],this.status===e.Status.FAILED&&(t.hasOwnProperty("error")&&t.error.hasOwnProperty("message")&&(this.errorMessage=String(t.error.message)),t.hasOwnProperty("error")&&t.error.hasOwnProperty("code")&&(this.errorCode=parseInt(t.error.code))),t.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new l(t.apple_critical_alert_options))}},{key:"isOpenChannel",value:function(){var e=G.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=G.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_GROUP}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach(function(t){e[t.key]=t.value}),e},set:function(e){if("object"===h(e)&&e){var t=G.get(this._iid).MessageMetaArray,n=[];Object.keys(e).forEach(function(r){n.push(new t(r,e[r]))}),this.metaArrays=n}}}],[{key:"Status",get:function(){return{SCHEDULED:"scheduled",SENT:"sent",CANCELED:"canceled",FAILED:"failed"}}}]),e}(),Tr=function(){function e(){this.threadInfo=null,this.targetMessageId=0,this.channelUrl=null,this.channelType=null}return e.createFromJson=function(e){var t=G.get(this._iid),n=t.BaseChannel,r=t.ThreadInfo,a=e.thread_info,i=e.root_message_id,s=e.channel_url,o=e.channel_type;if(a&&"object"==typeof a&&("string"==typeof i||"number"==typeof i)&&"string"==typeof s&&"string"==typeof o&&[n.CHANNEL_TYPE_GROUP,n.CHANNEL_TYPE_OPEN].includes(o)){var l=new this;return l.threadInfo=new r(a),l.targetMessageId=parseInt(i+""),l.channelUrl=s,l.channelType=o,l}return null},e}(),wr=function(){function e(){f(this,e),this.poll=null,this.status=null}return _(e,null,[{key:"createFromJson",value:function(e){var t=G.get(this._iid).Poll,n=e.poll;if("object"===h(n)){var r=new this;return r.poll=new t(n),r.status=n.status,r}return null}}]),e}(),Rr=function(){function e(){f(this,e),this.pollId=null,this.updatedVoteCounts=null,this.votedAt=null}return _(e,null,[{key:"createFromJson",value:function(e){var t=e.poll_id,n=e.updated_vote_counts,r=e.ts;if("number"==typeof t&&Array.isArray(e.updated_vote_counts)&&"number"==typeof r){var a=new this;return a.pollId=t,a.updatedVoteCounts=n.map(function(e){return{optionId:e.option_id,voteCount:e.vote_count}}),a.votedAt=r,a}return null}}]),e}(),Mr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this.metaDataKeyFilter="",this.metaDataValuesFilter=[],this.nicknameStartsWithFilter=null,this._token=""}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)&&"string"==typeof t.metaDataKeyFilter&&Array.isArray(t.metaDataValuesFilter)&&!!t.metaDataKeyFilter==t.metaDataValuesFilter.length>0&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadUserList(d(d({},t),{},{token:t._token}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(_e.error,null)},e)}}]),e}(),Lr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._isOpenChannel=!1,this._channelUrl=null,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadBannedUserList(d(d({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).RestrictedUser,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.banned_list.map(function(e){var t=new i(e);return t.restrictionInfo.restrictionType=i.RestrictionType.BANNED,t})}t.isLoading=!1,e(n,a)})):e(null,[]):e(_e.error,null)},e)}}]),e}(),Pr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this._token=""}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadBlockedUserList(d(d({},t),{},{token:t._token}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(_e.error,null)},e)}}]),e}(),Dr=function(){function e(){f(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,this._token=""}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasMore?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadFriendList(d(d({},t),{},{token:t._token}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).User,s=String(r.next);t._token=s,t.hasMore=!!s,a=r.users.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(_e.error,null)},e)}}]),e}(),Ur=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=e.ORDER_LATEST_LAST_MESSAGE,this._token="",this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:e.QueryType.AND},this._userIdsExactFilter=[],this._userIdsIncludeFilter=[],this._userIdsIncludeFilterQueryType=e.QueryType.AND,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=or.MemberStateFilter.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=or.SuperChannelFilter.ALL,this.publicChannelFilter=or.PublicChannelFilter.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=or.UnreadChannelFilter.ALL,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.hiddenChannelFilter=or.HiddenChannelFilter.UNHIDDEN,this.includeFrozen=!0,this.includeMetaData=!0}return _(e,[{key:"userIdsExactFilter",get:function(){return this._userIdsExactFilter},set:function(e){Array.isArray(e)&&(this._userIdsExactFilter=e,this._userIdsIncludeFilter=[],this._userIdsFilter.userIds=this._userIdsExactFilter,this._userIdsFilter.includeMode=!1)}},{key:"userIdsIncludeFilter",get:function(){return this._userIdsIncludeFilter},set:function(e){Array.isArray(e)&&(this._userIdsIncludeFilter=e,this._userIdsExactFilter=[],this._userIdsFilter.userIds=this._userIdsIncludeFilter,this._userIdsFilter.includeMode=!0)}},{key:"userIdsIncludeFilterQueryType",get:function(){return this._userIdsIncludeFilterQueryType},set:function(t){Object.keys(e.QueryType).map(function(t){return e.QueryType[t]}).indexOf(t)>-1&&(this._userIdsIncludeFilterQueryType=t.toUpperCase(),this._userIdsFilter.queryType=this._userIdsIncludeFilterQueryType)}},{key:"setSearchFilter",value:function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={search_query:t,search_fields:e.join(",").toLocaleLowerCase()})}},{key:"serialize",value:function(){return Ot.serialize(this,function(e){e.isLoading=!1})}},{key:"next",value:function(e){var t=this;return le(this._iid,function(e){var n=G.get(t._iid),r=n.GroupChannel,a=n.GroupChannelListQuery;!("number"==typeof t.limit&&t.limit>0&&"boolean"==typeof t.includeEmpty&&"string"==typeof t.order&&[a.ORDER_CHRONOLOGICAL,a.ORDER_LATEST_LAST_MESSAGE,a.CHANNEL_NAME_ALPHABETICAL,a.METADATA_VALUE_ALPHABETICAL].indexOf(t.order.toLowerCase())>-1&&Array.isArray(t._userIdsExactFilter)&&Array.isArray(t._userIdsIncludeFilter)&&Array.isArray(t.customTypesFilter)&&Array.isArray(t.channelUrlsFilter)&&Object.keys(a.QueryType).map(function(e){return a.QueryType[e]}).indexOf(t._userIdsIncludeFilterQueryType.toUpperCase())>-1&&Object.keys(r.MemberStateFilter).map(function(e){return r.MemberStateFilter[e]}).indexOf(t.memberStateFilter)>-1&&Object.keys(r.SuperChannelFilter).map(function(e){return r.SuperChannelFilter[e]}).indexOf(t.superChannelFilter)>-1&&Object.keys(r.PublicChannelFilter).map(function(e){return r.PublicChannelFilter[e]}).indexOf(t.publicChannelFilter)>-1&&Object.keys(r.UnreadChannelFilter).map(function(e){return r.UnreadChannelFilter[e]}).indexOf(t.unreadChannelFilter)>-1&&Object.keys(r.HiddenChannelFilter).map(function(e){return r.HiddenChannelFilter[e]}).indexOf(t.hiddenChannelFilter)>-1)||"string"!=typeof t.customTypeStartsWithFilter&&null!==t.customTypeStartsWithFilter||"string"!=typeof t.nicknameContainsFilter||"string"!=typeof t.channelNameContainsFilter||"string"!=typeof t.metadataOrderKeyFilter&&null!==t.metadataOrderKeyFilter||"string"!=typeof t.metadataKey&&null!==t.metadataKey||!Array.isArray(t.metadataValues)||!t.metadataValues.every(function(e){return"string"==typeof e})||"string"!=typeof t.metadataValueStartsWith&&null!==t.metadataValueStartsWith||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(_e.error,null):t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadGroupChannelList(d(d({},t),{},{token:t._token,userIdsFilter:t._userIdsFilter,searchFilter:t._searchFilter})).then(function(n){var r=G.get(t._iid).GroupChannel,a=String(n.next);t._token=a,t.hasNext=!!a;var i=n.channels;if(!i||!Array.isArray(i))throw new j("Failed at loading group channels.",j.MALFORMED_DATA);var s=i.map(function(e){return"number"==typeof n.ts&&(e.ts=n.ts),r.upsert(e)});t.isLoading=!1,e(null,s)}).catch(function(n){t.isLoading=!1,e(n,null)})):e(null,[])},e)}}],[{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}},{key:"QueryType",get:function(){return{AND:"AND",OR:"OR"}}},{key:"SearchField",get:function(){return{MEMBER_NICKNAME:"member_nickname",CHANNEL_NAME:"channel_name"}}},{key:"buildFromSerializedData",value:function(e){var t=G.get(this._iid).GroupChannel,n=Ot.deserialize(e),r=t.createMyGroupChannelListQuery();return Object.keys(n).forEach(function(e){r.hasOwnProperty(e)&&(r[e]=n[e])}),r}}]),e}(),xr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.mutedMemberFilter=e.MutedMemberFilter.ALL,this.memberStateFilter=or.MemberStateFilter.ALL,this.nicknameStartsWithFilter=null,this.order=e.Order.MEMBER_NICKNAME_ALPHABETICAL,this._token="",this._channelUrl=t}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){var n=G.get(t._iid),r=n.GroupChannel,a=n.Member,i=n.MemberListQuery;"number"==typeof t.limit&&t.limit>0&&Object.keys(i.MutedMemberFilter).map(function(e){return i.MutedMemberFilter[e]}).indexOf(t.mutedMemberFilter)>-1&&Object.keys(r.MemberStateFilter).map(function(e){return r.MemberStateFilter[e]}).indexOf(t.memberStateFilter)>-1&&Object.keys(i.Order).map(function(e){return i.Order[e]}).indexOf(t.order)>-1&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadMemberList(d(d({},t),{},{channelUrl:t._channelUrl,token:t._token}),function(n,r){var i=null;if(!n){var s=String(r.next);t._token=s,t.hasNext=!!s,i=r.members.map(function(e){return new a(e)})}t.isLoading=!1,e(n,i)})):e(null,[]):e(_e.error,null)},e)}}],[{key:"MutedMemberFilter",get:function(){return{ALL:"all",MUTED:"muted",UNMUTED:"unmuted"}}},{key:"Order",get:function(){return{MEMBER_NICKNAME_ALPHABETICAL:"member_nickname_alphabetical",OPERATOR_THEN_MEMBER_ALPHABETICAL:"operator_then_member_alphabetical"}}}]),e}(),jr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadMutedUserList(d(d({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).RestrictedUser,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.muted_list.map(function(e){var t=new i(e);return t.restrictionInfo.restrictionType=i.RestrictionType.MUTED,t})}t.isLoading=!1,e(n,a)})):e(null,[]):e(_e.error,null)},e)}}]),e}(),Fr=function(){function e(){f(this,e),this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customTypes=[],this.includeFrozen=!0,this.includeMetaData=!0}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){!("number"==typeof t.limit&&t.limit>0&&Array.isArray(t.customTypes))||"string"!=typeof t.nameKeyword&&null!==t.nameKeyword||"string"!=typeof t.urlKeyword&&null!==t.urlKeyword||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(_e.error,null):t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadOpenChannelList(d(d({},t),{},{token:t._token}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).OpenChannel,s=String(r.next);t._token=s,t.hasNext=!!s;var o=r.channels;o&&Array.isArray(o)?a=o.map(function(e){return"number"==typeof r.ts&&(e.ts=r.ts),i.upsert(e)}):n=new j("Failed at loading open channels.",j.MALFORMED_DATA)}t.isLoading=!1,e(n,a)})):e(null,[])},e)}}]),e}(),Hr=new WeakMap,Gr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",Hr.set(this,t)}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){if("number"==typeof t.limit&&t.limit>0)if(t.isLoading)e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var n=Hr.get(t);w.get(t._iid).container.apiClient.loadOperatorList(d(d({},t),{},{token:t._token,channelUrl:n.url,isOpenChannel:n.isOpenChannel()}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.operators.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})}else e(null,[]);else e(_e.error,null)},e)}}]),e}(),Br=new WeakMap,Vr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t&&Br.set(this,t.channelUrl)}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadParticipantList(d(d({},t),{},{channelUrl:Br.get(t),token:t._token}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.participants.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(_e.error,null)},e)}}]),e}(),zr=new WeakMap,qr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.limit,a=void 0===r?20:r,i=n.reverse,s=void 0!==i&&i,o=n.exactMatch,l=void 0!==o&&o,c=n.channelUrl,u=void 0===c?"":c,d=n.channelCustomType,h=void 0===d?"":d,p=n.messageTimestampFrom,_=void 0===p?null:p,m=n.messageTimestampTo,g=void 0===m?null:m,v=n.order,y=void 0===v?"score":v,E=n.advancedQuery,b=void 0!==E&&E,C=n.targetFields,O=void 0===C?null:C;f(this,e),this.isLoading=!1,this.hasNext=!0,zr.set(this,{keyword:t,limit:a,reverse:s,exactMatch:l,channelUrl:u,channelCustomType:h,messageTimestampFrom:_,messageTimestampTo:g,order:y,advancedQuery:b,targetFields:O,previousToken:"",nextToken:""})}return _(e,[{key:"key",get:function(){return zr.get(this).keyword}},{key:"limit",get:function(){return zr.get(this).limit}},{key:"reverse",get:function(){return zr.get(this).reverse}},{key:"exactMatch",get:function(){return zr.get(this).exactMatch}},{key:"channelUrl",get:function(){return zr.get(this).channelUrl}},{key:"channelCustomType",get:function(){return zr.get(this).channelCustomType}},{key:"messageTimestampFrom",get:function(){return zr.get(this).messageTimestampFrom}},{key:"messageTimestampTo",get:function(){return zr.get(this).messageTimestampTo}},{key:"order",get:function(){return zr.get(this).order}},{key:"next",value:function(e){var t=this,n=G.get(this._iid),r=n.BaseChannel,a=n.GroupChannel,i=n.OpenChannel;return le(this._iid,function(e){var n=zr.get(t),s=n.keyword,o=n.limit,l=n.reverse,c=n.exactMatch,u=n.channelUrl,d=n.channelCustomType,h=n.messageTimestampFrom,f=n.messageTimestampTo,p=n.order,_=n.advancedQuery,m=n.targetFields,g=n.nextToken;!("number"==typeof o&&o>0&&o<=1e3&&"boolean"==typeof l&&"boolean"==typeof c)||"string"!=typeof u&&null!==u||"string"!=typeof d&&null!==d||"number"!=typeof h&&null!==h||"number"!=typeof f&&null!==f||!(["score","ts"].indexOf(p)>=0)||"boolean"!=typeof _&&null!==_||!Array.isArray(m)&&null!==m?e(_e.error,null):t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.searchMessages({keyword:s,limit:o,reverse:l,exactMatch:c,channelUrl:u,channelCustomType:d,messageTimestampFrom:h,messageTimestampTo:f,order:p,advancedQuery:_,targetFields:m,nextToken:g},function(n,s){var o=null;n||(o=[],s.results.forEach(function(e){if(e.channel.hasOwnProperty("members")){var t=new a(e.channel);a.cachedChannels[t.url]=t,o.push(r.buildMessage(e,t))}else{var n=new i(e.channel);i.cachedChannels[n.url]=n,o.push(r.buildMessage(e,n))}}),t.hasNext=s.has_next,zr.get(t).nextToken=s.end_cursor),t.isLoading=!1,e(n,o)})):e(null,[])},e)}}]),e}(),Kr=new WeakMap,Yr=new WeakMap,Wr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,Yr.set(this,Number.MAX_SAFE_INTEGER),Kr.set(this,t),this.reverse=!1,this.messageTypeFilter=null,this.customTypeFilter=null,this.customTypesFilter=[],this.senderUserIdsFilter=[],this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1,this.includePollDetails=!1}return _(e,[{key:"load",value:function(e,t,n,r){var a=this,i=G.get(this._iid),s=i.BaseChannel,o=i.BaseMessage,l=null,c=_e.parse(arguments,[new _e({type:"number",optional:!0,defaultValue:this.limit}),new _e({type:"boolean",optional:!0,defaultValue:this.reverse}),new _e({type:["string","number"],optional:!0,defaultValue:this.messageTypeFilter,constraint:function(e){return Object.keys(s.MessageTypeFilter).map(function(e){return s.MessageTypeFilter[e]}).indexOf(e)>-1||[0,1,2,3].indexOf(e)>-1}}),new _e({type:"callback"})]),u=O(c,5);return l=u[0],e=u[1],t=u[2],n=u[3],r=u[4],le(this._iid,function(r){if(("string"!=typeof a.customTypeFilter&&null!==a.customTypeFilter||!Array.isArray(a.customTypesFilter)||!a.customTypesFilter.every(function(e){return"string"==typeof e||null===e})||!Array.isArray(a.senderUserIdsFilter)||!a.senderUserIdsFilter.every(function(e){return"string"==typeof e})||"boolean"!=typeof a.includeMetaArray||null!==a.includeReaction&&"boolean"!=typeof a.includeReaction||null!==a.includeReactions&&"boolean"!=typeof a.includeReactions||"boolean"!=typeof a.includeThreadInfo||null!==a.includeReplies&&"boolean"!=typeof a.includeReplies||!(null===a.replyType||"string"==typeof a.replyType&&Object.values(o.ReplyType).includes(a.replyType))||null!==a.includeParentMessageText&&"boolean"!=typeof a.includeParentMessageText||null!==a.includeParentMessageInfo&&"boolean"!=typeof a.includeParentMessageInfo||"boolean"!=typeof a.showSubchannelMessagesOnly)&&(l=_e.error),l)r(l,null);else{if(a.limit=e,a.reverse=t,a.messageTypeFilter=n,"number"==typeof a.messageTypeFilter)switch(a.messageTypeFilter){case 0:a.messageTypeFilter=s.MessageTypeFilter.ALL;break;case 1:a.messageTypeFilter=s.MessageTypeFilter.USER;break;case 2:a.messageTypeFilter=s.MessageTypeFilter.FILE;break;case 3:a.messageTypeFilter=s.MessageTypeFilter.ADMIN}if(a.isLoading)r(new j("Query in progress.",j.QUERY_IN_PROGRESS),null);else if(a.hasMore){a.isLoading=!0;var i=Kr.get(a);w.get(a._iid).container.apiClient.getMessageList({channel:i,token:Yr.get(a)||(new Date).getTime()+1e4,tokenType:"timestamp",isInclusive:!1,prevResultSize:e,nextResultSize:0,shouldReverse:t,messageType:a.messageTypeFilter,customType:a.customTypeFilter,customTypes:a.customTypesFilter,senderUserIds:a.senderUserIdsFilter,includeMetaArray:a.includeMetaArray,includeReaction:a.includeReaction,includeReactions:a.includeReactions,includeReplies:a.includeReplies,includeParentMessageText:a.includeParentMessageText,includeThreadInfo:a.includeThreadInfo,replyType:a.replyType,includeParentMessageInfo:a.includeParentMessageInfo,showSubchannelMessagesOnly:a.showSubchannelMessagesOnly,includePollDetails:a.includePollDetails}).then(function(t){var n=t.messages.map(function(e){return s.buildMessage(e,i)});(0===n.length||n.length<e)&&(a.hasMore=!1);var o=Yr.get(a);Yr.set(a,Math.min.apply(Math,N(n.map(function(e){return e.createdAt})).concat([o]))),a.isLoading=!1,r(null,n)}).catch(function(e){a.isLoading=!1,r(e,null)})}else r(null,[])}},r)}}]),e}(),Qr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=Ur.ORDER_LATEST_LAST_MESSAGE,this._token="",this.channelNameContainsFilter="",this.channelUrlsFilter=[],this.customTypesFilter=[],this.customTypeStartsWithFilter=null,this.superChannelFilter=or.SuperChannelFilter.ALL,this.membershipFilter=e.MembershipType.JOINED,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.includeFrozen=!0,this.includeMetaData=!0}return _(e,[{key:"next",value:function(t){var n=this;return le(this._iid,function(t){var r=G.get(n._iid).GroupChannel;!("number"==typeof n.limit&&n.limit>0&&"boolean"==typeof n.includeEmpty&&"string"==typeof n.order&&[e.ORDER_CHRONOLOGICAL,e.CHANNEL_NAME_ALPHABETICAL,e.METADATA_VALUE_ALPHABETICAL,e.ORDER_LATEST_LAST_MESSAGE].indexOf(n.order.toLowerCase())>-1&&Array.isArray(n.customTypesFilter)&&Array.isArray(n.channelUrlsFilter)&&Object.keys(e.MembershipType).map(function(t){return e.MembershipType[t]}).indexOf(n.membershipFilter)>-1&&Object.keys(r.SuperChannelFilter).map(function(e){return r.SuperChannelFilter[e]}).indexOf(n.superChannelFilter)>-1)||"string"!=typeof n.customTypeStartsWithFilter&&null!==n.customTypeStartsWithFilter||"string"!=typeof n.channelNameContainsFilter||"string"!=typeof n.metadataOrderKeyFilter&&null!==n.metadataOrderKeyFilter||"string"!=typeof n.metadataKey&&null!==n.metadataKey||!Array.isArray(n.metadataValues)||!n.metadataValues.every(function(e){return"string"==typeof e})||"string"!=typeof n.metadataValueStartsWith&&null!==n.metadataValueStartsWith||"boolean"!=typeof n.includeFrozen||"boolean"!=typeof n.includeMetaData?t(_e.error,null):n.isLoading?t(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,w.get(n._iid).container.apiClient.loadPublicGroupChannelList(d(d({},n),{},{token:n._token}),function(e,a){var i=null;if(!e){var s=String(a.next);n._token=s,n.hasNext=!!s;var o=a.channels;o&&Array.isArray(o)?i=o.map(function(e){return"number"==typeof a.ts&&(e.ts=a.ts),r.upsert(e)}):e=new j("Failed at loading group channels.",j.MALFORMED_DATA)}n.isLoading=!1,t(e,i)})):t(null,[])},t)}}],[{key:"MembershipType",get:function(){return{ALL:"all",JOINED:"joined"}}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}}]),e}(),Jr=new WeakMap,Xr=new WeakMap,$r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,a=t.token,i=void 0===a?"":a,s=t.limit,o=void 0===s?20:s;f(this,e),this.channelUrl=r,this.token=i,this.limit=o,Jr.set(this,!1),Xr.set(this,!0)}return _(e,[{key:"isLoading",get:function(){return!!Jr.get(this)}},{key:"hasNext",get:function(){return!!Xr.get(this)}},{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"string"==typeof t.channelUrl&&"number"==typeof t.limit&&t.limit>0&&t.limit<=100?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(Jr.set(t,!0),w.get(t._iid).container.apiClient.getPollList(d({},t),function(n,r){if(n)Jr.set(t,!1),e(n,null);else{var a=G.get(t._iid).Poll,i=r.hasOwnProperty("polls")&&Array.isArray(r.polls)?r.polls.map(function(e){return new a(e)}):[],s=r.hasOwnProperty("next")&&r.next?String(r.next):"";t.token=s,Jr.set(t,!1),Xr.set(t,!!s),e(null,i)}})):e(null,[]):e(_e.error,null)},e)}}]),e}(),Zr=new WeakMap,ea=new WeakMap,ta=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,a=t.pollId,i=void 0===a?null:a,s=t.optionId,o=void 0===s?null:s,l=t.token,c=void 0===l?"":l,u=t.limit,d=void 0===u?100:u;f(this,e),this.channelUrl=r,this.pollId=i,this.optionId=o,this.token=c,this.limit=d,Zr.set(this,!1),ea.set(this,!0)}return _(e,[{key:"isLoading",get:function(){return!!Zr.get(this)}},{key:"hasNext",get:function(){return!!ea.get(this)}},{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"string"==typeof t.channelUrl&&"number"==typeof t.pollId&&"number"==typeof t.optionId&&"number"==typeof t.limit&&t.limit>0&&t.limit<=100?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(Zr.set(t,!0),w.get(t._iid).container.apiClient.getPollOptionVoterList(d({},t),function(n,r){if(n)Zr.set(t,!1),e(n,null);else{var a=G.get(t._iid).User,i=r.hasOwnProperty("voters")&&Array.isArray(r.voters)?r.voters.map(function(e){return new a(e)}):[],s=r.hasOwnProperty("next")&&r.next?String(r.next):"";t.token=s,Zr.set(t,!1),ea.set(t,!!s),e(null,i)}})):e(null,[]):e(_e.error,null)},e)}}]),e}(),na=function(){function e(){f(this,e),this.isDistinct=null,this.isSuper=null,this.isBroadcast=null,this.isPublic=null,this.channelUrl=null,this.isEphemeral=null,this.isDiscoverable=null,this.isStrict=null,this.name=null,this.data=null,this.customType=null,this.channelCover=null,this.coverUrl=null,this.coverImage=null,this.accessCode=null,this.messageSurvivalSeconds=null,this._invitedUserIds=[];var t=null;Object.defineProperty(this,"operators",{set:function(e){Array.isArray(e)&&e.filter(function(e){return e.hasOwnProperty("userId")}).length===e.length&&(t=e.map(function(e){return e.userId}))}}),Object.defineProperty(this,"operatorUserIds",{get:function(){return t},set:function(e){Array.isArray(e)&&e.filter(function(e){return"string"==typeof e}).length===e.length&&(t=e)}})}return _(e,[{key:"_validate",value:function(){return Array.isArray(this._invitedUserIds)&&this._invitedUserIds.every(function(e){return"string"==typeof e})&&("string"==typeof this.channelUrl||null===this.channelUrl)&&("string"==typeof this.coverUrl||null===this.coverUrl)&&(ie.isFile(this.coverImage)||null===this.coverImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("boolean"==typeof this.isDistinct||null===this.isDistinct)&&("boolean"==typeof this.isSuper||null===this.isSuper)&&("boolean"==typeof this.isBroadcast||null===this.isBroadcast)&&("boolean"==typeof this.isPublic||null===this.isPublic)&&("boolean"==typeof this.isEphemeral||null===this.isEphemeral)&&("boolean"==typeof this.isDiscoverable||null===this.isDiscoverable)&&("boolean"==typeof this.isStrict||null===this.isStrict)&&(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every(function(e){return"string"==typeof e})||null===this.operatorUserIds)&&("string"==typeof this.accessCode||null===this.accessCode)&&("number"==typeof this.messageSurvivalSeconds||null===this.messageSurvivalSeconds)}},{key:"addUsers",value:function(e){if(Array.isArray(e)){var t,n=e.filter(function(e){return e.hasOwnProperty("userId")&&"string"==typeof e.userId}).map(function(e){return e.userId});(t=this._invitedUserIds).push.apply(t,N(n))}}},{key:"addUser",value:function(e){e.hasOwnProperty("userId")&&"string"==typeof e.userId&&this._invitedUserIds.push(e.userId)}},{key:"addUserIds",value:function(e){if(Array.isArray(e)){var t,n=e.filter(function(e){return"string"==typeof e});(t=this._invitedUserIds).push.apply(t,N(n))}}},{key:"addUserId",value:function(e){"string"==typeof e&&this._invitedUserIds.push(e)}}]),e}(),ra=function(){function e(){f(this,e),this.channelUrl=null,this.name=null,this.coverUrlOrImage=null,this.data=null,this.customType=null,this._operatorUserIds=[]}return _(e,[{key:"operatorUserIds",get:function(){return this._operatorUserIds},set:function(e){Array.isArray(e)&&e.every(function(e){return"string"==typeof e})&&(this._operatorUserIds=e)}},{key:"operators",set:function(e){Array.isArray(e)&&e.every(function(e){return e.hasOwnProperty("userId")})&&(this._operatorUserIds=e.map(function(e){return e.userId}))}},{key:"_validate",value:function(){return(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every(function(e){return"string"==typeof e})||null===this.operatorUserIds)&&("string"==typeof this.coverUrlOrImage||ie.isFile(this.coverUrlOrImage)||null===this.coverUrlOrImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("string"==typeof this.channelUrl&&/^\w+$/.test(this.channelUrl)||null===this.channelUrl)}}]),e}(),aa=function(e){g(n,e);var t=b(n);function n(e){var r;return f(this,n),(r=t.call(this)).year=null,r.month=null,r.day=null,r.hour=null,r.min=null,r.timezone=null,r._scheduledDateTimeString=null,e&&r._update(e),r}return _(n,[{key:"scheduledDateTimeString",get:function(){return this._scheduledDateTimeString?this._scheduledDateTimeString:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2):null},set:function(e){e&&"string"==typeof e&&(this._scheduledDateTimeString=e)}},{key:"_update",value:function(e){e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("year")&&(this.year=e.year),e.hasOwnProperty("month")&&(this.month=e.month),e.hasOwnProperty("day")&&(this.day=e.day),e.hasOwnProperty("hour")&&(this.hour=e.hour),e.hasOwnProperty("min")&&(this.min=e.min),e.hasOwnProperty("timezone")&&(this.timezone=e.timezone)}},{key:"_getScheduleString",value:function(){return this.scheduledDateTimeString?this.scheduledDateTimeString+" "+this.timezone:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2)+" "+this.timezone:null}},{key:"setSchedule",value:function(e,t,n,r,a,i){"number"==typeof e&&4===e.toString().length&&"number"==typeof t&&t>=1&&t<=12&&"number"==typeof n&&n>=1&&n<=31&&"number"==typeof r&&r>=0&&r<=24&&"number"==typeof a&&a>=0&&a<=60&&"string"==typeof i&&i.length>0&&(this.scheduledDateTimeString=e.toString()+"-"+("0"+t.toString()).substr(-2)+"-"+("0"+n.toString()).substr(-2)+" "+("0"+r.toString()).substr(-2)+":"+("0"+a.toString()).substr(-2),this.timezone=i)}}]),n}(Or),ia=_(function e(){f(this,e),this.channelCustomTypesFilter=[],this.superChannelFilter=or.SuperChannelFilter.ALL}),sa=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.call(this)}return _(n)}(ia),oa=function(e){g(n,e);var t=b(n);function n(){return f(this,n),t.call(this)}return _(n)}(ia),la=function(){function e(){f(this,e),this.channelUrl=null,this.channelType=null,this.messageId=0,this.includeMetaArray=!1,this.includeReactions=!1,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.includeParentMessageInfo=null,this.includePollDetails=!1}return _(e,[{key:"_validate",value:function(){var e=G.get(this._iid).BaseChannel;return"string"==typeof this.channelUrl&&"string"==typeof this.channelType&&[e.CHANNEL_TYPE_BASE,e.CHANNEL_TYPE_OPEN,e.CHANNEL_TYPE_GROUP].includes(this.channelType)&&"number"==typeof this.messageId&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),ca=function(){function e(){f(this,e);var t=G.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1,this.includePollDetails=!1}return _(e,[{key:"_validate",value:function(){var e=G.get(this._iid),t=e.BaseChannel,n=e.BaseMessage;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(t.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every(function(e){return"string"==typeof e||null===e})&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every(function(e){return"string"==typeof e})||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(n.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.showSubchannelMessagesOnly&&"boolean"==typeof this.includePollDetails}},{key:"belongsTo",value:function(e){var t=G.get(this._iid),n=t.BaseChannel,r=t.UserMessageParams,a=t.FileMessageParams,i=t.BaseMessage;if(this.messageType!==n.MessageTypeFilter.ALL){if(e instanceof r&&this.messageType!==n.MessageTypeFilter.USER)return!1;if(e instanceof a&&this.messageType!==n.MessageTypeFilter.FILE)return!1}if(Array.isArray(this.customTypes)&&this.customTypes.length>0&&!this.customTypes.includes(e.customType))return!1;if("string"==typeof this.customType&&this.customType!==e.customType)return!1;if(Array.isArray(this.senderUserIds)&&this.senderUserIds.length>0){var s=Ba.getInstance(e._iid);if(!s||!s.currentUser||!this.senderUserIds.includes(s.currentUser.userId))return!1}if("string"==typeof this.replyType&&e.parentMessageId){if(this.replyType===i.ReplyType.NONE)return!1;if(this.replyType===i.ReplyType.ONLY_REPLY_TO_CHANNEL&&!e.isReplyToChannel)return!1}else if(!1===this.includeReplies&&e.parentMessageId)return!1;return!0}}]),e}(),ua=function(){function e(){f(this,e);var t=G.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeParentMessageText=null,this.includeParentMessageInfo=null,this.includePollDetails=!1}return _(e,[{key:"_validate",value:function(){var e=G.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every(function(e){return"string"==typeof e||null===e})&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every(function(e){return"string"==typeof e})||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),da=function(){function e(){f(this,e),this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.includePollDetails=!1}return _(e,[{key:"_validate",value:function(){return"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(BaseMessage.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),ha=function(){function e(){f(this,e),this.customTypes=[],this.includeEmpty=!1,this.includeFrozen=!0}return _(e,[{key:"_validate",value:function(){return(Array.isArray(this.customTypes)&&this.customTypes.every(function(e){return"string"==typeof e})||null===this.customTypes)&&("boolean"==typeof this.includeEmpty||null===this.includeEmpty)&&"boolean"==typeof this.includeFrozen}}]),e}(),fa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,r=void 0===n?null:n,a=t.options,i=void 0===a?null:a,s=t.data,o=void 0===s?null:s,l=t.isAnonymous,c=void 0===l?null:l,u=t.allowUserSuggestion,d=void 0===u?null:u,h=t.allowMultipleVotes,p=void 0===h?null:h,_=t.closeAt,m=void 0===_?null:_;f(this,e),this.title=r,this.options=i,this.data=o,this.isAnonymous=c,this.allowUserSuggestion=d,this.allowMultipleVotes=p,this.closeAt=m}return _(e,[{key:"_validate",value:function(){return"string"==typeof this.title&&(Array.isArray(this.options)&&this.options.length>0&&this.options.every(function(e){return"string"==typeof e})||null===this.options)&&("string"==typeof this.data||null==this.data)&&("boolean"==typeof this.isAnonymous||null===this.isAnonymous)&&("boolean"==typeof this.allowUserSuggestion||null===this.allowUserSuggestion)&&("boolean"==typeof this.allowMultipleVotes||null===this.allowMultipleVotes)&&("number"==typeof this.closeAt||null===this.closeAt)}}]),e}(),pa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,a=t.pollId,i=void 0===a?null:a,s=t.showPartialVoters,o=void 0!==s&&s;f(this,e),this.channelUrl=r,this.pollId=i,this.showPartialVoters=o}return _(e,[{key:"_validate",value:function(){return"string"==typeof this.channelUrl&&"number"==typeof this.pollId&&"boolean"==typeof this.showPartialVoters}}]),e}(),_a=function(){this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}},ma=function(){this.onFriendsDiscovered=function(){},this.onTotalUnreadMessageCountUpdated=function(){}},ga=_(function e(){f(this,e),this.onMessageReceived=function(e,t){},this.onMessageUpdated=function(e,t){},this.onMessageDeleted=function(e,t){},this.onReadReceiptUpdated=function(e){},this.onReactionUpdated=function(e,t){},this.onDeliveryReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,t){},this.onUserLeft=function(e,t){},this.onOperatorUpdated=function(e,t){},this.onUserEntered=function(e,t){},this.onUserExited=function(e,t){},this.onUserMuted=function(e,t){},this.onUserUnmuted=function(e,t){},this.onUserBanned=function(e,t){},this.onUserUnbanned=function(e,t){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e,t){},this.onUserReceivedInvitation=function(e,t,n){},this.onUserDeclinedInvitation=function(e,t,n){},this.onMetaDataCreated=function(e,t){},this.onMetaDataUpdated=function(e,t){},this.onMetaDataDeleted=function(e,t){},this.onMetaCountersCreated=function(e,t){},this.onMetaCountersUpdated=function(e,t){},this.onMetaCountersDeleted=function(e,t){},this.onChannelHidden=function(e){},this.onMentionReceived=function(e,t){},this.onThreadInfoUpdated=function(e,t){},this.onChannelMemberCountChanged=function(e){},this.onChannelParticipantCountChanged=function(e){},this.onPollUpdated=function(e){},this.onPollVoted=function(e){}}),va=_(function e(t){if(f(this,e),t){var n=G.get(this._iid),r=n.User,a=n.BaseChannel;this.reader=new r(t.user),this.timestamp=parseInt(t.ts),this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):a.CHANNEL_TYPE_GROUP}}),ya=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=0),this.key=e,this.userIds=t,this.updatedAt=n;for(var r={},a=0,i=this.userIds;a<i.length;a++)r[i[a]]=this.updatedAt;this._version=r}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.createFromJson=function(e){var t=e.key,n=e.user_ids,r=e.updated_at;return"string"==typeof t&&t&&Array.isArray(n)&&n.length>0&&"number"==typeof r?new this(t,n,r):null},e.prototype.serialize=function(){return{key:this.key,user_ids:this.userIds,updated_at:this.updatedAt}},e.prototype._applyEvent=function(e){if(e.key===this.key&&(!this._version[e.userId]||this._version[e.userId]<e.updatedAt)){var t=this.userIds.indexOf(e.userId);switch(e.operation){case"add":t<0&&this.userIds.push(e.userId);break;case"delete":t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}},e}(),Ea=function(){function e(e){this.replyCount=0,this.mostRepliedUsers=[],this.lastRepliedAt=0,this.updatedAt=0,e&&this._update(e)}return e.objectify=function(e){var t=G.get(this._iid).User,n=e.replyCount,r=void 0===n?0:n,a=e.mostRepliedUsers,i=void 0===a?[]:a,s=e.lastRepliedAt,o=void 0===s?0:s,l=e.updatedAt,c=void 0===l?0:l,u={};return u.reply_count=r,Array.isArray(i)&&i.every(function(e){return e instanceof t})&&(u.most_replies=i.map(function(e){return t.objectify(e)})),u.last_replied_at=o,u.updated_at=c,u},e.build=function(e,t,n,r){return this.objectify({replyCount:e,mostRepliedUsers:t,lastRepliedAt:n,updatedAt:r})},e.prototype._update=function(e){var t=G.get(this._iid).User;e.hasOwnProperty("reply_count")&&(this.replyCount=parseInt(e.reply_count)),e.hasOwnProperty("most_replies")&&Array.isArray(e.most_replies)&&e.most_replies.every(function(e){return"object"==typeof e})&&(this.mostRepliedUsers=e.most_replies.map(function(e){return new t(e)})),e.hasOwnProperty("last_replied_at")&&(this.lastRepliedAt=parseInt(e.last_replied_at)),e.hasOwnProperty("updated_at")&&(this.updatedAt=parseInt(e.updated_at))},e}(),ba=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e&&this._update(e)}return e.objectify=function(e){var t=G.get(this._iid).OGImage,n=e.title,r=void 0===n?null:n,a=e.url,i=void 0===a?null:a,s=e.description,o=void 0===s?null:s,l=e.defaultImage,c=void 0===l?null:l,u={};return u["og:title"]=r,u["og:url"]=i,u["og:description"]=o,c&&(u["og:image"]=t.objectify(c)),u},e.prototype._update=function(e){var t=G.get(this._iid).OGImage;e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new t(e["og:image"]))},e}(),Ca=function(){function e(e){this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,e&&this._update(e)}return e.objectify=function(e){var t=e.url,n=void 0===t?null:t,r=e.secureUrl,a=void 0===r?null:r,i=e.type,s=void 0===i?null:i,o=e.width,l=void 0===o?0:o,c=e.height,u=void 0===c?0:c,d=e.alt,h=void 0===d?null:d,f={};return f.url=n,f.secure_url=a,f.type=s,f.width=l,f.height=u,f.alt=h,f},e.prototype._update=function(e){e.hasOwnProperty("url")&&(this.url=e.url),e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=parseInt(e.width)),e.hasOwnProperty("height")&&(this.height=parseInt(e.height)),e.hasOwnProperty("alt")&&(this.alt=e.alt)},e}(),Oa=function(){function e(e){this.type=null,this.vendor=null,this.detail={},e&&this._update(e)}return e.objectify=function(e){var t=e.type,n=void 0===t?"":t,r=e.vendor,a=void 0===r?"":r,i=e.detail,s=void 0===i?{}:i,o={};return o.type=n,o.vendor=a,o.detail=s,o},e.prototype._update=function(e){this.type=e.hasOwnProperty("type")?e.type:"",this.vendor=e.hasOwnProperty("vendor")?e.vendor:"",e.hasOwnProperty("detail")&&"object"==typeof e.detail&&!Array.isArray(e.detail)&&(this.detail=e.detail)},e}(),Na=function(){function e(t){f(this,e),this.id=0,this.title="",this.details=null,this._update(t)}return _(e,[{key:"update",value:function(e,t){var n=this,r=G.get(this._iid),a=r.PollParams,i=null,s=_e.parse(arguments,[new _e({type:a,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),o=O(s,3);return i=o[0],e=o[1],t=o[2],le(this._iid,function(t){if(i)t(i,null);else{var r={text:e.data};w.get(n._iid).container.apiClient.updatePoll(d(d({pollId:n.id},e),{},{data:r}),function(e,r){if(e)t(e,null);else{var a=new(0,G.get(n._iid).Poll)(r);t(null,a)}})}},t)}},{key:"delete",value:function(e){var t=this,n=null,r=_e.parse(arguments,[new _e({type:"callback"})]),a=O(r,2);return n=a[0],e=a[1],le(this._iid,function(e){n?e(n,null):w.get(t._iid).container.apiClient.deletePoll({pollId:t.id},function(t,n){e(t||null,null)})},e)}},{key:"addOption",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"string"}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){a?n(a,null):w.get(r._iid).container.apiClient.addPollOption({channelUrl:e,pollId:r.id,text:t},function(e,t){if(e)n(e,null);else{var a=new(0,G.get(r._iid).Poll)(t);n(null,a)}})},n)}},{key:"vote",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"array",constraint:function(e){return e.every(function(e){return"number"==typeof e})}}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){a?n(a,null):w.get(r._iid).container.apiClient.votePoll({channelUrl:e,pollId:r.id,optionIds:t},function(e,t){if(e)n(e,null);else{var a=new(0,G.get(r._iid).Poll)(t);n(null,a)}})},n)}},{key:"close",value:function(e){var t=this,n=null,r=_e.parse(arguments,[new _e({type:"callback"})]),a=O(r,2);return n=a[0],e=a[1],le(this._iid,function(e){n?e(n,null):w.get(t._iid).container.apiClient.closePoll({pollId:t.id},function(n,r){if(n)e(n,null);else{var a=new(0,G.get(t._iid).Poll)(r);e(null,a)}})},e)}},{key:"_update",value:function(e){var t=G.get(this._iid).PollDetails;this.id=parseInt(e.id),this.title=e.title,e.hasOwnProperty("options")&&e.hasOwnProperty("is_anonymous")&&e.hasOwnProperty("allow_user_suggestion")&&e.hasOwnProperty("allow_multiple_votes")&&e.hasOwnProperty("close_at")&&e.hasOwnProperty("voter_count")&&e.hasOwnProperty("status")&&e.hasOwnProperty("created_by")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("updated_at")&&(this.details=new t(e))}}],[{key:"Status",get:function(){return{OPEN:"open",CLOSED:"closed",REMOVED:"removed"}}},{key:"objectify",value:function(e){var t=G.get(this._iid).PollDetails,n=e.id,r=void 0===n?0:n,a=e.title,i=void 0===a?"":a,s=e.details,o=void 0===s?null:s,l=d({},o?t.objectify(o):{});return l.id=r,l.title=i,l}},{key:"get",value:function(e,t){var n=this,r=G.get(this._iid),a=r.PollRetrievalParams,i=null,s=_e.parse(arguments,[new _e({type:a,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),o=O(s,3);return i=o[0],e=o[1],t=o[2],le(this._iid,function(t){i?t(i,null):w.get(n._iid).container.apiClient.getPoll(d({},e),function(e,r){if(e)t(e,null);else{var a=new(0,G.get(n._iid).Poll)(r);t(null,a)}})},t)}},{key:"create",value:function(e,t){var n=this,r=G.get(this._iid),a=r.PollParams,i=null,s=_e.parse(arguments,[new _e({type:a,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),o=O(s,3);return i=o[0],e=o[1],t=o[2],le(this._iid,function(t){if(i)t(i,null);else{var r={text:e.data};w.get(n._iid).container.apiClient.createPoll(d(d({},e),{},{data:r}),function(e,r){if(e)t(e,null);else{var a=new(0,G.get(n._iid).Poll)(r);t(null,a)}})}},t)}}]),e}(),Sa=function(){function e(t){f(this,e),this.options=[],this.data=null,this.isAnonymous=!1,this.allowUserSuggestion=!1,this.allowMultipleVotes=!1,this.closeAt=-1,this.voterCount=0,this.votedOptionIds=[],this.status="",this.createdBy=null,this.createdAt=0,this.updatedAt=0,this._update(t)}return _(e,[{key:"_update",value:function(e){var t=G.get(this._iid).PollOption;e.hasOwnProperty("options")&&Array.isArray(e.options)&&(this.options=e.options.map(function(e){return new t(e)}));try{this.data=JSON.parse(e.data)}catch(t){this.data=e.data}this.isAnonymous=!!e.hasOwnProperty("is_anonymous")&&e.is_anonymous,this.allowUserSuggestion=!!e.hasOwnProperty("allow_user_suggestion")&&e.allow_user_suggestion,this.allowMultipleVotes=!!e.hasOwnProperty("allow_multiple_votes")&&e.allow_multiple_votes,this.closeAt=parseInt(e.close_at),this.voterCount=parseInt(e.voter_count),e.hasOwnProperty("voted_option_ids")&&Array.isArray(e.voted_option_ids)&&(this.votedOptionIds=e.voted_option_ids.map(function(e){return parseInt(e)})),this.status=e.status,this.createdBy=e.created_by,this.createdAt=parseInt(e.created_at),this.updatedAt=parseInt(e.updated_at)}}],[{key:"objectify",value:function(e){var t=G.get(this._iid).PollOption,n=e.options,r=void 0===n?[]:n,a=e.data,i=void 0===a?null:a,s=e.isAnonymous,o=void 0!==s&&s,l=e.allowUserSuggestion,c=void 0!==l&&l,u=e.allowMultipleVotes,d=void 0!==u&&u,h=e.closeAt,f=void 0===h?-1:h,p=e.voterCount,_=void 0===p?0:p,m=e.votedOptionIds,g=void 0===m?[]:m,v=e.status,y=void 0===v?"":v,E=e.createdBy,b=void 0===E?"":E,C=e.createdAt,O=void 0===C?0:C,N=e.updatedAt,S=void 0===N?0:N,A={};return A.options=r.map(function(e){return t.objectify(e)}),A.data=JSON.stringify(i),A.is_anonymous=o,A.allow_user_suggestion=c,A.allow_multiple_votes=d,A.close_at=f,A.voter_count=_,A.voted_option_ids=g,A.status=y,A.created_by=b,A.created_at=O,A.updated_at=S,A}}]),e}(),Aa=new WeakMap,Ia=function(){function e(t){f(this,e),this.pollId=0,this.id=0,this.text="",this.voteCount=0,this.partialVoters=[],this.createdBy="",this.createdAt=0,this.updatedAt=0,Aa.set(this,null),this._update(t)}return _(e,[{key:"lastVotedAt",get:function(){return Aa.get(this)}},{key:"update",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.updatePollOption({pollId:n.pollId,optionId:n.id,text:e},function(e,r){if(e)t(e,null);else{var a=new(0,G.get(n._iid).Poll)(r);t(null,a)}})},t)}},{key:"delete",value:function(e){var t=this,n=null,r=_e.parse(arguments,[new _e({type:"callback"})]),a=O(r,2);return n=a[0],e=a[1],le(this._iid,function(e){n?e(n,null):w.get(t._iid).container.apiClient.deletePollOption({pollId:t.pollId,optionId:t.id},function(t,n){e(t||null,null)})},e)}},{key:"_applyEvent",value:function(e){return this.id===e.optionId&&this.lastVotedAt<e.votedAt&&(this.voteCount=e.voteCount,Aa.set(this,e.votedAt),!0)}},{key:"_update",value:function(e){var t=G.get(this._iid).User;this.pollId=parseInt(e.poll_id),this.id=parseInt(e.id),this.text=e.text,this.voteCount=parseInt(e.vote_count),e.hasOwnProperty("partial_voter_list")&&Array.isArray(e.partial_voter_list)&&(this.partialVoters=e.partial_voter_list.map(function(e){return new t(e)})),this.createdBy=e.created_by,this.createdAt=parseInt(e.created_at),this.updatedAt=parseInt(e.updated_at)}}],[{key:"VoteAction",get:function(){return{CAST:"cast",CANCEL:"cancel"}}},{key:"objectify",value:function(e){var t=G.get(this._iid).User,n=e.pollId,r=void 0===n?0:n,a=e.id,i=void 0===a?0:a,s=e.text,o=void 0===s?"":s,l=e.voteCount,c=void 0===l?0:l,u=e.partialVoters,d=void 0===u?[]:u,h=e.createdBy,f=void 0===h?"":h,p=e.createdAt,_=void 0===p?0:p,m=e.updatedAt,g=void 0===m?0:m,v={};return v.poll_id=r,v.id=i,v.text=o,v.vote_count=c,Array.isArray(d)&&(v.partial_voter_list=d.filter(function(e){return e instanceof t}).map(function(e){return t.objectify(e)})),v.created_by=f,v.created_at=_,v.updated_at=g,v}},{key:"get",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"number"}),new _e({type:"number"}),new _e({type:"callback"})]),o=O(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):w.get(a._iid).container.apiClient.getPollOption({channelUrl:e,pollId:t,optionId:n},function(e,t){if(e)r(e,null);else{var n=new(0,G.get(a._iid).PollOption)(t);r(null,n)}})},r)}}]),e}(),ka=function(){function e(t){f(this,e),this.restrictionType=null,this.description=null,this.endAt=-1,t&&this._update(t)}return _(e,[{key:"_update",value:function(e){e.hasOwnProperty("restriction_type")&&(this.restrictionType=e.restriction_type),e.hasOwnProperty("description")?this.description=e.description:e.hasOwnProperty("muted_description")&&(this.description=e.muted_description),e.hasOwnProperty("end_at")?this.endAt=parseInt(e.end_at):e.hasOwnProperty("muted_end_at")&&(this.endAt=parseInt(e.muted_end_at))}}],[{key:"objectify",value:function(e){var t=e.restrictionType,n=void 0===t?null:t,r=e.description,a=void 0===r?null:r,i=e.endAt,s=void 0===i?-1:i,o={};return o.restriction_type=n,o.description=a,o.end_at=s,o}}]),e}(),Ta=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIds=t,this.metaDataKey="",this.metaDataValues=[],this._token=""}return _(e,[{key:"next",value:function(e){var t=this;return le(this._iid,function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIds)&&"string"==typeof t.metaDataKey&&Array.isArray(t.metaDataValues)&&!!t.metaDataKey==t.metaDataValues.length>0?t.isLoading?e(new j("Query in progress.",j.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadUserList(d(d({},t),{},{userIdsFilter:t.userIds,metaDataKeyFilter:t.metaDataKey,metaDataValuesFilter:t.metaDataValues,token:t._token}),function(n,r){var a=null;if(!n){var i=G.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(_e.error,null)},e)}}]),e}(),wa=new WeakMap,Ra=function(){function e(t){f(this,e),this.isLoading=!1,wa.set(this,t)}return _(e,[{key:"prev",value:function(e,t,n,r){var a=arguments,i=this;return le(this._iid,function(r){var s,o=G.get(i._iid).BaseChannel,l=O(_e.parse(a,[new _e({type:"number"}),new _e({type:"number"}),new _e({type:"boolean"}),new _e({type:"function"})]),5);if(s=l[0],e=l[1],t=l[2],n=l[3],r=l[4],s)r(s,null);else if(i.isLoading)r(new j("Query in progress.",j.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var c=wa.get(i);w.get(i._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:0,shouldReverse:n,messageType:"",customType:""}).then(function(e){var t=e.messages.map(function(e){return o.buildMessage(e,c)});i.isLoading=!1,r(null,t)}).catch(function(e){i.isLoading=!1,r(e,null)})}},r)}},{key:"next",value:function(e,t,n,r){var a=arguments,i=this;return le(this._iid,function(r){var s,o=G.get(i._iid).BaseChannel,l=O(_e.parse(a,[new _e({type:"number"}),new _e({type:"number"}),new _e({type:"boolean"}),new _e({type:"function"})]),5);if(s=l[0],e=l[1],t=l[2],n=l[3],r=l[4],s)r(s,null);else if(i.isLoading)r(new j("Query in progress.",j.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var c=wa.get(i);w.get(i._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:0,nextResultSize:t,shouldReverse:n,messageType:"",customType:""}).then(function(e){var t=e.messages.map(function(e){return o.buildMessage(e,c)});i.isLoading=!1,r(null,t)}).catch(function(e){i.isLoading=!1,r(e,null)})}},r)}},{key:"load",value:function(e,t,n,r,a){var i=arguments,s=this;return le(this._iid,function(a){var o,l=G.get(s._iid).BaseChannel,c=O(_e.parse(i,[new _e({type:"number"}),new _e({type:"number"}),new _e({type:"number"}),new _e({type:"boolean"}),new _e({type:"callback"})]),6);if(o=c[0],e=c[1],t=c[2],n=c[3],r=c[4],a=c[5],o)a(o,null);else if(s.isLoading)a(new j("Query in progress.",j.QUERY_IN_PROGRESS),null);else{s.isLoading=!0;var u=wa.get(s);w.get(s._iid).container.apiClient.getMessageList({channelUrl:u.url,channelType:u.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:n,shouldReverse:r,messageType:"",customType:""}).then(function(e){var t=e.messages.map(function(e){return l.buildMessage(e,u)});s.isLoading=!1,a(null,t)}).catch(function(e){s.isLoading=!1,a(e,null)})}},a)}}]),e}(),Ma=0,La=1,Pa=2,Da=function(){function e(t){var n=this;if(f(this,e),this.state=Ma,this._value=null,this._reason=null,"function"!=typeof t)throw"Promise resolver ".concat(t," is not a function");t(function(e){n.state===Ma&&(n.state=La,n._value=e)},function(e){n.state===Ma&&(n.state=Pa,n._reason=e)})}return _(e,[{key:"length",get:function(){return 1}},{key:"then",value:function(t,n){var r=this,a=this;switch(this.state){case Ma:setTimeout(function(){return r.then(t,n)},100);break;case La:t&&"function"==typeof t&&(a=t(this._value));break;case Pa:n&&"function"==typeof n&&(a=n(this._reason))}return a instanceof e?a:this}},{key:"catch",value:function(t){var n=this,r=this;switch(this.state){case Ma:setTimeout(function(){return n.catch(t)},100);break;case La:break;case Pa:r=t(this._reason)}return r instanceof e?r:this}},{key:"finally",value:function(t){var n=this,r=this;switch(this.state){case Ma:setTimeout(function(){return n.finally(t)},100);break;case La:case Pa:r=t()}return r instanceof e?r:this}}],[{key:"all",value:function(t){return new e(function(n,r){if(Array.isArray(t)||"string"==typeof t)if(t.length>0){for(var a=[],i=0;i<t.length;i++)t[i]instanceof e?a.push(t[i]):a.push(e.resolve(t[i]));var s=new Array(a.length).fill(null),o=a.length,l=function(e,t,a){t?r(t):(o--,s[e]=a,o<=0&&n(s))};a.forEach(function(e,t){e.then(function(e){l(t,null,e)}).catch(function(e){l(t,e,null)})})}else n([]);else r(new Error("Uncaught (in promise) TypeError: ".concat(h(t)," ").concat(t," is not iterable")))})}},{key:"resolve",value:function(t){return new e(function(e){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}}]),e}(),Ua=function(){"undefined"==typeof Promise&&("undefined"!=typeof window?window.Promise=Da:"undefined"!=typeof a?a.Promise=Da:"undefined"!=typeof self?self.Promise=Da:"undefined"!=typeof globalThis&&(globalThis.Promise=Da)),Object.values||(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:Math.pow(2,53)-1})},xa=3e5,ja=null,Fa={},Ha=!1,Ga=null,Ba=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),Ua();var r=!1;if((n.newInstance||!ja||ja&&n.appId!==ja.getApplicationId()&&ja.getConnectionState()===ja.ConnectionState.CLOSED)&&(r=!0,ja=this),r){try{if(!n.hasOwnProperty("appId"))return X.warn("Must be set appId."),ja=null,null}catch(e){return X.warn("Must be set appId."),ja=null,null}var a=$n.create();Object.defineProperty(this,"_iid",{get:function(){return a}}),Fa[a]=this,this.customApiHost=null,this.customWsHost=null,this.connecting=!1,this.reconnecting=!1,this.isReconnectingOnError=!1,this.connectionCallbacks=[],this.ConnectionManager=new me(this),this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.currentUser=null,this.isSessionOpened=!1,this.globalTimer,this.loginTimer,this.reconnectTimer,this.loginHandler=null,this.onLoginTimerCancel,this.onReconnectTimerCancel,this.BaseChannel={MessageTypeFilter:Rt.MessageTypeFilter},this.GroupChannelFilter=Zn,this.MessageFilter=Me,this.GroupChannelCollection={GroupChannelOrder:ot},this.MessageCollection={MessageCollectionInitPolicy:je},this.CollectionEventSource=de,this._currentUserId=null;var i={User:It,Member:lr,RestrictedUser:ur,GroupChannel:or,OpenChannel:gr,UserMessage:Nr,FileMessage:Ar,AdminMessage:Ir,GroupChannelListQuery:Ur,MemberListQuery:xr,GroupChannelParams:na,OpenChannelParams:ra,BaseMessageParams:Cr,UserMessageParams:Or,FileMessageParams:Sr,ScheduledUserMessageParams:aa,GroupChannelTotalUnreadMessageCountParams:sa,GroupChannelTotalUnreadChannelCountParams:oa,MessageRetrievalParams:la,MessageListParams:ca,ThreadedMessageListParams:ua,MessageChangeLogsParams:da,GroupChannelChangeLogsParams:ha,PollParams:fa,PollRetrievalParams:pa,MessageMetaArray:Er,UserEventHandler:ma,SessionHandler:ge,ChannelHandler:ga,ConnectionHandler:_a,AppleCriticalAlertOptions:yr,Poll:Na,PollOption:Ia},s={SessionManager:ve,BaseChannel:Rt,BaseMessage:At,UserListQuery:Ta,ApplicationUserListQuery:Mr,BannedUserListQuery:Lr,BlockedUserListQuery:Pr,FriendListQuery:Dr,MutedUserListQuery:jr,OpenChannelListQuery:Fr,OperatorListQuery:Gr,ParticipantListQuery:Vr,MessageListQuery:Ra,PreviousMessageListQuery:Wr,MessageSearchQuery:qr,PublicGroupChannelListQuery:Qr,PollListQuery:$r,PollVoterListQuery:ta,ScheduledUserMessage:kr,ThreadInfo:Ea,ThreadInfoUpdateEvent:Tr,OGMetaData:ba,OGImage:Ca,Plugin:Oa,Command:be,Sender:cr,ReadStatus:va,Reaction:ya,ReactionEvent:Ct,Emoji:fr,EmojiCategory:hr,EmojiContainer:dr,PollDetails:Sa,PollUpdateEvent:wr,PollVoteEvent:Rr,RestrictionInfo:ka,FileMessageQueue:xt},o=new G(this._iid,d(d({},i),s));this.BaseMessage={ReplyType:At.ReplyType,getMessage:o.BaseMessage.getMessage.bind(o.BaseMessage)},Object.keys(o).forEach(function(e){i[e]&&(t[e]=o[e])});var l={encrypt:function(e){return e},decrypt:function(e){return e}};w.create(a,{appId:n.appId,pinger:new Z(this),apiClient:new ce(this),wsAdapter:new pe(this),commandHandler:new Pt(this),onlineDetector:new ye(this),ackStateMap:{},subscribedUnreadMessageCount:{all:0,custom_types:{},ts:0},maxUnreadCountOfSuperGroupChannel:k.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,nestdb:null,currentUserId:null,localCacheEnabled:"boolean"==typeof n.localCacheEnabled&&n.localCacheEnabled,localCacheLock:new $,debugCache:!1,encryption:l,store:new Fn({encryption:l}),preference:null,auth:new F,appInfo:null,pingInterval:15e3,pongTimeout:5e3,connectedAt:0,extensions:{},supportedExtensionKeys:["sb_uikit","sb_syncmanager"],getUserAgentWithExtensions:function(e){var t=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",n=e.sb_uikit?"u".concat(e.sb_uikit):"";return"JS/c".concat(k.SDK_VERSION,"/").concat(t,"/").concat(n)},sessionManager:new o.SessionManager(this),stateChangeEnabled:!0,isInBackground:!1,closedByGoingBackground:!1,isErrorFirstInCallback:!1,autoResendQueue:[],isProcessingAutoResend:!1}),this.userEventHandlers={},this.channelHandlers={},this.connectionHandlers={},this.Options={_useMemberAsMessageSender:!0,get UseMemberAsMessageSender(){return this._useMemberAsMessageSender},set UseMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},get useMemberAsMessageSender(){return this._useMemberAsMessageSender},set useMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},_typingIndicatorThrottle:1e3,get typingIndicatorThrottle(){return this._typingIndicatorThrottle},set typingIndicatorThrottle(e){"number"==typeof e&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},_websocketResponseTimeout:1e4,get websocketResponseTimeout(){return this._websocketResponseTimeout},set websocketResponseTimeout(e){"number"==typeof e&&e>=5e3&&e<=xa&&(this._websocketResponseTimeout=e)},includePollDetails:!1};var c=fe.of(a);c.addObserver({onConnect:function(){t.isCacheEnabled&&!t.getIsProcessingAutoResend()&&(0===t.getAutoResendQueue().length?nt._processPendingMessages(t).then(function(){nt._processNextAutoResend(t)}):nt._processNextAutoResend(t))},onDisconnect:function(){}})}return ja}return _(e,[{key:"ConnectionState",get:function(){return{CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"MessageRequestState",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"}}},{key:"MessageSendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"pushTokenRegistrationState",get:function(){return{SUCCESS:"success",PENDING:"pending",ERROR:"error"}}},{key:"PushTriggerOption",get:function(){return{ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"appInfo",get:function(){return w.get(this._iid).container.appInfo}},{key:"isCacheEnabled",get:function(){return w.get(this._iid).container.localCacheEnabled}},{key:"ekey",get:function(){var e=w.get(this._iid).container.auth;return e?e.eKey:""}},{key:"getApplicationId",value:function(){return w.get(this._iid).get("appId")}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.userId:null}},{key:"getDebugMode",value:function(){return Ha}},{key:"setDebugMode",value:function(e){Ha=e,X.mode=e?X.Mode.DEBUG:X.Mode.PRODUCTION}},{key:"getErrorFirstCallback",value:function(){return w.get(this._iid).container.isErrorFirstInCallback}},{key:"setErrorFirstCallback",value:function(e){"boolean"==typeof e&&w.get(this._iid).set("isErrorFirstInCallback",e)}},{key:"getAutoResendQueue",value:function(){return w.get(this._iid).container.autoResendQueue}},{key:"getIsProcessingAutoResend",value:function(){return w.get(this._iid).container.isProcessingAutoResend}},{key:"setIsProcessingAutoResend",value:function(e){w.get(this._iid).set("isProcessingAutoResend",e)}},{key:"getCurrentApiHost",value:function(){return this.customApiHost?this.customApiHost:"https://api.sendbird.com"}},{key:"clearCurrentApiHost",value:function(){this.customApiHost=null}},{key:"getCurrentWsHost",value:function(){return this.customWsHost?this.customWsHost:"wss://ws.sendbird.com"}},{key:"clearCurrentWsHost",value:function(){this.customWsHost=null}},{key:"getConnectionState",value:function(){try{var e=w.get(this._iid).container.wsAdapter;return this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:e.client?this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:this.isSessionOpened?e.client.getConnectionState():this.ConnectionState.CLOSED:this.ConnectionState.CLOSED}catch(e){return this.ConnectionState.CLOSED}}},{key:"getPendingGCMToken",value:function(){return this.GCMPushToken}},{key:"getPendingAPNSToken",value:function(){return this.APNSPushToken}},{key:"hasLoggedIn",value:function(){var e=w.get(this._iid);return this.currentUser&&e.get("auth").hasSession()}},{key:"getLastConnectedAt",value:function(){var e=w.get(this._iid);return this.getConnectionState()===this.ConnectionState.OPEN&&this.currentUser?e.get("connectedAt"):0}},{key:"getMemoryStoreForDebugging",value:function(){var e=w.get(this._iid);return e.container.debugCache&&e.container.store instanceof xn?e.container.store:null}},{key:"useMemoryAsDatabaseForDebugging",value:function(){var e=w.get(this._iid);e.container.debugCache=!0,e.container.store=new xn}},{key:"useAsyncStorageAsDatabase",value:function(e){var t=w.get(this._iid);t.container.store=new Hn({AsyncStorage:e,encryption:t.container.encryption})}},{key:"initializeDatabase",value:function(e,t){var n=this,r=w.get(this._iid),a=r.container,i=a.appId,s=a.nestdb,o=a.store,l=a.localCacheEnabled;return le(this._iid,function(t){if(l)if(s)t(null);else{var a=r.container.nestdb=new Xn({name:"sendbird=".concat(i,"-").concat(e,".db"),version:1,store:o});a.on("upgrade",function(e,t){0===e?a.commitSchema([{collectionName:"GroupChannel",keyName:"url",index:[Te.NAME_ALPHABETICAL,Te.CHRONOLOGICAL,Te.LATEST_LAST_MESSAGE]},{collectionName:"SucceededMessage",keyName:"messageId",keyHash:function(e,t){return Math.floor(parseInt(e)/t)},index:[we.LATEST,we.CHILD_MESSAGE_FIRST]},{collectionName:"UnsentMessage",keyName:"reqId",index:[we.LATEST_UNSENT,we.CHILD_MESSAGE_FIRST]}]).then(function(){return t()}).catch(function(e){throw e}):t()}),a.on("error",function(e){e?e.code===Vt.STORE_NOT_AVAILABLE||e.code===Vt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING?t(null):(X.error("Database initialize failed with an error: ",e),t(e)):t(null)}),a.on("success",function(){r.container.currentUserId=e,new bt({iid:n._iid,collection:a.collection("GroupChannel")}),new Fe({iid:n._iid,collections:{succeeded:a.collection("SucceededMessage"),unsent:a.collection("UnsentMessage")}}),X.debug("Database initialize succeeded."),t(null)}),a.open()}else r.container.currentUserId=e,new bt({iid:n._iid,collection:null}),new Fe({iid:n._iid,collections:{succeeded:null,unsent:null}}),t(null)},t)}},{key:"clearCachedData",value:function(){var e=w.get(this._iid),t=e.container,n=t.localCacheEnabled,r=t.nestdb;return new Promise(function(t,a){n&&r?(r.close(),r.reset().then(function(){X.debug("Database clear succeeded."),e.container.nestdb=null,t()}).catch(function(e){X.error("Database clear failed with an error: ",e),a(e)})):t()})}},{key:"connect",value:function(e,t,n,r,a){var i=this,s=w.get(this._iid),o=s.container,l=o.wsAdapter,c=o.onlineDetector,u=o.localCacheEnabled;c&&c.start();var d=null,h=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||3===e.length}}),new _e({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new _e({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new _e({type:"callback"})]),f=O(h,6);return d=f[0],e=f[1],t=f[2],n=f[3],r=f[4],a=f[5],(n||r)&&X.debug("Please note that apiHost and wsHost are for internal use only."),le(this._iid,function(a){if(d)a(d,null);else if(i.customApiHost=n,i.customWsHost=r,i.connecting=!0,i.reconnecting=!1,i.isReconnectingOnError=!1,i.reconnectTimer&&(clearTimeout(i.reconnectTimer),i.reconnectTimer=null,i.onReconnectTimerCancel=null),i.getConnectionState()===i.ConnectionState.OPEN&&i.currentUser&&i.currentUser.userId===e)i.connecting=!1,a(null,i.currentUser);else if(u&&(i._currentUserId=e),i.connectionCallbacks.push(a),1===i.connectionCallbacks.length){l.disconnect({clearSession:!0,err:null},null);var o=s.container,c=o.nestdb,h=o.localCacheLock;c?l.connect(e,t):h.lock(function(n){i.initializeDatabase(e).then(function(){n(),l.connect(e,t)}).catch(function(e){s.container.localCacheEnabled=!1,n(),a(e,null)})})}},a)}},{key:"reconnect",value:function(){var e=this,t=w.get(this._iid).container,n=t.wsAdapter,r=t.auth,a=t.localCacheLock;if(r.sessionKey&&this.currentUser){var i=!0;return n.reconnectCount>0&&(i=!1),a.lock(function(t){n.disconnect({clearSession:!1,err:new j("Connection has been canceled.",j.CONNECTION_CANCELED)},null),n.reconnectCount=0,n.reconnect(e.currentUser.userId,i),t()}),!0}return!1}},{key:"disconnect",value:function(e){var t=this;return le(this._iid,function(e){var n=w.get(t._iid).container,r=n.localCacheLock,a=n.wsAdapter,i=n.onlineDetector;i&&i.stop(),r.lock(function(n){a.disconnect({clearSession:!0,err:new j("Connection has been canceled.",j.CONNECTION_CANCELED)},function(){t.clearCachedData().finally(function(){n(),e(null)})})})},e)}},{key:"setBackgroundState",value:function(){var e=w.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled;!t.isInBackground&&r&&(e.set("isInBackground",!0),this.getConnectionState()!==this.ConnectionState.CLOSED?(e.set("closedByGoingBackground",!0),n.disconnect({clearSession:!1,err:new j("Websocket connection failed.",j.WEBSOCKET_CONNECTION_FAILED)},null),fe.of(this._iid).invokeDisconnect()):e.set("closedByGoingBackground",!1))}},{key:"isInBackground",get:function(){return w.get(this._iid).container.isInBackground}},{key:"setForegroundState",value:function(){var e=w.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled,a=t.isInBackground,i=t.closedByGoingBackground;a&&r&&(e.set("isInBackground",!1),i&&this.currentUser&&n.reconnect(this.currentUser.userId,!0))}},{key:"enableStateChange",value:function(){w.get(this._iid).set("enableStateChange",!0)}},{key:"disableStateChange",value:function(){w.get(this._iid).set("enableStateChange",!1)}},{key:"addExtension",value:function(e,t){var n=w.get(this._iid).container,r=n.extensions;n.supportedExtensionKeys.indexOf(e)>-1&&(r[e]=t)}},{key:"createUserListQuery",value:function(e){return new(0,G.get(this._iid).UserListQuery)(e)}},{key:"createApplicationUserListQuery",value:function(){return new(0,G.get(this._iid).ApplicationUserListQuery)}},{key:"createBlockedUserListQuery",value:function(){return new(0,G.get(this._iid).BlockedUserListQuery)}},{key:"createFriendListQuery",value:function(){return new(0,G.get(this._iid).FriendListQuery)}},{key:"createMessageSearchQuery",value:function(e,t){return new(0,G.get(this._iid).MessageSearchQuery)(e,t)}},{key:"sendCommand",value:function(e,t){var n=this;return le(this._iid,function(t){n.ConnectionManager.ready(function(r,a){if(r)t(r,null);else{var i=w.get(n._iid).container,s=i.wsAdapter,o=i.ackStateMap;if(null==s||null==s.client||s.client.getConnectionState()!==n.ConnectionState.OPEN||n.getConnectionState()!==n.ConnectionState.OPEN)return void t(new j("Connection is not valid. Please reconnect.",j.WEBSOCKET_CONNECTION_CLOSED),null);if(e.isAckRequired){var l=e.requestId,c={handler:t,timer:setTimeout(function(){t(new j("Command received no ack.",j.ACK_TIMEOUT),null),delete o[l]},n.Options.websocketResponseTimeout)};o[l]=c,s.client.send(e,function(e){e&&(clearTimeout(c.timer),t(e,null))})}else s.client.send(e,t)}},!1)},t).catch(function(e){X.error(e)})}},{key:"setSessionHandler",value:function(e){w.get(this._iid).container.sessionManager.setHandler(e)}},{key:"addUserEventHandler",value:function(e,t){t instanceof G.get(this._iid).UserEventHandler&&(this.userEventHandlers[e]=t)}},{key:"removeUserEventHandler",value:function(e){delete this.userEventHandlers[e]}},{key:"removeAllUserEventHandler",value:function(){this.userEventHandlers={}}},{key:"addChannelHandler",value:function(e,t){t instanceof G.get(this._iid).ChannelHandler&&(this.channelHandlers[e]=t)}},{key:"removeChannelHandler",value:function(e){delete this.channelHandlers[e]}},{key:"removeAllChannelHandlers",value:function(){this.channelHandlers={}}},{key:"addConnectionHandler",value:function(e,t){t instanceof G.get(this._iid).ConnectionHandler&&(this.connectionHandlers[e]=t)}},{key:"removeConnectionHandler",value:function(e){delete this.connectionHandlers[e]}},{key:"removeAllConnectionHandlers",value:function(){this.connectionHandlers={}}},{key:"updateCurrentUserInfo",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"string",nullable:!0}),new _e({type:"string",nullable:!0}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){if(a)n(a,null);else{var i=w.get(r._iid);i.container.apiClient.updateCurrentUserInfo({nickname:e,profileUrl:t},function(a,s){var o=null;a||(r.currentUser&&(e&&(r.currentUser.nickname=e),t&&(r.currentUser.plainProfileUrl=t,Object.defineProperty(r.currentUser,"profileUrl",{value:r.currentUser.requireAuth?"".concat(r.currentUser.plainProfileUrl,"?auth=").concat(i.container.auth.eKey):r.currentUser.plainProfileUrl,configurable:!0,writable:!1}))),o=r.currentUser),n(a,o)})}},n)}},{key:"updateCurrentUserInfoWithProfileImage",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"string",nullable:!0}),new _e({type:"file",nullable:!0}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){if(a)n(a,null);else{var i=w.get(r._iid);i.container.apiClient.updateCurrentUserInfo({nickname:e,profileImage:t},function(t,a){var s=null;t||(r.currentUser&&(e&&(r.currentUser.nickname=e),a.profile_url&&(r.currentUser.plainProfileUrl=a.profile_url,Object.defineProperty(r.currentUser,"profileUrl",{value:r.currentUser.requireAuth?"".concat(r.currentUser.plainProfileUrl,"?auth=").concat(i.container.auth.eKey):r.currentUser.plainProfileUrl,configurable:!0,writable:!1}))),s=r.currentUser),n(t,s)})}},n)}},{key:"updateCurrentUserInfoWithPreferredLanguages",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.updateCurrentUserInfo({preferredLanguages:e},function(r,a){var i=null;r||(n.currentUser&&e&&(n.currentUser._preferredLanguages=e),i=n.currentUser),t(r,i)})},t)}},{key:"registerGCMPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,n.pushTokenRegistrationState.ERROR):n.currentUser?w.get(n._iid).container.apiClient.registerGCMPushToken({token:e},function(e,r){var a=n.pushTokenRegistrationState.ERROR;e||(n.GCMPushToken="",a=n.pushTokenRegistrationState.SUCCESS),t(e,a)}):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))},t)}},{key:"unregisterGCMPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):n.currentUser?w.get(n._iid).container.apiClient.unregisterGCMPushToken({token:e},function(e,n){t(e,null)}):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))},t)}},{key:"unregisterGCMPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.unregisterAllGCMPushTokens({},function(t,n){e(t,null)})},e)}},{key:"registerAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,n.pushTokenRegistrationState.ERROR):n.currentUser?w.get(n._iid).container.apiClient.registerAPNSPushToken({token:e},function(e,r){var a=n.pushTokenRegistrationState.ERROR;e||(n.APNSPushToken="",a=n.pushTokenRegistrationState.SUCCESS),t(e,a)}):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))},t)}},{key:"unregisterAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e.length>0}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):n.currentUser?w.get(n._iid).container.apiClient.unregisterAPNSPushToken({token:e},function(e,n){t(e,null)}):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))},t)}},{key:"unregisterAPNSPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.unregisterAllAPNSPushTokens({},function(t,n){e(t,null)})},e)}},{key:"unregisterPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.unregisterAllPushTokens({},function(t,n){e(t,null)})},e)}},{key:"getMyGroupChannelChangeLogsByToken",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"string",nullable:!0}),new _e({type:"array",optional:!0,nullable:!0,defaultValue:null}),new _e({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new _e({type:"callback"})]),o=O(s,5);i=o[0],e=o[1],t=o[2],n=o[3],r=o[4];var l=G.get(this._iid),c=l.GroupChannelChangeLogsParams,u=null;if(i){var h=_e.parse(arguments,[new _e({type:"string",nullable:!0}),new _e({type:c,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),f=O(h,4);i=f[0],e=f[1],u=f[2],r=f[3]}else(u=new c).customTypes=t,u.includeEmpty=n,u.includeFrozen=!0;return le(this._iid,function(t){i?t(i,null):w.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(d({ts:null,token:e},u)).then(function(e){var n=G.get(a._iid).GroupChannel,r=e.updated.map(function(e){return new n(e)}),i=e.deleted,s=e.has_more,o=e.next;t(null,{updatedChannels:r,deletedChannelUrls:i,hasMore:s,token:o})}).catch(function(e){t(e,null)})},r)}},{key:"getMyGroupChannelChangeLogsByTimestamp",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"number",constraint:function(e){return e>=0}}),new _e({type:"array",optional:!0,nullable:!0,defaultValue:null}),new _e({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new _e({type:"callback"})]),o=O(s,5);i=o[0],e=o[1],t=o[2],n=o[3],r=o[4];var l=G.get(this._iid),c=l.GroupChannelChangeLogsParams,u=null;if(i){var h=_e.parse(arguments,[new _e({type:"number",constraint:function(e){return e>=0}}),new _e({type:c,constraint:function(e){return e._validate()}}),new _e({type:"callback"})]),f=O(h,4);i=f[0],e=f[1],u=f[2],r=f[3]}else(u=new c).customTypes=t,u.includeEmpty=n,u.includeFrozen=!0;return le(this._iid,function(t){i?t(i,null):w.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(d({ts:e,token:null},u)).then(function(e){var n=G.get(a._iid).GroupChannel,r=e.updated.map(function(e){return new n(e)}),i=e.deleted,s=e.has_more,o=e.next;t(null,{updatedChannels:r,deletedChannelUrls:i,hasMore:s,token:o})}).catch(function(e){t(e,null)})},r)}},{key:"getChannelInvitationPreference",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getChannelInvitationPreference({},function(t,n){var r=null;t||(r={autoAccept:n.auto_accept}),e(t,r)})},e)}},{key:"setChannelInvitationPreference",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"boolean"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.setChannelInvitationPreference({isAutoAccept:e},function(e,n){var r=null;e||(r={autoAccept:n.auto_accept}),t(e,r)})},t)}},{key:"getDoNotDisturb",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getDoNotDisturb({},function(t,n){var r=null;t||(r={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone}),e(t,r)})},e)}},{key:"setDoNotDisturb",value:function(e,t,n,r,a,i,s){var o=this,l=null,c=_e.parse(arguments,[new _e({type:"boolean"}),new _e({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new _e({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new _e({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new _e({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new _e({type:"string"}),new _e({type:"callback"})]),u=O(c,8);return l=u[0],e=u[1],t=u[2],n=u[3],r=u[4],a=u[5],i=u[6],s=u[7],le(this._iid,function(s){l?s(l,null):w.get(o._iid).container.apiClient.setDoNotDisturb({doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:a,timezone:i},function(e,t){var n=null;e||(n={doNotDisturbOn:t.do_not_disturb,startHour:t.start_hour,startMin:t.start_min,endHour:t.end_hour,endMin:t.end_min,timezone:t.timezone}),s(e,n)})},s)}},{key:"getSnoozePeriod",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getSnoozePeriod({},function(t,n){var r=null;t||(r={isSnoozeOn:n.snooze_enabled,startTs:n.snooze_start_ts,endTs:n.snooze_end_ts}),e(t,r)})},e)}},{key:"setSnoozePeriod",value:function(e,t,n,r){var a=this,i=null,s=_e.parse(arguments,[new _e({type:"boolean"}),new _e({type:"number",constraint:function(e){return e>0}}),new _e({type:"number",constraint:function(e){return e>0}}),new _e({type:"callback"})]),o=O(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,function(r){i?r(i,null):w.get(a._iid).container.apiClient.setSnoozePeriod({snoozeOn:e,startTs:t,endTs:n},function(e,t){var n=null;e||(n={isSnoozeOn:t.snooze_enabled,startTs:t.snooze_start_ts,endTs:t.snooze_end_ts}),r(e,n)})},r)}},{key:"blockUser",value:function(e,t){var n=null,r=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new _e({type:"callback"})]),a=O(r,3);return n=a[0],e=a[1],t=a[2],n?le(this._iid,function(e){e(n,null)},t):this.blockUserWithUserId(e.userId,t)}},{key:"blockUserWithUserId",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.blockUser({blockedUserId:e},function(e,n){var r=null;e||(r=new It(n)),t(e,r)})},t)}},{key:"unblockUser",value:function(e,t){var n=null,r=_e.parse(arguments,[new _e({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new _e({type:"callback"})]),a=O(r,3);return n=a[0],e=a[1],t=a[2],n?le(this._iid,function(e){e(n,null)},t):this.unblockUserWithUserId(e.userId,t)}},{key:"unblockUserWithUserId",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.unblockUser({unblockedUserId:e},function(e,n){t(e,null)})},t)}},{key:"getPushTriggerOption",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getPushTriggerOption({},function(t,n){e(t,n?n.push_trigger_option:null)})},e)}},{key:"setPushTriggerOption",value:function(e,t){var n=this;return le(this._iid,function(t){Object.keys(n.PushTriggerOption).map(function(e){return n.PushTriggerOption[e]}).indexOf(e)>-1?w.get(n._iid).container.apiClient.setPushTriggerOption({pushTriggerOption:e},function(e,n){t(e,n?n.push_trigger_option:null)}):t(_e.error,null)},t)}},{key:"getGroupChannelCount",value:function(e,t){var n=this,r=G.get(this._iid),a=r.GroupChannel,i=null,s=_e.parse(arguments,[new _e({type:a.MemberStateFilter,optional:!0,defaultValue:a.MemberStateFilter.ALL}),new _e({type:"callback"})]),o=O(s,3);return i=o[0],e=o[1],t=o[2],le(this._iid,function(t){i?t(i,null):w.get(n._iid).container.apiClient.getGroupChannelCount({memberStateFilter:e},function(e,n){var r=null;e||(r=parseInt(n.group_channel_count)),t(e,r)})},t)}},{key:"getTotalUnreadChannelCount",value:function(e,t){var n=this,r=G.get(this._iid),a=r.GroupChannel,i=r.GroupChannelTotalUnreadChannelCountParams,s=null,o=_e.parse(arguments,[new _e({type:"object",optional:!0,defaultValue:null,constraint:function(e){return e instanceof i}}),new _e({type:"callback"})]),l=O(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,function(t){if(s)t(s,null);else{var r=null,i=a.SuperChannelFilter.ALL;e&&(r=e.channelCustomTypesFilter,i=e.superChannelFilter),w.get(n._iid).container.apiClient.getTotalUnreadChannelCount({customTypesFilter:r,superChannelFilter:i},function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)})}},t)}},{key:"getTotalUnreadMessageCount",value:function(e,t){var n=this,r=G.get(this._iid),a=r.GroupChannel,i=r.GroupChannelTotalUnreadMessageCountParams,s=null,o=_e.parse(arguments,[new _e({type:"object",optional:!0,defaultValue:null,constraint:function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})||e instanceof i}}),new _e({type:"callback"})]),l=O(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,function(t){if(s)t(s,null);else{var r=a.SuperChannelFilter.ALL;if(e instanceof i){var o=e;e=o.channelCustomTypesFilter,r=o.superChannelFilter}w.get(n._iid).container.apiClient.getTotalUnreadMessageCount({customTypesFilter:e,superChannelFilter:r},function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)})}},t)}},{key:"getUnreadItemCount",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.length>0&&e.every(function(e){return Object.keys(or.UnreadItemKey).map(function(e){return or.UnreadItemKey[e]}).indexOf(e)>-1})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){if(r)t(r,null);else{var a=e.filter(function(t,n){return e.indexOf(t)===n});w.get(n._iid).container.apiClient.getUnreadItemCount({keys:a},function(e,n){t(e,n)})}},t)}},{key:"getSubscribedTotalUnreadMessageCount",value:function(){var e=w.get(this._iid).container.subscribedUnreadMessageCount;return e.all>=0?e.all:0}},{key:"getSubscribedCustomTypeTotalUnreadMessageCount",value:function(){var e=w.get(this._iid).container.subscribedUnreadMessageCount;if(Object.keys(e.custom_types).length>0){var t=0;return Object.keys(e.custom_types).forEach(function(n){t+=e.custom_types[n]}),t}return 0}},{key:"getSubscribedCustomTypeUnreadMessageCount",value:function(e){if(e&&"string"==typeof e){var t=w.get(this._iid).container.subscribedUnreadMessageCount;return t.custom_types.hasOwnProperty(e)?t.custom_types[e]:0}return 0}},{key:"getMyPushTokensByToken",value:function(e,t,n){var r=this,a=null,i=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"string",constraint:function(e){return["gcm","apns","apns_voip"].indexOf(e)>-1}}),new _e({type:"callback"})]),s=O(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,function(n){a?n(a,null):w.get(r._iid).container.apiClient.getPushTokens({ts:null,token:e,type:t},function(e,t){if(e)n(e,null);else{var r=t.type;n(null,{deviceTokens:t.device_tokens,type:r?r.toLowerCase():"unknown",hasMore:t.has_more,token:t.token})}})},n)}},{key:"getPushTemplate",value:function(e){var t=this;return le(this._iid,function(e){w.get(t._iid).container.apiClient.getPushTemplate({},function(t,n){var r=null;t||(r=n.name.toString()),e(t,r)})},e)}},{key:"setPushTemplate",value:function(e,t){var n=this;return le(this._iid,function(t){[n.PUSH_TEMPLATE_DEFAULT,n.PUSH_TEMPLATE_ALTERNATIVE].indexOf(e)>-1?w.get(n._iid).container.apiClient.setPushTemplate({templateName:e},function(e,n){var r=null;e||(r=n.name.toString()),t(e,r)}):t(_e.error,null)},t)}},{key:"markAsReadAll",value:function(e){var t=this;return le(this._iid,function(e){var n=G.get(t._iid).GroupChannel,r=(new Date).getTime();r-n.markAsReadAllLastSentAt<1e3?e(new j("MarkAsRead rate limit exceeded.",j.MARK_AS_READ_RATE_LIMIT_EXCEEDED),null):(n.markAsReadAllLastSentAt=r,w.get(t._iid).container.apiClient.markAsReadAll({channelUrls:null},function(a,i){a||Object.keys(n.cachedChannels).forEach(function(e){t.currentUser&&n.cachedChannels[e].updateReadReceipt(t.currentUser.userId,r),n.cachedChannels[e]._setGroupChannelUnreadCount(0,0)}),e(a,null)}))},e)}},{key:"markAsReadWithChannelUrls",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){if(r)t(r,null);else{var a=(new Date).getTime();w.get(n._iid).container.apiClient.markAsReadAll({channelUrls:e},function(r,i){r||e.forEach(function(e){or.cachedChannels[e]&&(n.currentUser&&or.cachedChannels[e].updateReadReceipt(n.currentUser.userId,a),or.cachedChannels[e]._setGroupChannelUnreadCount(0,0))}),t(r,null)})}},t)}},{key:"markAsDelivered",value:function(e){"string"==typeof e&&G.get(this._iid).GroupChannel.getChannel(e,k.INTERNAL_CALL,function(e,t){e||t.markAsDelivered()})}},{key:"getFriendChangeLogsByToken",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string",optional:!0,defaultValue:null}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.getFriendChangeLogsByToken({token:e},function(e,r){var a=null;if(!e){var i=G.get(n._iid).User;a={updatedUsers:r.updated.map(function(e){return new i(e)}),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next}}t(e,a)})},t)}},{key:"uploadFriendDiscoveries",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.every(function(e){return e.hasOwnProperty("friendDiscoveryKey")})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.uploadFriendDiscoveries({discoveries:e},function(e,n){t(e,n)})},t)}},{key:"deleteFriendDiscovery",value:function(e,t){var n=null,r=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),a=O(r,3);return n=a[0],e=a[1],t=a[2],n?le(this._iid,function(e){e(n,null)},t):this.deleteFriendDiscoveries([e],t)}},{key:"deleteFriendDiscoveries",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.deleteFriendDiscoveries({discoveryKeys:e},function(e,n){t(e,n)})},t)}},{key:"addFriends",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.addFriends({userIds:e},function(e,r){var a=null;if(!e){var i=G.get(n._iid).User;a=r.users.map(function(e){return new i(e)})}t(e,a)})},t)}},{key:"deleteFriend",value:function(e,t){var n=null,r=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),a=O(r,3);return n=a[0],e=a[1],t=a[2],n?le(this._iid,function(e){e(n,null)},t):this.deleteFriends([e],t)}},{key:"deleteFriends",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.deleteFriends({userIds:e},function(e,n){t(e,n)})},t)}},{key:"getAllEmoji",value:function(e){var t=this,n=null,r=_e.parse(arguments,[new _e({type:"callback"})]),a=O(r,2);return n=a[0],e=a[1],le(this._iid,function(e){n?e(n,null):w.get(t._iid).container.apiClient.getAllEmoji(function(n,r){if(n)e(n,null);else{var a=new(0,G.get(t._iid).EmojiContainer)(r);e(null,a)}})},e)}},{key:"getEmojiCategory",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"number",constraint:function(e){return e>=0}}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.getEmojiCategory({categoryId:e},function(e,r){if(e)t(e,null);else{var a=new(0,G.get(n._iid).EmojiCategory)(r);t(null,a)}})},t)}},{key:"getEmoji",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"string"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.getEmoji({emojiKey:e},function(e,r){if(e)t(e,null);else{var a=new(0,G.get(n._iid).Emoji)(r);t(null,a)}})},t)}},{key:"getAllowFriendDiscovery",value:function(e){var t=this,n=null,r=_e.parse(arguments,[new _e({type:"callback"})]),a=O(r,2);return n=a[0],e=a[1],le(this._iid,function(e){n?e(n,null):w.get(t._iid).container.apiClient.getAllowFriendDiscovery(function(t,n){var r=n.allow_friend_discovery;t?e(t,null):e(null,r)})},e)}},{key:"setAllowFriendDiscovery",value:function(e,t){var n=this,r=null,a=_e.parse(arguments,[new _e({type:"boolean"}),new _e({type:"callback"})]),i=O(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,function(t){r?t(r,null):w.get(n._iid).container.apiClient.setAllowFriendDiscovery({allowFriendDiscovery:e},function(n,r){n?t(n,null):t(null,e)})},t)}},{key:"clearCachedMessages",value:function(e){var t=this,n=Fe.of(this._iid);if(n){var r=w.get(this._iid).container.store;return Promise.all(e.map(function(e){return new Promise(function(a,i){n.clearByChannelUrl(e).then(function(){var n=Be(t._currentUserId,e);return r.remove(n)}).then(function(){var n=qe(t._currentUserId,e);return r.remove(n)}).then(function(){a()}).catch(function(e){i(e)})})}))}return Promise.resolve([])}},{key:"_getCurrentUserDataKey",value:function(){return"sendbird:".concat(this._currentUserId,"@currentUserData")}},{key:"_populateVaultFromCurrentUserData",value:function(e){var t=w.get(this._iid),n=t.container.auth,r=G.get(this._iid).User,a=e.currentUser,i=e.maxUnreadCountOfSuperGroupChannel,s=e.profileImageEncryption,o=e.sessionKey,l=e.eKey,c=e.appInfo,u=e.connectedAt,d=e.firstConnectedAt,h=e.concurrentCallLimit,f=e.backOffDelay;a&&(this.currentUser=r.buildFromSerializedData(a)),i&&t.set("maxUnreadCountOfSuperGroupChannel",i),s&&t.set("profileImageEncryption",s),n?(o&&(n.sessionKey=o),l&&(n.ekey=l)):X.debug("Auth should have been created when populating current user data."),c&&t.set("appInfo",new Oe(c)),u&&t.set("connectedAt",u),d&&t.set("firstConnectedAt",d),h&&t.set("concurrentCallLimit",h),f&&t.set("backOffDelay",f)}}],[{key:"version",get:function(){return k.SDK_VERSION}},{key:"LogLevel",get:function(){return X.supportedLogLevels}},{key:"getInstance",value:function(e){return e?Fa[e]:ja}},{key:"getLogLevel",value:function(){return X.logLevel}},{key:"setLogLevel",value:function(e){var t=Object.values(X.supportedLogLevels);if(t.includes(e))X.logLevel=e;else{X.logLevel=X.defaultLogLevel;var n=t.map(function(e){return"'".concat(e,"'")}).join(", ");X.warn("`logLevel` parameter should be one of","".concat(n,","),"not `'".concat(e,"'`."),"Set to default log level","`".concat(X.defaultLogLevel,"`."))}}},{key:"getAppVersion",value:function(){return Ga}},{key:"setAppVersion",value:function(e){"string"==typeof e&&ee()&&(Ga=e)}}]),e}();return Ba}(n(108),n(127),n(128))}).call(this,n(72),n(104).Buffer,n(73))},function(e,t,n){"use strict";n(5),n(0);var r=n(50);n.d(t,"a",function(){return r.a});n(13),n(23),n(19),n(10),n(9),n(4),n(6),n(20)},function(e,t){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var c=i[l];if(!o(c))return!1;var u=e[c],d=t[c];if(!1===(a=n?n.call(r,u,d,c):void 0)||void 0===a&&u!==d)return!1}return!0}},function(e,t,n){"use strict";t.a=function(e){function t(e,t,r){var a=t.trim().split(p);t=a;var i=a.length,s=e.length;switch(s){case 0:case 1:var o=0;for(e=0===s?"":e[0]+" ";o<i;++o)t[o]=n(e,t[o],r).trim();break;default:var l=o=0;for(t=[];o<i;++o)for(var c=0;c<s;++c)t[l++]=n(e[c]+" ",a[o],r).trim()}return t}function n(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(_,"$1"+e.trim());case 58:return e.trim()+t.replace(_,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(_,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,i){var s=e+";",o=2*t+3*n+4*i;if(944===o){e=s.indexOf(":",9)+1;var l=s.substring(e,s.length-1).trim();return l=s.substring(0,e).trim()+l+";",1===T||2===T&&a(l,1)?"-webkit-"+l+l:l}if(0===T||2===T&&!a(s,1))return s;switch(o){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(S,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return h.test(s)?s.replace(d,":-webkit-")+s.replace(d,":-moz-")+s:s;case 1e3:switch(t=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=s.replace(y,"tb");break;case 232:l=s.replace(y,"tb-rl");break;case 220:l=s.replace(y,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(t=(s=e).length-10,o=(l=(33===s.charCodeAt(t)?s.substring(0,t):s).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<o?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return l=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+l+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(C,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(C,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===N.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,i).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+i&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+s}return s}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),L(2!==t?r:r.replace(O,"$1"),n,t)}function i(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(b," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,a,i,s,o,c,u){for(var d,h=0,f=t;h<M;++h)switch(d=R[h].call(l,e,f,n,r,a,i,s,o,c,u)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==t)return f}function o(e){return void 0!==(e=e.prefix)&&(L=null,e?"function"!==typeof e?T=1:(T=2,L=e):T=0),o}function l(e,n){var o=e;if(33>o.charCodeAt(0)&&(o=o.trim()),o=[o],0<M){var l=s(-1,n,o,o,I,A,0,0,0,0);void 0!==l&&"string"===typeof l&&(n=l)}var d=function e(n,o,l,d,h){for(var f,p,_,y,b,C=0,O=0,N=0,S=0,R=0,L=0,D=_=f=0,U=0,x=0,j=0,F=0,H=l.length,G=H-1,B="",V="",z="",q="";U<H;){if(p=l.charCodeAt(U),U===G&&0!==O+S+N+C&&(0!==O&&(p=47===O?10:47),S=N=C=0,H++,G++),0===O+S+N+C){if(U===G&&(0<x&&(B=B.replace(u,"")),0<B.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:B+=l.charAt(U)}p=59}switch(p){case 123:for(f=(B=B.trim()).charCodeAt(0),_=1,F=++U;U<H;){switch(p=l.charCodeAt(U)){case 123:_++;break;case 125:_--;break;case 47:switch(p=l.charCodeAt(U+1)){case 42:case 47:e:{for(D=U+1;D<G;++D)switch(l.charCodeAt(D)){case 47:if(42===p&&42===l.charCodeAt(D-1)&&U+2!==D){U=D+1;break e}break;case 10:if(47===p){U=D+1;break e}}U=D}}break;case 91:p++;case 40:p++;case 34:case 39:for(;U++<G&&l.charCodeAt(U)!==p;);}if(0===_)break;U++}switch(_=l.substring(F,U),0===f&&(f=(B=B.replace(c,"").trim()).charCodeAt(0)),f){case 64:switch(0<x&&(B=B.replace(u,"")),p=B.charCodeAt(1)){case 100:case 109:case 115:case 45:x=o;break;default:x=w}if(F=(_=e(o,x,_,p,h+1)).length,0<M&&(b=s(3,_,x=t(w,B,j),o,I,A,F,p,h,d),B=x.join(""),void 0!==b&&0===(F=(_=b.trim()).length)&&(p=0,_="")),0<F)switch(p){case 115:B=B.replace(E,i);case 100:case 109:case 45:_=B+"{"+_+"}";break;case 107:_=(B=B.replace(m,"$1 $2"))+"{"+_+"}",_=1===T||2===T&&a("@"+_,3)?"@-webkit-"+_+"@"+_:"@"+_;break;default:_=B+_,112===d&&(V+=_,_="")}else _="";break;default:_=e(o,t(o,B,j),_,d,h+1)}z+=_,_=j=x=D=f=0,B="",p=l.charCodeAt(++U);break;case 125:case 59:if(1<(F=(B=(0<x?B.replace(u,""):B).trim()).length))switch(0===D&&(f=B.charCodeAt(0),45===f||96<f&&123>f)&&(F=(B=B.replace(" ",":")).length),0<M&&void 0!==(b=s(1,B,o,n,I,A,V.length,d,h,d))&&0===(F=(B=b.trim()).length)&&(B="\0\0"),f=B.charCodeAt(0),p=B.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){q+=B+l.charAt(U);break}default:58!==B.charCodeAt(F-1)&&(V+=r(B,f,p,B.charCodeAt(2)))}j=x=D=f=0,B="",p=l.charCodeAt(++U)}}switch(p){case 13:case 10:47===O?O=0:0===1+f&&107!==d&&0<B.length&&(x=1,B+="\0"),0<M*P&&s(0,B,o,n,I,A,V.length,d,h,d),A=1,I++;break;case 59:case 125:if(0===O+S+N+C){A++;break}default:switch(A++,y=l.charAt(U),p){case 9:case 32:if(0===S+C+O)switch(R){case 44:case 58:case 9:case 32:y="";break;default:32!==p&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===S+O+C&&(x=j=1,y="\f"+y);break;case 108:if(0===S+O+C+k&&0<D)switch(U-D){case 2:112===R&&58===l.charCodeAt(U-3)&&(k=R);case 8:111===L&&(k=L)}break;case 58:0===S+O+C&&(D=U);break;case 44:0===O+N+S+C&&(x=1,y+="\r");break;case 34:case 39:0===O&&(S=S===p?0:0===S?p:S);break;case 91:0===S+O+N&&C++;break;case 93:0===S+O+N&&C--;break;case 41:0===S+O+C&&N--;break;case 40:if(0===S+O+C){if(0===f)switch(2*R+3*L){case 533:break;default:f=1}N++}break;case 64:0===O+N+S+C+D+_&&(_=1);break;case 42:case 47:if(!(0<S+C+N))switch(O){case 0:switch(2*p+3*l.charCodeAt(U+1)){case 235:O=47;break;case 220:F=U,O=42}break;case 42:47===p&&42===R&&F+2!==U&&(33===l.charCodeAt(F+2)&&(V+=l.substring(F,U+1)),y="",O=0)}}0===O&&(B+=y)}L=R,R=p,U++}if(0<(F=V.length)){if(x=o,0<M&&void 0!==(b=s(2,V,x,n,I,A,F,d,h,d))&&0===(V=b).length)return q+V+z;if(V=x.join(",")+"{"+V+"}",0!==T*k){switch(2!==T||a(V,2)||(k=0),k){case 111:V=V.replace(v,":-moz-$1")+V;break;case 112:V=V.replace(g,"::-webkit-input-$1")+V.replace(g,"::-moz-$1")+V.replace(g,":-ms-input-$1")+V}k=0}}return q+V+z}(w,o,n,0,0);return 0<M&&void 0!==(l=s(-2,d,o,o,I,A,d.length,0,0,0))&&(d=l),k=0,A=I=1,d}var c=/^\0+/g,u=/[\0\r\f]/g,d=/: */g,h=/zoo|gra/,f=/([,: ])(transform)/g,p=/,\r+?/g,_=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,v=/:(read-only)/g,y=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,b=/([\s\S]*?);/g,C=/-self|flex-/g,O=/[^]*?(:[rp][el]a[\w-]+)[^]*/,N=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,A=1,I=1,k=0,T=1,w=[],R=[],M=0,L=null,P=0;return l.use=function e(t){switch(t){case void 0:case null:M=R.length=0;break;default:if("function"===typeof t)R[M++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else P=0|!!t}return e},l.set=o,void 0!==e&&o(e),l}},function(e,t,n){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),s=n(19),o=n(5),l=n(22),c=n(9),u=n(13),d=n(10),h=function(e){return Object(i.b)(e.createdAt,"p")},f=function e(t){void 0===t&&(t=0);var n=t;if(!(n>10))try{var r=document.querySelector(".sendbird-openchannel-conversation-scroll");r.scrollTop=r.scrollHeight}catch(a){setTimeout(function(){e(n+1)},500*n)}},p=function(e,t){var n,r,a,i;return!!(e&&t&&"admin"!==(null===e||void 0===e?void 0:e.messageType)&&"admin"!==(null===t||void 0===t?void 0:t.messageType)&&(null===e||void 0===e?void 0:e.sender)&&(null===t||void 0===t?void 0:t.sender)&&(null===e||void 0===e?void 0:e.createdAt)&&(null===t||void 0===t?void 0:t.createdAt)&&(null===(n=null===e||void 0===e?void 0:e.sender)||void 0===n?void 0:n.userId)&&(null===(r=null===t||void 0===t?void 0:t.sender)||void 0===r?void 0:r.userId))&&((null===e||void 0===e?void 0:e.sendingStatus)===(null===t||void 0===t?void 0:t.sendingStatus)&&(null===(a=null===e||void 0===e?void 0:e.sender)||void 0===a?void 0:a.userId)===(null===(i=null===t||void 0===t?void 0:t.sender)||void 0===i?void 0:i.userId)&&h(e)===h(t))},_=function(e,t,n){return[p(e,t),p(t,n)]},m=function(e){return Math.abs(e)>999999?(Math.abs(e)/1e6).toFixed(1)+"M":Math.abs(e)>999?(Math.abs(e)/1e3).toFixed(1)+"K":""+e},g=function(e,t,n){t.info("OpenChannel | FetchUserList start",e),function e(r){r.hasNext?r.next(function(a,i){a?t.warning("OpenChannel | FetchUserList failed",a):(n(i),e(r))}):t.info("OpenChannel | FetchUserList finished")}(e)},v=function(e){if("number"===typeof e)return e;if("string"===typeof e){var t=Number.parseFloat(e);if(!Number.isNaN(t))return t}return null},y="SET_CURRENT_CHANNEL",E="SET_CHANNEL_INVALID",b="RESET_MESSAGES",C="GET_PREV_MESSAGES_START",O="GET_PREV_MESSAGES_SUCESS",N="GET_PREV_MESSAGES_FAIL",S="SENDING_MESSAGE_FAILED",A="SENDING_MESSAGE_SUCCEEDED",I="SENDING_MESSAGE_START",k="RESENDING_MESSAGE_START",T="FETCH_PARTICIPANT_LIST",w="FETCH_BANNED_USER_LIST",R="FETCH_MUTED_USER_LIST",M="TRIM_MESSAGE_LIST",L="ON_MESSAGE_RECEIVED",P="ON_MESSAGE_UPDATED",D="ON_MESSAGE_DELETED",U="ON_MESSAGE_DELETED_BY_REQ_ID",x="ON_OPERATOR_UPDATED",j="ON_USER_ENTERED",F="ON_USER_EXITED",H="ON_USER_MUTED",G="ON_USER_UNMUTED",B="ON_USER_BANNED",V="ON_USER_UNBANNED",z="ON_CHANNEL_FROZEN",q="ON_CHANNEL_UNFROZEN",K="ON_CHANNEL_CHANGED",Y="ON_META_DATA_CREATED",W="ON_META_DATA_UPDATED",Q="ON_META_DATA_DELETED",J="ON_META_COUNTERS_CREATED",X="ON_META_COUNTERS_UPDATED",$="ON_META_COUNTERS_DELETED",Z="ON_MENTION_RECEIVED";function ee(e,t){var n;switch(t.type){case b:return Object(o.a)(Object(o.a)({},e),{allMessages:[]});case y:var r=t.payload,a=r.operators;return!e.isInvalid&&e.currentOpenChannel&&e.currentOpenChannel.url&&e.currentOpenChannel.url===r.url?e:Object(o.a)(Object(o.a)({},e),{currentOpenChannel:r,isInvalid:!1,operators:a,participants:a,bannedParticipantIds:[],mutedParticipantIds:[]});case E:return Object(o.a)(Object(o.a)({},e),{isInvalid:!0});case C:return Object(o.a)(Object(o.a)({},e),{loading:!0});case O:case N:var i=t.type===N,s=t.payload,c=s.currentOpenChannel,u=void 0===c?{}:c,d=s.messages,h=void 0===d?[]:d,f=s.hasMore,p=s.lastMessageTimestamp,_=u.url,m=i?[]:h,g=!i&&f,v=i?0:p;if(_!==e.currentOpenChannel.url)return e;var ee=e.allMessages.filter(function(e){return!m.find(function(t){var n=t.messageId;return Object(l.a)(n,e.messageId)})});return Object(o.a)(Object(o.a)({},e),{loading:!1,initialized:!0,hasMore:g,lastMessageTimestamp:v,allMessages:Object(o.b)(Object(o.b)([],m,!0),ee,!0)});case I:var te=t.payload,ne=te.message;return te.channel.url!==e.currentOpenChannel.url||e.allMessages.some(function(e){return e.reqId===ne.reqId})?e:Object(o.a)(Object(o.a)({},e),{allMessages:Object(o.b)(Object(o.b)([],e.allMessages,!0),[ne],!1)});case A:var re=t.payload,ae=e.allMessages.map(function(e){return Object(l.a)(e.reqId,re.reqId)?re:e});return Object(o.a)(Object(o.a)({},e),{allMessages:ae});case S:var ie=t.payload;return e.allMessages.some(function(e){return e.reqId===ie.reqId})?Object(o.a)(Object(o.a)({},e),{allMessages:e.allMessages.map(function(e){return Object(l.a)(e.reqId,ie.reqId)?ie:e})}):Object(o.a)(Object(o.a)({},e),{allMessages:Object(o.b)(Object(o.b)([],e.allMessages.filter(function(e){return!Object(l.a)(e.reqId,ie)}),!0),[ie],!1)});case M:var se=e.allMessages,oe=null===(n=t.payload)||void 0===n?void 0:n.messageLimit;if(oe&&oe>0&&(null===se||void 0===se?void 0:se.length)>oe){var le=se.length-oe;return Object(o.a)(Object(o.a)({},e),{allMessages:se.slice(le)})}return e;case k:var ce=t.payload.channel,ue=t.payload.message;return ce.url!==e.currentOpenChannel.url?e:Object(o.a)(Object(o.a)({},e),{allMessages:e.allMessages.map(function(e){return Object(l.a)(e.reqId,ue.reqId)?ue:e})});case T:ce=t.payload.channel;var de=t.payload.users;return ce.url!==e.currentOpenChannel.url?e:Object(o.a)(Object(o.a)({},e),{participants:Object(o.b)(Object(o.b)([],e.participants,!0),de,!0)});case w:ce=t.payload.channel;var he=t.payload.users;return ce.url===e.currentOpenChannel.url&&he.every(function(e){return"string"===typeof e.userId})?Object(o.a)(Object(o.a)({},e),{bannedParticipantIds:Object(o.b)(Object(o.b)([],e.bannedParticipantIds,!0),he.map(function(e){return e.userId}),!0)}):e;case R:ce=t.payload.channel;var fe=t.payload.users;return ce.url===e.currentOpenChannel.url&&fe.every(function(e){return"string"===typeof e.userId})?Object(o.a)(Object(o.a)({},e),{mutedParticipantIds:Object(o.b)(Object(o.b)([],e.mutedParticipantIds,!0),fe.map(function(e){return e.userId}),!0)}):e;case L:ce=t.payload.channel;var pe=t.payload.message;u=e.currentOpenChannel;return Object(l.a)(ce.url,u.url)&&e.allMessages.map(function(e){return e.messageId}).indexOf(pe.messageId)<0?Object(o.a)(Object(o.a)({},e),{allMessages:Object(o.b)(Object(o.b)([],e.allMessages,!0),[pe],!1)}):e;case P:ce=t.payload.channel;var _e=t.payload.message;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url?e:Object(o.a)(Object(o.a)({},e),{allMessages:e.allMessages.map(function(e){return e.isIdentical(_e)?_e:e})});case D:ce=t.payload.channel;var me=t.payload.messageId;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url?e:Object(o.a)(Object(o.a)({},e),{allMessages:e.allMessages.filter(function(e){return!Object(l.a)(e.messageId,me)})});case U:return Object(o.a)(Object(o.a)({},e),{allMessages:e.allMessages.filter(function(e){return!Object(l.a)(e.reqId,t.payload)})});case x:ce=t.payload.channel;var ge=t.payload.operators;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url?e:Object(o.a)(Object(o.a)({},e),{currentOpenChannel:Object(o.a)(Object(o.a)({},e.currentOpenChannel),{operators:ge}),operators:ge});case j:ce=t.payload.channel;var ve=t.payload.user;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url?e:Object(o.a)(Object(o.a)({},e),{participants:Object(o.b)(Object(o.b)([],e.participants,!0),[ve],!1)});case F:ce=t.payload.channel;var ye=t.payload.user;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url?e:Object(o.a)(Object(o.a)({},e),{participants:e.participants.filter(function(e){return!Object(l.a)(e.userId,ye.userId)})});case H:ce=t.payload.channel;var Ee=t.payload.user;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url||e.mutedParticipantIds.indexOf(Ee.userId)>=0?e:Object(o.a)(Object(o.a)({},e),{mutedParticipantIds:Object(o.b)(Object(o.b)([],e.mutedParticipantIds,!0),[Ee.userId],!1)});case G:ce=t.payload.channel;var be=t.payload.user;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url||e.mutedParticipantIds.indexOf(be.userId)<0?e:Object(o.a)(Object(o.a)({},e),{mutedParticipantIds:e.mutedParticipantIds.filter(function(e){return e!==be.userId})});case B:ce=t.payload.channel;var Ce=t.payload.user;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url||e.bannedParticipantIds.indexOf(Ce.userId)>=0?e:Object(o.a)(Object(o.a)({},e),{bannedParticipantIds:Object(o.b)(Object(o.b)([],e.bannedParticipantIds,!0),[Ce.userId],!1)});case V:ce=t.payload.channel;var Oe=t.payload.user;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==ce.url||e.bannedParticipantIds.indexOf(Oe.userId)<0?e:Object(o.a)(Object(o.a)({},e),{bannedParticipantIds:e.bannedParticipantIds.filter(function(e){return e!==Oe.userId})});case z:var Ne=t.payload;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==Ne.url?e:Object(o.a)(Object(o.a)({},e),{frozen:!0});case q:var Se=t.payload;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==Se.url?e:Object(o.a)(Object(o.a)({},e),{frozen:!1});case K:var Ae,Ie=t.payload;return!(Ae=e.currentOpenChannel)||Ae.url&&Ae.url!==Ie.url?e:Object(o.a)(Object(o.a)({},e),{currentOpenChannel:Ie});case Y:case W:case Q:case J:case X:case $:case Z:default:return e}}var te={allMessages:[],loading:!1,initialized:!1,currentOpenChannel:null,isInvalid:!1,hasMore:!1,lastMessageTimestamp:0,frozen:!1,operators:[],participants:[],bannedParticipantIds:[],mutedParticipantIds:[]};var ne=5e3;var re=a.a.createContext(void 0),ae=function(e){var t,n,i,l,h,p,_=e.channelUrl,m=e.children,ae=e.useMessageGrouping,ie=e.queries,se=e.onBeforeSendUserMessage,oe=e.messageLimit,le=e.onBeforeSendFileMessage,ce=e.onChatHeaderActionClick,ue=Object(d.a)(),de=null===(n=null===(t=null===ue||void 0===ue?void 0:ue.stores)||void 0===t?void 0:t.sdkStore)||void 0===n?void 0:n.sdk,he=null===(l=null===(i=null===ue||void 0===ue?void 0:ue.stores)||void 0===i?void 0:i.sdkStore)||void 0===l?void 0:l.initialized,fe=null===(p=null===(h=null===ue||void 0===ue?void 0:ue.stores)||void 0===h?void 0:h.userStore)||void 0===p?void 0:p.user,pe=null===ue||void 0===ue?void 0:ue.config,_e=pe.userId,me=pe.isOnline,ge=pe.logger,ve=pe.pubSub,ye=pe.imageCompression,Ee=Object(r.useReducer)(ee,te),be=Ee[0],Ce=Ee[1],Oe=be.allMessages,Ne=be.loading,Se=be.initialized,Ae=be.currentOpenChannel,Ie=be.isInvalid,ke=be.hasMore,Te=be.lastMessageTimestamp,we=be.operators,Re=be.bannedParticipantIds,Me=be.mutedParticipantIds,Le=Object(r.useRef)(null),Pe=Object(r.useRef)(null),De=null===ie||void 0===ie?void 0:ie.messageListParams,Ue=!Se||!me||function(e,t){return e.isFrozen&&!function(e,t){return!(e.operators.map(function(e){return e.userId}).indexOf(t)<0)}(e,t)}(Ae,_e)||function(e,t){return e.indexOf(t)>-1}(Me,_e),xe=Object(r.useMemo)(function(){return Re.indexOf(fe.userId)>=0},[_,Re,fe]),je=Object(r.useMemo)(function(){return Me.indexOf(fe.userId)>=0},[_,Me,fe]),Fe=Object(r.useMemo)(function(){return we.map(function(e){return e.userId}).indexOf(fe.userId)>=0},[_,we,fe]);!function(e,t){var n=e.channelUrl,a=e.sdkInit,i=e.fetchingParticipants,s=e.userId,o=t.sdk,l=t.logger,c=t.messagesDispatcher;Object(r.useEffect)(function(){n&&a&&o&&o.OpenChannel&&(l.info("OpenChannel | useSetChannel fetching channel",n),o.OpenChannel.getChannel(n,function(e,t){t?(l.warning("OpenChannel | useSetChannel fetching channel failed",{channelUrl:n,error:t}),c({type:E,payload:null})):(l.info("OpenChannel | useSetChannel fetched channel",e),c({type:y,payload:e}),e.enter(function(t,r){if(r&&(l.warning("OpenChannel | useSetChannel enter channel failed",{channelUrl:n,error:r}),c({type:E,payload:null})),e.isOperatorWithUserId(s)){var a=e.createBannedUserListQuery(),o=e.createMutedUserListQuery();g(a,l,function(t){c({type:w,payload:{channel:e,users:t}})}),g(o,l,function(t){c({type:R,payload:{channel:e,users:t}})})}if(i){var u=e.createParticipantListQuery();g(u,l,function(t){c({type:T,payload:{channel:e,users:t}})})}}))}))},[n,a,i])}({channelUrl:_,sdkInit:he,fetchingParticipants:!1,userId:_e},{sdk:de,logger:ge,messagesDispatcher:Ce});var He=function(e,t){var n=e.conversationScrollRef,a=t.logger;return Object(r.useCallback)(function(){var e=!0;if(n&&(null===n||void 0===n?void 0:n.current))try{var t=n.current;e=t.scrollHeight<=t.scrollTop+t.clientHeight}catch(r){a.error("OpenChannel | useCheckScrollBottom",r)}return e},[n])}({conversationScrollRef:Pe},{logger:ge});!function(e,t){var n=e.currentOpenChannel,a=e.checkScrollBottom,i=t.sdk,s=t.logger,o=t.messagesDispatcher;Object(r.useEffect)(function(){var e=Object(u.a)();if(n&&n.url&&i&&i.ChannelHandler){var t=new i.ChannelHandler;s.info("OpenChannel | useHandleChannelEvents: Setup evnet handler",e),t.onMessageReceived=function(e,t){var n=a(),r=e.url;if(s.info("OpenChannel | useHandleChannelEvents: onMessageReceived",{channelUrl:r,message:t}),o({type:L,payload:{channel:e,message:t}}),n)try{setTimeout(function(){f()})}catch(i){s.warning("OpenChannel | onMessageReceived | scroll to end failed")}},t.onMessageUpdated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMessageUpdated",{channelUrl:n,message:t}),o({type:P,payload:{channel:e,message:t}})},t.onMessageDeleted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMessageDeleted",{channelUrl:n,messageId:t}),o({type:D,payload:{channel:e,messageId:t}})},t.onOperatorUpdated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onOperatorUpdated",{channelUrl:n,operators:t}),o({type:x,payload:{channel:e,operators:t}})},t.onUserEntered=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserEntered",{channelUrl:n,user:t}),o({type:j,payload:{channel:e,user:t}})},t.onUserExited=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserExited",{channelUrl:n,user:t}),o({type:F,payload:{channel:e,user:t}})},t.onUserMuted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserMuted",{channelUrl:n,user:t}),o({type:H,payload:{channel:e,user:t}})},t.onUserUnmuted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserUnmuted",{channelUrl:n,user:t}),o({type:G,payload:{channel:e,user:t}})},t.onUserBanned=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserBanned",{channelUrl:n,user:t}),o({type:B,payload:{channel:e,user:t}})},t.onUserUnbanned=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserUnbanned",{channelUrl:n,user:t}),o({type:V,payload:{channel:e,user:t}})},t.onChannelFrozen=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelFrozen",e),o({type:z,payload:e})},t.onChannelUnfrozen=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelUnfrozen",e),o({type:q,payload:e})},t.onChannelChanged=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelChanged",e),o({type:K,payload:e})},t.onMetaDataCreated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataCreated",{channelUrl:n,metaData:t}),o({type:Y,payload:{channel:e,metaData:t}})},t.onMetaDataUpdated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataUpdated",{channelUrl:n,metaData:t}),o({type:W,payload:{channel:e,metaData:t}})},t.onMetaDataDeleted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataDeleted",{channelUrl:n,metaDataKeys:t}),o({type:Q,payload:{channel:e,metaDataKeys:t}})},t.onMetaCountersCreated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersCreated",{channelUrl:n,metaCounter:t}),o({type:J,payload:{channel:e,metaCounter:t}})},t.onMetaCountersUpdated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersUpdated",{channelUrl:n,metaCounter:t}),o({type:X,payload:{channel:e,metaCounter:t}})},t.onMetaCountersDeleted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersDeleted",{channelUrl:n,metaCounterKeys:t}),o({type:$,payload:{channel:e,metaCounterKeys:t}})},t.onMentionReceived=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMentionReceived",{channelUrl:n,message:t}),o({type:Z,payload:{channel:e,message:t}})},i.addChannelHandler(e,t)}return function(){i&&i.removeChannelHandler&&(s.info("OpenChannel | useHandleChannelEvents: Removing message receiver handler",e),i.removeChannelHandler(e))}},[n])}({currentOpenChannel:Ae,checkScrollBottom:He},{sdk:de,logger:ge,messagesDispatcher:Ce}),function(e,t){var n=e.currentOpenChannel,a=e.userFilledMessageListParams,i=t.sdk,s=t.logger,o=t.messagesDispatcher;Object(r.useEffect)(function(){if(s.info("OpenChannel | useInitialMessagesFetch: Setup started",n),o({type:b,payload:null}),i&&i.MessageListParams&&n&&n.getMessagesByTimestamp){var e=new i.MessageListParams;e.prevResultSize=30,e.isInclusive=!0,e.includeReplies=!1,e.includeReactions=!1,a&&(Object.keys(a).forEach(function(t){e[t]=a[t]}),s.info("OpenChannel | useInitialMessagesFetch: Used customizedMessageListParams")),s.info("OpenChannel | useInitialMessagesFetch: Fetching messages",{currentOpenChannel:n,messageListParams:e}),o({type:C,payload:null}),n.getMessagesByTimestamp((new Date).getTime(),e,function(e,t){if(t)s.error("OpenChannel | useInitialMessagesFetch: Fetching messages failed",t),o({type:N,payload:{currentOpenChannel:n,messages:[],hasMore:!1,lastMessageTimestamp:0}});else{s.info("OpenChannel | useInitialMessagesFetch: Fetching messages succeeded",e);var r=e&&e.length>0,a=r?e[0].createdAt:null;o({type:O,payload:{currentOpenChannel:n,messages:e,hasMore:r,lastMessageTimestamp:a}}),setTimeout(function(){f()})}})}},[n,a])}({currentOpenChannel:Ae,userFilledMessageListParams:De},{sdk:de,logger:ge,messagesDispatcher:Ce});var Ge,Be,Ve=(Ge=null===Oe||void 0===Oe?void 0:Oe.length,"number"!==typeof(Be=oe)||"number"===typeof Be&&Be>Ge),ze=function(e,t){var n=e.currentOpenChannel,a=e.lastMessageTimestamp,i=e.fetchMore,s=t.sdk,o=t.logger,l=t.messagesDispatcher,c=t.hasMore,u=t.userFilledMessageListParams;return Object(r.useCallback)(function(e){if(i&&c&&s&&s.MessageListParams){o.info("OpenChannel | useScrollCallback: start");var t=new s.MessageListParams;t.prevResultSize=30,t.includeReplies=!1,t.includeReactions=!1,u&&(Object.keys(u).forEach(function(e){t[e]=u[e]}),o.info("OpenChannel | useScrollCallback: Used userFilledMessageListParams",u)),o.info("OpenChannel | useScrollCallback: Fetching messages",{currentOpenChannel:n,messageListParams:t}),n.getMessagesByTimestamp(a||(new Date).getTime(),t,function(t,r){if(r)o.error("OpenChannel | useScrollCallback: Fetching messages failed",r),l({type:N,payload:{currentOpenChannel:n,messages:[],hasMore:!1,lastMessageTimestamp:0}});else{o.info("OpenChannel | useScrollCallback: Fetching messages succeeded",t);var a=t&&t.length>0,i=a?t[0].createdAt:null;l({type:O,payload:{currentOpenChannel:n,messages:t,hasMore:a,lastMessageTimestamp:i}}),setTimeout(function(){e()})}})}},[n,a,i])}({currentOpenChannel:Ae,lastMessageTimestamp:Te,fetchMore:Ve},{sdk:de,logger:ge,messagesDispatcher:Ce,hasMore:ke,userFilledMessageListParams:De}),qe=function(e,t){var n=e.currentOpenChannel,a=e.onBeforeSendUserMessage,i=e.checkScrollBottom,s=e.messageInputRef,o=t.sdk,l=t.logger,c=t.messagesDispatcher;return Object(r.useCallback)(function(){if(o&&o.UserMessageParams){var e=s.current.value;a&&"function"===typeof a&&l.info("OpenChannel | useSendMessageCallback: Creating params using onBeforeSendUserMessage",a);var t=a?a(e):function(e){var t="string"===typeof e?e.trim():e.toString(10).trim(),n=new o.UserMessageParams;return n.message=t,n}(e);l.info("OpenChannel | useSendMessageCallback: Sending message has started",t);var r=i(),u=n.sendUserMessage(t,function(e,t){t?(l.warning("OpenChannel | useSendMessageCallback: Sending message failed",t),c({type:S,payload:e}),900041===(null===t||void 0===t?void 0:t.code)&&c({type:H,payload:{channel:n,user:o.currentUser}})):(l.info("OpenChannel | useSendMessageCallback: Sending message succeeded",e),c({type:A,payload:e}),r&&setTimeout(function(){f()}))});c({type:I,payload:{message:u,channel:n}})}},[n,a,i,s])}({currentOpenChannel:Ae,onBeforeSendUserMessage:se,checkScrollBottom:He,messageInputRef:Le},{sdk:de,logger:ge,messagesDispatcher:Ce}),Ke=function(e,t){var n=e.currentOpenChannel,a=e.checkScrollBottom,i=e.imageCompression,s=void 0===i?{}:i,l=e.onBeforeSendFileMessage,c=t.sdk,u=t.logger,d=t.messagesDispatcher;return Object(r.useCallback)(function(e){if(c&&c.FileMessageParams){var t=s.compressionRate,r=s.resizingWidth,i=s.resizingHeight,h=l&&"function"===typeof l,p="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,_=t>0&&t<1,m=v(r)||v(i),g=function(e){var t=new c.FileMessageParams;return t.file=e,t};if(p&&(_||m))try{var y=document.createElement("img");y.src=URL.createObjectURL(e),y.onload=function(){URL.revokeObjectURL(y.src);var s=document.createElement("canvas"),c=y.naturalWidth||y.width,p=y.naturalHeight||y.height,_=v(r)||c,E=v(i)||p;"image/png"!==e.type||m||(_*=t,E*=t),s.width=_,s.height=E;var b=s.getContext("2d");b.drawImage(y,0,0,_,E),b.canvas.toBlob(function(t){var r=new File([t],e.name,{type:e.type});h&&u.info("OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage",l);var i=l?l(r):g(r);u.info("OpenChannel | useFileUploadCallback: Uploading file message start",i);var s=a(),c=n.sendFileMessage(i,function(t,n){n?(u.error("OpenChannel | useFileUploadCallback: Sending file message failed",{message:t,error:n}),t.localUrl=URL.createObjectURL(e),t.file=e,d({type:S,payload:t})):(u.info("OpenChannel | useFileUploadCallback: Sending message succeeded",t),d({type:A,payload:t}),s&&setTimeout(function(){f()}))});d({type:I,payload:{message:Object(o.a)(Object(o.a)({},c),{url:URL.createObjectURL(e),requestState:"pending"}),channel:n}})},e.type,t)}}catch(O){u.warning("OpenChannel | useFileUploadCallback: Sending file message with image compression failed",O)}else{h&&u.info("OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage",l);var E=l?l(e):g(e);u.info("OpenChannel | useFileUploadCallback: Uploading file message start",E);var b=a(),C=n.sendFileMessage(E,function(t,n){n?(u.error("OpenChannel | useFileUploadCallback: Sending file message failed",{message:t,error:n}),t.localUrl=URL.createObjectURL(e),t.file=e,d({type:S,payload:t})):(u.info("OpenChannel | useFileUploadCallback: Sending message succeeded",t),d({type:A,payload:t}),b&&setTimeout(function(){f()}))});d({type:I,payload:{message:Object(o.a)(Object(o.a)({},C),{url:URL.createObjectURL(e),requestState:"pending"}),channel:n}})}}},[n,l,a,s])}({currentOpenChannel:Ae,onBeforeSendFileMessage:le,checkScrollBottom:He,imageCompression:ye},{sdk:de,logger:ge,messagesDispatcher:Ce}),Ye=function(e,t){var n=e.currentOpenChannel,a=e.onBeforeSendUserMessage,i=t.sdk,s=t.logger,o=t.messagesDispatcher;return Object(r.useCallback)(function(e,t,r){a&&"function"===typeof a&&s.info("OpenChannel | useUpdateMessageCallback: Creating params using onBeforeUpdateUserMessage");var l=a?a(t):function(e){var t=new i.UserMessageParams;return t.message=e,t}(t);n.updateUserMessage(e,l,function(e,t){r&&r(),t?s.warning("OpenChannel | useUpdateMessageCallback: Updating message failed",t):(s.info("OpenChannel | useUpdateMessageCallback: Updating message succeeded",{message:e,params:l}),o({type:P,payload:{channel:n,message:e}}))})},[n,a])}({currentOpenChannel:Ae,onBeforeSendUserMessage:se},{sdk:de,logger:ge,messagesDispatcher:Ce}),We=function(e,t){var n=e.currentOpenChannel,a=t.logger,i=t.messagesDispatcher;return Object(r.useCallback)(function(e,t){a.info("OpenChannel | useDeleteMessageCallback: Deleting message",e);var r=e.sendingStatus;if(a.info("OpenChannel | useDeleteMessageCallback: Deleting message requestState",r),"failed"===r||"pending"===r)a.info("OpenChannel | useDeleteMessageCallback: Deleted message from local",e),i({type:U,payload:e.reqId}),t&&t();else{if("file"!==e.messageType&&"user"!==e.messageType)return;var s=e;n.deleteMessage(s,function(s){a.info("OpenChannel | useDeleteMessageCallback: Deleting message on server",r),t&&t(),s?a.warning("OpenChannel | useDeleteMessageCallback: Deleting message failed",s):(a.info("OpenChannel | useDeleteMessageCallback: Deleting message succeeded",e),i({type:D,payload:{channel:n,messageId:e.messageId}}))})}},[n])}({currentOpenChannel:Ae},{logger:ge,messagesDispatcher:Ce}),Qe=function(e,t){var n=e.currentOpenChannel,a=t.logger,i=t.messagesDispatcher;return Object(r.useCallback)(function(e){a.info("OpenChannel | useResendMessageCallback: Resending message has started",e);var t=e.messageType,r=e.file;if(e&&"function"===typeof e.isResendable&&e.isResendable()){if(e.requestState="pending",i({type:k,payload:{channel:n,message:e}}),"user"===t&&"user"===e.messageType)return void n.resendUserMessage(e,function(t,n){n?(a.warning("OpenChannel | useResendMessageCallback: Resending message failed",n),e.requestState="failed",i({type:S,payload:e})):(a.info("OpenChannel | useResendMessageCallback: Reseding message succeeded",t),i({type:A,payload:t}))});"file"===t&&"file"===e.messageType&&n.resendFileMessage(e,r,function(t,n){n?(a.warning("OpenChannel | useResendMessageCallback: Resending file message failed",n),e.requestState="failed",i({type:S,payload:e})):(a.info("OpenChannel | useResendMessageCallback: Resending file message succeeded",t),i({type:A,payload:t}))})}else console.error("OpenChannel | useResendMessageCallback: Message is not resendable"),a.warning("OpenChannel | useResendMessageCallback: Message is not resendable",e)},[n])}({currentOpenChannel:Ae},{logger:ge,messagesDispatcher:Ce});return function(e,t){var n=e.messagesLength,a=e.messageLimit,i=t.messagesDispatcher,s=t.logger,o=Object(r.useState)(!1),l=o[0],c=o[1];Object(r.useEffect)(function(){l||("number"===typeof n&&n>a&&(s.info("Trimming MessageList"),i({type:M,payload:{messageLimit:a}})),c(!0),setTimeout(function(){c(!1)},ne))},[n,a])}({messagesLength:null===Oe||void 0===Oe?void 0:Oe.length,messageLimit:oe},{messagesDispatcher:Ce,logger:ge}),Object(r.useEffect)(function(){var e=new Map;if(ve&&ve.subscribe)return e.set(c.d,ve.subscribe(c.d,function(e){var t=e.channel,n=e.message;f(),t&&_===t.url&&Ce({type:A,payload:n})})),e.set(c.g,ve.subscribe(c.g,function(e){var t=e.channel,n=e.message;t&&_===t.url&&Ce({type:I,payload:{message:n,channel:t}})})),e.set(c.f,ve.subscribe(c.f,function(e){var t=e.channel,n=e.message;f(),t&&_===t.url&&Ce({type:A,payload:{message:n,channel:t}})})),e.set(c.e,ve.subscribe(c.e,function(e){var t=e.channel,n=e.message;e.fromSelector&&t&&_===t.url&&Ce({type:P,payload:{channel:t,message:n}})})),e.set(c.b,ve.subscribe(c.b,function(e){var t=e.channel,n=e.messageId;t&&_===t.url&&Ce({type:D,payload:n})})),function(){e&&e.forEach(function(e){try{e.remove()}catch(t){}})}},[_,he]),a.a.createElement(re.Provider,{value:{channelUrl:_,children:m,useMessageGrouping:ae,queries:ie,onBeforeSendUserMessage:se,messageLimit:oe,onBeforeSendFileMessage:le,onChatHeaderActionClick:ce,allMessages:Oe,loading:Ne,initialized:Se,currentOpenChannel:Ae,isInvalid:Ie,hasMore:ke,lastMessageTimestamp:Te,operators:we,bannedParticipantIds:Re,mutedParticipantIds:Me,messageInputRef:Le,conversationScrollRef:Pe,disabled:Ue,amIBanned:xe,amIMuted:je,amIOperator:Fe,checkScrollBottom:He,fetchMore:Ve,onScroll:ze,handleSendMessage:qe,handleFileUpload:Ke,updateMessage:Ye,deleteMessage:We,resendMessage:Qe}},a.a.createElement(s.a,{isOpenChannel:!0,renderUserProfile:null===e||void 0===e?void 0:e.renderUserProfile,disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile},m))},ie=function(){return a.a.useContext(re)},se=n(7),oe=n(49),le=(n(11),n(15),n(4),n(16)),ce=(n(12),n(1)),ue=n(3),de=n(6),he=(n(20),function(e,t){var n=ie(),i=n.currentOpenChannel,s=n.disabled,o=n.handleSendMessage,l=n.handleFileUpload;if(i){var c=Object(r.useContext)(se.b).stringSet;return a.a.createElement("div",{className:"sendbird-openchannel-footer"},a.a.createElement(oe.a,{ref:t,disabled:s,onSendMessage:o,onFileUpload:l,placeholder:s&&c.MESSAGE_INPUT__PLACE_HOLDER__DISABLED}))}}),fe=a.a.forwardRef(he),pe=function(){var e=Object(r.useContext)(se.b).stringSet;return a.a.createElement("div",{className:"sendbird-frozen-channel-notification"},a.a.createElement(ce.a,{className:"sendbird-frozen-channel-notification__text",type:ce.b.CAPTION_2},e.CHANNEL_FROZEN))},_e=n(18),me=n(14);function ge(){var e=Object(r.useContext)(se.b).stringSet,t=ie(),n=t.currentOpenChannel,i=t.onChatHeaderActionClick,s=t.amIOperator,o=null===n||void 0===n?void 0:n.name,l=m(null===n||void 0===n?void 0:n.participantCount)+" "+e.OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS,c=null===n||void 0===n?void 0:n.coverUrl;return a.a.createElement("div",{className:"sendbird-openchannel-conversation-header"},a.a.createElement("div",{className:"sendbird-openchannel-conversation-header__left"},c?a.a.createElement(_e.a,{className:"sendbird-openchannel-conversation-header__left__cover-image",src:c,alt:"channel cover image",width:"32px",height:"32px"}):a.a.createElement("div",{className:"sendbird-openchannel-conversation-header__left__cover-image--icon",style:{width:32,height:32}},a.a.createElement(ue.c,{type:ue.b.CHANNELS,fillColor:ue.a.CONTENT,width:"18px",height:"18px"})),a.a.createElement(ce.a,{className:"sendbird-openchannel-conversation-header__left__title",type:ce.b.H_2,color:ce.c.ONBACKGROUND_1},o||e.NO_TITLE),a.a.createElement(ce.a,{className:"sendbird-openchannel-conversation-header__left__sub-title",type:ce.b.BODY_2,color:ce.c.ONBACKGROUND_2},l||e.NO_TITLE)),a.a.createElement("div",{className:"sendbird-openchannel-conversation-header__right"},a.a.createElement(le.a,{className:"sendbird-openchannel-conversation-header__right__trigger",width:"32px",height:"32px",onClick:i},a.a.createElement(ue.c,{type:s?ue.b.INFO:ue.b.MEMBERS,fillColor:ue.a.PRIMARY,width:"24px",height:"24px"}))))}var ve=n(24),ye=n(38),Ee=n(8),be=n(34),Ce=n(30),Oe=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(n){return!1}finally{document.body.removeChild(t)}}return!1},Ne="pending",Se="failed",Ae="succeeded",Ie=function(e){return e.sender||e._sender},ke=function(e){return e===Ae},Te=function(e){return e===Ne},we=function(e){return e===Se},Re=function(e,t){return Ie(e).userId===t},Me=function(e){var t=e.message;return"user"===t.messageType&&t.message.length>0},Le=function(e){var t=e.message,n=e.status,r=e.userId;return Re(t,r)&&we(n)&&t.isResendable&&t.isResendable()},Pe=function(e){var t=e.message,n=e.status,r=e.userId;return Re(t,r)&&ke(n)},De=function(e){var t=e.message,n=e.userId;return Re(t,n)},Ue=function(e){var t=e.message,n=e.status,r=e.userId;return"user"===t.messageType?De({message:t,status:n,userId:r})||Pe({message:t,status:n,userId:r})||Me({message:t,status:n,userId:r})||Le({message:t,status:n,userId:r}):De({message:t,status:n,userId:r})||Le({message:t,status:n,userId:r})},xe=n(21);n(27),n(31);function je(e){var t=e.className,n=e.message,l=e.userId,c=e.resendMessage,d=e.disabled,h=e.showEdit,f=e.showRemove,p=e.chainTop;if(!n||"user"!==n.messageType)return null;var _=Object(se.c)(),m=_.stringSet,g=_.dateLocale,v=Object(r.useContext)(s.b),y=v.disableUserProfile,E=v.renderUserProfile,b=Object(r.useRef)(null),C=Object(r.useRef)(null),O=Object(r.useRef)(null),N=Object(r.useState)({}),S=N[0],A=N[1],I=null===n||void 0===n?void 0:n.sendingStatus,k=Re(n,l),T=Te(I),w=we(I),R=Ie(n),M=Object(r.useMemo)(function(){return function(){var e=n.message.split(/\r/).map(function(e){return""!==e?e:a.a.createElement("br",null)});return n.updatedAt>0&&e.push(a.a.createElement(ce.a,{key:Object(u.a)(),type:ce.b.BODY_1,color:ce.c.ONBACKGROUND_2,calssName:"sendbird-openchannel-user-message-word"}," "+m.MESSAGE_EDITED+" ")),e}},[n,n.updatedAt]);return Object(r.useEffect)(function(){var e;(null===(e=null===b||void 0===b?void 0:b.current)||void 0===e?void 0:e.clientHeight)>36?A({top:"8px "}):A({top:"2px"})},[window.innerWidth]),a.a.createElement("div",{className:Object(o.b)(Object(o.b)([],Array.isArray(t)?t:[t],!0),["sendbird-openchannel-user-message"],!1).join(" "),ref:b},a.a.createElement("div",{className:"sendbird-openchannel-user-message__left"},!p&&a.a.createElement(Ee.d,{menuTrigger:function(e){return a.a.createElement(_e.a,{className:"sendbird-openchannel-user-message__left__avatar",src:R.profileUrl||"",ref:C,width:"28px",height:"28px",onClick:function(){y||e()}})},menuItems:function(e){return a.a.createElement(Ee.c,{parentRef:C,parentContainRef:C,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},E?E({user:R,close:e}):a.a.createElement(Ce.a,{user:R,onSuccess:e,disableMessaging:!0}))}})),a.a.createElement("div",{className:"sendbird-openchannel-user-message__right"},!p&&a.a.createElement("div",{className:"sendbird-openchannel-user-message__right__top"},a.a.createElement(ce.a,{className:"sendbird-openchannel-user-message__right__top__sender-name",type:ce.b.CAPTION_2,color:k?ce.c.SECONDARY_3:ce.c.ONBACKGROUND_2},R&&(R.friendName||R.nickname||R.userId)),a.a.createElement(ce.a,{className:"sendbird-openchannel-user-message__right__top__sent-at",type:ce.b.CAPTION_3,color:ce.c.ONBACKGROUND_3},(null===n||void 0===n?void 0:n.createdAt)&&Object(i.b)(null===n||void 0===n?void 0:n.createdAt,"p",{locale:g}))),a.a.createElement("div",{className:"sendbird-openchannel-user-message__right__bottom"},a.a.createElement(ce.a,{className:"sendbird-openchannel-user-message__right__bottom__message",type:ce.b.BODY_1,color:ce.c.ONBACKGROUND_1},M())),(T||w)&&a.a.createElement("div",{className:"sendbird-openchannel-user-message__right__tail"},T&&a.a.createElement(be.a,{width:"16px",height:"16px"},a.a.createElement(ue.c,{className:"sendbird-openchannel-user-message__right__tail__pending",type:ue.b.SPINNER,fillColor:ue.a.PRIMARY,width:"16px",height:"16px"})),w&&a.a.createElement(ue.c,{className:"sendbird-openchannel-user-message__right__tail__failed",type:ue.b.ERROR,fillColor:ue.a.ERROR,width:"16px",height:"16px"}))),a.a.createElement("div",{className:"sendbird-openchannel-user-message__context-menu",ref:O,style:S},a.a.createElement(Ee.d,{menuTrigger:function(e){return Ue({message:n,userId:l,status:I})&&a.a.createElement(le.a,{className:"sendbird-openchannel-user-message__context-menu--icon",width:"32px",height:"32px",onClick:function(){e()}},a.a.createElement(ue.c,{type:ue.b.MORE,fillColor:ue.a.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(Ee.c,{parentRef:O,parentContainRef:O,closeDropdown:e,openLeft:!0},Me({message:n,userId:l,status:I})&&a.a.createElement(Ee.b,{className:"sendbird-openchannel-user-message__context-menu__copy",onClick:function(){Oe(n.message),e()}},m.CONTEXT_MENU_DROPDOWN__COPY),Pe({message:n,userId:l,status:I})&&a.a.createElement(Ee.b,{className:"sendbird-openchannel-user-message__context-menu__edit",onClick:function(){d||(h(!0),e())}},m.CONTEXT_MENU_DROPDOWN__EDIT),Le({message:n,userId:l,status:I})&&a.a.createElement(Ee.b,{className:"sendbird-openchannel-user-message__context-menu__resend",onClick:function(){c(n),e()}},m.CONTEXT_MENU_DROPDOWN__RESEND),De({message:n,userId:l,status:I})&&a.a.createElement(Ee.b,{className:"sendbird-openchannel-user-message__context-menu__delete",onClick:function(){d||(f(!0),e())}},m.CONTEXT_MENU_DROPDOWN__DELETE))}})))}function Fe(e){var t=e.className,n=e.message;return a.a.createElement("div",{className:Object(o.b)(Object(o.b)([],Array.isArray(t)?t:[t],!0),["sendbird-openchannel-admin-message"],!1).join(" ")},a.a.createElement(ce.a,{className:"sendbird-openchannel-admin-message__text",type:ce.b.CAPTION_2,color:ce.c.ONBACKGROUND_2},n.message||""))}var He=n(47),Ge=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,Be=function(e){return function(t){return e.test(t)}},Ve=function(e){var t=e.ogMetaData;return!!t&&!!t.url};function ze(e){var t=e.message,n=e.className,l=e.disabled,c=e.showEdit,d=e.showRemove,h=e.resendMessage,f=e.chainTop,p=e.userId;if(!t||"user"!==t.messageType)return null;var _=null===t||void 0===t?void 0:t.sendingStatus,m=t.ogMetaData,g=m.defaultImage,v=Object(se.c)(),y=v.stringSet,E=v.dateLocale,b=Object(r.useContext)(s.b),C=b.disableUserProfile,O=b.renderUserProfile,N=Object(r.useState)({}),S=N[0],A=N[1],I=Object(r.useRef)(null),k=Object(r.useRef)(null),T=Object(r.useRef)(null),w=Be(Ge),R=Re(t,p),M=Te(_),L=we(_),P=Ie(t),D=Object(r.useMemo)(function(){return function(){var e="sendbird-openchannel-og-message--word",n=t.message.split(" ").map(function(t){return w(t)?a.a.createElement(He.a,{key:Object(u.a)(),className:[e,"sendbird-openchannel-og-message--word--link"],src:t,type:ce.b.BODY_1,color:ce.c.PRIMARY},t):a.a.createElement(ce.a,{key:Object(u.a)(),className:e,type:ce.b.BODY_1,color:ce.c.ONBACKGROUND_1},t)});return t.updatedAt>0&&n.push(a.a.createElement(ce.a,{key:Object(u.a)(),className:e,type:ce.b.BODY_1,color:ce.c.ONBACKGROUND_2},y.MESSAGE_EDITED)),n}},[t,t.updatedAt]),U=function(){if(Ve(t)){var e=m.url;window.open(e)}};return Object(r.useEffect)(function(){var e;(null===(e=null===I||void 0===I?void 0:I.current)||void 0===e?void 0:e.clientHeight)>36?A({top:"8px "}):A({top:"2px"})},[window.innerWidth]),a.a.createElement("div",{className:Object(o.b)(Object(o.b)([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-og-message"],!1).join(" "),ref:I},a.a.createElement("div",{className:"sendbird-openchannel-og-message__top"},a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__left"},!f&&a.a.createElement(Ee.d,{menuTrigger:function(e){return a.a.createElement(_e.a,{className:"sendbird-openchannel-og-message__top__left__avatar",src:P.profileUrl||"",ref:T,width:"28px",height:"28px",onClick:function(){C||e()}})},menuItems:function(e){return a.a.createElement(Ee.c,{parentRef:T,parentContainRef:T,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},O?O({user:P,close:e}):a.a.createElement(Ce.a,{user:P,onSuccess:e,disableMessaging:!0}))}})),a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__right"},!f&&a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__right__title"},a.a.createElement(ce.a,{className:"sendbird-openchannel-og-message__top__right__title__sender-name",type:ce.b.CAPTION_2,color:R?ce.c.SECONDARY_3:ce.c.ONBACKGROUND_2},P&&(P.friendName||P.nickname||P.userId)),a.a.createElement(ce.a,{className:"sendbird-openchannel-og-message__top__right__title__sent-at",type:ce.b.CAPTION_3,color:ce.c.ONBACKGROUND_3},(null===t||void 0===t?void 0:t.createdAt)&&Object(i.b)(null===t||void 0===t?void 0:t.createdAt,"p",{locale:E}))),a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__right__description"},a.a.createElement(ce.a,{className:"sendbird-openchannel-og-message__top__right__description__message",type:ce.b.BODY_1,color:ce.c.ONBACKGROUND_1},D()))),a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__context-menu",ref:k,style:S},a.a.createElement(Ee.d,{menuTrigger:function(e){return Ue({message:t,userId:p,status:_})&&a.a.createElement(le.a,{className:"sendbird-openchannel-og-message__top__context-menu--icon",width:"32px",height:"32px",onClick:function(){e()}},a.a.createElement(ue.c,{type:ue.b.MORE,fillColor:ue.a.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(Ee.c,{parentRef:k,parentContainRef:k,closeDropdown:e,openLeft:!0},Me({message:t,userId:p,status:_})&&a.a.createElement(Ee.b,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){Oe(t.message),e()}},y.CONTEXT_MENU_DROPDOWN__COPY),Pe({message:t,userId:p,status:_})&&a.a.createElement(Ee.b,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){l||(c(!0),e())}},y.CONTEXT_MENU_DROPDOWN__EDIT),Le({message:t,userId:p,status:_})&&a.a.createElement(Ee.b,{className:"sendbird-openchannel-og-message__top__context-menu__resend",onClick:function(){h(t),e()}},y.CONTEXT_MENU_DROPDOWN__RESEND),De({message:t,userId:p,status:_})&&a.a.createElement(Ee.b,{className:"sendbird-openchannel-og-message__top__context-menu__delete",onClick:function(){l||(d(!0),e())}},y.CONTEXT_MENU_DROPDOWN__DELETE))}}))),a.a.createElement("div",{className:"sendbird-openchannel-og-message__bottom"},a.a.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag"},m.url&&a.a.createElement(ce.a,{className:"sendbird-openchannel-og-message__bottom__og-tag__url",type:ce.b.CAPTION_3,color:ce.c.ONBACKGROUND_2},m.url),m.title&&a.a.createElement(He.a,{className:"sendbird-openchannel-og-message__bottom__og-tag__title",src:m.url,type:ce.b.SUBTITLE_2,color:ce.c.PRIMARY},m.title),m.description&&a.a.createElement(ce.a,{className:"sendbird-openchannel-og-message__bottom__og-tag__description",type:ce.b.BODY_2,color:ce.c.ONBACKGROUND_1},m.description),m.url&&a.a.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail",role:"button",onClick:U,onKeyDown:U,tabIndex:0},g&&a.a.createElement(me.a,{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",url:g.url||"",alt:g.alt||"",height:"189px",defaultComponent:a.a.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"},a.a.createElement(ue.c,{type:ue.b.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))),(M||L)&&a.a.createElement("div",{className:"sendbird-openchannel-og-message__top__right__tail"},M&&a.a.createElement(be.a,{width:"16px",height:"16px"},a.a.createElement(ue.c,{className:"sendbird-openchannel-og-message__top__right__tail__pending",type:ue.b.SPINNER,fillColor:ue.a.PRIMARY,width:"16px",height:"16px"})),L&&a.a.createElement(ue.c,{className:"sendbird-openchannel-og-message__top__right__tail__failed",type:ue.b.ERROR,fillColor:ue.a.ERROR,width:"16px",height:"16px"}))))}var qe={IMAGE:"IMAGE",VIDEO:"VIDEO",UNSUPPORTED:"UNSUPPORTED"},Ke={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},Ye=function(e){return Ke.IMAGE.indexOf(e)>=0?qe.IMAGE:Ke.VIDEO.indexOf(e)>=0?qe.VIDEO:qe.UNSUPPORTED};function We(e){var t,n=e.className,l=e.message,c=e.disabled,u=e.userId,d=e.chainTop,h=e.onClick,f=e.showRemove,p=e.resendMessage,_=l.type,m=l.url,g=l.localUrl,v=l.thumbnails,y=null===l||void 0===l?void 0:l.sendingStatus,E=v&&v.length>0&&v[0].url||null,b=Object(se.c)(),C=b.stringSet,O=b.dateLocale,N=Object(r.useContext)(s.b),S=N.disableUserProfile,A=N.renderUserProfile,I=Object(r.useState)(360),k=I[0],T=I[1],w=Object(r.useRef)(null),R=Object(r.useRef)(null),M=Object(r.useRef)(null),L=Object(r.useMemo)(function(){return function(e){return function(t){var n=t.style;return a.a.createElement("div",{style:n},a.a.createElement(ue.c,{type:e,fillColor:ue.a.ON_BACKGROUND_2,width:"56px",height:"56px"}))}}},[]),P=Re(l,u),D=ke(y),U=Te(y),x=we(y),j=Ie(l);return Object(r.useEffect)(function(){var e,t=(null===(e=null===w||void 0===w?void 0:w.current)||void 0===e?void 0:e.clientWidth)-80;T(t>360?360:t)},[]),a.a.createElement("div",{className:Object(o.b)(Object(o.b)([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-thumbnail-message"],!1).join(" "),ref:w},a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__left"},!d&&a.a.createElement(Ee.d,{menuTrigger:function(e){return a.a.createElement(_e.a,{className:"sendbird-openchannel-thumbnail-message__left__avatar",src:j.profileUrl||"",ref:M,width:"28px",height:"28px",onClick:function(){S||e()}})},menuItems:function(e){return a.a.createElement(Ee.c,{parentRef:M,parentContainRef:M,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},A?A({user:j,close:e}):a.a.createElement(Ce.a,{user:j,onSuccess:e,disableMessaging:!0}))}})),a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right"},!d&&a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__title"},a.a.createElement(ce.a,{className:"sendbird-openchannel-thumbnail-message__right__title__sender-name",type:ce.b.CAPTION_2,color:P?ce.c.SECONDARY_3:ce.c.ONBACKGROUND_2},j&&(j.friendName||j.nickname||j.userId)),a.a.createElement(ce.a,{className:"sendbird-openchannel-thumbnail-message__right__title__sent-at",type:ce.b.CAPTION_3,color:ce.c.ONBACKGROUND_3},(null===l||void 0===l?void 0:l.createdAt)&&Object(i.b)(l.createdAt,"p",{locale:O}))),a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body"},a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap",role:"button",onClick:function(){D&&h(!0)},onKeyDown:function(){D&&h(!0)},tabIndex:0},a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"}),(t={},t[qe.VIDEO]=m||g?a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video"},E?a.a.createElement(me.a,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video",url:E,width:k,height:"270px",alt:"image",placeHolder:L(ue.b.PLAY)}):a.a.createElement("video",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"},a.a.createElement("source",{src:m||g,type:_})),a.a.createElement(ue.c,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",type:ue.b.PLAY,fillColor:ue.a.ON_BACKGROUND_2,width:"56px",height:"56px"})):a.a.createElement(ue.c,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",type:ue.b.PHOTO,fillColor:ue.a.ON_BACKGROUND_2,width:"56px",height:"56px"}),t[qe.IMAGE]=m||g?a.a.createElement(me.a,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image",url:E||m||g,alt:"image",width:k,height:"270px",placeHolder:L(ue.b.PHOTO)}):a.a.createElement(ue.c,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",type:ue.b.PHOTO,fillColor:ue.a.ON_BACKGROUND_2,width:"56px",height:"56px"}),t[qe.UNSUPPORTED]=a.a.createElement(ue.c,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",type:ue.b.PHOTO,fillColor:ue.a.ON_BACKGROUND_2,width:"56px",height:"56px"}),t)[Ye(_)])),(U||x)&&a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__tail"},U&&a.a.createElement(be.a,{width:"16px",height:"16px"},a.a.createElement(ue.c,{className:"sendbird-openchannel-thumbnail-message__right__tail__pending",type:ue.b.SPINNER,fillColor:ue.a.PRIMARY,width:"16px",height:"16px"})),x&&a.a.createElement(ue.c,{className:"sendbird-openchannel-thumbnail-message__right__tail__failed",type:ue.b.ERROR,fillColor:ue.a.ERROR,width:"16px",height:"16px"}))),a.a.createElement("div",{className:"sendbird-openchannel-thumbnail-message__context-menu",ref:R},a.a.createElement(Ee.d,{menuTrigger:function(e){return Ue({message:l,userId:u,status:y})&&a.a.createElement(le.a,{className:"sendbird-openchannel-thumbnail-message__context-menu--icon",width:"32px",height:"32px",onClick:e},a.a.createElement(ue.c,{type:ue.b.MORE,fillColor:ue.a.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(Ee.c,{parentRef:R,parentContainRef:R,closeDropdown:e,openLeft:!0},Le({message:l,userId:u,status:y})&&a.a.createElement(Ee.b,{onClick:function(){p(l),e()}},C.CONTEXT_MENU_DROPDOWN__RESEND),De({message:l,userId:u,status:y})&&a.a.createElement(Ee.b,{onClick:function(){c||(f(!0),e())}},C.CONTEXT_MENU_DROPDOWN__DELETE))}})))}var Qe=n(32),Je=(n(33),function(e){return/(\.mp3)$/i.test(e)?ue.b.FILE_AUDIO:/(\.gif)$/i.test(e)?ue.b.GIF:ue.b.FILE_DOCUMENT}),Xe=function(e,t){if(null===e||void 0===e)return"";if(e.length<=t)return e;var n=t-"...".length,r=Math.ceil(n/2),a=Math.floor(n/2);return e.substr(0,r)+"..."+e.substr(e.length-a)};function $e(e){var t=e.className,n=e.message,l=e.userId,c=e.disabled,u=e.chainTop,d=e.showRemove,h=e.resendMessage,f=null===n||void 0===n?void 0:n.sendingStatus,p=Object(se.c)(),_=p.dateLocale,m=p.stringSet,g=Object(r.useRef)(null),v=Object(r.useRef)(null),y=Object(r.useContext)(s.b),E=y.disableUserProfile,b=y.renderUserProfile,C=Re(n,l),O=Te(f),N=we(f),S=Ie(n);return a.a.createElement("div",{className:Object(o.b)(Object(o.b)([],Array.isArray(t)?t:[t],!0),["sendbird-openchannel-file-message"],!1).join(" ")},a.a.createElement("div",{className:"sendbird-openchannel-file-message__left"},!u&&a.a.createElement(Ee.d,{menuTrigger:function(e){return a.a.createElement(_e.a,{className:"sendbird-openchannel-file-message__left__avatar",src:S.profileUrl||"",ref:v,width:"28px",height:"28px",onClick:function(){E||e()}})},menuItems:function(e){return a.a.createElement(Ee.c,{parentRef:v,parentContainRef:v,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},b?b({user:S,close:e}):a.a.createElement(Ce.a,{user:S,onSuccess:e,disableMessaging:!0}))}})),a.a.createElement("div",{className:"sendbird-openchannel-file-message__right"},!u&&a.a.createElement("div",{className:"sendbird-openchannel-file-message__right__title"},a.a.createElement(ce.a,{className:"sendbird-openchannel-file-message__right__title__sender-name",type:ce.b.CAPTION_2,color:C?ce.c.SECONDARY_3:ce.c.ONBACKGROUND_2},S&&(S.friendName||S.nickname||S.userId)),a.a.createElement(ce.a,{className:"sendbird-openchannel-file-message__right__title__sent-at",type:ce.b.CAPTION_3,color:ce.c.ONBACKGROUND_3},(null===n||void 0===n?void 0:n.createdAt)&&Object(i.b)(n.createdAt,"p",{locale:_}))),a.a.createElement("div",{className:"sendbird-openchannel-file-message__right__body"},Je(n.url)&&a.a.createElement(ue.c,{className:"sendbird-openchannel-file-message__right__body__icon",type:Je(n.url),fillColor:ue.a.PRIMARY,width:"48px",height:"48px"}),a.a.createElement(Qe.a,{className:"sendbird-openchannel-file-message__right__body__file-name",onClick:function(){window.open(n.url)}},a.a.createElement(ce.a,{type:ce.b.BODY_1,color:ce.c.ONBACKGROUND_1},Xe(n.name||n.url,40)))),(O||N)&&a.a.createElement("div",{className:"sendbird-openchannel-file-message__right__tail"},O&&a.a.createElement(be.a,{width:"16px",height:"16px"},a.a.createElement(ue.c,{className:"sendbird-openchannel-file-message__right__tail__pending",type:ue.b.SPINNER,fillColor:ue.a.PRIMARY,width:"16px",height:"16px"})),N&&a.a.createElement(ue.c,{className:"sendbird-openchannel-file-message__right__tail__failed",type:ue.b.ERROR,fillColor:ue.a.ERROR,width:"16px",height:"16px"}))),a.a.createElement("div",{className:"sendbird-openchannel-file-message__context-menu",ref:g},a.a.createElement(Ee.d,{menuTrigger:function(e){return Ue({message:n,userId:l,status:f})&&a.a.createElement(le.a,{className:"sendbird-openchannel-file-message__context-menu__icon",width:"32px",height:"32px",onClick:e},a.a.createElement(ue.c,{type:ue.b.MORE,width:"24px",height:"24px"}))},menuItems:function(e){return a.a.createElement(Ee.c,{parentRef:g,parentContainRef:g,closeDropdown:e,openLeft:!0},Le({message:n,userId:l,status:f})&&a.a.createElement(Ee.b,{onClick:function(){c||(h(n),e())}},m.CONTEXT_MENU_DROPDOWN__RESEND),De({message:n,userId:l,status:f})&&a.a.createElement(Ee.b,{onClick:function(){c||(d(!0),e())}},m.CONTEXT_MENU_DROPDOWN__DELETE))}})))}var Ze=n(55),et=n(2),tt=n.n(et),nt=n(29),rt=function(e){var t=e.profileUrl,n=e.nickname,r=e.name,i=e.type,s=e.url,o=e.isByMe,l=e.onClose,c=e.onDelete,u=e.disableDelete;return a.a.createElement("div",{className:"sendbird-fileviewer"},a.a.createElement("div",{className:"sendbird-fileviewer__header"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},a.a.createElement(_e.a,{height:"32px",width:"32px",src:t})),a.a.createElement(ce.a,{className:"sendbird-fileviewer__header__left__filename",type:ce.b.H_2,color:ce.c.ONBACKGROUND_1},r),a.a.createElement(ce.a,{className:"sendbird-fileviewer__header__left__sender-name",type:ce.b.BODY_1,color:ce.c.ONBACKGROUND_2},n)),a.a.createElement("div",{className:"sendbird-fileviewer__header__right"},Object(de.I)(i)&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},a.a.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:s,target:"_blank"},a.a.createElement(ue.c,{type:ue.b.DOWNLOAD,fillColor:ue.a.ON_BACKGROUND_1,height:"24px",width:"24px"})),c&&o&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},a.a.createElement(ue.c,{className:u?"disabled":"",type:ue.b.DELETE,fillColor:u?ue.a.GRAY:ue.a.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(){u||c()}}))),a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},a.a.createElement(ue.c,{type:ue.b.CLOSE,fillColor:ue.a.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:l})))),a.a.createElement("div",{className:"sendbird-fileviewer__content"},Object(de.J)(i)&&a.a.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},a.a.createElement("source",{src:s,type:i})),Object(de.K)(i)&&a.a.createElement("img",{src:s,alt:r,className:"sendbird-fileviewer__content__img"}),!Object(de.I)(i)&&a.a.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},a.a.createElement(ce.a,{type:ce.b.H_1,color:ce.c.ONBACKGROUND_1},"Unsupoprted message"))))};function at(e){var t=e.message,n=e.isByMe,r=e.onClose,i=e.onDelete,s=t.sender,o=t.type,l=t.url,c=t.name,u=void 0===c?"":c,d=t.threadInfo,h=void 0===d?{}:d,f=(null===h||void 0===h?void 0:h.replyCount)>0,p=s.profileUrl,_=s.nickname,m=void 0===_?"":_;return Object(xe.createPortal)(a.a.createElement(rt,{profileUrl:p,nickname:m,type:o,url:l,name:u,onClose:r,onDelete:i,isByMe:n,disableDelete:f}),document.getElementById(nt.a))}rt.propTypes={profileUrl:tt.a.string.isRequired,nickname:tt.a.string.isRequired,type:tt.a.string.isRequired,url:tt.a.string.isRequired,name:tt.a.string.isRequired,onClose:tt.a.func.isRequired,onDelete:tt.a.func.isRequired,isByMe:tt.a.bool,disableDelete:tt.a.bool},rt.defaultProps={isByMe:!0,disableDelete:!1},at.propTypes={message:tt.a.shape({sender:tt.a.shape({profileUrl:tt.a.string,nickname:tt.a.string}),type:tt.a.string,url:tt.a.string,name:tt.a.string}).isRequired,isByMe:tt.a.bool,onClose:tt.a.func.isRequired,onDelete:tt.a.func.isRequired},at.defaultProps={isByMe:!0};var it=n(25);n(23);function st(e){var t=e.onCloseModal,n=e.onDeleteMessage,i=Object(r.useContext)(se.b).stringSet;return a.a.createElement(it.a,{onCancel:t,onSubmit:n,submitText:i.MESSAGE_MENU__DELETE,titleText:i.MODAL__DELETE_MESSAGE__TITLE})}var ot={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},lt={ADMIN:"ADMIN",USER:"USER",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},ct={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},ut=function(e){return e.isUserMessage&&e.isUserMessage()||"user"===e.messageType?e.ogMetaData?lt.OG:lt.USER:e.isAdminMessage&&e.isAdminMessage()?lt.ADMIN:"file"===e.messageType?(t=e.type,ot.IMAGE.indexOf(t)>=0||function(e){return ot.VIDEO.indexOf(e)>=0}(e.type)?lt.THUMBNAIL:lt.FILE):lt.UNKNOWN;var t};function dt(e){var t,n,s=e.message,o=e.chainTop,l=e.chainBottom,c=e.hasSeparator,u=e.renderMessage,h=ie(),f=h.currentOpenChannel,p=h.deleteMessage,_=h.updateMessage,m=h.resendMessage,g=Object(se.c)().dateLocale,v=null===f||void 0===f?void 0:f.isFrozen,y=Object(d.a)(),E=null===(n=null===y||void 0===y?void 0:y.config)||void 0===n?void 0:n.userId,b=null;"admin"!==(null===s||void 0===s?void 0:s.messageType)&&(b=null===s||void 0===s?void 0:s.sender);var C=Object(r.useMemo)(function(){return u?u({message:s,chainBottom:l,chainTop:o}):null},[s,u]),O=Object(r.useState)(!1),N=O[0],S=O[1],A=Object(r.useState)(!1),I=A[0],k=A[1],T=Object(r.useState)(!1),w=T[0],R=T[1],M=Object(r.useRef)(null),L=!1;return b&&"admin"!==(null===s||void 0===s?void 0:s.messageType)&&(L=E===b.userId||(null===s||void 0===s?void 0:s.requestState)===ct.PENDING||(null===s||void 0===s?void 0:s.requestState)===ct.FAILED),C?a.a.createElement("div",{className:"sendbird-msg-hoc sendbird-msg--scroll-ref"},a.a.createElement(C,null)):"user"===(null===s||void 0===s?void 0:s.messageType)&&N?a.a.createElement(oe.a,{isEdit:!0,disabled:v,ref:M,name:null===s||void 0===s?void 0:s.messageId,onSendMessage:_,onCancelEdit:function(){S(!1)},value:null===s||void 0===s?void 0:s.message}):a.a.createElement("div",{className:"sendbird-msg-hoc sendbird-msg--scroll-ref"},c&&a.a.createElement(Ze.a,null,a.a.createElement(ce.a,{type:ce.b.CAPTION_2,color:ce.c.ONBACKGROUND_2},Object(i.b)(null===s||void 0===s?void 0:s.createdAt,"MMMM dd, yyyy",{locale:g}))),(t={},t[lt.ADMIN]=function(){if("admin"===(null===s||void 0===s?void 0:s.messageType))return a.a.createElement(Fe,{message:s})}(),t[lt.FILE]=function(){if("file"===(null===s||void 0===s?void 0:s.messageType))return a.a.createElement($e,{message:s,disabled:v,userId:E,showRemove:k,resendMessage:m,chainTop:o,chainBottom:l})}(),t[lt.OG]=function(){if("user"===(null===s||void 0===s?void 0:s.messageType))return a.a.createElement(ze,{message:s,userId:E,showEdit:S,disabled:v,showRemove:k,resendMessage:m,chainTop:o,chainBottom:l})}(),t[lt.THUMBNAIL]=function(){if("file"===(null===s||void 0===s?void 0:s.messageType))return a.a.createElement(We,{message:s,disabled:v,userId:E,showRemove:k,resendMessage:m,onClick:R,chainTop:o,chainBottom:l})}(),t[lt.USER]=function(){if("user"===(null===s||void 0===s?void 0:s.messageType))return a.a.createElement(je,{message:s,userId:E,disabled:v,showEdit:S,showRemove:k,resendMessage:m,chainTop:o,chainBottom:l})}(),t[lt.UNKNOWN]=void 0,t)[ut(s)],I&&a.a.createElement(st,{onCloseModal:function(){return k(!1)},onDeleteMessage:function(){"admin"!==(null===s||void 0===s?void 0:s.messageType)&&p(s)}}),w&&"file"===(null===s||void 0===s?void 0:s.messageType)&&a.a.createElement(at,{onClose:function(){return R(!1)},message:s,onDelete:function(){return p(s)},isByMe:L}))}function ht(e,t){var n,i=ie(),s=i.useMessageGrouping,o=void 0===s||s,l=i.allMessages,c=i.hasMore,u=i.onScroll,d=t||Object(r.useRef)(null),h=Object(r.useState)(!1),f=h[0],p=h[1],m=function(){d&&d.current&&(d.current.scrollTo(0,d.current.scrollHeight),p(!1))},g=Object(r.useMemo)(function(){return l.length>0},[l.length]);return a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll",onScroll:function(e){var t=e.target,n=t.scrollTop;if(t.scrollHeight>n+t.clientHeight&&window.navigator.userAgent.indexOf("MSIE ")<0?p(!0):p(!1),c&&0===n){var r=d.current.querySelectorAll(".sendbird-msg--scroll-ref"),a=r&&r[0];u(function(){try{a.scrollIntoView()}catch(e){}})}},ref:d},a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container"},a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__padding"}),a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__item-container"+(g?"":"--no-messages")},g?l.map(function(t,n){var r=l[n-1],i=l[n-1],s=r&&r.createdAt,c=t.createdAt,u=!(s&&Object(ye.a)(c,s)),d=o?_(r,t,i):[!1,!1],h=d[0],f=d[1];return a.a.createElement(dt,{key:(null===t||void 0===t?void 0:t.messageId)||(null===t||void 0===t?void 0:t.reqId),message:t,chainTop:h,chainBottom:f,hasSeparator:u,renderMessage:null===e||void 0===e?void 0:e.renderMessage})}):(null===(n=null===e||void 0===e?void 0:e.renderPlaceHolderEmptyList)||void 0===n?void 0:n.call(e))||a.a.createElement(ve.a,{className:"sendbird-openchannel-conversation-scroll__container__place-holder",type:ve.b.NO_MESSAGES})),f&&a.a.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",onClick:m,onKeyDown:m,tabIndex:0,role:"button"},a.a.createElement(ue.c,{width:"24px",height:"24px",type:ue.b.CHEVRON_DOWN,fillColor:ue.a.CONTENT}))))}var ft=a.a.forwardRef(ht),pt="sendbird-openchannel-conversation",_t=function(e){var t=e.renderMessage,n=e.renderHeader,r=e.renderInput,i=e.renderPlaceHolderEmptyList,s=e.renderPlaceHolderError,o=e.renderPlaceHolderLoading,l=ie(),c=l.currentOpenChannel,u=l.amIBanned,d=l.loading,h=l.isInvalid,f=l.messageInputRef;return c&&(null===c||void 0===c?void 0:c.url)&&!u?d?(null===o||void 0===o?void 0:o())||a.a.createElement("div",{className:pt},a.a.createElement(ve.a,{type:ve.b.LOADING})):h?(null===s||void 0===s?void 0:s())||a.a.createElement("div",{className:pt},a.a.createElement(ve.a,{type:ve.b.WRONG})):a.a.createElement("div",{className:pt},(null===n||void 0===n?void 0:n())||a.a.createElement(ge,null),(null===c||void 0===c?void 0:c.isFrozen)&&a.a.createElement(pe,null),a.a.createElement(ft,{renderMessage:t,renderPlaceHolderEmptyList:i}),(null===r||void 0===r?void 0:r())||a.a.createElement(fe,{ref:f})):(null===s||void 0===s?void 0:s())||a.a.createElement("div",{className:pt},a.a.createElement(ve.a,{type:ve.b.NO_CHANNELS}))};n.d(t,"a",function(){return mt});var mt=function(e){return a.a.createElement(ae,{channelUrl:null===e||void 0===e?void 0:e.channelUrl,useMessageGrouping:null===e||void 0===e?void 0:e.useMessageGrouping,queries:null===e||void 0===e?void 0:e.queries,messageLimit:null===e||void 0===e?void 0:e.messageLimit,onBeforeSendUserMessage:null===e||void 0===e?void 0:e.onBeforeSendUserMessage,onBeforeSendFileMessage:null===e||void 0===e?void 0:e.onBeforeSendFileMessage,onChatHeaderActionClick:null===e||void 0===e?void 0:e.onChatHeaderActionClick,disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile,renderUserProfile:null===e||void 0===e?void 0:e.renderUserProfile},a.a.createElement(_t,{renderMessage:null===e||void 0===e?void 0:e.renderMessage,renderHeader:null===e||void 0===e?void 0:e.renderHeader,renderInput:null===e||void 0===e?void 0:e.renderInput,renderPlaceHolderEmptyList:null===e||void 0===e?void 0:e.renderPlaceHolderEmptyList,renderPlaceHolderError:null===e||void 0===e?void 0:e.renderPlaceHolderError,renderPlaceHolderLoading:null===e||void 0===e?void 0:e.renderPlaceHolderLoading}))}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(10),s=n(19),o=(n(20),n(4),a.a.createContext(void 0)),l=function(e){var t,n,l,c=e.children,u=e.channelUrl,d=e.onCloseClick,h=e.onChannelModified,f=e.onBeforeUpdateChannel,p=Object(i.a)(),_=null===(n=null===(t=null===p||void 0===p?void 0:p.stores)||void 0===t?void 0:t.sdkStore)||void 0===n?void 0:n.sdk,m=null===(l=null===p||void 0===p?void 0:p.config)||void 0===l?void 0:l.logger,g=Object(r.useState)(null),v=g[0],y=g[1];return Object(r.useEffect)(function(){u&&_&&_.getConnectionState?_.OpenChannel.getChannel(u,function(e,t){t?(m.error("open channel setting: error fetching",t),y(null)):(m.error("open channel setting: fetched",e),y(e))}):y(null)},[u,_]),a.a.createElement(o.Provider,{value:{channelUrl:u,channel:v,setChannel:y,onCloseClick:d,onChannelModified:h,onBeforeUpdateChannel:f}},a.a.createElement(s.a,{isOpenChannel:!0,renderUserProfile:null===e||void 0===e?void 0:e.renderUserProfile,disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile},c))},c=function(){return a.a.useContext(o)},u=n(7),d=n(1),h=n(3),f=n(24),p=n(32),_=n(18),m=n(37),g=n(5);n(14),n(13),n(11),n(15);function v(e){var t=e.channel,n=e.theme,i=e.height,s=void 0===i?56:i,o=e.width,l=void 0===o?56:o,c=Object(r.useContext)(u.b).stringSet,d=Object(r.useMemo)(function(){return a.a.createElement(_.a,{className:"sendbird-chat-header__avatar--open-channel",src:Object(m.b)(t),width:l+"px",height:s+"px",alt:t.name||c.OPEN_CHANNEL_SETTINGS__NO_TITLE})},[t.coverUrl,n]);return a.a.createElement(a.a.Fragment,null,d)}var y=n(25),E=n(35),b=n(12),C=(n(21),n(29),n(16),n(23),n(33),function(e){var t,n,s=e.onCancel,o=Object(i.a)(),l=null===(t=null===o||void 0===o?void 0:o.config)||void 0===t?void 0:t.logger,h=null===(n=null===o||void 0===o?void 0:o.config)||void 0===n?void 0:n.theme,f=c(),m=f.channel,g=f.onBeforeUpdateChannel,C=f.onChannelModified,O=f.setChannel,N=Object(r.useRef)(null),S=Object(r.useRef)(null),A=Object(r.useRef)(null),I=Object(r.useState)(null),k=I[0],T=I[1],w=Object(r.useState)(null),R=w[0],M=w[1],L=Object(r.useContext)(u.b).stringSet,P=null===m||void 0===m?void 0:m.name;return a.a.createElement(y.a,{titleText:L.MODAL__CHANNEL_INFORMATION__TITLE,submitText:L.BUTTON__SAVE,onCancel:s,onSubmit:function(){if(""===P||N.current.value){var e=N.current.value,t=R;if(l.info("ChannelSettings: Channel information being updated"),g){var n=g(e,t,null===m||void 0===m?void 0:m.data);l.info("ChannelSettings: onBeforeUpdateChannel",n),null===m||void 0===m||m.updateChannel(n,function(e){C(e),O(null),O(e)})}else null===m||void 0===m||m.updateChannel(e,t,null===m||void 0===m?void 0:m.data,function(e){l.info("ChannelSettings: Channel information updated",e),C(e),O(null),O(e)});s()}else S.current.reportValidity&&S.current.reportValidity()},type:b.b.PRIMARY},a.a.createElement("form",{className:"channel-profile-form",ref:S,onSubmit:function(e){e.preventDefault()}},a.a.createElement("div",{className:"channel-profile-form__img-section"},a.a.createElement(E.a,null,L.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),a.a.createElement("div",{className:"channel-profile-form__avatar"},k?a.a.createElement(_.a,{height:"80px",width:"80px",src:k}):a.a.createElement(v,{height:80,width:80,channel:m,theme:h})),a.a.createElement("input",{ref:A,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){T(URL.createObjectURL(e.target.files[0])),M(e.target.files[0]),A.current.value=""}}),a.a.createElement(p.a,{className:"channel-profile-form__avatar-button",onClick:function(){return A.current.click()},notUnderline:!0},a.a.createElement(d.a,{type:d.b.BUTTON_1,color:d.c.PRIMARY},L.MODAL__CHANNEL_INFORMATION__UPLOAD))),a.a.createElement("div",{className:"channel-profile-form__name-section"},a.a.createElement(E.a,null,L.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),a.a.createElement(E.b,{required:""!==P,name:"channel-profile-form__name",ref:N,value:P,placeHolder:L.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))});function O(){var e,t,n=Object(i.a)(),s=!(null===(e=null===n||void 0===n?void 0:n.config)||void 0===e?void 0:e.isOnline),o=null===(t=null===n||void 0===n?void 0:n.config)||void 0===t?void 0:t.theme,l=c().channel,h=null===l||void 0===l?void 0:l.name,f=Object(r.useState)(!1),_=f[0],m=f[1],g=Object(r.useContext)(u.b).stringSet;return a.a.createElement("div",{className:"sendbird-openchannel-profile"},a.a.createElement("div",{className:"sendbird-openchannel-profile--inner"},a.a.createElement("div",{className:"sendbird-openchannel-profile__avatar"},a.a.createElement(v,{channel:l,theme:o,height:80,width:80})),a.a.createElement(d.a,{type:d.b.SUBTITLE_2,color:d.c.ONBACKGROUND_1,className:"sendbird-openchannel-profile__title"},h||g.OPEN_CHANNEL_SETTINGS__NO_TITLE),a.a.createElement(p.a,{disabled:s,className:"sendbird-openchannel-profile__edit",onClick:function(){s||m(!0)},notUnderline:!0},a.a.createElement(d.a,{type:d.b.BUTTON_1,color:s?d.c.ONBACKGROUND_2:d.c.PRIMARY},g.CHANNEL_SETTING__PROFILE__EDIT)),_&&a.a.createElement(C,{onCancel:function(){return m(!1)}})))}n(54),n(36);var N=n(30),S=n(8),A=(n(40),n(43),n(31),n(9),n(6),n(27),function(e){var t=e.member,n=e.currentUser,i=Object(r.useRef)(null),o=Object(r.useContext)(s.b),l=o.disableUserProfile,c=o.renderUserProfile,h=Object(r.useContext)(u.b).stringSet;return a.a.createElement("div",{className:"sendbird-participants-accordion__member"},a.a.createElement("div",{className:"sendbird-participants-accordion__member-avatar"},a.a.createElement(S.d,{menuTrigger:function(e){return a.a.createElement(_.a,{onClick:function(){l||e()},ref:i,src:t.profileUrl,width:24,height:24})},menuItems:function(e){return a.a.createElement(S.c,{openLeft:!0,parentRef:i,parentContainRef:i,closeDropdown:e,style:{paddingTop:0,paddingBottom:0}},c?c({user:t,currentUserId:n,close:e}):a.a.createElement(N.a,{disableMessaging:!0,user:t,currentUserId:n,onSuccess:e}))}})),a.a.createElement(d.a,{type:d.b.SUBTITLE_2,color:d.c.ONBACKGROUND_1},t.nickname||h.NO_NAME,n===t.userId&&h.CHANNEL_SETTING__MEMBERS__YOU))});function I(){var e,t=Object(i.a)(),n=null===(e=null===t||void 0===t?void 0:t.config)||void 0===e?void 0:e.userId,s=c(),o=s.channel,l=s.onCloseClick,f=Object(r.useContext)(u.b).stringSet,p=Object(r.useState)([]),_=p[0],m=p[1],v=Object(r.useState)(null),y=v[0],E=v[1];return Object(r.useEffect)(function(){if(o&&o.createParticipantListQuery){var e=o.createParticipantListQuery();E(e),e.next(function(e,t){t||m(e)})}},[o]),a.a.createElement("div",{className:"sendbird-openchannel-settings__participant"},a.a.createElement("div",{className:"sendbird-openchannel-settings__header"},a.a.createElement(d.a,{type:d.b.H_2,color:d.c.ONBACKGROUND_1},f.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE),a.a.createElement(h.c,{type:h.b.CLOSE,className:"sendbird-openchannel-settings__close-icon",height:"24px",width:"24px",onClick:function(){l()}})),a.a.createElement("div",{className:"sendbird-openchannel-settings__participants-list",onScroll:function(e){var t=y.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&y.next(function(e,t){t||m(Object(g.b)(Object(g.b)([],_,!0),e,!0))})}},a.a.createElement("div",null,_.map(function(e){return a.a.createElement(A,{member:e,currentUser:n,key:e.userId})}),_&&0===_.length?a.a.createElement(d.a,{className:"sendbird-channel-settings__empty-list",type:d.b.SUBTITLE_2,color:d.c.ONBACKGROUND_3},f.OPEN_CHANNEL_SETTINGS__EMPTY_LIST):null)))}var k=n(53);n(57);function T(){var e,t,n=Object(r.useState)(!1),s=n[0],o=n[1],l=Object(r.useContext)(u.b).stringSet,f=Object(i.a)(),p=null===(e=null===f||void 0===f?void 0:f.config)||void 0===e?void 0:e.isOnline,_=null===(t=null===f||void 0===f?void 0:f.config)||void 0===t?void 0:t.logger,m=c(),g=m.channel,v=m.onDeleteChannel;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-openchannel-settings__panel-item\n          sendbird-openchannel-settings__delete-channel\n            "+(p?"":"sendbird-openchannel-settings__panel-item__disabled"),role:"button",tabIndex:0,onKeyDown:function(){p&&o(!0)},onClick:function(){p&&o(!0)}},a.a.createElement(h.c,{type:h.b.DELETE,className:["sendbird-openchannel-settings__panel-icon-left","sendbird-openchannel-settings__panel-icon__delete"].join(" "),height:"24px",width:"24px"}),a.a.createElement(d.a,{type:d.b.SUBTITLE_1,color:d.c.ONBACKGROUND_1},l.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL)),s&&a.a.createElement(y.a,{onCancel:function(){o(!1)},onSubmit:function(){null===g||void 0===g||g.delete(function(e,t){t?_.warning("OpenChannelSettings: Delete channel failed",t):(_.info("OpenChannelSettings: Delete channel success",e),v&&v(g))})},submitText:l.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT,titleText:l.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE}))}var w=function(e){var t=e.renderChannelProfile,n=Object(r.useContext)(u.b).stringSet,i=c(),s=i.onCloseClick,o=i.channel;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-openchannel-settings__header"},a.a.createElement(d.a,{type:d.b.H_2,color:d.c.ONBACKGROUND_1},n.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement(h.c,{className:"sendbird-openchannel-settings__close-icon",type:h.b.CLOSE,height:"24px",width:"24px",onClick:function(){s()}})),a.a.createElement("div",{className:"sendbird-openchannel-settings__profile"},(null===t||void 0===t?void 0:t())||a.a.createElement(O,null)),a.a.createElement("div",{className:"sendbird-openchannel-settings__url"},a.a.createElement(h.c,{className:"sendbird-openchannel-settings__copy-icon",type:h.b.COPY,height:"22px",width:"22px",onClick:function(){!function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(n){return!1}finally{document.body.removeChild(t)}}}(null===o||void 0===o?void 0:o.url)}}),a.a.createElement(d.a,{className:"sendbird-openchannel-settings__url-label",type:d.b.CAPTION_2,color:d.c.ONBACKGROUND_2},n.OPEN_CHANNEL_SETTINGS__OPERATOR_URL),a.a.createElement(d.a,{className:"sendbird-openchannel-settings__url-value",type:d.b.SUBTITLE_2},null===o||void 0===o?void 0:o.url)),a.a.createElement(k.a,null,a.a.createElement(I,null)),a.a.createElement(T,null))};n(34);function R(e){var t=e.onCloseClick,n=Object(r.useContext)(u.b).stringSet;return a.a.createElement("div",{className:"sendbird-openchannel-settings"},a.a.createElement("div",{className:"sendbird-openchannel-settings__header"},a.a.createElement(d.a,{type:d.b.H_2,color:d.c.ONBACKGROUND_1},n.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement(h.c,{type:h.b.CLOSE,className:"sendbird-openchannel-settings__close-icon",height:"24px",width:"24px",onClick:function(){t()}})),a.a.createElement("div",{className:"sendbird-openchannel-settings__placeholder"},a.a.createElement(f.a,{type:f.c.WRONG})))}var M=function(e){var t,n,r,o=e.renderOperatorUI,l=e.renderParticipantList,u=c(),d=u.channel,h=u.onCloseClick,f=Object(i.a)(),p=null===(t=null===f||void 0===f?void 0:f.config)||void 0===t?void 0:t.logger,_=null===(r=null===(n=null===f||void 0===f?void 0:f.stores)||void 0===n?void 0:n.userStore)||void 0===r?void 0:r.user;return d?a.a.createElement(s.a,{className:"sendbird-openchannel-settings"},(null===d||void 0===d?void 0:d.isOperator(_))&&((null===o||void 0===o?void 0:o())||a.a.createElement(w,null)),!(null===d||void 0===d?void 0:d.isOperator(_))&&((null===l||void 0===l?void 0:l())||a.a.createElement(I,null))):a.a.createElement(R,{onCloseClick:function(){p.info("OpenChannelSettings: Click close"),h&&h()}})};n.d(t,"a",function(){return L});var L=function(e){return a.a.createElement(l,{channelUrl:null===e||void 0===e?void 0:e.channelUrl,onCloseClick:null===e||void 0===e?void 0:e.onCloseClick,onBeforeUpdateChannel:null===e||void 0===e?void 0:e.onBeforeUpdateChannel,onChannelModified:null===e||void 0===e?void 0:e.onChannelModified,onDeleteChannel:null===e||void 0===e?void 0:e.onDeleteChannel,disableUserProfile:null===e||void 0===e?void 0:e.disableUserProfile,renderUserProfile:null===e||void 0===e?void 0:e.renderUserProfile},a.a.createElement(M,{renderOperatorUI:null===e||void 0===e?void 0:e.renderOperatorUI,renderParticipantList:null===e||void 0===e?void 0:e.renderParticipantList}))}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(7),s=n(10),o=n(5),l=(n(20),n(4),"GET_SEARCHED_MESSAGES"),c="GET_NEXT_SEARCHED_MESSAGES",u="START_MESSAGE_SEARCH",d="START_GETTING_SEARCHED_MESSAGES",h="SET_QUERY_INVALID",f="SET_CURRENT_CHANNEL",p="CHANNEL_INVALID",_="RESET_SEARCH_STRING";function m(e,t){switch(t.type){case f:var n=t.payload;return Object(o.a)(Object(o.a)({},e),{currentChannel:n,initialized:!0});case p:return Object(o.a)(Object(o.a)({},e),{currentChannel:null,initialized:!1});case l:var r=t.payload,a=r.messages,i=r.createdQuery;return i&&i.channelUrl===(null===e||void 0===e?void 0:e.currentMessageSearchQuery).channelUrl&&i.key===(null===e||void 0===e?void 0:e.currentMessageSearchQuery).key?Object(o.a)(Object(o.a)({},e),{loading:!1,isInvalid:!1,allMessages:Object(o.b)([],a,!0),hasMoreResult:(null===e||void 0===e?void 0:e.currentMessageSearchQuery).hasNext}):Object(o.a)({},e);case h:return Object(o.a)(Object(o.a)({},e),{isInvalid:!0});case u:return Object(o.a)(Object(o.a)({},e),{isInvalid:!1,loading:!1});case d:var s=t.payload;return Object(o.a)(Object(o.a)({},e),{loading:!0,currentMessageSearchQuery:s});case c:a=t.payload;return Object(o.a)(Object(o.a)({},e),{allMessages:Object(o.b)(Object(o.b)([],e.allMessages,!0),a,!0),hasMoreResult:(null===e||void 0===e?void 0:e.currentMessageSearchQuery).hasNext});case _:return Object(o.a)(Object(o.a)({},e),{allMessages:[]});default:return e}}var g={allMessages:[],loading:!1,isInvalid:!1,initialized:!1,currentChannel:null,currentMessageSearchQuery:null,hasMoreResult:!1};var v=500;var y=a.a.createContext(void 0),E=function(e){var t,n,i,E,b,C=e.channelUrl,O=e.searchString,N=e.messageSearchQuery,S=e.onResultLoaded,A=e.onResultClick,I=Object(s.a)(),k=Object(r.useState)(0),T=k[0],w=k[1],R=Object(r.useState)(0),M=R[0],L=R[1],P=Object(r.useReducer)(m,g),D=P[0],U=P[1],x=D.allMessages,j=D.loading,F=D.isInvalid,H=D.currentChannel,G=D.currentMessageSearchQuery,B=D.hasMoreResult,V=null===(t=null===I||void 0===I?void 0:I.config)||void 0===t?void 0:t.logger,z=null===(i=null===(n=null===I||void 0===I?void 0:I.stores)||void 0===n?void 0:n.sdkStore)||void 0===i?void 0:i.sdk,q=null===(b=null===(E=null===I||void 0===I?void 0:I.stores)||void 0===E?void 0:E.sdkStore)||void 0===b?void 0:b.initialized,K=Object(r.useRef)(null);!function(e,t){var n=e.channelUrl,a=e.sdkInit,i=t.sdk,s=t.logger,o=t.messageSearchDispatcher;Object(r.useEffect)(function(){n&&a&&i&&(i.OpenChannel||i.GroupChannel)&&i.GroupChannel.getChannel(n,function(e,t){t?o({type:p,payload:null}):(s.info("MessageSearch | useSetChannel group channel",e),o({type:f,payload:e}))})},[n,a])}({channelUrl:C,sdkInit:q},{sdk:z,logger:V,messageSearchDispatcher:U});var Y=function(e,t){var n=e.searchString,a=t.messageSearchDispatcher,i=Object(r.useState)(""),s=i[0],o=i[1],l=Object(r.useState)(null),c=l[0],u=l[1];return Object(r.useEffect)(function(){clearTimeout(c),n?u(setTimeout(function(){o(n)},v)):(o(""),a({type:_,payload:""}))},[n]),s}({searchString:O},{messageSearchDispatcher:U});!function(e,t){var n=e.currentChannel,a=e.channelUrl,i=e.requestString,s=e.messageSearchQuery,c=e.onResultLoaded,f=e.retryCount,p=t.sdk,_=t.logger,m=t.messageSearchDispatcher;Object(r.useEffect)(function(){if(m({type:u,payload:null}),p&&a&&p.createMessageSearchQuery&&n)if(i){var e=Object(o.a)(Object(o.a)({},s),{order:"ts",channelUrl:a,messageTimestampFrom:n.invitedAt}),t=p.createMessageSearchQuery(i,e);t.next(function(e,n){n?(_.warning("MessageSearch | useGetSearchedMessages: getting failed",n),m({type:h,payload:null}),c&&"function"===typeof c&&c(null,n)):(_.info("MessageSearch | useGetSearchedMessages: succeeded getting messages",e),m({type:l,payload:{messages:e,createdQuery:t}}),c&&"function"===typeof c&&c(e,null))}),m({type:d,payload:t})}else _.info("MessageSearch | useGetSeasrchedMessages: search string is empty")},[a,s,i,n,f])}({currentChannel:H,channelUrl:C,requestString:Y,messageSearchQuery:N,onResultLoaded:S,retryCount:T},{sdk:z,logger:V,messageSearchDispatcher:U});var W=function(e,t){var n=e.currentMessageSearchQuery,a=e.hasMoreResult,i=e.onResultLoaded,s=t.logger,o=t.messageSearchDispatcher;return Object(r.useCallback)(function(e){a||s.warning("MessageSearch | useScrollCallback: no more searched results",a),n&&n.hasNext?n.next(function(t,n){n?(s.warning("MessageSearch | useScrollCallback: failed getting searched messages",n),e(null,n),i&&"function"===typeof i&&i(null,n)):(s.info("MessageSearch | useScrollCallback: succeeded getting searched messages",t),o({type:c,payload:t}),e(t,null),i&&"function"===typeof i&&i(t,null))}):s.warning("MessageSearch | useScrollCallback: no currentMessageSearchQuery")},[n,a])}({currentMessageSearchQuery:G,hasMoreResult:B,onResultLoaded:S},{logger:V,messageSearchDispatcher:U});return a.a.createElement(y.Provider,{value:{channelUrl:C,searchString:O,requestString:Y,messageSearchQuery:N,onResultLoaded:S,onResultClick:A,retryCount:T,setRetryCount:w,selectedMessageId:M,setSelectedMessageId:L,messageSearchDispatcher:U,allMessages:x,loading:j,isInvalid:F,currentChannel:H,currentMessageSearchQuery:G,hasMoreResult:B,onScroll:W,scrollRef:K,handleRetryToConnect:function(){w(T+1)},handleOnScroll:function(e){var t=e.target,n=t.scrollTop,r=t.scrollHeight,a=t.clientHeight;B&&n+a>=r&&W(function(){})}}},null===e||void 0===e?void 0:e.children)},b=n(17),C=n(44),O=n(18),N=n(1),S=(n(15),n(38),n(14),n(3));n(13),n(11);function A(e){var t=e.className,n=e.message,r=e.selected,s=e.onClick,l=n.createdAt,c=n.message,u=n.sender||n._sender,d=u.profileUrl,h=u.nickname,f=Object(i.c)(),p=f.stringSet,_=f.dateLocale;return a.a.createElement("div",{className:Object(o.b)(Object(o.b)([],Array.isArray(t)?t:[t],!0),["sendbird-message-search-item",r?"sendbird-message-search-item--selected":""],!1).join(" "),onClick:function(e){e.stopPropagation(),s(n)}},a.a.createElement("div",{className:"sendbird-message-search-item__left"},a.a.createElement(O.a,{className:"sendbird-message-search-item__left__sender-avatar",src:d,alt:"profile image",width:"56px",height:"56px"})),a.a.createElement("div",{className:"sendbird-message-search-item__right"},a.a.createElement(N.a,{className:"sendbird-message-search-item__right__sender-name",type:N.b.SUBTITLE_2,color:N.c.ONBACKGROUND_1},h||p.NO_NAME),a.a.createElement(N.a,{className:"sendbird-message-search-item__right__message-text",type:N.b.BODY_2,color:N.c.ONBACKGROUND_3},c),a.a.createElement(N.a,{className:"sendbird-message-search-item__right__message-created-at",type:N.b.CAPTION_3,color:N.c.ONBACKGROUND_2},function(e,t){var n=t?{locale:t}:null;return e?Object(C.c)(e)?Object(b.b)(e,"p",n):Object(C.a)(e)?Object(C.b)(e,new Date,n):Object(b.b)(e,"MMM dd",n):""}(l,_))),a.a.createElement("div",{className:"sendbird-message-search-item__right-footer"}))}var I=n(24);function k(e){var t=e.url.match(/\.([^.]*?)(?=\?|#|$)/)[1];return/(jpg|jpeg|png)$/i.test(t)?S.b.PHOTO:/mp4$/i.test(t)?S.b.PLAY:/mp3/i.test(t)?S.b.FILE_AUDIO:/gif/i.test(t)?S.b.GIF:S.b.FILE_DOCUMENT}function T(e){var t=e.className,n=e.message,r=e.selected,s=e.onClick,l=n.createdAt,c=n.url,u=n.name,d=c,h=n.sender||n._sender,f=h.profileUrl,p=h.nickname,_=Object(i.c)(),m=_.stringSet,g=_.dateLocale;return a.a.createElement("div",{className:Object(o.b)(Object(o.b)([],Array.isArray(t)?t:[t],!0),["sendbird-message-search-file-item",r?"sendbird-message-search-file-item--selected":""],!1).join(" "),onClick:function(e){e.stopPropagation(),s(n)}},a.a.createElement("div",{className:"sendbird-message-search-file-item__left"},a.a.createElement(O.a,{className:"sendbird-message-search-file-item__left__sender-avatar",src:f,alt:"profile image",width:"56px",height:"56px"})),a.a.createElement("div",{className:"sendbird-message-search-file-item__right"},a.a.createElement(N.a,{className:"sendbird-message-search-file-item__right__sender-name",type:N.b.SUBTITLE_2,color:N.c.ONBACKGROUND_1},p||m.NO_NAME),a.a.createElement("div",{className:"sendbird-message-search-file-item__right__content"},a.a.createElement("div",{className:"sendbird-message-search-file-item__right__content__type-icon"},a.a.createElement(S.c,{type:k(n),fillColor:S.a.PRIMARY,width:"18px",height:"18px"})),a.a.createElement(N.a,{className:"sendbird-message-search-file-item__right__content__url",type:N.b.BODY_2,color:N.c.ONBACKGROUND_1},function(e,t){if(e.length<=t)return e;var n=t-"...".length,r=Math.ceil(n/2),a=Math.floor(n/2);return e.substr(0,r)+"..."+e.substr(e.length-a)}(u||d,28)))),a.a.createElement(N.a,{className:"sendbird-message-search-file-item__message-created-at",type:N.b.CAPTION_3,color:N.c.ONBACKGROUND_2},function(e,t){var n=t?{locale:t}:null;return e?Object(C.c)(e)?Object(b.b)(e,"p",n):Object(C.a)(e)?Object(C.b)(e,new Date,n):Object(b.b)(e,"MMM dd",n):""}(l,g)),a.a.createElement("div",{className:"sendbird-message-search-file-item__right-footer"}))}var w=n(34),R=function(e){var t=e.renderPlaceHolderError,n=e.renderPlaceHolderLoading,s=e.renderPlaceHolderNoString,o=e.renderPlaceHolderEmptyList,l=e.renderSearchItem,c=a.a.useContext(y),u=c.isInvalid,d=c.searchString,h=c.requestString,f=c.currentChannel,p=c.retryCount,_=c.setRetryCount,m=c.loading,g=c.scrollRef,v=c.hasMoreResult,E=c.onScroll,b=c.allMessages,C=c.onResultClick,O=c.selectedMessageId,N=c.setSelectedMessageId,S=Object(r.useContext)(i.b).stringSet;return u&&d&&h?(null===t||void 0===t?void 0:t())||a.a.createElement("div",{className:"sendbird-message-search"},a.a.createElement(I.a,{type:I.b.WRONG,retryToConnect:function(){_(p+1)}})):m&&d&&h?(null===n||void 0===n?void 0:n())||a.a.createElement("div",{className:"sendbird-message-search"},a.a.createElement(I.a,{type:I.b.SEARCHING})):d?a.a.createElement("div",{className:"sendbird-message-search",onScroll:function(e){var t=e.target,n=t.scrollTop,r=t.scrollHeight,a=t.clientHeight;v&&n+a>=r-1&&E(function(){})},ref:g},b.length>0?b.map(function(e){return l?l({message:e,onResultClick:C}):"file"===e.messageType?a.a.createElement(T,{className:"sendbird-message-search__message-search-item",message:e,key:e.messageId,selected:O===e.messageId,onClick:function(){C(e),N(e.messageId)}}):a.a.createElement(A,{className:"sendbird-message-search__message-search-item",message:e,key:e.messageId,selected:O===e.messageId,onClick:function(){C(e),N(e.messageId)}})}):(null===o||void 0===o?void 0:o())||a.a.createElement(I.a,{type:I.b.NO_RESULTS})):(null===s||void 0===s?void 0:s())||a.a.createElement("div",{className:"sendbird-message-search"},a.a.createElement(I.a,{type:I.b.SEARCH_IN,searchInString:f&&(null===f||void 0===f?void 0:f.name)&&"Group Channel"!==(null===f||void 0===f?void 0:f.name)?null===f||void 0===f?void 0:f.name:!f||"Group Channel"!==(null===f||void 0===f?void 0:f.name)&&(null===f||void 0===f?void 0:f.name)?S.NO_TITLE:f.members.map(function(e){return e.nickname||S.NO_NAME}).join(", ")}))},M=n(16);n.d(t,"a",function(){return P});var L="sendbird-message-search-pannel";function P(e){var t=e.channelUrl,n=e.onResultClick,s=e.onCloseClick,o=e.messageSearchQuery,l=e.renderPlaceHolderError,c=e.renderPlaceHolderLoading,u=e.renderPlaceHolderNoString,d=e.renderPlaceHolderEmptyList,h=e.renderSearchItem,f=Object(r.useState)(""),p=f[0],_=f[1],m=Object(r.useState)(""),g=m[0],v=m[1],y=Object(r.useState)(!1),b=y[0],C=y[1],O=Object(r.useContext)(i.b).stringSet,A=null;Object(r.useEffect)(function(){A&&clearTimeout(A),A=setTimeout(function(){_(g),C(!0),A=null},500)},[g]);return a.a.createElement("div",{className:L},a.a.createElement("div",{className:L+"__header"},a.a.createElement(N.a,{className:L+"__header__title",type:N.b.H_2,color:N.c.ONBACKGROUND_1},O.SEARCH_IN_CHANNEL),a.a.createElement(M.a,{className:L+"__header__close-button",width:"32px",height:"32px",onClick:s},a.a.createElement(S.c,{type:S.b.CLOSE,fillColor:S.a.ON_BACKGROUND_1,width:"22px",height:"22px"}))),a.a.createElement("div",{className:L+"__input"},a.a.createElement("div",{className:L+"__input__container"},a.a.createElement(S.c,{className:L+"__input__container__search-icon",type:S.b.SEARCH,fillColor:S.a.ON_BACKGROUND_3,width:"24px",height:"24px"}),a.a.createElement("input",{className:L+"__input__container__input-area",placeholder:O.SEARCH,value:g,onChange:function(e){v(e.target.value)}}),g&&b&&a.a.createElement(w.a,{className:L+"__input__container__spinner",width:"20px",height:"20px"},a.a.createElement(S.c,{type:S.b.SPINNER,fillColor:S.a.PRIMARY,width:"20px",height:"20px"})),!b&&g&&a.a.createElement(S.c,{className:L+"__input__container__reset-input-button",type:S.b.REMOVE,fillColor:S.a.ON_BACKGROUND_3,width:"20px",height:"20px",onClick:function(e){e.stopPropagation(),v(""),_("")}}))),a.a.createElement("div",{className:L+"__message-search"},a.a.createElement(E,{channelUrl:t,searchString:p,onResultClick:n,onResultLoaded:function(){C(!1)},messageSearchQuery:o},a.a.createElement(R,{renderPlaceHolderError:l,renderPlaceHolderLoading:c,renderPlaceHolderNoString:u,renderPlaceHolderEmptyList:d,renderSearchItem:h}))))}},,function(e,t,n){"use strict";var r=n(81),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var s=60109,o=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),i=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),s=d("react.provider"),o=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),c=d("react.memo"),u=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function m(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||p}function g(){}function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var y=v.prototype=new g;y.constructor=v,r(y,m.prototype),y.isPureReactComponent=!0;var E={current:null},b=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,i={},s=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)b.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:a,type:e,key:s,ref:o,props:i,_owner:E.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,n,r,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case i:l=!0}}if(l)return s=s(l=e),e=""===r?"."+A(l,0):r,Array.isArray(s)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),I(s,t,n,"",function(e){return e})):null!=s&&(N(s)&&(s=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+A(o=e[c],c);l+=I(o,t,n,u,s)}else if("function"===typeof(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,n,u=r+A(o,c++),s);else if("object"===o)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function k(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",function(e){return t.call(n,e,a++)}),r}function T(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}if(1===e._status)return e._result;throw e._result}var w={current:null};function R(){var e=w.current;if(null===e)throw Error(f(321));return e}var M={ReactCurrentDispatcher:w,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:k,forEach:function(e,t,n){k(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error(f(143));return e}},t.Component=m,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var i=r({},e.props),s=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)b.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:a,type:e.type,key:s,ref:o,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.0"},function(e,t,n){"use strict";var r=n(0),a=n(81),i=n(101);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var o=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},_={};function m(e,t,n,r,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function E(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(_,e)||!f.call(p,e)&&(h.test(e)?_[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=60103,O=60106,N=60107,S=60108,A=60114,I=60109,k=60110,T=60112,w=60113,R=60120,M=60115,L=60116,P=60121,D=60128,U=60129,x=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var F=Symbol.for;C=F("react.element"),O=F("react.portal"),N=F("react.fragment"),S=F("react.strict_mode"),A=F("react.profiler"),I=F("react.provider"),k=F("react.context"),T=F("react.forward_ref"),w=F("react.suspense"),R=F("react.suspense_list"),M=F("react.memo"),L=F("react.lazy"),P=F("react.block"),F("react.scope"),D=F("react.opaque.id"),U=F("react.debug_trace_mode"),x=F("react.offscreen"),j=F("react.legacy_hidden")}var H,G="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=G&&e[G]||e["@@iterator"])?e:null}function V(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var z=!1;function q(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o])return"\n"+a[s].replace(" at new "," at ")}while(1<=s&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function K(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 22:return e=q(e.type._render,!1);case 1:return e=q(e.type,!0);default:return""}}function Y(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case O:return"Portal";case A:return"Profiler";case S:return"StrictMode";case w:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case M:return Y(e.type);case P:return Y(e._render);case L:t=e._payload,e=e._init;try{return Y(e(t))}catch(n){}}return null}function W(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function se(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ce(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,_e,me=(_e=function(e,t){if(e.namespaceURI!==de.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return _e(e,t)})}:_e);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ye=["Webkit","ms","Moz","O"];function Ee(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Ee(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ve).forEach(function(e){ye.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]})});var Ce=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oe(e,t){if(t){if(Ce[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if(!("object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function Ne(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Ie=null,ke=null;function Te(e){if(e=Jr(e)){if("function"!==typeof Ae)throw Error(s(280));var t=e.stateNode;t&&(t=$r(t),Ae(e.stateNode,e.type,t))}}function we(e){Ie?ke?ke.push(e):ke=[e]:Ie=e}function Re(){if(Ie){var e=Ie,t=ke;if(ke=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Me(e,t){return e(t)}function Le(e,t,n,r,a){return e(t,n,r,a)}function Pe(){}var De=Me,Ue=!1,xe=!1;function je(){null===Ie&&null===ke||(Pe(),Re())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=$r(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var He=!1;if(d)try{var Ge={};Object.defineProperty(Ge,"passive",{get:function(){He=!0}}),window.addEventListener("test",Ge,Ge),window.removeEventListener("test",Ge,Ge)}catch(_e){He=!1}var Be=!1,Ve=null,ze=!1,qe=null,Ke={onError:function(e){Be=!0,Ve=e}};function Ye(e,t,n,r,a,i,s,o,l){Be=!1,Ve=null,function(e,t,n,r,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}.apply(Ke,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(We(e)!==e)throw Error(s(188))}function Xe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Je(a),e;if(i===r)return Je(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function $e(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Ze,et,tt,nt,rt=!1,at=[],it=null,st=null,ot=null,lt=new Map,ct=new Map,ut=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":it=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ot=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function pt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=ht(t,n,r,a,i),null!==t&&(null!==(t=Jr(t))&&et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function _t(e){var t=Qr(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void nt(e.lanePriority,function(){i.unstable_runWithPriority(e.priority,function(){tt(n)})})}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Jr(n))&&et(t),e.blockedOn=n,!1;t.shift()}return!0}function gt(e,t,n){mt(e)&&n.delete(t)}function vt(){for(rt=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=Jr(e.blockedOn))&&Ze(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==it&&mt(it)&&(it=null),null!==st&&mt(st)&&(st=null),null!==ot&&mt(ot)&&(ot=null),lt.forEach(gt),ct.forEach(gt)}function yt(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,vt)))}function Et(e){function t(t){return yt(t,e)}if(0<at.length){yt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==it&&yt(it,e),null!==st&&yt(st,e),null!==ot&&yt(ot,e),lt.forEach(t),ct.forEach(t),n=0;n<ut.length;n++)(r=ut[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ut.length&&null===(n=ut[0]).blockedOn;)_t(n),null===n.blockedOn&&ut.shift()}function bt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ct={animationend:bt("Animation","AnimationEnd"),animationiteration:bt("Animation","AnimationIteration"),animationstart:bt("Animation","AnimationStart"),transitionend:bt("Transition","TransitionEnd")},Ot={},Nt={};function St(e){if(Ot[e])return Ot[e];if(!Ct[e])return e;var t,n=Ct[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nt)return Ot[e]=n[t];return e}d&&(Nt=document.createElement("div").style,"AnimationEvent"in window||(delete Ct.animationend.animation,delete Ct.animationiteration.animation,delete Ct.animationstart.animation),"TransitionEvent"in window||delete Ct.transitionend.transition);var At=St("animationend"),It=St("animationiteration"),kt=St("animationstart"),Tt=St("transitionend"),wt=new Map,Rt=new Map,Mt=["abort","abort",At,"animationEnd",It,"animationIteration",kt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Tt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Rt.set(r,t),wt.set(r,a),c(a,[r])}}(0,i.unstable_now)();var Pt=8;function Dt(e){if(0!==(1&e))return Pt=15,1;if(0!==(2&e))return Pt=14,2;if(0!==(4&e))return Pt=13,4;var t=24&e;return 0!==t?(Pt=12,t):0!==(32&e)?(Pt=11,32):0!==(t=192&e)?(Pt=10,t):0!==(256&e)?(Pt=9,256):0!==(t=3584&e)?(Pt=8,t):0!==(4096&e)?(Pt=7,4096):0!==(t=4186112&e)?(Pt=6,t):0!==(t=62914560&e)?(Pt=5,t):67108864&e?(Pt=4,67108864):0!==(134217728&e)?(Pt=3,134217728):0!==(t=805306368&e)?(Pt=2,t):0!==(1073741824&e)?(Pt=1,1073741824):(Pt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Pt=0;var r=0,a=0,i=e.expiredLanes,s=e.suspendedLanes,o=e.pingedLanes;if(0!==i)r=i,a=Pt=15;else if(0!==(i=134217727&n)){var l=i&~s;0!==l?(r=Dt(l),a=Pt):0!==(o&=i)&&(r=Dt(o),a=Pt)}else 0!==(i=n&~s)?(r=Dt(i),a=Pt):0!==o&&(r=Dt(o),a=Pt);if(0===r)return 0;if(r=n&((0>(r=31-Gt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&s)){if(Dt(t),a<=Pt)return t;Pt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Gt(t)),r|=e[n],t&=~a;return r}function xt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ft(24&~t))?jt(10,t):e;case 10:return 0===(e=Ft(192&~t))?jt(8,t):e;case 8:return 0===(e=Ft(3584&~t))&&(0===(e=Ft(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ft(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function Ft(e){return e&-e}function Ht(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Bt(e)/Vt|0)|0},Bt=Math.log,Vt=Math.LN2;var zt=i.unstable_UserBlockingPriority,qt=i.unstable_runWithPriority,Kt=!0;function Yt(e,t,n,r){Ue||Pe();var a=Qt,i=Ue;Ue=!0;try{Le(a,e,t,n,r)}finally{(Ue=i)||je()}}function Wt(e,t,n,r){qt(zt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var a;if(Kt)if((a=0===(4&t))&&0<at.length&&-1<dt.indexOf(e))e=ht(null,e,t,n,r),at.push(e);else{var i=Jt(e,t,n,r);if(null===i)a&&ft(e,r);else{if(a){if(-1<dt.indexOf(e))return e=ht(i,e,t,n,r),void at.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return it=pt(it,e,t,n,r,a),!0;case"dragenter":return st=pt(st,e,t,n,r,a),!0;case"mouseover":return ot=pt(ot,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,pt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ct.set(i,pt(ct.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;ft(e,r)}kr(e,t,r,null,n)}}}function Jt(e,t,n,r){var a=Se(r);if(null!==(a=Qr(a))){var i=We(a);if(null===i)a=null;else{var s=i.tag;if(13===s){if(null!==(a=Qe(i)))return a;a=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return kr(e,t,r,a,n),null}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=a({},cn,{view:0,detail:0}),hn=an(dn),fn=a({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(fn),_n=an(a({},fn,{dataTransfer:0})),mn=an(a({},dn,{relatedTarget:0})),gn=an(a({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=an(a({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),yn=an(a({},cn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function On(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Nn(){return On}var Sn=an(a({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=an(a({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(a({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),kn=an(a({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=an(a({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=[9,13,27,32],Rn=d&&"CompositionEvent"in window,Mn=null;d&&"documentMode"in document&&(Mn=document.documentMode);var Ln=d&&"TextEvent"in window&&!Mn,Pn=d&&(!Rn||Mn&&8<Mn&&11>=Mn),Dn=String.fromCharCode(32),Un=!1;function xn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Bn(e,t,n,r){we(r),0<(t=wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,zn=null;function qn(e){Cr(e,0)}function Kn(e){if(X(Xr(e)))return e}function Yn(e,t){if("change"===e)return t}var Wn=!1;if(d){var Qn;if(d){var Jn="oninput"in document;if(!Jn){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),Jn="function"===typeof Xn.oninput}Qn=Jn}else Qn=!1;Wn=Qn&&(!document.documentMode||9<document.documentMode)}function $n(){Vn&&(Vn.detachEvent("onpropertychange",Zn),zn=Vn=null)}function Zn(e){if("value"===e.propertyName&&Kn(zn)){var t=[];if(Bn(t,zn,e,Se(e)),e=qn,Ue)e(t);else{Ue=!0;try{Me(e,t)}finally{Ue=!1,je()}}}}function er(e,t,n){"focusin"===e?($n(),zn=n,(Vn=t).attachEvent("onpropertychange",Zn)):"focusout"===e&&$n()}function tr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(zn)}function nr(e,t){if("click"===e)return Kn(t)}function rr(e,t){if("input"===e||"change"===e)return Kn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ir=Object.prototype.hasOwnProperty;function sr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ir.call(t,n[r])||!ar(e[n[r]],t[n[r]]))return!1;return!0}function or(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=or(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=or(r)}}function cr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var dr=d&&"documentMode"in document&&11>=document.documentMode,hr=null,fr=null,pr=null,_r=!1;function mr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==hr||hr!==$(r)||("selectionStart"in(r=hr)&&ur(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},pr&&sr(pr,r)||(pr=r,0<(r=wr(fr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Mt,2);for(var gr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),vr=0;vr<gr.length;vr++)Rt.set(gr[vr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Er=new Set("cancel close invalid load scroll toggle".split(" ").concat(yr));function br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(Ye.apply(this,arguments),Be){if(!Be)throw Error(s(198));var u=Ve;Be=!1,Ve=null,ze||(ze=!0,qe=u)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;br(a,o,c),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;br(a,o,c),i=l}}}if(ze)throw e=qe,ze=!1,qe=null,e}function Or(e,t){var n=Zr(t),r=e+"__bubble";n.has(r)||(Ir(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Sr(e){e[Nr]||(e[Nr]=!0,o.forEach(function(t){Er.has(t)||Ar(t,!1,e,null),Ar(t,!0,e,null)}))}function Ar(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Er.has(e)){if("scroll"!==e)return;a|=2,i=r}var s=Zr(i),o=e+"__"+(t?"capture":"bubble");s.has(o)||(t&&(a|=4),Ir(i,e,a,t),s.add(o))}function Ir(e,t,n,r){var a=Rt.get(t);switch(void 0===a?2:a){case 0:a=Yt;break;case 1:a=Wt;break;default:a=Qt}n=a.bind(null,t,n,e),a=void 0,!He||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function kr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=Qr(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}!function(e,t,n){if(xe)return e(t,n);xe=!0;try{De(e,t,n)}finally{xe=!1,je()}}(function(){var r=i,a=Se(n),s=[];e:{var o=wt.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case At:case It:case kt:l=gn;break;case Tt:l=kn;break;case"scroll":l=hn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var _=(f=p).stateNode;if(5===f.tag&&null!==_&&(f=_,null!==h&&(null!=(_=Fe(p,h))&&u.push(Tr(p,_,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,a),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Qr(c)&&!c[Yr])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Qr(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,_="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,_="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Xr(l),f=null==c?o:Xr(c),(o=new u(_,p+"leave",l,n,a)).target=d,o.relatedTarget=f,_=null,Qr(a)===r&&((u=new u(h,p+"enter",c,n,a)).target=f,u.relatedTarget=d,_=u),d=_,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Rr(f))p++;for(f=0,_=h;_;_=Rr(_))f++;for(;0<p-f;)u=Rr(u),p--;for(;0<f-p;)h=Rr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Rr(u),h=Rr(h)}u=null}else u=null;null!==l&&Mr(s,o,l,u,!1),null!==c&&null!==d&&Mr(s,d,c,u,!0)}if("select"===(l=(o=r?Xr(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Yn;else if(Gn(o))if(Wn)m=rr;else{m=tr;var g=er}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=nr);switch(m&&(m=m(e,r))?Bn(s,m,n,a):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ae(o,"number",o.value)),g=r?Xr(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(hr=g,fr=r,pr=null);break;case"focusout":pr=fr=hr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,mr(s,n,a);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":mr(s,n,a)}var v;if(Rn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Fn?xn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Pn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Fn&&(v=en()):($t="value"in(Xt=a)?Xt.value:Xt.textContent,Fn=!0)),0<(g=wr(r,y)).length&&(y=new yn(y,e,null,n,a),s.push({event:y,listeners:g}),v?y.data=v:null!==(v=jn(n))&&(y.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Dn);case"textInput":return(e=t.data)===Dn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!Rn&&xn(e,t)?(e=en(),Zt=$t=Xt=null,Fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=wr(r,"onBeforeInput")).length&&(a=new yn("onBeforeInput","beforeinput",null,n,a),s.push({event:a,listeners:r}),a.data=v))}Cr(s,t)})}function Tr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Fe(e,n))&&r.unshift(Tr(e,i,a)),null!=(i=Fe(e,t))&&r.push(Tr(e,i,a))),e=e.return}return r}function Rr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Mr(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Fe(n,i))&&s.unshift(Tr(n,l,o)):a||null!=(l=Fe(n,i))&&s.push(Tr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}function Lr(){}var Pr=null,Dr=null;function Ur(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function xr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jr="function"===typeof setTimeout?setTimeout:void 0,Fr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Gr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Br(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Vr=0;var zr=Math.random().toString(36).slice(2),qr="__reactFiber$"+zr,Kr="__reactProps$"+zr,Yr="__reactContainer$"+zr,Wr="__reactEvents$"+zr;function Qr(e){var t=e[qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yr]||n[qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Br(e);null!==e;){if(n=e[qr])return n;e=Br(e)}return t}n=(e=n).parentNode}return null}function Jr(e){return!(e=e[qr]||e[Yr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function $r(e){return e[Kr]||null}function Zr(e){var t=e[Wr];return void 0===t&&(t=e[Wr]=new Set),t}var ea=[],ta=-1;function na(e){return{current:e}}function ra(e){0>ta||(e.current=ea[ta],ea[ta]=null,ta--)}function aa(e,t){ea[++ta]=e.current,e.current=t}var ia={},sa=na(ia),oa=na(!1),la=ia;function ca(e,t){var n=e.type.contextTypes;if(!n)return ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ua(e){return null!==(e=e.childContextTypes)&&void 0!==e}function da(){ra(oa),ra(sa)}function ha(e,t,n){if(sa.current!==ia)throw Error(s(168));aa(sa,t),aa(oa,n)}function fa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,Y(t)||"Unknown",i));return a({},n,r)}function pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ia,la=sa.current,aa(sa,e),aa(oa,oa.current),!0}function _a(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=fa(e,t,la),r.__reactInternalMemoizedMergedChildContext=e,ra(oa),ra(sa),aa(sa,e)):ra(oa),aa(oa,n)}var ma=null,ga=null,va=i.unstable_runWithPriority,ya=i.unstable_scheduleCallback,Ea=i.unstable_cancelCallback,ba=i.unstable_shouldYield,Ca=i.unstable_requestPaint,Oa=i.unstable_now,Na=i.unstable_getCurrentPriorityLevel,Sa=i.unstable_ImmediatePriority,Aa=i.unstable_UserBlockingPriority,Ia=i.unstable_NormalPriority,ka=i.unstable_LowPriority,Ta=i.unstable_IdlePriority,wa={},Ra=void 0!==Ca?Ca:function(){},Ma=null,La=null,Pa=!1,Da=Oa(),Ua=1e4>Da?Oa:function(){return Oa()-Da};function xa(){switch(Na()){case Sa:return 99;case Aa:return 98;case Ia:return 97;case ka:return 96;case Ta:return 95;default:throw Error(s(332))}}function ja(e){switch(e){case 99:return Sa;case 98:return Aa;case 97:return Ia;case 96:return ka;case 95:return Ta;default:throw Error(s(332))}}function Fa(e,t){return e=ja(e),va(e,t)}function Ha(e,t,n){return e=ja(e),ya(e,t,n)}function Ga(){if(null!==La){var e=La;La=null,Ea(e)}Ba()}function Ba(){if(!Pa&&null!==Ma){Pa=!0;var e=0;try{var t=Ma;Fa(99,function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}}),Ma=null}catch(n){throw null!==Ma&&(Ma=Ma.slice(e+1)),ya(Sa,Ga),n}finally{Pa=!1}}}var Va=b.ReactCurrentBatchConfig;function za(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qa=na(null),Ka=null,Ya=null,Wa=null;function Qa(){Wa=Ya=Ka=null}function Ja(e){var t=qa.current;ra(qa),e.type._context._currentValue=t}function Xa(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function $a(e,t){Ka=e,Wa=Ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function Za(e,t){if(Wa!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Wa=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ya){if(null===Ka)throw Error(s(308));Ya=t,Ka.dependencies={lanes:0,firstContext:t,responders:null}}else Ya=Ya.next=t;return e._currentValue}var ei=!1;function ti(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ni(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ri(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ai(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ii(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function si(e,t,n,r){var i=e.updateQueue;ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?s=u:o.next=u,o=c;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==o&&(null===h?d.firstBaseUpdate=u:h.next=u,d.lastBaseUpdate=c)}}if(null!==s){for(h=i.baseState,o=0,d=u=c=null;;){l=s.lane;var f=s.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,_=s;switch(l=t,f=n,_.tag){case 1:if("function"===typeof(p=_.payload)){h=p.call(f,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=_.payload)?p.call(f,h,l):p)||void 0===l)break e;h=a({},h,l);break e;case 2:ei=!0}}null!==s.callback&&(e.flags|=32,null===(l=i.effects)?i.effects=[s]:l.push(s))}else f={eventTime:f,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(u=d=f,c=h):d=d.next=f,o|=l;if(null===(s=s.next)){if(null===(l=i.shared.pending))break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===d&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,Mo|=o,e.lanes=o,e.memoizedState=h}}function oi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var li=(new r.Component).refs;function ci(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ui={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rl(),a=al(e),i=ri(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ai(e,i),il(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rl(),a=al(e),i=ri(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ai(e,i),il(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rl(),r=al(e),a=ri(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ai(e,a),il(e,r,n)}};function di(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(a,i))}function hi(e,t,n){var r=!1,a=ia,i=t.contextType;return"object"===typeof i&&null!==i?i=Za(i):(a=ua(t)?la:sa.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ca(e,a):ia),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function fi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ui.enqueueReplaceState(t,t.state,null)}function pi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=li,ti(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Za(i):(i=ua(t)?la:sa.current,a.context=ca(e,i)),si(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ci(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ui.enqueueReplaceState(a,a.state,null),si(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var _i=Array.isArray;function mi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===li&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function gi(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function vi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pl(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=mi(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=mi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Ul(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=mi(e,null,t),n.return=e,n;case O:return(t=Fl(t,e.mode,n)).return=e,t}if(_i(t)||B(t))return(t=Ul(t,e.mode,n,null)).return=e,t;gi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return n.key===a?n.type===N?d(e,t,n.props.children,r,a):c(e,t,n,r):null;case O:return n.key===a?u(e,t,n,r):null}if(_i(n)||B(n))return null!==a?null:d(e,t,n,r,null);gi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return e=e.get(null===r.key?n:r.key)||null,r.type===N?d(t,e,r.props.children,a,r.key):c(t,e,r,a);case O:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(_i(r)||B(r))return d(t,e=e.get(n)||null,r,a,null);gi(t,r)}return null}function _(a,s,o,l){for(var c=null,u=null,d=s,_=s=0,m=null;null!==d&&_<o.length;_++){d.index>_?(m=d,d=null):m=d.sibling;var g=f(a,d,o[_],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(a,d),s=i(g,s,_),null===u?c=g:u.sibling=g,u=g,d=m}if(_===o.length)return n(a,d),c;if(null===d){for(;_<o.length;_++)null!==(d=h(a,o[_],l))&&(s=i(d,s,_),null===u?c=d:u.sibling=d,u=d);return c}for(d=r(a,d);_<o.length;_++)null!==(m=p(d,a,_,o[_],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?_:m.key),s=i(m,s,_),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(a,e)}),c}function m(a,o,l,c){var u=B(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,_=o,m=o=0,g=null,v=l.next();null!==_&&!v.done;m++,v=l.next()){_.index>m?(g=_,_=null):g=_.sibling;var y=f(a,_,v.value,c);if(null===y){null===_&&(_=g);break}e&&_&&null===y.alternate&&t(a,_),o=i(y,o,m),null===d?u=y:d.sibling=y,d=y,_=g}if(v.done)return n(a,_),u;if(null===_){for(;!v.done;m++,v=l.next())null!==(v=h(a,v.value,c))&&(o=i(v,o,m),null===d?u=v:d.sibling=v,d=v);return u}for(_=r(a,_);!v.done;m++,v=l.next())null!==(v=p(_,a,m,v.value,c))&&(e&&null!==v.alternate&&_.delete(null===v.key?m:v.key),o=i(v,o,m),null===d?u=v:d.sibling=v,d=v);return e&&_.forEach(function(e){return t(a,e)}),u}return function(e,r,i,l){var c="object"===typeof i&&null!==i&&i.type===N&&null===i.key;c&&(i=i.props.children);var u="object"===typeof i&&null!==i;if(u)switch(i.$$typeof){case C:e:{for(u=i.key,c=r;null!==c;){if(c.key===u){switch(c.tag){case 7:if(i.type===N){n(e,c.sibling),(r=a(c,i.props.children)).return=e,e=r;break e}break;default:if(c.elementType===i.type){n(e,c.sibling),(r=a(c,i.props)).ref=mi(e,c,i),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}i.type===N?((r=Ul(i.props.children,e.mode,l,i.key)).return=e,e=r):((l=Dl(i.type,i.key,i.props,null,e.mode,l)).ref=mi(e,r,i),l.return=e,e=l)}return o(e);case O:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Fl(i,e.mode,l)).return=e,e=r}return o(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=jl(i,e.mode,l)).return=e,e=r),o(e);if(_i(i))return _(e,r,i,l);if(B(i))return m(e,r,i,l);if(u&&gi(e,i),"undefined"===typeof i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,Y(e.type)||"Component"))}return n(e,r)}}var yi=vi(!0),Ei=vi(!1),bi={},Ci=na(bi),Oi=na(bi),Ni=na(bi);function Si(e){if(e===bi)throw Error(s(174));return e}function Ai(e,t){switch(aa(Ni,t),aa(Oi,e),aa(Ci,bi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ra(Ci),aa(Ci,t)}function Ii(){ra(Ci),ra(Oi),ra(Ni)}function ki(e){Si(Ni.current);var t=Si(Ci.current),n=fe(t,e.type);t!==n&&(aa(Oi,e),aa(Ci,n))}function Ti(e){Oi.current===e&&(ra(Ci),ra(Oi))}var wi=na(0);function Ri(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mi=null,Li=null,Pi=!1;function Di(e,t){var n=Ml(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function xi(e){if(Pi){var t=Li;if(t){var n=t;if(!Ui(e,t)){if(!(t=Gr(n.nextSibling))||!Ui(e,t))return e.flags=-1025&e.flags|2,Pi=!1,void(Mi=e);Di(Mi,n)}Mi=e,Li=Gr(t.firstChild)}else e.flags=-1025&e.flags|2,Pi=!1,Mi=e}}function ji(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Mi=e}function Fi(e){if(e!==Mi)return!1;if(!Pi)return ji(e),Pi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!xr(t,e.memoizedProps))for(t=Li;t;)Di(e,t),t=Gr(t.nextSibling);if(ji(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Li=Gr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Li=null}}else Li=Mi?Gr(e.stateNode.nextSibling):null;return!0}function Hi(){Li=Mi=null,Pi=!1}var Gi=[];function Bi(){for(var e=0;e<Gi.length;e++)Gi[e]._workInProgressVersionPrimary=null;Gi.length=0}var Vi=b.ReactCurrentDispatcher,zi=b.ReactCurrentBatchConfig,qi=0,Ki=null,Yi=null,Wi=null,Qi=!1,Ji=!1;function Xi(){throw Error(s(321))}function $i(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Zi(e,t,n,r,a,i){if(qi=i,Ki=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vi.current=null===e||null===e.memoizedState?Ns:Ss,e=n(r,a),Ji){i=0;do{if(Ji=!1,!(25>i))throw Error(s(301));i+=1,Wi=Yi=null,t.updateQueue=null,Vi.current=As,e=n(r,a)}while(Ji)}if(Vi.current=Os,t=null!==Yi&&null!==Yi.next,qi=0,Wi=Yi=Ki=null,Qi=!1,t)throw Error(s(300));return e}function es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?Ki.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function ts(){if(null===Yi){var e=Ki.alternate;e=null!==e?e.memoizedState:null}else e=Yi.next;var t=null===Wi?Ki.memoizedState:Wi.next;if(null!==t)Wi=t,Yi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Yi=e).memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},null===Wi?Ki.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function ns(e,t){return"function"===typeof t?t(e):t}function rs(e){var t=ts(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Yi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var l=o=i=null,c=a;do{var u=c.lane;if((qi&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(o=l=d,i=r):l=l.next=d,Ki.lanes|=u,Mo|=u}c=c.next}while(null!==c&&c!==a);null===l?i=r:l.next=o,ar(r,t.memoizedState)||(ks=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function as(e){var t=ts(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);ar(i,t.memoizedState)||(ks=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function is(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(qi&e)===e)&&(t._workInProgressVersionPrimary=r,Gi.push(t))),e)return n(t._source);throw Gi.push(t),Error(s(350))}function ss(e,t,n,r){var a=No;if(null===a)throw Error(s(349));var i=t._getVersion,o=i(t._source),l=Vi.current,c=l.useState(function(){return is(a,t,n)}),u=c[1],d=c[0];c=Wi;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,_=h.source;h=h.subscribe;var m=Ki;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect(function(){f.getSnapshot=n,f.setSnapshot=u;var e=i(t._source);if(!ar(o,e)){e=n(t._source),ar(d,e)||(u(e),e=al(m),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,s=e;0<s;){var l=31-Gt(s),c=1<<l;r[l]|=e,s&=~c}}},[n,t,r]),l.useEffect(function(){return r(t._source,function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=al(m);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n(function(){throw i})}})},[t,r]),ar(p,n)&&ar(_,t)&&ar(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ns,lastRenderedState:d}).dispatch=u=Cs.bind(null,Ki,e),c.queue=e,c.baseQueue=null,d=is(a,t,n),c.memoizedState=c.baseState=d),d}function os(e,t,n){return ss(ts(),e,t,n)}function ls(e){var t=es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e}).dispatch=Cs.bind(null,Ki,e),[t.memoizedState,e]}function cs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ki.updateQueue)?(t={lastEffect:null},Ki.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function us(e){return e={current:e},es().memoizedState=e}function ds(){return ts().memoizedState}function hs(e,t,n,r){var a=es();Ki.flags|=e,a.memoizedState=cs(1|t,n,void 0,void 0===r?null:r)}function fs(e,t,n,r){var a=ts();r=void 0===r?null:r;var i=void 0;if(null!==Yi){var s=Yi.memoizedState;if(i=s.destroy,null!==r&&$i(r,s.deps))return void cs(t,n,i,r)}Ki.flags|=e,a.memoizedState=cs(1|t,n,i,r)}function ps(e,t){return hs(516,4,e,t)}function _s(e,t){return fs(516,4,e,t)}function ms(e,t){return fs(4,2,e,t)}function gs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function vs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,fs(4,2,gs.bind(null,t,e),n)}function ys(){}function Es(e,t){var n=ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$i(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function bs(e,t){var n=ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$i(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Cs(e,t,n){var r=rl(),a=al(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),t.pending=i,s=e.alternate,e===Ki||null!==s&&s===Ki)Ji=Qi=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=s(o,n);if(i.eagerReducer=s,i.eagerState=l,ar(l,o))return}catch(c){}il(e,a,r)}}var Os={readContext:Za,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useOpaqueIdentifier:Xi,unstable_isNewReconciler:!1},Ns={readContext:Za,useCallback:function(e,t){return es().memoizedState=[e,void 0===t?null:t],e},useContext:Za,useEffect:ps,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,hs(4,2,gs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hs(4,2,e,t)},useMemo:function(e,t){var n=es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=es();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Cs.bind(null,Ki,e),[r.memoizedState,e]},useRef:us,useState:ls,useDebugValue:ys,useDeferredValue:function(e){var t=ls(e),n=t[0],r=t[1];return ps(function(){var t=zi.transition;zi.transition=1;try{r(e)}finally{zi.transition=t}},[e]),n},useTransition:function(){var e=ls(!1),t=e[0];return us(e=function(e,t){var n=xa();Fa(98>n?98:n,function(){e(!0)}),Fa(97<n?97:n,function(){var n=zi.transition;zi.transition=1;try{e(!1),t()}finally{zi.transition=n}})}.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=es();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ss(r,e,t,n)},useOpaqueIdentifier:function(){if(Pi){var e=!1,t=function(e){return{$$typeof:D,toString:e,valueOf:e}}(function(){throw e||(e=!0,n("r:"+(Vr++).toString(36))),Error(s(355))}),n=ls(t)[1];return 0===(2&Ki.mode)&&(Ki.flags|=516,cs(5,function(){n("r:"+(Vr++).toString(36))},void 0,null)),t}return ls(t="r:"+(Vr++).toString(36)),t},unstable_isNewReconciler:!1},Ss={readContext:Za,useCallback:Es,useContext:Za,useEffect:_s,useImperativeHandle:vs,useLayoutEffect:ms,useMemo:bs,useReducer:rs,useRef:ds,useState:function(){return rs(ns)},useDebugValue:ys,useDeferredValue:function(e){var t=rs(ns),n=t[0],r=t[1];return _s(function(){var t=zi.transition;zi.transition=1;try{r(e)}finally{zi.transition=t}},[e]),n},useTransition:function(){var e=rs(ns)[0];return[ds().current,e]},useMutableSource:os,useOpaqueIdentifier:function(){return rs(ns)[0]},unstable_isNewReconciler:!1},As={readContext:Za,useCallback:Es,useContext:Za,useEffect:_s,useImperativeHandle:vs,useLayoutEffect:ms,useMemo:bs,useReducer:as,useRef:ds,useState:function(){return as(ns)},useDebugValue:ys,useDeferredValue:function(e){var t=as(ns),n=t[0],r=t[1];return _s(function(){var t=zi.transition;zi.transition=1;try{r(e)}finally{zi.transition=t}},[e]),n},useTransition:function(){var e=as(ns)[0];return[ds().current,e]},useMutableSource:os,useOpaqueIdentifier:function(){return as(ns)[0]},unstable_isNewReconciler:!1},Is=b.ReactCurrentOwner,ks=!1;function Ts(e,t,n,r){t.child=null===e?Ei(t,null,n,r):yi(t,e.child,n,r)}function ws(e,t,n,r,a){n=n.render;var i=t.ref;return $a(t,a),r=Zi(e,t,n,r,i,a),null===e||ks?(t.flags|=1,Ts(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,Xs(e,t,a))}function Rs(e,t,n,r,a,i){if(null===e){var s=n.type;return"function"!==typeof s||Ll(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ms(e,t,s,r,a,i))}return s=e.child,0===(a&i)&&(a=s.memoizedProps,(n=null!==(n=n.compare)?n:sr)(a,r)&&e.ref===t.ref)?Xs(e,t,i):(t.flags|=1,(e=Pl(s,r)).ref=t.ref,e.return=t,t.child=e)}function Ms(e,t,n,r,a,i){if(null!==e&&sr(e.memoizedProps,r)&&e.ref===t.ref){if(ks=!1,0===(i&a))return t.lanes=e.lanes,Xs(e,t,i);0!==(16384&e.flags)&&(ks=!0)}return Ds(e,t,n,r,i)}function Ls(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},hl(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},hl(t,e),null;t.memoizedState={baseLanes:0},hl(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,hl(t,r);return Ts(e,t,a,n),t.child}function Ps(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ds(e,t,n,r,a){var i=ua(n)?la:sa.current;return i=ca(t,i),$a(t,a),n=Zi(e,t,n,r,i,a),null===e||ks?(t.flags|=1,Ts(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,Xs(e,t,a))}function Us(e,t,n,r,a){if(ua(n)){var i=!0;pa(t)}else i=!1;if($a(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),hi(t,n,r),pi(t,n,r,a),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Za(c):c=ca(t,c=ua(n)?la:sa.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&fi(t,s,r,c),ei=!1;var h=t.memoizedState;s.state=h,si(t,r,s,a),l=t.memoizedState,o!==r||h!==l||oa.current||ei?("function"===typeof u&&(ci(t,n,u,r),l=t.memoizedState),(o=ei||di(t,n,o,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4)):("function"===typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4),r=!1)}else{s=t.stateNode,ni(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:za(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Za(l):l=ca(t,l=ua(n)?la:sa.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&fi(t,s,r,l),ei=!1,h=t.memoizedState,s.state=h,si(t,r,s,a);var p=t.memoizedState;o!==d||h!==p||oa.current||ei?("function"===typeof f&&(ci(t,n,f,r),p=t.memoizedState),(c=ei||di(t,n,c,r,h,p,l))?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return xs(e,t,n,r,i,a)}function xs(e,t,n,r,a,i){Ps(e,t);var s=0!==(64&t.flags);if(!r&&!s)return a&&_a(t,n,!1),Xs(e,t,i);r=t.stateNode,Is.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=yi(t,e.child,null,i),t.child=yi(t,null,o,i)):Ts(e,t,o,i),t.memoizedState=r.state,a&&_a(t,n,!0),t.child}function js(e){var t=e.stateNode;t.pendingContext?ha(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ha(0,t.context,!1),Ai(e,t.containerInfo)}var Fs,Hs,Gs,Bs,Vs={dehydrated:null,retryLane:0};function zs(e,t,n){var r,a=t.pendingProps,i=wi.current,s=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),aa(wi,1&i),null===e?(void 0!==a.fallback&&xi(t),e=a.children,i=a.fallback,s?(e=qs(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Vs,e):"number"===typeof a.unstable_expectedLoadTime?(e=qs(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Vs,t.lanes=33554432,e):((n=xl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,s?(a=Ys(e,t,a.children,a.fallback,n),s=t.child,i=e.child.memoizedState,s.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=Vs,a):(n=Ks(e,t,a.children,n),t.memoizedState=null,n))}function qs(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=xl(t,a,0,null),n=Ul(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function Ks(e,t,n,r){var a=e.child;return e=a.sibling,n=Pl(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Ys(e,t,n,r,a){var i=t.mode,s=e.child;e=s.sibling;var o={mode:"hidden",children:n};return 0===(2&i)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=o,null!==(s=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Pl(s,o),null!==e?r=Pl(e,r):(r=Ul(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ws(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Xa(e.return,t)}function Qs(e,t,n,r,a,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a,s.lastEffect=i)}function Js(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Ts(e,t,r.children,n),0!==(2&(r=wi.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ws(e,n);else if(19===e.tag)Ws(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(aa(wi,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Ri(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Qs(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Ri(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Qs(t,!0,n,null,i,t.lastEffect);break;case"together":Qs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mo|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function $s(e,t){if(!Pi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zs(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ua(t.type)&&da(),null;case 3:return Ii(),ra(oa),ra(sa),Bi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Fi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Hs(t),null;case 5:Ti(t);var i=Si(Ni.current);if(n=t.type,null!==e&&null!=t.stateNode)Gs(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Si(Ci.current),Fi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[qr]=t,r[Kr]=o,n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(e=0;e<yr.length;e++)Or(yr[e],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":ee(r,o),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Or("invalid",r);break;case"textarea":le(r,o),Or("invalid",r)}for(var c in Oe(n,o),e=null,o)o.hasOwnProperty(c)&&(i=o[c],"children"===c?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):l.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Or("scroll",r));switch(n){case"input":J(r),re(r,o,!0);break;case"textarea":J(r),ue(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Lr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===de.html&&(e=he(n)),e===de.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[qr]=t,e[Kr]=r,Fs(e,t,!1,!1),t.stateNode=e,c=Ne(n,r),n){case"dialog":Or("cancel",e),Or("close",e),i=r;break;case"iframe":case"object":case"embed":Or("load",e),i=r;break;case"video":case"audio":for(i=0;i<yr.length;i++)Or(yr[i],e);i=r;break;case"source":Or("error",e),i=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),i=r;break;case"details":Or("toggle",e),i=r;break;case"input":ee(e,r),i=Z(e,r),Or("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Or("invalid",e);break;case"textarea":le(e,r),i=oe(e,r),Or("invalid",e);break;default:i=r}Oe(n,i);var u=i;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];"style"===o?be(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===o?"string"===typeof d?("textarea"!==n||""!==d)&&ge(e,d):"number"===typeof d&&ge(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Or("scroll",e):null!=d&&E(e,o,d,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?se(e,!!r.multiple,o,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Lr)}Ur(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Bs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Si(Ni.current),Si(Ci.current),Fi(t)?(r=t.stateNode,n=t.memoizedProps,r[qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[qr]=t,t.stateNode=r)}return null;case 13:return ra(wi),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Fi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&wi.current)?0===To&&(To=3):(0!==To&&3!==To||(To=4),null===No||0===(134217727&Mo)&&0===(134217727&Lo)||ll(No,Ao))),(r||n)&&(t.flags|=4),null);case 4:return Ii(),Hs(t),null===e&&Sr(t.stateNode.containerInfo),null;case 10:return Ja(t),null;case 17:return ua(t.type)&&da(),null;case 19:if(ra(wi),null===(r=t.memoizedState))return null;if(o=0!==(64&t.flags),null===(c=r.rendering))if(o)$s(r,!1);else{if(0!==To||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ri(e))){for(t.flags|=64,$s(r,!1),null!==(o=c.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return aa(wi,1&wi.current|2),t.child}e=e.sibling}null!==r.tail&&Ua()>xo&&(t.flags|=64,o=!0,$s(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Ri(c))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$s(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Pi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ua()-r.renderingStartTime>xo&&1073741824!==n&&(t.flags|=64,o=!0,$s(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ua(),n.sibling=null,t=wi.current,aa(wi,o?1&t|2:1&t),n):null;case 23:case 24:return fl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function eo(e){switch(e.tag){case 1:ua(e.type)&&da();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ii(),ra(oa),ra(sa),Bi(),0!==(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Ti(e),null;case 13:return ra(wi),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ra(wi),null;case 4:return Ii(),null;case 10:return Ja(e),null;case 23:case 24:return fl(),null;default:return null}}function to(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function no(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}Fs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Hs=function(){},Gs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Si(Ci.current);var s,o=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),o=[];break;case"option":i=ie(e,i),r=ie(e,r),o=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),o=[];break;case"textarea":i=oe(e,i),r=oe(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Lr)}for(d in Oe(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var c=i[d];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(c=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(null!=u||null!=c))if("style"===d)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(d,n)),n=u;else"dangerouslySetInnerHTML"===d?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(o=o||[]).push(d,u)):"children"===d?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(d,""+u):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=u&&"onScroll"===d&&Or("scroll",e),o||c===u||(o=[])):"object"===typeof u&&null!==u&&u.$$typeof===D?u.toString():(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},Bs=function(e,t,n,r){n!==r&&(t.flags|=4)};var ro="function"===typeof WeakMap?WeakMap:Map;function ao(e,t,n){(n=ri(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Go||(Go=!0,Bo=r),no(0,t)},n}function io(e,t,n){(n=ri(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return no(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Vo?Vo=new Set([this]):Vo.add(this),no(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var so="function"===typeof WeakSet?WeakSet:Set;function oo(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Tl(e,n)}else t.current=null}function lo(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:za(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function co(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Al(n,e),Sl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:za(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&oi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}oi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ur(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Et(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function uo(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ee("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ho(e,t){if(ga&&"function"===typeof ga.onCommitFiberUnmount)try{ga.onCommitFiberUnmount(ma,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Al(t,n);else{r=t;try{a()}catch(i){Tl(r,i)}}n=n.next}while(n!==e)}break;case 1:if(oo(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Tl(t,i)}break;case 5:oo(t);break;case 4:mo(e,t)}}function fo(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function po(e){return 5===e.tag||3===e.tag||4===e.tag}function _o(e){e:{for(var t=e.return;null!==t;){if(po(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||po(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?function e(t,n,r){var a=t.tag,i=5===a||6===a;if(i)t=i?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode,n.insertBefore(t,r)):(n=r,n.appendChild(t)),r=r._reactRootContainer,null!==r&&void 0!==r||null!==n.onclick||(n.onclick=Lr));else if(4!==a&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var a=t.tag,i=5===a||6===a;if(i)t=i?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==a&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function mo(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(s(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var o=e,l=a,c=l;;)if(ho(o,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(o=n,l=a.stateNode,8===o.nodeType?o.parentNode.removeChild(l):o.removeChild(l)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(ho(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function go(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Kr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ne(e,a),t=Ne(e,r),a=0;a<i.length;a+=2){var o=i[a],l=i[a+1];"style"===o?be(n,l):"dangerouslySetInnerHTML"===o?me(n,l):"children"===o?ge(n,l):E(n,o,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?se(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(n,!!r.multiple,r.defaultValue,!0):se(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Et(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Uo=Ua(),uo(t.child,!0)),void vo(t);case 19:return void vo(t);case 17:return;case 23:case 24:return void uo(t,null!==t.memoizedState)}throw Error(s(163))}function vo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new so),t.forEach(function(t){var r=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===xa()?1:2:(0===Zo&&(Zo=Ro),0===(t=Ft(62914560&~Zo))&&(t=4194304))),n=rl(),null!==(e=sl(e,t))&&(Ht(e,t,n),ol(e,n))}.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yo(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Eo=Math.ceil,bo=b.ReactCurrentDispatcher,Co=b.ReactCurrentOwner,Oo=0,No=null,So=null,Ao=0,Io=0,ko=na(0),To=0,wo=null,Ro=0,Mo=0,Lo=0,Po=0,Do=null,Uo=0,xo=1/0;function jo(){xo=Ua()+500}var Fo,Ho=null,Go=!1,Bo=null,Vo=null,zo=!1,qo=null,Ko=90,Yo=[],Wo=[],Qo=null,Jo=0,Xo=null,$o=-1,Zo=0,el=0,tl=null,nl=!1;function rl(){return 0!==(48&Oo)?Ua():-1!==$o?$o:$o=Ua()}function al(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===xa()?1:2;if(0===Zo&&(Zo=Ro),0!==Va.transition){0!==el&&(el=null!==Do?Do.pendingLanes:0),e=Zo;var t=4186112&~el;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=xa(),0!==(4&Oo)&&98===e?e=jt(12,Zo):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Zo),e}function il(e,t,n){if(50<Jo)throw Jo=0,Xo=null,Error(s(185));if(null===(e=sl(e,t)))return null;Ht(e,t,n),e===No&&(Lo|=t,4===To&&ll(e,Ao));var r=xa();1===t?0!==(8&Oo)&&0===(48&Oo)?cl(e):(ol(e,n),0===Oo&&(jo(),Ga())):(0===(4&Oo)||98!==r&&99!==r||(null===Qo?Qo=new Set([e]):Qo.add(e)),ol(e,n)),Do=e}function sl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ol(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Gt(o),c=1<<l,u=i[l];if(-1===u){if(0===(c&r)||0!==(c&a)){u=t,Dt(c);var d=Pt;i[l]=10<=d?u+250:6<=d?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);o&=~c}if(r=Ut(e,e===No?Ao:0),t=Pt,0===r)null!==n&&(n!==wa&&Ea(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==wa&&Ea(n)}15===t?(n=cl.bind(null,e),null===Ma?(Ma=[n],La=ya(Sa,Ba)):Ma.push(n),n=wa):14===t?n=Ha(99,cl.bind(null,e)):n=Ha(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),function e(t){$o=-1;el=Zo=0;if(0!==(48&Oo))throw Error(s(327));var n=t.callbackNode;if(Nl()&&t.callbackNode!==n)return null;var r=Ut(t,t===No?Ao:0);if(0===r)return null;var a=r;var i=Oo;Oo|=16;var o=ml();No===t&&Ao===a||(jo(),pl(t,a));for(;;)try{yl();break}catch(l){_l(t,l)}Qa();bo.current=o;Oo=i;null!==So?a=0:(No=null,Ao=0,a=To);if(0!==(Ro&Lo))pl(t,0);else if(0!==a){if(2===a&&(Oo|=64,t.hydrate&&(t.hydrate=!1,Hr(t.containerInfo)),0!==(r=xt(t))&&(a=gl(t,r))),1===a)throw n=wo,pl(t,0),ll(t,r),ol(t,Ua()),n;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,a){case 0:case 1:throw Error(s(345));case 2:Cl(t);break;case 3:if(ll(t,r),(62914560&r)===r&&10<(a=Uo+500-Ua())){if(0!==Ut(t,0))break;if(((i=t.suspendedLanes)&r)!==r){rl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=jr(Cl.bind(null,t),a);break}Cl(t);break;case 4:if(ll(t,r),(4186112&r)===r)break;for(a=t.eventTimes,i=-1;0<r;){var c=31-Gt(r);o=1<<c,(c=a[c])>i&&(i=c),r&=~o}if(r=i,10<(r=(120>(r=Ua()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eo(r/1960))-r)){t.timeoutHandle=jr(Cl.bind(null,t),r);break}Cl(t);break;case 5:Cl(t);break;default:throw Error(s(329))}}ol(t,Ua());return t.callbackNode===n?e.bind(null,t):null}.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function ll(e,t){for(t&=~Po,t&=~Lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(48&Oo))throw Error(s(327));if(Nl(),e===No&&0!==(e.expiredLanes&Ao)){var t=Ao,n=gl(e,t);0!==(Ro&Lo)&&(n=gl(e,t=Ut(e,t)))}else n=gl(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Oo|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=xt(e))&&(n=gl(e,t))),1===n)throw n=wo,pl(e,0),ll(e,t),ol(e,Ua()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cl(e),ol(e,Ua()),null}function ul(e,t){var n=Oo;Oo|=1;try{return e(t)}finally{0===(Oo=n)&&(jo(),Ga())}}function dl(e,t){var n=Oo;Oo&=-2,Oo|=8;try{return e(t)}finally{0===(Oo=n)&&(jo(),Ga())}}function hl(e,t){aa(ko,Io),Io|=t,Ro|=t}function fl(){Io=ko.current,ra(ko)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Fr(n)),null!==So)for(n=So.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&da();break;case 3:Ii(),ra(oa),ra(sa),Bi();break;case 5:Ti(r);break;case 4:Ii();break;case 13:case 19:ra(wi);break;case 10:Ja(r);break;case 23:case 24:fl()}n=n.return}No=e,So=Pl(e.current,null),Ao=Io=Ro=t,To=0,wo=null,Po=Lo=Mo=0}function _l(e,t){for(;;){var n=So;try{if(Qa(),Vi.current=Os,Qi){for(var r=Ki.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Qi=!1}if(qi=0,Wi=Yi=Ki=null,Ji=!1,Co.current=null,null===n||null===n.return){To=1,wo=t,So=null;break}e:{var i=e,s=n.return,o=n,l=t;if(t=Ao,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l;if(0===(2&o.mode)){var u=o.alternate;u?(o.updateQueue=u.updateQueue,o.memoizedState=u.memoizedState,o.lanes=u.lanes):(o.updateQueue=null,o.memoizedState=null)}var d=0!==(1&wi.current),h=s;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var _=h.memoizedProps;f=void 0!==_.fallback&&(!0!==_.unstable_avoidThisFallback||!d)}}if(f){var m=h.updateQueue;if(null===m){var g=new Set;g.add(c),h.updateQueue=g}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var v=ri(-1,1);v.tag=2,ai(o,v)}o.lanes|=1;break e}l=void 0,o=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new ro,l=new Set,y.set(c,l)):void 0===(l=y.get(c))&&(l=new Set,y.set(c,l)),!l.has(o)){l.add(o);var E=wl.bind(null,i,c,o);c.then(E,E)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((Y(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==To&&(To=2),l=to(l,o),h=s;do{switch(h.tag){case 3:i=l,h.flags|=4096,t&=-t,h.lanes|=t,ii(h,ao(0,i,t));break e;case 1:i=l;var b=h.type,C=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===Vo||!Vo.has(C)))){h.flags|=4096,t&=-t,h.lanes|=t,ii(h,io(h,i,t));break e}}h=h.return}while(null!==h)}bl(n)}catch(O){t=O,So===n&&null!==n&&(So=n=n.return);continue}break}}function ml(){var e=bo.current;return bo.current=Os,null===e?Os:e}function gl(e,t){var n=Oo;Oo|=16;var r=ml();for(No===e&&Ao===t||pl(e,t);;)try{vl();break}catch(a){_l(e,a)}if(Qa(),Oo=n,bo.current=r,null!==So)throw Error(s(261));return No=null,Ao=0,To}function vl(){for(;null!==So;)El(So)}function yl(){for(;null!==So&&!ba();)El(So)}function El(e){var t=Fo(e.alternate,e,Io);e.memoizedProps=e.pendingProps,null===t?bl(e):So=t,Co.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=Zs(n,t,Io)))return void(So=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Io)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=eo(t)))return n.flags&=2047,void(So=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(So=t);So=t=e}while(null!==t);0===To&&(To=5)}function Cl(e){var t=xa();return Fa(99,function(e,t){do{Nl()}while(null!==qo);if(0!==(48&Oo))throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var o=e.eventTimes,l=e.expirationTimes;0<i;){var c=31-Gt(i),u=1<<c;a[c]=0,o[c]=-1,l[c]=-1,i&=~u}if(null!==Qo&&0===(24&r)&&Qo.has(e)&&Qo.delete(e),e===No&&(So=No=null,Ao=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Oo,Oo|=32,Co.current=null,Pr=Kt,ur(o=cr())){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,i=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(A){l=null;break e}var d=0,h=-1,f=-1,p=0,_=0,m=o,g=null;t:for(;;){for(var v;m!==l||0!==i&&3!==m.nodeType||(h=d+i),m!==c||0!==u&&3!==m.nodeType||(f=d+u),3===m.nodeType&&(d+=m.nodeValue.length),null!==(v=m.firstChild);)g=m,m=v;for(;;){if(m===o)break t;if(g===l&&++p===i&&(h=d),g===c&&++_===u&&(f=d),null!==(v=m.nextSibling))break;g=(m=g).parentNode}m=v}l=-1===h||-1===f?null:{start:h,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Dr={focusedElem:o,selectionRange:l},Kt=!1,tl=null,nl=!1,Ho=r;do{try{Ol()}catch(A){if(null===Ho)throw Error(s(330));Tl(Ho,A),Ho=Ho.nextEffect}}while(null!==Ho);tl=null,Ho=r;do{try{for(o=e;null!==Ho;){var y=Ho.flags;if(16&y&&ge(Ho.stateNode,""),128&y){var E=Ho.alternate;if(null!==E){var b=E.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&y){case 2:_o(Ho),Ho.flags&=-3;break;case 6:_o(Ho),Ho.flags&=-3,go(Ho.alternate,Ho);break;case 1024:Ho.flags&=-1025;break;case 1028:Ho.flags&=-1025,go(Ho.alternate,Ho);break;case 4:go(Ho.alternate,Ho);break;case 8:mo(o,l=Ho);var C=l.alternate;fo(l),null!==C&&fo(C)}Ho=Ho.nextEffect}}catch(A){if(null===Ho)throw Error(s(330));Tl(Ho,A),Ho=Ho.nextEffect}}while(null!==Ho);if(b=Dr,E=cr(),y=b.focusedElem,o=b.selectionRange,E!==y&&y&&y.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(y.ownerDocument.documentElement,y)){null!==o&&ur(y)&&(E=o.start,void 0===(b=o.end)&&(b=E),"selectionStart"in y?(y.selectionStart=E,y.selectionEnd=Math.min(b,y.value.length)):(b=(E=y.ownerDocument||document)&&E.defaultView||window).getSelection&&(b=b.getSelection(),l=y.textContent.length,C=Math.min(o.start,l),o=void 0===o.end?C:Math.min(o.end,l),!b.extend&&C>o&&(l=o,o=C,C=l),l=lr(y,C),i=lr(y,o),l&&i&&(1!==b.rangeCount||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==i.node||b.focusOffset!==i.offset)&&((E=E.createRange()).setStart(l.node,l.offset),b.removeAllRanges(),C>o?(b.addRange(E),b.extend(i.node,i.offset)):(E.setEnd(i.node,i.offset),b.addRange(E))))),E=[];for(b=y;b=b.parentNode;)1===b.nodeType&&E.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<E.length;y++)(b=E[y]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Kt=!!Pr,Dr=Pr=null,e.current=n,Ho=r;do{try{for(y=e;null!==Ho;){var O=Ho.flags;if(36&O&&co(y,Ho.alternate,Ho),128&O){E=void 0;var N=Ho.ref;if(null!==N){var S=Ho.stateNode;switch(Ho.tag){case 5:E=S;break;default:E=S}"function"===typeof N?N(E):N.current=E}}Ho=Ho.nextEffect}}catch(A){if(null===Ho)throw Error(s(330));Tl(Ho,A),Ho=Ho.nextEffect}}while(null!==Ho);Ho=null,Ra(),Oo=a}else e.current=n;if(zo)zo=!1,qo=e,Ko=t;else for(Ho=r;null!==Ho;)t=Ho.nextEffect,Ho.nextEffect=null,8&Ho.flags&&((O=Ho).sibling=null,O.stateNode=null),Ho=t;if(0===(r=e.pendingLanes)&&(Vo=null),1===r?e===Xo?Jo++:(Jo=0,Xo=e):Jo=0,n=n.stateNode,ga&&"function"===typeof ga.onCommitFiberRoot)try{ga.onCommitFiberRoot(ma,n,void 0,64===(64&n.current.flags))}catch(A){}if(ol(e,Ua()),Go)throw Go=!1,e=Bo,Bo=null,e;return 0!==(8&Oo)?null:(Ga(),null)}.bind(null,e,t)),null}function Ol(){for(;null!==Ho;){var e=Ho.alternate;nl||null===tl||(0!==(8&Ho.flags)?$e(Ho,tl)&&(nl=!0):13===Ho.tag&&yo(e,Ho)&&$e(Ho,tl)&&(nl=!0));var t=Ho.flags;0!==(256&t)&&lo(e,Ho),0===(512&t)||zo||(zo=!0,Ha(97,function(){return Nl(),null})),Ho=Ho.nextEffect}}function Nl(){if(90!==Ko){var e=97<Ko?97:Ko;return Ko=90,Fa(e,Il)}return!1}function Sl(e,t){Yo.push(t,e),zo||(zo=!0,Ha(97,function(){return Nl(),null}))}function Al(e,t){Wo.push(t,e),zo||(zo=!0,Ha(97,function(){return Nl(),null}))}function Il(){if(null===qo)return!1;var e=qo;if(qo=null,0!==(48&Oo))throw Error(s(331));var t=Oo;Oo|=32;var n=Wo;Wo=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],o=a.destroy;if(a.destroy=void 0,"function"===typeof o)try{o()}catch(c){if(null===i)throw Error(s(330));Tl(i,c)}}for(n=Yo,Yo=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var l=a.create;a.destroy=l()}catch(c){if(null===i)throw Error(s(330));Tl(i,c)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Oo=t,Ga(),!0}function kl(e,t,n){ai(e,t=ao(0,t=to(n,t),1)),t=rl(),null!==(e=sl(e,1))&&(Ht(e,1,t),ol(e,t))}function Tl(e,t){if(3===e.tag)kl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){kl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vo||!Vo.has(r))){var a=io(n,e=to(t,e),1);if(ai(n,a),a=rl(),null!==(n=sl(n,1)))Ht(n,1,a),ol(n,a);else if("function"===typeof r.componentDidCatch&&(null===Vo||!Vo.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function wl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rl(),e.pingedLanes|=e.suspendedLanes&n,No===e&&(Ao&n)===n&&(4===To||3===To&&(62914560&Ao)===Ao&&500>Ua()-Uo?pl(e,0):Po|=n),ol(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ml(e,t,n,r){return new Rl(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pl(e,t){var n=e.alternate;return null===n?((n=Ml(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)Ll(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Ul(n.children,a,i,t);case U:o=8,a|=16;break;case S:o=8,a|=1;break;case A:return(e=Ml(12,n,t,8|a)).elementType=A,e.type=A,e.lanes=i,e;case w:return(e=Ml(13,n,t,a)).type=w,e.elementType=w,e.lanes=i,e;case R:return(e=Ml(19,n,t,a)).elementType=R,e.lanes=i,e;case x:return xl(n,a,i,t);case j:return(e=Ml(24,n,t,a)).elementType=j,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:o=10;break e;case k:o=9;break e;case T:o=11;break e;case M:o=14;break e;case L:o=16,r=null;break e;case P:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ml(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Ul(e,t,n,r){return(e=Ml(7,e,r,t)).lanes=n,e}function xl(e,t,n,r){return(e=Ml(23,e,r,t)).elementType=x,e.lanes=n,e}function jl(e,t,n){return(e=Ml(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Ml(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Array(31).fill(0),this.expirationTimes=Array(31).fill(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Array(31).fill(0),this.mutableSourceEagerHydrationData=null}function Gl(e,t,n,r){var a=t.current,i=rl(),o=al(a);e:if(n){t:{if(We(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(ua(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var c=n.type;if(ua(c)){n=fa(n,c,l);break e}}n=l}else n=ia;return null===t.context?t.context=n:t.pendingContext=n,(t=ri(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ai(a,t),il(a,o,i),o}function Bl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Vl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function zl(e,t){Vl(e,t),(e=e.alternate)&&Vl(e,t)}function ql(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Hl(e,t,null!=n&&!0===n.hydrate),t=Ml(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ti(t),e[Yr]=n.current,Sr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function Kl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yl(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i._internalRoot;if("function"===typeof a){var o=a;a=function(){var e=Bl(s);o.call(e)}}Gl(t,s,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ql(e,0,t?{hydrate:!0}:void 0)}(n,r),s=i._internalRoot,"function"===typeof a){var l=a;a=function(){var e=Bl(s);l.call(e)}}dl(function(){Gl(t,s,e,a)})}return Bl(s)}function Wl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:O,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Fo=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||oa.current)ks=!0;else{if(0===(n&r)){switch(ks=!1,t.tag){case 3:js(t),Hi();break;case 5:ki(t);break;case 1:ua(t.type)&&pa(t);break;case 4:Ai(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;aa(qa,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?zs(e,t,n):(aa(wi,1&wi.current),null!==(t=Xs(e,t,n))?t.sibling:null);aa(wi,1&wi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return Js(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),aa(wi,wi.current),r)break;return null;case 23:case 24:return t.lanes=0,Ls(e,t,n)}return Xs(e,t,n)}ks=0!==(16384&e.flags)}else ks=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ca(t,sa.current),$a(t,n),a=Zi(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ua(r)){var i=!0;pa(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ti(t);var o=r.getDerivedStateFromProps;"function"===typeof o&&ci(t,r,o,e),a.updater=ui,t.stateNode=a,a._reactInternals=t,pi(t,r,e,n),t=xs(null,t,r,!0,i,n)}else t.tag=0,Ts(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Ll(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===M)return 14}return 2}(a),e=za(a,e),i){case 0:t=Ds(null,t,a,e,n);break e;case 1:t=Us(null,t,a,e,n);break e;case 11:t=ws(null,t,a,e,n);break e;case 14:t=Rs(null,t,a,za(a.type,e),r,n);break e}throw Error(s(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ds(e,t,r,a=t.elementType===r?a:za(r,a),n);case 1:return r=t.type,a=t.pendingProps,Us(e,t,r,a=t.elementType===r?a:za(r,a),n);case 3:if(js(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ni(e,t),si(t,r,null,n),(r=t.memoizedState.element)===a)Hi(),t=Xs(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(Li=Gr(t.stateNode.containerInfo.firstChild),Mi=t,i=Pi=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Gi.push(i);for(n=Ei(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ts(e,t,r,n),Hi();t=t.child}return t;case 5:return ki(t),null===e&&xi(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,xr(r,a)?o=null:null!==i&&xr(r,i)&&(t.flags|=16),Ps(e,t),Ts(e,t,o,n),t.child;case 6:return null===e&&xi(t),null;case 13:return zs(e,t,n);case 4:return Ai(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=yi(t,null,r,n):Ts(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ws(e,t,r,a=t.elementType===r?a:za(r,a),n);case 7:return Ts(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ts(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value;var l=t.type._context;if(aa(qa,l._currentValue),l._currentValue=i,null!==o)if(l=o.value,0===(i=ar(l,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(o.children===a.children&&!oa.current){t=Xs(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){o=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&i)){1===l.tag&&((u=ri(-1,n&-n)).tag=2,ai(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),Xa(l.return,n),c.lanes|=n;break}u=u.next}}else o=10===l.tag&&l.type===t.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}Ts(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,$a(t,n),r=r(a=Za(a,i.unstable_observedBits)),t.flags|=1,Ts(e,t,r,n),t.child;case 14:return i=za(a=t.type,t.pendingProps),Rs(e,t,a,i=za(a.type,i),r,n);case 15:return Ms(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:za(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ua(r)?(e=!0,pa(t)):e=!1,$a(t,n),hi(t,r,a),pi(t,r,a,n),xs(null,t,r,!0,e,n);case 19:return Js(e,t,n);case 23:case 24:return Ls(e,t,n)}throw Error(s(156,t.tag))},ql.prototype.render=function(e){Gl(e,this._internalRoot,null,null)},ql.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Gl(null,e,null,function(){t[Yr]=null})},Ze=function(e){13===e.tag&&(il(e,4,rl()),zl(e,4))},et=function(e){13===e.tag&&(il(e,67108864,rl()),zl(e,67108864))},tt=function(e){if(13===e.tag){var t=rl(),n=al(e);il(e,n,t),zl(e,n)}},nt=function(e,t){return t()},Ae=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=$r(r);if(!a)throw Error(s(90));X(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Me=ul,Le=function(e,t,n,r,a){var i=Oo;Oo|=4;try{return Fa(98,e.bind(null,t,n,r,a))}finally{0===(Oo=i)&&(jo(),Ga())}},Pe=function(){0===(49&Oo)&&(function(){if(null!==Qo){var e=Qo;Qo=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ol(e,Ua())})}Ga()}(),Nl())},De=function(e,t){var n=Oo;Oo|=2;try{return e(t)}finally{0===(Oo=n)&&(jo(),Ga())}};var Ql={Events:[Jr,Xr,$r,we,Re,Nl,{current:!1}]},Jl={findFiberByHostInstance:Qr,bundleType:0,version:"17.0.0",rendererPackageName:"react-dom"},Xl={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{ma=$l.inject(Xl),ga=$l}catch(_e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ql,t.createPortal=Wl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Oo;if(0!==(48&n))return e(t);Oo|=1;try{if(e)return Fa(99,e.bind(null,t))}finally{Oo=n,Ga()}},t.hydrate=function(e,t,n){if(!Kl(t))throw Error(s(200));return Yl(null,e,t,!0,n)},t.render=function(e,t,n){if(!Kl(t))throw Error(s(200));return Yl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Kl(e))throw Error(s(40));return!!e._reactRootContainer&&(dl(function(){Yl(null,null,e,!1,function(){e._reactRootContainer=null,e[Yr]=null})}),!0)},t.unstable_batchedUpdates=ul,t.unstable_createPortal=function(e,t){return Wl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Yl(e,t,n,!1,r)},t.version="17.0.0"},function(e,t,n){"use strict";e.exports=n(102)},function(e,t,n){"use strict";var r,a,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,d=null,h=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(h,0))},a=function(e,t){d=setTimeout(e,t)},i=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var _=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,E=0;t.unstable_shouldYield=function(){return t.unstable_now()>=E},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,C=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();E=e+y;try{g(!0,e)?C.postMessage(null):(m=!1,g=null)}catch(n){throw C.postMessage(null),n}}else m=!1},r=function(e){g=e,m||(m=!0,C.postMessage(null))},a=function(e,n){v=f(function(){e(t.unstable_now())},n)},i=function(){p(v),v=-1}}function O(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<A(a,t)))break e;e[r]=t,e[n]=a,n=r}}function N(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,s=e[i],o=i+1,l=e[o];if(void 0!==s&&0>A(s,n))void 0!==l&&0>A(l,s)?(e[r]=l,e[o]=n,r=o):(e[r]=s,e[i]=n,r=i);else{if(!(void 0!==l&&0>A(l,n)))break e;e[r]=l,e[o]=n,r=o}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],k=[],T=1,w=null,R=3,M=!1,L=!1,P=!1;function D(e){for(var t=N(k);null!==t;){if(null===t.callback)S(k);else{if(!(t.startTime<=e))break;S(k),t.sortIndex=t.expirationTime,O(I,t)}t=N(k)}}function U(e){if(P=!1,D(e),!L)if(null!==N(I))L=!0,r(x);else{var t=N(k);null!==t&&a(U,t.startTime-e)}}function x(e,n){L=!1,P&&(P=!1,i()),M=!0;var r=R;try{for(D(n),w=N(I);null!==w&&(!(w.expirationTime>n)||e&&!t.unstable_shouldYield());){var s=w.callback;if("function"===typeof s){w.callback=null,R=w.priorityLevel;var o=s(w.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?w.callback=o:w===N(I)&&S(I),D(n)}else S(I);w=N(I)}if(null!==w)var l=!0;else{var c=N(k);null!==c&&a(U,c.startTime-n),l=!1}return l}finally{w=null,R=r,M=!1}}var j=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||M||(L=!0,r(x))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return N(I)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=j,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,n,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:T++,callback:n,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>o?(e.sortIndex=s,O(k,e),null===N(I)&&e===N(k)&&(P?i():P=!0,a(U,s-o))):(e.sortIndex=l,O(I,e),L||M||(L=!0,r(x))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},,function(e,t,n){"use strict";(function(e){var r=n(105),a=n(106),i=n(107);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),a=(e=o(e,r)).write(t,n);a!==r&&(e=e.slice(0,a));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=o(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?o(e,0):h(e,t);if("Buffer"===t.type&&i(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=o(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,a);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,a){var i,s=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(a){var u=-1;for(i=n;i<o;i++)if(c(e,i)===c(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(n+l>o&&(n=o-l),i=n;i>=0;i--){for(var d=!0,h=0;h<l;h++)if(c(e,i+h)!==c(t,h)){d=!1;break}if(d)return i}return-1}function v(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function y(e,t,n,r){return B(H(t,e.length-n),e,n,r)}function E(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return E(e,t,n,r)}function C(e,t,n,r){return B(G(t),e,n,r)}function O(e,t,n,r){return B(function(e,t){for(var n,r,a,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function N(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,s,o,l,c=e[a],u=null,d=c>239?4:c>223?3:c>191?2:1;if(a+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128===(192&(i=e[a+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=e[a+1],s=e[a+2],128===(192&i)&&128===(192&s)&&(l=(15&c)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=e[a+1],s=e[a+2],o=e[a+3],128===(192&i)&&128===(192&s)&&128===(192&o)&&(l=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),a+=d}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?o(e,t):void 0!==n?"string"===typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,a),a+=s.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return N(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,a){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),o=Math.min(i,s),c=this.slice(r,a),u=e.slice(t,n),d=0;d<o;++d)if(c[d]!==u[d]){i=c[d],s=u[d];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function I(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=F(e[i]);return a}function w(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function R(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,a,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function P(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function D(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||D(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function x(e,t,n,r,i){return i||D(e,0,n,8),a.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var a=t-e;n=new l(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},l.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),a.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),a.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),a.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),a.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);M(this,e,t,n,a-1,-a)}var i=0,s=1,o=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);M(this,e,t,n,a-1,-a)}var i=n-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return x(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return x(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},l.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=l.isBuffer(e)?e:H(new l(e,r).toString()),o=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%o]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function B(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(73))},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],o=r[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,o)),u=0,d=o>0?s-4:s;for(n=0;n<d;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===o&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===o&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],s=0,o=n-a;s<o;s+=16383)i.push(u(e,s,s+16383>o?o:s+16383));1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],a=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var a,i,s=[],o=t;o<n;o+=3)a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var i,s,o=8*a-r-1,l=(1<<o)-1,c=l>>1,u=-7,d=n?a-1:0,h=n?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=o;u>0;i=256*i+e[t+d],d+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=c}return(f?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var s,o,l,c=8*i-a-1,u=(1<<c)-1,d=u>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(o=0,s=u):s+d>=1?(o=(t*l-1)*Math.pow(2,a),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,a),s=0));a>=8;e[n+f]=255&o,f+=p,o/=256,a-=8);for(s=s<<a|o,c+=a;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*_}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(109)},function(e,t,n){"use strict";var r=n(51),a=n(82),i=n(110),s=n(88);function o(e){var t=new i(e),n=a(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var l=o(n(74));l.Axios=i,l.create=function(e){return o(s(l.defaults,e))},l.Cancel=n(89),l.CancelToken=n(124),l.isCancel=n(87),l.all=function(e){return Promise.all(e)},l.spread=n(125),l.isAxiosError=n(126),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var r=n(51),a=n(83),i=n(111),s=n(112),o=n(88),l=n(122),c=l.validators;function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach(function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))});var a,i=[];if(this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)}),!r){var u=[s,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(i),a=Promise.resolve(e);u.length;)a=a.then(u.shift(),u.shift());return a}for(var d=e;n.length;){var h=n.shift(),f=n.shift();try{d=h(d)}catch(p){f(p);break}}try{a=s(d)}catch(p){return Promise.reject(p)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},u.prototype.getUri=function(e){return e=o(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(e){u.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}}),r.forEach(["post","put","patch"],function(e){u.prototype[e]=function(t,n,r){return this.request(o(r||{},{method:e,url:t,data:n}))}}),e.exports=u},function(e,t,n){"use strict";var r=n(51);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=a},function(e,t,n){"use strict";var r=n(51),a=n(113),i=n(87),s=n(74);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return o(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(o(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(51),a=n(74);e.exports=function(e,t,n){var i=this||a;return r.forEach(n,function(n){e=n.call(i,e,t)}),e}},function(e,t,n){"use strict";var r=n(51);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(86);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(51);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(a)&&o.push("path="+a),r.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(118),a=n(119);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(51),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&a.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},function(e,t,n){"use strict";var r=n(51);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(123),a={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var i={},s=r.version.split(".");function o(e,t){for(var n=t?t.split("."):s,r=e.split("."),a=0;a<3;a++){if(n[a]>r[a])return!0;if(n[a]<r[a])return!1}return!1}a.transitional=function(e,t,n){var a=t&&o(t);function s(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(s(r," has been removed in "+t));return a&&!i[r]&&(i[r]=!0,console.warn(s(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={isOlderVersion:o,assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],s=t[i];if(s){var o=e[i],l=void 0===o||s(o,i,e);if(!0!==l)throw new TypeError("option "+i+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:a}},function(e){e.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}},function(e,t,n){"use strict";var r=n(89);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a(function(t){e=t}),cancel:e}},e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,t,n){"use strict";var r=n(130);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){},,function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,_=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,E=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function C(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case d:case h:case s:case l:case o:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case g:case m:case c:return e;default:return t}}case i:return t}}}function O(e){return C(e)===h}t.AsyncMode=d,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=c,t.Element=a,t.ForwardRef=f,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=l,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return O(e)||C(e)===d},t.isConcurrentMode=O,t.isContextConsumer=function(e){return C(e)===u},t.isContextProvider=function(e){return C(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return C(e)===f},t.isFragment=function(e){return C(e)===s},t.isLazy=function(e){return C(e)===g},t.isMemo=function(e){return C(e)===m},t.isPortal=function(e){return C(e)===i},t.isProfiler=function(e){return C(e)===l},t.isStrictMode=function(e){return C(e)===o},t.isSuspense=function(e){return C(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===l||e===o||e===p||e===_||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===f||e.$$typeof===y||e.$$typeof===E||e.$$typeof===b||e.$$typeof===v)},t.typeOf=C},function(e,t,n){e.exports=n(135)},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),s=new k(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===a)throw i;return w()}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var o=S(s,n);if(o){if(o===_)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=u(e,t,n);if("normal"===l.type){if(r=n.done?p:h,l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,s),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",_={};function m(){}function g(){}function v(){}var y={};l(y,i,function(){return this});var E=Object.getPrototypeOf,b=E&&E(E(T([])));b&&b!==n&&r.call(b,i)&&(y=b);var C=v.prototype=m.prototype=Object.create(y);function O(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;this._invoke=function(a,i){function s(){return new t(function(n,s){!function n(a,i,s,o){var l=u(e[a],e,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,s,o)},function(e){n("throw",e,s,o)}):t.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,o)})}o(l.arg)}(a,i,n,s)})}return n=n?n.then(s,s):s()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var a=u(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,_;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:w}}function w(){return{value:t,done:!0}}return g.prototype=v,l(C,"constructor",v),l(v,"constructor",g),g.displayName=l(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,o,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},O(N.prototype),l(N.prototype,s,function(){return this}),e.AsyncIterator=N,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var s=new N(c(t,n,r,a),i);return e.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},O(C),l(C,o,"Generator"),l(C,i,function(){return this}),l(C,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return o.type="throw",o.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=r}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}]]);
//# sourceMappingURL=2.739a858e.chunk.js.map